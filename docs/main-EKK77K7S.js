var hT=Object.defineProperty,fT=Object.defineProperties;var pT=Object.getOwnPropertyDescriptors;var Ca=Object.getOwnPropertySymbols,mT=Object.getPrototypeOf,R_=Object.prototype.hasOwnProperty,O_=Object.prototype.propertyIsEnumerable,gT=Reflect.get;var P_=(e,t,n)=>t in e?hT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||={})R_.call(t,n)&&P_(e,n,t[n]);if(Ca)for(var n of Ca(t))O_.call(t,n)&&P_(e,n,t[n]);return e},O=(e,t)=>fT(e,pT(t));var Ia=(e,t)=>{var n={};for(var r in e)R_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ca)for(var r of Ca(e))t.indexOf(r)<0&&O_.call(e,r)&&(n[r]=e[r]);return n};var fr=(e,t,n)=>gT(mT(e),n,t);var f=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var k_=null;var ad=1,cd=Symbol("SIGNAL");function Z(e){let t=k_;return k_=e,t}var F_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _T(e){if(!(dd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ad)){if(!e.producerMustRecompute(e)&&!ld(e)){e.dirty=!1,e.lastCleanEpoch=ad;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ad}}function L_(e){return e&&(e.nextProducerIndex=0),Z(e)}function V_(e,t){if(Z(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(dd(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ud(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ld(e){Ea(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(_T(n),r!==n.version))return!0}return!1}function j_(e){if(Ea(e),dd(e))for(let t=0;t<e.producerNode.length;t++)ud(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ud(e,t){if(vT(e),Ea(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)ud(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ea(i),i.producerIndexOfThis[r]=t}}function dd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ea(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function vT(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function yT(){throw new Error}var wT=yT;function U_(e){wT=e}function F(e){return typeof e=="function"}function ui(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Da=ui(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ge=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){t=o instanceof Da?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{B_(o)}catch(s){t=t??[],s instanceof Da?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Da(t)}}add(t){var n;if(t&&t!==this)if(this.closed)B_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&pr(n,t)}remove(t){let{_finalizers:n}=this;n&&pr(n,t),t instanceof e&&t._removeParent(this)}};ge.EMPTY=(()=>{let e=new ge;return e.closed=!0,e})();var hd=ge.EMPTY;function Ta(e){return e instanceof ge||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function B_(e){F(e)?e():e.unsubscribe()}var Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var di={setTimeout(e,t,...n){let{delegate:r}=di;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=di;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Sa(e){di.setTimeout(()=>{let{onUnhandledError:t}=Pt;if(t)t(e);else throw e})}function No(){}var $_=fd("C",void 0,void 0);function H_(e){return fd("E",void 0,e)}function z_(e){return fd("N",e,void 0)}function fd(e,t,n){return{kind:e,value:t,error:n}}var mr=null;function hi(e){if(Pt.useDeprecatedSynchronousErrorHandling){let t=!mr;if(t&&(mr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=mr;if(mr=null,n)throw r}}else e()}function W_(e){Pt.useDeprecatedSynchronousErrorHandling&&mr&&(mr.errorThrown=!0,mr.error=e)}var gr=class extends ge{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ta(t)&&t.add(this)):this.destination=IT}static create(t,n,r){return new fi(t,n,r)}next(t){this.isStopped?md(z_(t),this):this._next(t)}error(t){this.isStopped?md(H_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?md($_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bT=Function.prototype.bind;function pd(e,t){return bT.call(e,t)}var gd=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ma(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ma(r)}else Ma(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ma(n)}}},fi=class extends gr{constructor(t,n,r){super();let i;if(F(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Pt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&pd(t.next,o),error:t.error&&pd(t.error,o),complete:t.complete&&pd(t.complete,o)}):i=t}this.destination=new gd(i)}};function Ma(e){Pt.useDeprecatedSynchronousErrorHandling?W_(e):Sa(e)}function CT(e){throw e}function md(e,t){let{onStoppedNotification:n}=Pt;n&&di.setTimeout(()=>n(e,t))}var IT={closed:!0,next:No,error:CT,complete:No};var pi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(e){return e}function _d(...e){return vd(e)}function vd(e){return e.length===0?dt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=DT(n)?n:new fi(n,r,i);return hi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=G_(r),new r((i,o)=>{let s=new fi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[pi](){return this}pipe(...n){return vd(n)(this)}toPromise(n){return n=G_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function G_(e){var t;return(t=e??Pt.Promise)!==null&&t!==void 0?t:Promise}function ET(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function DT(e){return e&&e instanceof gr||ET(e)&&Ta(e)}function yd(e){return F(e?.lift)}function W(e){return t=>{if(yd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,r,i){return new wd(e,t,n,r,i)}var wd=class extends gr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function mi(){return W((e,t)=>{let n=null;e._refCount++;let r=j(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var gi=class extends q{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ge;let n=this.getSubject();t.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ge.EMPTY)}return t}refCount(){return mi()(this)}};var q_=ui(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Aa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new q_}next(n){hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hd:(this.currentObservers=null,o.push(n),new ge(()=>{this.currentObservers=null,pr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new Aa(t,n),e})(),Aa=class extends Oe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:hd}};var ke=class extends Oe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var bd={now(){return(bd.delegate||Date).now()},delegate:void 0};var xa=class extends ge{constructor(t,n){super()}schedule(t,n=0){return this}};var Po={setInterval(e,t,...n){let{delegate:r}=Po;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Po;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Na=class extends xa{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return Po.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Po.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var _i=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};_i.now=bd.now;var Pa=class extends _i{constructor(t,n=_i.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Y_=new Pa(Na);var ht=new q(e=>e.complete());function K_(e){return e&&F(e.schedule)}function Q_(e){return e[e.length-1]}function Ra(e){return F(Q_(e))?e.pop():void 0}function Rn(e){return K_(Q_(e))?e.pop():void 0}function J_(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Z_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _r(e){return this instanceof _r?(this.v=e,this):new _r(e)}function X_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){r[p]&&(i[p]=function(_){return new Promise(function(I,S){o.push([p,_,I,S])>1||c(p,_)})},m&&(i[p]=m(i[p])))}function c(p,m){try{l(r[p](m))}catch(_){h(o[0][3],_)}}function l(p){p.value instanceof _r?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ev(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Z_=="function"?Z_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Oa=e=>e&&typeof e.length=="number"&&typeof e!="function";function ka(e){return F(e?.then)}function Fa(e){return F(e[pi])}function La(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function Va(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ja=TT();function Ua(e){return F(e?.[ja])}function Ba(e){return X_(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield _r(n.read());if(i)return yield _r(void 0);yield yield _r(r)}}finally{n.releaseLock()}})}function $a(e){return F(e?.getReader)}function ye(e){if(e instanceof q)return e;if(e!=null){if(Fa(e))return ST(e);if(Oa(e))return MT(e);if(ka(e))return AT(e);if(La(e))return tv(e);if(Ua(e))return xT(e);if($a(e))return NT(e)}throw Va(e)}function ST(e){return new q(t=>{let n=e[pi]();if(F(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MT(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function AT(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Sa)})}function xT(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function tv(e){return new q(t=>{PT(e,t).catch(n=>t.error(n))})}function NT(e){return tv(Ba(e))}function PT(e,t){var n,r,i,o;return J_(this,void 0,void 0,function*(){try{for(n=ev(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function rt(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ha(e,t=0){return W((n,r)=>{n.subscribe(j(r,i=>rt(r,e,()=>r.next(i),t),()=>rt(r,e,()=>r.complete(),t),i=>rt(r,e,()=>r.error(i),t)))})}function za(e,t=0){return W((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function nv(e,t){return ye(e).pipe(za(t),Ha(t))}function rv(e,t){return ye(e).pipe(za(t),Ha(t))}function iv(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function ov(e,t){return new q(n=>{let r;return rt(n,t,()=>{r=e[ja](),rt(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function Wa(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{rt(n,t,()=>{let r=e[Symbol.asyncIterator]();rt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function sv(e,t){return Wa(Ba(e),t)}function av(e,t){if(e!=null){if(Fa(e))return nv(e,t);if(Oa(e))return iv(e,t);if(ka(e))return rv(e,t);if(La(e))return Wa(e,t);if(Ua(e))return ov(e,t);if($a(e))return sv(e,t)}throw Va(e)}function fe(e,t){return t?av(e,t):ye(e)}function R(...e){let t=Rn(e);return fe(e,t)}function vi(e,t){let n=F(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function Cd(e){return!!e&&(e instanceof q||F(e.lift)&&F(e.subscribe))}var Rt=ui(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Id(e,t){let n=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;e.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(t.defaultValue):i(new Rt)}})})}function k(e,t){return W((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:RT}=Array;function OT(e,t){return RT(t)?e(...t):e(t)}function Ga(e){return k(t=>OT(e,t))}var{isArray:kT}=Array,{getPrototypeOf:FT,prototype:LT,keys:VT}=Object;function qa(e){if(e.length===1){let t=e[0];if(kT(t))return{args:t,keys:null};if(jT(t)){let n=VT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function jT(e){return e&&typeof e=="object"&&FT(e)===LT}function Ya(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function yi(...e){let t=Rn(e),n=Ra(e),{args:r,keys:i}=qa(e);if(r.length===0)return fe([],t);let o=new q(UT(r,t,i?s=>Ya(i,s):dt));return n?o.pipe(Ga(n)):o}function UT(e,t,n=dt){return r=>{cv(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)cv(t,()=>{let l=fe(e[c],t),u=!1;l.subscribe(j(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cv(e,t,n){e?rt(n,e,t):t()}function lv(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},p=_=>l<r?m(_):c.push(_),m=_=>{o&&t.next(_),l++;let I=!1;ye(n(_,u++)).subscribe(j(t,S=>{i?.(S),o?p(S):t.next(S)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<r;){let S=c.shift();s?rt(t,s,()=>m(S)):m(S)}h()}catch(S){t.error(S)}}))};return e.subscribe(j(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Te(e,t,n=1/0){return F(t)?Te((r,i)=>k((o,s)=>t(r,o,i,s))(ye(e(r,i))),n):(typeof t=="number"&&(n=t),W((r,i)=>lv(r,i,e,n)))}function Ed(e=1/0){return Te(dt,e)}function uv(){return Ed(1)}function On(...e){return uv()(fe(e,Rn(e)))}function Ka(e){return new q(t=>{ye(e()).subscribe(t)})}function Dd(...e){let t=Ra(e),{args:n,keys:r}=qa(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;ye(n[u]).subscribe(j(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ya(r,a):a),o.complete())}))}});return t?i.pipe(Ga(t)):i}function We(e,t){return W((n,r)=>{let i=0;n.subscribe(j(r,o=>e.call(t,o,i++)&&r.next(o)))})}function kn(e){return W((t,n)=>{let r=null,i=!1,o;r=t.subscribe(j(n,void 0,void 0,s=>{o=ye(e(s,kn(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function dv(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Fn(e,t){return F(t)?Te(e,t,1):Te(e,1)}function Td(e,t=Y_){return W((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+e,u=t.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(j(r,l=>{o=l,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Ln(e){return W((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Ot(e){return e<=0?()=>ht:W((t,n)=>{let r=0;t.subscribe(j(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Sd(e){return k(()=>e)}function Qa(e=BT){return W((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function BT(){return new Rt}function Vn(e){return W((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Wt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?We((i,o)=>e(i,o,r)):dt,Ot(1),n?Ln(t):Qa(()=>new Rt))}function wi(e){return e<=0?()=>ht:W((t,n)=>{let r=[];t.subscribe(j(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Md(e,t){let n=arguments.length>=2;return r=>r.pipe(e?We((i,o)=>e(i,o,r)):dt,wi(1),n?Ln(t):Qa(()=>new Rt))}function Ad(e,t){return W(dv(e,t,arguments.length>=2,!0))}function xd(e){return We((t,n)=>e<=n)}function Ro(...e){let t=Rn(e);return W((n,r)=>{(t?On(e,n,t):On(e,n)).subscribe(r)})}function ft(e,t){return W((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;ye(e(c,u)).subscribe(i=j(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Oo(e){return W((t,n)=>{ye(e).subscribe(j(n,()=>n.complete(),No)),!n.closed&&t.subscribe(n)})}function Me(e,t,n){let r=F(e)||t||n?{next:e,error:t,complete:n}:e;return r?W((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var Kv="https://g.co/ng/security#xss",A=class extends Error{constructor(t,n){super(Ec(t,n)),this.code=t}};function Ec(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Ko(e){return{toString:e}.toString()}var Za="__parameters__";function $T(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function Qv(e,t,n){return Ko(()=>{let r=$T(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Za)?c[Za]:Object.defineProperty(c,Za,{value:[]})[Za];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var ko=globalThis;function ie(e){for(let t in e)if(e[t]===ie)return t;throw Error("Could not find renamed property on target object.")}function HT(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function qe(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(qe).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function hv(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var zT=ie({__forward_ref__:ie});function _n(e){return e.__forward_ref__=_n,e.toString=function(){return qe(this())},e}function Ge(e){return Zv(e)?e():e}function Zv(e){return typeof e=="function"&&e.hasOwnProperty(zT)&&e.__forward_ref__===_n}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function we(e){return{providers:e.providers||[],imports:e.imports||[]}}function Dc(e){return fv(e,Xv)||fv(e,ey)}function Jv(e){return Dc(e)!==null}function fv(e,t){return e.hasOwnProperty(t)?e[t]:null}function WT(e){let t=e&&(e[Xv]||e[ey]);return t||null}function pv(e){return e&&(e.hasOwnProperty(mv)||e.hasOwnProperty(GT))?e[mv]:null}var Xv=ie({\u0275prov:ie}),mv=ie({\u0275inj:ie}),ey=ie({ngInjectableDef:ie}),GT=ie({ngInjectorDef:ie}),M=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ty(e){return e&&!!e.\u0275providers}var qT=ie({\u0275cmp:ie}),YT=ie({\u0275dir:ie}),KT=ie({\u0275pipe:ie}),QT=ie({\u0275mod:ie}),oc=ie({\u0275fac:ie}),Fo=ie({__NG_ELEMENT_ID__:ie}),gv=ie({__NG_ENV_ID__:ie});function Tc(e){return typeof e=="string"?e:e==null?"":String(e)}function ZT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Tc(e)}function JT(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new A(-200,e)}function Nh(e,t){throw new A(-201,!1)}var U=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(U||{}),Gd;function ny(){return Gd}function wt(e){let t=Gd;return Gd=e,t}function ry(e,t,n){let r=Dc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&U.Optional)return null;if(t!==void 0)return t;Nh(e,"Injector")}var XT={},Lo=XT,qd="__NG_DI_FLAG__",sc="ngTempTokenPath",eS="ngTokenPath",tS=/\n/gm,nS="\u0275",_v="__source",Ei;function rS(){return Ei}function jn(e){let t=Ei;return Ei=e,t}function iS(e,t=U.Default){if(Ei===void 0)throw new A(-203,!1);return Ei===null?ry(e,void 0,t):Ei.get(e,t&U.Optional?null:void 0,t)}function C(e,t=U.Default){return(ny()||iS)(Ge(e),t)}function b(e,t=U.Default){return C(e,Sc(t))}function Sc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Yd(e){let t=[];for(let n=0;n<e.length;n++){let r=Ge(e[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,o=U.Default;for(let s=0;s<r.length;s++){let a=r[s],c=oS(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(C(i,o))}else t.push(C(r))}return t}function iy(e,t){return e[qd]=t,e.prototype[qd]=t,e}function oS(e){return e[qd]}function sS(e,t,n,r){let i=e[sc];throw t[_v]&&i.unshift(t[_v]),e.message=aS(`
`+e.message,i,n,r),e[eS]=i,e[sc]=null,e}function aS(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==nS?e.slice(2):e;let i=qe(t);if(Array.isArray(t))i=t.map(qe).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):qe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(tS,`
  `)}`}var Ph=iy(Qv("Optional"),8);var oy=iy(Qv("SkipSelf"),4);function Ti(e,t){let n=e.hasOwnProperty(oc);return n?e[oc]:null}function Rh(e,t){e.forEach(n=>Array.isArray(n)?Rh(n,t):t(n))}function sy(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ac(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function cS(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function lS(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function uS(e,t,n){let r=Qo(e,t);return r>=0?e[r|1]=n:(r=~r,lS(e,r,t,n)),r}function Nd(e,t){let n=Qo(e,t);if(n>=0)return e[n|1]}function Qo(e,t){return dS(e,t,1)}function dS(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Si={},bt=[],Mi=new M(""),ay=new M("",-1),cy=new M(""),cc=class{get(t,n=Lo){if(n===Lo){let r=new Error(`NullInjectorError: No provider for ${qe(t)}!`);throw r.name="NullInjectorError",r}return n}},ly=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ly||{}),Yt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Yt||{}),Be=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Be||{});function hS(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Kd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];pS(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function fS(e){return e===3||e===4||e===6}function pS(e){return e.charCodeAt(0)===64}function Vo(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?vv(e,n,i,null,t[++r]):vv(e,n,i,null,null))}}return e}function vv(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var uy="ng-template";function mS(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&hS(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Oh(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Oh(e){return e.type===4&&e.value!==uy}function gS(e,t,n){let r=e.type===4&&!n?uy:e.value;return t===r}function _S(e,t,n){let r=4,i=e.attrs,o=i!==null?wS(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!kt(r)&&!kt(c))return!1;if(s&&kt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!gS(e,c,n)||c===""&&t.length===1){if(kt(r))return!1;s=!0}}else if(r&8){if(i===null||!mS(e,i,c,n)){if(kt(r))return!1;s=!0}}else{let l=t[++a],u=vS(c,i,Oh(e),n);if(u===-1){if(kt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(kt(r))return!1;s=!0}}}}return kt(r)||s}function kt(e){return(e&1)===0}function vS(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return bS(t,e)}function dy(e,t,n=!1){for(let r=0;r<t.length;r++)if(_S(e,t[r],n))return!0;return!1}function yS(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function wS(e){for(let t=0;t<e.length;t++){let n=e[t];if(fS(n))return t}return e.length}function bS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function CS(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function yv(e,t){return e?":not("+t.trim()+")":t}function IS(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kt(s)&&(t+=yv(o,i),i=""),r=s,o=o||!kt(r);n++}return i!==""&&(t+=yv(o,i)),t}function ES(e){return e.map(IS).join(",")}function DS(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!kt(i))break;i=o}r++}return{attrs:t,classes:n}}function be(e){return Ko(()=>{let t=gy(e),n=O(g({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ly.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Yt.Emulated,styles:e.styles||bt,_:null,schemas:e.schemas||null,tView:null,id:""});_y(n);let r=e.dependencies;return n.directiveDefs=bv(r,!1),n.pipeDefs=bv(r,!0),n.id=MS(n),n})}function TS(e){return wr(e)||hy(e)}function SS(e){return e!==null}function Ce(e){return Ko(()=>({type:e.type,bootstrap:e.bootstrap||bt,declarations:e.declarations||bt,imports:e.imports||bt,exports:e.exports||bt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function wv(e,t){if(e==null)return Si;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=Be.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==Be.None?[r,a]:r,t[o]=s):n[o]=r}return n}function ce(e){return Ko(()=>{let t=gy(e);return _y(t),t})}function wr(e){return e[qT]||null}function hy(e){return e[YT]||null}function fy(e){return e[KT]||null}function py(e){let t=wr(e)||hy(e)||fy(e);return t!==null?t.standalone:!1}function my(e,t){let n=e[QT]||null;if(!n&&t===!0)throw new Error(`Type ${qe(e)} does not have '\u0275mod' property.`);return n}function gy(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Si,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||bt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wv(e.inputs,t),outputs:wv(e.outputs),debugInfo:null}}function _y(e){e.features?.forEach(t=>t(e))}function bv(e,t){if(!e)return null;let n=t?fy:TS;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(SS)}function MS(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function ki(e){return{\u0275providers:e}}function kh(...e){return{\u0275providers:vy(!0,e),\u0275fromNgModule:!0}}function vy(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Rh(t,s=>{let a=s;Qd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yy(i,o),n}function yy(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Fh(i,o=>{t(o,r)})}}function Qd(e,t,n,r){if(e=Ge(e),!e)return!1;let i=null,o=pv(e),s=!o&&wr(e);if(!o&&!s){let c=e.ngModule;if(o=pv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Qd(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rh(o.imports,u=>{Qd(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&yy(l,t)}if(!a){let l=Ti(i)||(()=>new i);t({provide:i,useFactory:l,deps:bt},i),t({provide:cy,useValue:i,multi:!0},i),t({provide:Mi,useValue:()=>C(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Fh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Fh(e,t){for(let n of e)ty(n)&&(n=n.\u0275providers),Array.isArray(n)?Fh(n,t):t(n)}var AS=ie({provide:String,useValue:ie});function wy(e){return e!==null&&typeof e=="object"&&AS in e}function xS(e){return!!(e&&e.useExisting)}function NS(e){return!!(e&&e.useFactory)}function Ai(e){return typeof e=="function"}function PS(e){return!!e.useClass}var Mc=new M(""),ec={},RS={},Pd;function Lh(){return Pd===void 0&&(Pd=new cc),Pd}var it=class{},jo=class extends it{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jd(t,s=>this.processProvider(s)),this.records.set(ay,bi(void 0,this)),i.has("environment")&&this.records.set(it,bi(void 0,this));let o=this.records.get(Mc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cy,bt,U.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=jn(this),r=wt(void 0),i;try{return t()}finally{jn(n),wt(r)}}get(t,n=Lo,r=U.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(gv))return t[gv](this);r=Sc(r);let i,o=jn(this),s=wt(void 0);try{if(!(r&U.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=VS(t)&&Dc(t);l&&this.injectableDefInScope(l)?c=bi(Zd(t),ec):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&U.Self?Lh():this.parent;return n=r&U.Optional&&n===Lo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sc]=a[sc]||[]).unshift(qe(t)),o)throw a;return sS(a,t,"R3InjectorError",this.source)}else throw a}finally{wt(s),jn(o)}}resolveInjectorInitializers(){let t=Z(null),n=jn(this),r=wt(void 0),i;try{let o=this.get(Mi,bt,U.Self);for(let s of o)s()}finally{jn(n),wt(r),Z(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(qe(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(t){t=Ge(t);let n=Ai(t)?t:Ge(t&&t.provide),r=kS(t);if(!Ai(t)&&t.multi===!0){let i=this.records.get(n);i||(i=bi(void 0,ec,!0),i.factory=()=>Yd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Z(null);try{return n.value===ec&&(n.value=RS,n.value=n.factory()),typeof n.value=="object"&&n.value&&LS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Z(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ge(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Zd(e){let t=Dc(e),n=t!==null?t.factory:Ti(e);if(n!==null)return n;if(e instanceof M)throw new A(204,!1);if(e instanceof Function)return OS(e);throw new A(204,!1)}function OS(e){if(e.length>0)throw new A(204,!1);let n=WT(e);return n!==null?()=>n.factory(e):()=>new e}function kS(e){if(wy(e))return bi(void 0,e.useValue);{let t=by(e);return bi(t,ec)}}function by(e,t,n){let r;if(Ai(e)){let i=Ge(e);return Ti(i)||Zd(i)}else if(wy(e))r=()=>Ge(e.useValue);else if(NS(e))r=()=>e.useFactory(...Yd(e.deps||[]));else if(xS(e))r=()=>C(Ge(e.useExisting));else{let i=Ge(e&&(e.useClass||e.provide));if(FS(e))r=()=>new i(...Yd(e.deps));else return Ti(i)||Zd(i)}return r}function bi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function FS(e){return!!e.deps}function LS(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function VS(e){return typeof e=="function"||typeof e=="object"&&e instanceof M}function Jd(e,t){for(let n of e)Array.isArray(n)?Jd(n,t):n&&ty(n)?Jd(n.\u0275providers,t):t(n)}function vn(e,t){e instanceof jo&&e.assertNotDestroyed();let n,r=jn(e),i=wt(void 0);try{return t()}finally{jn(r),wt(i)}}function jS(){return ny()!==void 0||rS()!=null}function US(e){return typeof e=="function"}var yn=0,Y=1,P=2,$e=3,Ft=4,pt=5,Uo=6,Bo=7,Lt=8,xi=9,Vt=10,_e=11,$o=12,Cv=13,Fi=14,jt=15,Ac=16,Ci=17,Ni=18,xc=19,Cy=20,Un=21,Rd=22,br=23,Kt=25,Iy=1;var Cr=7,lc=8,uc=9,Ct=10,Vh=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Vh||{});function vr(e){return Array.isArray(e)&&typeof e[Iy]=="object"}function wn(e){return Array.isArray(e)&&e[Iy]===!0}function jh(e){return(e.flags&4)!==0}function Nc(e){return e.componentOffset>-1}function Pc(e){return(e.flags&1)===1}function Bn(e){return!!e.template}function BS(e){return(e[P]&512)!==0}var Xd=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ey(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function zn(){return Dy}function Dy(e){return e.type.prototype.ngOnChanges&&(e.setInput=HS),$S}zn.ngInherit=!0;function $S(){let e=Sy(this),t=e?.current;if(t){let n=e.previous;if(n===Si)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function HS(e,t,n,r,i){let o=this.declaredInputs[r],s=Sy(e)||zS(e,{previous:Si,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Xd(l&&l.currentValue,n,c===Si),Ey(e,t,i,n)}var Ty="__ngSimpleChanges__";function Sy(e){return e[Ty]||null}function zS(e,t){return e[Ty]=t}var Iv=null;var Gt=function(e,t,n){Iv?.(e,t,n)},WS="svg",GS="math",qS=!1;function YS(){return qS}function Qt(e){for(;Array.isArray(e);)e=e[yn];return e}function My(e,t){return Qt(t[e])}function It(e,t){return Qt(t[e.index])}function Ay(e,t){return e.data[t]}function Wn(e,t){let n=t[e];return vr(n)?n:n[yn]}function Uh(e){return(e[P]&128)===128}function KS(e){return wn(e[$e])}function Pi(e,t){return t==null?null:e[t]}function xy(e){e[Ci]=0}function QS(e){e[P]&1024||(e[P]|=1024,Uh(e)&&Ho(e))}function ZS(e,t){for(;e>0;)t=t[Fi],e--;return t}function Bh(e){return!!(e[P]&9216||e[br]?.dirty)}function eh(e){e[Vt].changeDetectionScheduler?.notify(1),Bh(e)?Ho(e):e[P]&64&&(YS()?(e[P]|=1024,Ho(e)):e[Vt].changeDetectionScheduler?.notify())}function Ho(e){e[Vt].changeDetectionScheduler?.notify();let t=zo(e);for(;t!==null&&!(t[P]&8192||(t[P]|=8192,!Uh(t)));)t=zo(t)}function Ny(e,t){if((e[P]&256)===256)throw new A(911,!1);e[Un]===null&&(e[Un]=[]),e[Un].push(t)}function JS(e,t){if(e[Un]===null)return;let n=e[Un].indexOf(t);n!==-1&&e[Un].splice(n,1)}function zo(e){let t=e[$e];return wn(t)?t[$e]:t}var G={lFrame:Vy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function XS(){return G.lFrame.elementDepthCount}function eM(){G.lFrame.elementDepthCount++}function tM(){G.lFrame.elementDepthCount--}function Py(){return G.bindingsEnabled}function Ry(){return G.skipHydrationRootTNode!==null}function nM(e){return G.skipHydrationRootTNode===e}function rM(){G.skipHydrationRootTNode=null}function re(){return G.lFrame.lView}function He(){return G.lFrame.tView}function ee(e){return G.lFrame.contextLView=e,e[Lt]}function te(e){return G.lFrame.contextLView=null,e}function ot(){let e=Oy();for(;e!==null&&e.type===64;)e=e.parent;return e}function Oy(){return G.lFrame.currentTNode}function iM(){let e=G.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Sr(e,t){let n=G.lFrame;n.currentTNode=e,n.isParent=t}function $h(){return G.lFrame.isParent}function Hh(){G.lFrame.isParent=!1}function oM(e){return G.lFrame.bindingIndex=e}function Rc(){return G.lFrame.bindingIndex++}function sM(e){let t=G.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function aM(){return G.lFrame.inI18n}function cM(e,t){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=e,th(t)}function lM(){return G.lFrame.currentDirectiveIndex}function th(e){G.lFrame.currentDirectiveIndex=e}function uM(e){let t=G.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function ky(e){G.lFrame.currentQueryIndex=e}function dM(e){let t=e[Y];return t.type===2?t.declTNode:t.type===1?e[pt]:null}function Fy(e,t,n){if(n&U.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&U.Host);)if(i=dM(o),i===null||(o=o[Fi],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=G.lFrame=Ly();return r.currentTNode=t,r.lView=e,!0}function zh(e){let t=Ly(),n=e[Y];G.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ly(){let e=G.lFrame,t=e===null?null:e.child;return t===null?Vy(e):t}function Vy(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function jy(){let e=G.lFrame;return G.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Uy=jy;function Wh(){let e=jy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hM(e){return(G.lFrame.contextLView=ZS(e,G.lFrame.contextLView))[Lt]}function Li(){return G.lFrame.selectedIndex}function Ir(e){G.lFrame.selectedIndex=e}function Gh(){let e=G.lFrame;return Ay(e.tView,e.selectedIndex)}function fM(){return G.lFrame.currentNamespace}var By=!0;function Oc(){return By}function kc(e){By=e}function pM(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Dy(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Fc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function tc(e,t,n){$y(e,t,3,n)}function nc(e,t,n,r){(e[P]&3)===n&&$y(e,t,n,r)}function Od(e,t){let n=e[P];(n&3)===t&&(n&=16383,n+=1,e[P]=n)}function $y(e,t,n,r){let i=r!==void 0?e[Ci]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Ci]+=65536),(a<o||o==-1)&&(mM(e,n,t,c),e[Ci]=(e[Ci]&4294901760)+c+2),c++}function Ev(e,t){Gt(4,e,t);let n=Z(null);try{t.call(e)}finally{Z(n),Gt(5,e,t)}}function mM(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[P]>>14<e[Ci]>>16&&(e[P]&3)===t&&(e[P]+=16384,Ev(a,o)):Ev(a,o)}var Di=-1,Er=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function gM(e){return e instanceof Er}function _M(e){return(e.flags&8)!==0}function vM(e){return(e.flags&16)!==0}function Hy(e){return e!==Di}function dc(e){return e&32767}function yM(e){return e>>16}function hc(e,t){let n=yM(e),r=t;for(;n>0;)r=r[Fi],n--;return r}var nh=!0;function Dv(e){let t=nh;return nh=e,t}var wM=256,zy=wM-1,Wy=5,bM=0,qt={};function CM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fo)&&(r=n[Fo]),r==null&&(r=n[Fo]=bM++);let i=r&zy,o=1<<i;t.data[e+(i>>Wy)]|=o}function fc(e,t){let n=Gy(e,t);if(n!==-1)return n;let r=t[Y];r.firstCreatePass&&(e.injectorIndex=t.length,kd(r.data,e),kd(t,null),kd(r.blueprint,null));let i=qh(e,t),o=e.injectorIndex;if(Hy(i)){let s=dc(i),a=hc(i,t),c=a[Y].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function kd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Gy(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function qh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Zy(i),r===null)return Di;if(n++,i=i[Fi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Di}function rh(e,t,n){CM(e,t,n)}function qy(e,t,n){if(n&U.Optional||e!==void 0)return e;Nh(t,"NodeInjector")}function Yy(e,t,n,r){if(n&U.Optional&&r===void 0&&(r=null),!(n&(U.Self|U.Host))){let i=e[xi],o=wt(void 0);try{return i?i.get(t,r,n&U.Optional):ry(t,r,n&U.Optional)}finally{wt(o)}}return qy(r,t,n)}function Ky(e,t,n,r=U.Default,i){if(e!==null){if(t[P]&2048&&!(r&U.Self)){let s=SM(e,t,n,r,qt);if(s!==qt)return s}let o=Qy(e,t,n,r,qt);if(o!==qt)return o}return Yy(t,n,r,i)}function Qy(e,t,n,r,i){let o=DM(n);if(typeof o=="function"){if(!Fy(t,e,r))return r&U.Host?qy(i,n,r):Yy(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&U.Optional))Nh(n);else return s}finally{Uy()}}else if(typeof o=="number"){let s=null,a=Gy(e,t),c=Di,l=r&U.Host?t[jt][pt]:null;for((a===-1||r&U.SkipSelf)&&(c=a===-1?qh(e,t):t[a+8],c===Di||!Sv(r,!1)?a=-1:(s=t[Y],a=dc(c),t=hc(c,t)));a!==-1;){let u=t[Y];if(Tv(o,a,u.data)){let d=IM(a,t,n,s,r,l);if(d!==qt)return d}c=t[a+8],c!==Di&&Sv(r,t[Y].data[a+8]===l)&&Tv(o,a,t)?(s=u,a=dc(c),t=hc(c,t)):a=-1}}return i}function IM(e,t,n,r,i,o){let s=t[Y],a=s.data[e+8],c=r==null?Nc(a)&&nh:r!=s&&(a.type&3)!==0,l=i&U.Host&&o===a,u=EM(a,s,n,c,l);return u!==null?Ri(t,s,u,a):qt}function EM(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let p=d;p<h;p++){let m=s[p];if(p<c&&n===m||p>=c&&m.type===n)return p}if(i){let p=s[c];if(p&&Bn(p)&&p.type===n)return c}return null}function Ri(e,t,n,r){let i=e[n],o=t.data;if(gM(i)){let s=i;s.resolving&&JT(ZT(o[n]));let a=Dv(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?wt(s.injectImpl):null,u=Fy(e,r,U.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&pM(n,o[n],t)}finally{l!==null&&wt(l),Dv(a),s.resolving=!1,Uy()}}return i}function DM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Fo)?e[Fo]:void 0;return typeof t=="number"?t>=0?t&zy:TM:t}function Tv(e,t,n){let r=1<<e;return!!(n[t+(e>>Wy)]&r)}function Sv(e,t){return!(e&U.Self)&&!(e&U.Host&&t)}var yr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ky(this._tNode,this._lView,t,Sc(r),n)}};function TM(){return new yr(ot(),re())}function Gn(e){return Ko(()=>{let t=e.prototype.constructor,n=t[oc]||ih(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[oc]||ih(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ih(e){return Zv(e)?()=>{let t=ih(Ge(e));return t&&t()}:Ti(e)}function SM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[P]&2048&&!(s[P]&512);){let a=Qy(o,s,n,r|U.Self,qt);if(a!==qt)return a;let c=o.parent;if(!c){let l=s[Cy];if(l){let u=l.get(n,qt,r);if(u!==qt)return u}c=Zy(s),s=s[Fi]}o=c}return i}function Zy(e){let t=e[Y],n=t.type;return n===2?t.declTNode:n===1?e[pt]:null}function Mv(e,t=null,n=null,r){let i=Jy(e,t,n,r);return i.resolveInjectorInitializers(),i}function Jy(e,t=null,n=null,r,i=new Set){let o=[n||bt,kh(e)];return r=r||(typeof e=="object"?void 0:qe(e)),new jo(o,t||Lh(),r||null,i)}var Vi=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Lo}static{this.NULL=new cc}static create(n,r){if(Array.isArray(n))return Mv({name:""},r,n,"");{let i=n.name??"";return Mv({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=E({token:e,providedIn:"any",factory:()=>C(ay)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var MM="ngOriginalError";function Fd(e){return e[MM]}var mn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Fd(t);for(;n&&Fd(n);)n=Fd(n);return n||null}},Xy=new M("",{providedIn:"root",factory:()=>b(mn).handleError.bind(void 0)}),ew=(()=>{class e{static{this.__NG_ELEMENT_ID__=AM}static{this.__NG_ENV_ID__=n=>n}}return e})(),oh=class extends ew{constructor(t){super(),this._lView=t}onDestroy(t){return Ny(this._lView,t),()=>JS(this._lView,t)}};function AM(){return new oh(re())}function xM(){return Lc(ot(),re())}function Lc(e,t){return new Ye(It(e,t))}var Ye=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=xM}}return e})();var sh=class extends Oe{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,jS()&&(this.destroyRef=b(ew,{optional:!0})??void 0)}emit(t){let n=Z(null);try{super.next(t)}finally{Z(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Ld(o),i&&(i=Ld(i)),s&&(s=Ld(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ge&&t.add(a),a}};function Ld(e){return t=>{setTimeout(e,void 0,t)}}var Ae=sh;function tw(e){return(e.flags&128)===128}var nw=new Map,NM=0;function PM(){return NM++}function RM(e){nw.set(e[xc],e)}function OM(e){nw.delete(e[xc])}var Av="__ngContext__";function $n(e,t){vr(t)?(e[Av]=t[xc],RM(t)):e[Av]=t}function rw(e){return ow(e[$o])}function iw(e){return ow(e[Ft])}function ow(e){for(;e!==null&&!wn(e);)e=e[Ft];return e}var ah;function sw(e){ah=e}function kM(){if(ah!==void 0)return ah;if(typeof document<"u")return document;throw new A(210,!1)}var Vc=new M("",{providedIn:"root",factory:()=>FM}),FM="ng",Yh=new M(""),Zt=new M("",{providedIn:"platform",factory:()=>"unknown"});var Zo=new M("",{providedIn:"root",factory:()=>kM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LM="h",VM="b";var jM=()=>null;function Kh(e,t,n=!1){return jM(e,t,n)}var aw=!1,UM=new M("",{providedIn:"root",factory:()=>aw});var pc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kv})`}};function jc(e){return e instanceof pc?e.changingThisBreaksApplicationSecurity:e}function cw(e,t){let n=BM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Kv})`)}return n===t}function BM(e){return e instanceof pc&&e.getTypeName()||null}var $M=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lw(e){return e=String(e),e.match($M)?e:"unsafe:"+e}var Qh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Qh||{});function Zh(e){let t=HM();return t?t.sanitize(Qh.URL,e)||"":cw(e,"URL")?jc(e):lw(Tc(e))}function HM(){let e=re();return e&&e[Vt].sanitizer}var zM=/^>|^->|<!--|-->|--!>|<!-$/g,WM=/(<|>)/g,GM="\u200B$1\u200B";function qM(e){return e.replace(zM,t=>t.replace(WM,GM))}function uw(e){return e instanceof Function?e():e}var gn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(gn||{}),YM;function Jh(e,t){return YM(e,t)}function Ii(e,t,n,r,i){if(r!=null){let o,s=!1;wn(r)?o=r:vr(r)&&(s=!0,r=r[yn]);let a=Qt(r);e===0&&n!==null?i==null?gw(t,n,a):mc(t,n,a,i||null,!0):e===1&&n!==null?mc(t,n,a,i||null,!0):e===2?uA(t,a,s):e===3&&t.destroyNode(a),o!=null&&hA(t,e,o,n,i)}}function KM(e,t){return e.createText(t)}function QM(e,t,n){e.setValue(t,n)}function ZM(e,t){return e.createComment(qM(t))}function dw(e,t,n){return e.createElement(t,n)}function JM(e,t){hw(e,t),t[yn]=null,t[pt]=null}function XM(e,t,n,r,i,o){r[yn]=i,r[pt]=t,Bc(e,r,n,1,i,o)}function hw(e,t){t[Vt].changeDetectionScheduler?.notify(1),Bc(e,t,t[_e],2,null,null)}function eA(e){let t=e[$o];if(!t)return Vd(e[Y],e);for(;t;){let n=null;if(vr(t))n=t[$o];else{let r=t[Ct];r&&(n=r)}if(!n){for(;t&&!t[Ft]&&t!==e;)vr(t)&&Vd(t[Y],t),t=t[$e];t===null&&(t=e),vr(t)&&Vd(t[Y],t),n=t&&t[Ft]}t=n}}function tA(e,t,n,r){let i=Ct+r,o=n.length;r>0&&(n[i-1][Ft]=t),r<o-Ct?(t[Ft]=n[i],sy(n,Ct+r,t)):(n.push(t),t[Ft]=null),t[$e]=n;let s=t[Ac];s!==null&&n!==s&&nA(s,t);let a=t[Ni];a!==null&&a.insertView(e),eh(t),t[P]|=128}function nA(e,t){let n=e[uc],i=t[$e][$e][jt];t[jt]!==i&&(e[P]|=Vh.HasTransplantedViews),n===null?e[uc]=[t]:n.push(t)}function fw(e,t){let n=e[uc],r=n.indexOf(t);n.splice(r,1)}function ch(e,t){if(e.length<=Ct)return;let n=Ct+t,r=e[n];if(r){let i=r[Ac];i!==null&&i!==e&&fw(i,r),t>0&&(e[n-1][Ft]=r[Ft]);let o=ac(e,Ct+t);JM(r[Y],r);let s=o[Ni];s!==null&&s.detachView(o[Y]),r[$e]=null,r[Ft]=null,r[P]&=-129}return r}function pw(e,t){if(!(t[P]&256)){let n=t[_e];n.destroyNode&&Bc(e,t,n,3,null,null),eA(t)}}function Vd(e,t){if(t[P]&256)return;let n=Z(null);try{t[P]&=-129,t[P]|=256,t[br]&&j_(t[br]),iA(e,t),rA(e,t),t[Y].type===1&&t[_e].destroy();let r=t[Ac];if(r!==null&&wn(t[$e])){r!==t[$e]&&fw(r,t);let i=t[Ni];i!==null&&i.detachView(e)}OM(t)}finally{Z(n)}}function rA(e,t){let n=e.cleanup,r=t[Bo];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Bo]=null);let i=t[Un];if(i!==null){t[Un]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function iA(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Er)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Gt(4,a,c);try{c.call(a)}finally{Gt(5,a,c)}}else{Gt(4,i,o);try{o.call(i)}finally{Gt(5,i,o)}}}}}function mw(e,t,n){return oA(e,t.parent,n)}function oA(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Yt.None||o===Yt.Emulated)return null}return It(r,n)}}function mc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function gw(e,t,n){e.appendChild(t,n)}function xv(e,t,n,r,i){r!==null?mc(e,t,n,r,i):gw(e,t,n)}function sA(e,t,n,r){e.removeChild(t,n,r)}function Xh(e,t){return e.parentNode(t)}function aA(e,t){return e.nextSibling(t)}function _w(e,t,n){return lA(e,t,n)}function cA(e,t,n){return e.type&40?It(e,n):null}var lA=cA,Nv;function Uc(e,t,n,r){let i=mw(e,r,t),o=t[_e],s=r.parent||t[pt],a=_w(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)xv(o,i,n[c],a,!1);else xv(o,i,n,a,!1);Nv!==void 0&&Nv(o,r,t,n,i)}function rc(e,t){if(t!==null){let n=t.type;if(n&3)return It(t,e);if(n&4)return lh(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return rc(e,r);{let i=e[t.index];return wn(i)?lh(-1,i):Qt(i)}}else{if(n&32)return Jh(t,e)()||Qt(e[t.index]);{let r=vw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(e[jt]);return rc(i,r)}else return rc(e,t.next)}}}return null}function vw(e,t){if(t!==null){let r=e[jt][pt],i=t.projection;return r.projection[i]}return null}function lh(e,t){let n=Ct+e+1;if(n<t.length){let r=t[n],i=r[Y].firstChild;if(i!==null)return rc(r,i)}return t[Cr]}function uA(e,t,n){let r=Xh(e,t);r&&sA(e,r,t,n)}function ef(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&$n(Qt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ef(e,t,n.child,r,i,o,!1),Ii(t,e,i,a,o);else if(c&32){let l=Jh(n,r),u;for(;u=l();)Ii(t,e,i,u,o);Ii(t,e,i,a,o)}else c&16?yw(e,t,r,n,i,o):Ii(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Bc(e,t,n,r,i,o){ef(n,r,e.firstChild,t,i,o,!1)}function dA(e,t,n){let r=t[_e],i=mw(e,n,t),o=n.parent||t[pt],s=_w(o,n,t);yw(r,0,t,n,i,s)}function yw(e,t,n,r,i,o){let s=n[jt],c=s[pt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ii(t,e,i,u,o)}else{let l=c,u=s[$e];tw(r)&&(l.flags|=128),ef(e,t,l,u,i,o,!0)}}function hA(e,t,n,r,i){let o=n[Cr],s=Qt(n);o!==s&&Ii(t,e,r,o,i);for(let a=Ct;a<n.length;a++){let c=n[a];Bc(c[Y],c,e,t,r,o)}}function fA(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:gn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gn.Important),e.setStyle(n,r,i,o))}}function pA(e,t,n){e.setAttribute(t,"style",n)}function ww(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function bw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Kd(e,t,r),i!==null&&ww(e,t,i),o!==null&&pA(e,t,o)}var ji={};function x(e=1){Cw(He(),re(),Li()+e,!1)}function Cw(e,t,n,r){if(!r)if((t[P]&3)===3){let o=e.preOrderCheckHooks;o!==null&&tc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&nc(t,o,0,n)}Ir(n)}function D(e,t=U.Default){let n=re();if(n===null)return C(e,t);let r=ot();return Ky(r,n,Ge(e),t)}function Iw(e,t,n,r,i,o){let s=Z(null);try{let a=null;i&Be.SignalBased&&(a=t[r][cd]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Be.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):Ey(t,a,r,o)}finally{Z(s)}}function mA(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ir(~i);else{let o=i,s=n[++r],a=n[++r];cM(s,o);let c=t[o];a(2,c)}}}finally{Ir(-1)}}function $c(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[yn]=i,d[P]=r|4|128|8|64,(l!==null||e&&e[P]&2048)&&(d[P]|=2048),xy(d),d[$e]=d[Fi]=e,d[Lt]=n,d[Vt]=s||e&&e[Vt],d[_e]=a||e&&e[_e],d[xi]=c||e&&e[xi]||null,d[pt]=o,d[xc]=PM(),d[Uo]=u,d[Cy]=l,d[jt]=t.type==2?e[jt]:d,d}function Ui(e,t,n,r,i){let o=e.data[t];if(o===null)o=gA(e,t,n,r,i),aM()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=iM();o.injectorIndex=s===null?-1:s.injectorIndex}return Sr(o,!0),o}function gA(e,t,n,r,i){let o=Oy(),s=$h(),a=s?o:o&&o.parent,c=e.data[t]=bA(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Ew(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Dw(e,t,n,r,i){let o=Li(),s=r&2;try{Ir(-1),s&&t.length>Kt&&Cw(e,t,Kt,!1),Gt(s?2:0,i),n(r,i)}finally{Ir(o),Gt(s?3:1,i)}}function tf(e,t,n){if(jh(t)){let r=Z(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Z(r)}}}function nf(e,t,n){Py()&&(SA(e,t,n,It(n,t)),(n.flags&64)===64&&Aw(e,t,n))}function rf(e,t,n=It){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Tw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=of(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function of(e,t,n,r,i,o,s,a,c,l,u){let d=Kt+r,h=d+i,p=_A(d,h),m=typeof l=="function"?l():l;return p[Y]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function _A(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ji);return n}function vA(e,t,n,r){let o=r.get(UM,aw)||n===Yt.ShadowDom,s=e.selectRootElement(t,o);return yA(s),s}function yA(e){wA(e)}var wA=()=>null;function bA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Ry()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Pv(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=Be.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?Rv(r,n,l,a,c):Rv(r,n,l,a)}return r}function Rv(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function CA(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,m=h?h.outputs:null;c=Pv(0,d.inputs,u,c,p),l=Pv(1,d.outputs,u,l,m);let _=c!==null&&s!==null&&!Oh(t)?VA(c,u,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function IA(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Sw(e,t,n,r,i,o,s,a){let c=It(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(af(e,n,u,r,i),Nc(t)&&EA(n,t.index)):t.type&3?(r=IA(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function EA(e,t){let n=Wn(t,e);n[P]&16||(n[P]|=64)}function sf(e,t,n,r){if(Py()){let i=r===null?null:{"":-1},o=AA(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Mw(e,t,n,s,i,a),i&&xA(n,r,i)}n.mergedAttrs=Vo(n.mergedAttrs,n.attrs)}function Mw(e,t,n,r,i,o){for(let l=0;l<r.length;l++)rh(fc(n,t),e,r[l].type);PA(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ew(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Vo(n.mergedAttrs,u.hostAttrs),RA(e,n,t,c,u),NA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}CA(e,n,o)}function DA(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;TA(s)!=a&&s.push(a),s.push(n,r,o)}}function TA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function SA(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Nc(n)&&OA(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||fc(n,t),$n(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=Ri(t,e,a,n);if($n(l,t),s!==null&&LA(t,a-i,l,c,n,s),Bn(c)){let u=Wn(n.index,t);u[Lt]=Ri(t,e,a,n)}}}function Aw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=lM();try{Ir(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];th(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&MA(c,l)}}finally{Ir(-1),th(s)}}function MA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function AA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(dy(t,s.selectors,!1))if(r||(r=[]),Bn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;uh(e,t,c)}else r.unshift(s),uh(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function uh(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function xA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new A(-301,!1);r.push(t[i],o)}}}function NA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Bn(t)&&(n[""]=e)}}function PA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function RA(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Ti(i.type,!0)),s=new Er(o,Bn(i),D);e.blueprint[r]=s,n[r]=s,DA(e,t,r,Ew(e,n,i.hostVars,ji),i)}function OA(e,t,n){let r=It(t,e),i=Tw(n),o=e[Vt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Hc(e,$c(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function kA(e,t,n,r,i,o){let s=It(e,t);FA(t[_e],s,o,e.value,n,r,i)}function FA(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Tc(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function LA(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Iw(r,n,c,l,u,d)}}function VA(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function xw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Nw(e,t){let n=e.contentQueries;if(n!==null){let r=Z(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];ky(o),a.contentQueries(2,t[s],s)}}}finally{Z(r)}}}function Hc(e,t){return e[$o]?e[Cv][Ft]=t:e[$o]=t,e[Cv]=t,t}function dh(e,t,n){ky(0);let r=Z(null);try{t(e,n)}finally{Z(r)}}function jA(e){return e[Bo]||(e[Bo]=[])}function UA(e){return e.cleanup||(e.cleanup=[])}function Pw(e,t){let n=e[xi],r=n?n.get(mn,null):null;r&&r.handleError(t)}function af(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];Iw(u,l,r,a,c,i)}}function BA(e,t,n){let r=My(t,e);QM(e[_e],r,n)}function $A(e,t){let n=Wn(t,e),r=n[Y];HA(r,n);let i=n[yn];i!==null&&n[Uo]===null&&(n[Uo]=Kh(i,n[xi])),cf(r,n,n[Lt])}function HA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function cf(e,t,n){zh(t);try{let r=e.viewQuery;r!==null&&dh(1,r,n);let i=e.template;i!==null&&Dw(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ni]?.finishViewCreation(e),e.staticContentQueries&&Nw(e,t),e.staticViewQueries&&dh(2,e.viewQuery,n);let o=e.components;o!==null&&zA(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[P]&=-5,Wh()}}function zA(e,t){for(let n=0;n<t.length;n++)$A(e,t[n])}function WA(e,t,n,r){let i=Z(null);try{let o=t.tView,a=e[P]&4096?4096:16,c=$c(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Ac]=l;let u=e[Ni];return u!==null&&(c[Ni]=u.createEmbeddedView(o)),cf(o,c,n),c}finally{Z(i)}}function Ov(e,t){return!t||t.firstChild===null||tw(e)}function GA(e,t,n,r=!0){let i=t[Y];if(tA(i,t,e,n),r){let s=lh(n,e),a=t[_e],c=Xh(a,e[Cr]);c!==null&&XM(i,e[pt],a,t,c,s)}let o=t[Uo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gc(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Qt(o)),wn(o)&&qA(o,r);let s=n.type;if(s&8)gc(e,t,n.child,r);else if(s&32){let a=Jh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=vw(t,n);if(Array.isArray(a))r.push(...a);else{let c=zo(t[jt]);gc(c[Y],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function qA(e,t){for(let n=Ct;n<e.length;n++){let r=e[n],i=r[Y].firstChild;i!==null&&gc(r[Y],r,i,t)}e[Cr]!==e[yn]&&t.push(e[Cr])}var Rw=[];function YA(e){return e[br]??KA(e)}function KA(e){let t=Rw.pop()??Object.create(ZA);return t.lView=e,t}function QA(e){e.lView[br]!==e&&(e.lView=null,Rw.push(e))}var ZA=O(g({},F_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ho(e.lView)},consumerOnSignalRead(){this.lView[br]=this}}),Ow=100;function kw(e,t=!0,n=0){let r=e[Vt],i=r.rendererFactory,o=!1;o||i.begin?.();try{JA(e,n)}catch(s){throw t&&Pw(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function JA(e,t){hh(e,t);let n=0;for(;Bh(e);){if(n===Ow)throw new A(103,!1);n++,hh(e,1)}}function XA(e,t,n,r){let i=t[P];if((i&256)===256)return;let o=!1;!o&&t[Vt].inlineEffectRunner?.flush(),zh(t);let s=null,a=null;!o&&ex(e)&&(a=YA(t),s=L_(a));try{xy(t),oM(e.bindingStartIndex),n!==null&&Dw(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=e.preOrderCheckHooks;d!==null&&tc(t,d,null)}else{let d=e.preOrderHooks;d!==null&&nc(t,d,0,null),Od(t,0)}if(tx(t),Fw(t,0),e.contentQueries!==null&&Nw(e,t),!o)if(c){let d=e.contentCheckHooks;d!==null&&tc(t,d)}else{let d=e.contentHooks;d!==null&&nc(t,d,1),Od(t,1)}mA(e,t);let l=e.components;l!==null&&Vw(t,l,0);let u=e.viewQuery;if(u!==null&&dh(2,u,r),!o)if(c){let d=e.viewCheckHooks;d!==null&&tc(t,d)}else{let d=e.viewHooks;d!==null&&nc(t,d,2),Od(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Rd]){for(let d of t[Rd])d();t[Rd]=null}o||(t[P]&=-73)}catch(c){throw Ho(t),c}finally{a!==null&&(V_(a,s),QA(a)),Wh()}}function ex(e){return e.type!==2}function Fw(e,t){for(let n=rw(e);n!==null;n=iw(n))for(let r=Ct;r<n.length;r++){let i=n[r];Lw(i,t)}}function tx(e){for(let t=rw(e);t!==null;t=iw(t)){if(!(t[P]&Vh.HasTransplantedViews))continue;let n=t[uc];for(let r=0;r<n.length;r++){let i=n[r],o=i[$e];QS(i)}}}function nx(e,t,n){let r=Wn(t,e);Lw(r,n)}function Lw(e,t){Uh(e)&&hh(e,t)}function hh(e,t){let r=e[Y],i=e[P],o=e[br],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ld(o)),o&&(o.dirty=!1),e[P]&=-9217,s)XA(r,e,r.template,e[Lt]);else if(i&8192){Fw(e,1);let a=r.components;a!==null&&Vw(e,a,1)}}function Vw(e,t,n){for(let r=0;r<t.length;r++)nx(e,t[r],n)}function lf(e){for(e[Vt].changeDetectionScheduler?.notify();e;){e[P]|=64;let t=zo(e);if(BS(e)&&!t)return e;e=t}return null}var Dr=class{get rootNodes(){let t=this._lView,n=t[Y];return gc(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Lt]}set context(t){this._lView[Lt]=t}get destroyed(){return(this._lView[P]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[$e];if(wn(t)){let n=t[lc],r=n?n.indexOf(this):-1;r>-1&&(ch(t,r),ac(n,r))}this._attachedToViewContainer=!1}pw(this._lView[Y],this._lView)}onDestroy(t){Ny(this._lView,t)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[P]&=-129}reattach(){eh(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,kw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,hw(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=t,eh(this._lView)}},zc=(()=>{class e{static{this.__NG_ELEMENT_ID__=ox}}return e})(),rx=zc,ix=class extends rx{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=WA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Dr(i)}};function ox(){return sx(ot(),re())}function sx(e,t){return e.type&4?new ix(t,e,Lc(e,t)):null}var m4=new RegExp(`^(\\d+)*(${VM}|${LM})*(.*)`);var ax=()=>null;function kv(e,t){return ax(e,t)}var fh=class{},ph=class{},_c=class{};function cx(e){let t=Error(`No component factory found for ${qe(e)}.`);return t[lx]=e,t}var lx="ngComponent";var mh=class{resolveComponentFactory(t){throw cx(t)}},Wc=(()=>{class e{static{this.NULL=new mh}}return e})(),Wo=class{},qn=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ux()}}return e})();function ux(){let e=re(),t=ot(),n=Wn(t.index,e);return(vr(n)?n:e)[_e]}var dx=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>null})}}return e})(),jd={};var Fv=new Set;function uf(e){Fv.has(e)||(Fv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Lv(...e){}function hx(){let e=typeof ko.requestAnimationFrame=="function",t=ko[e?"requestAnimationFrame":"setTimeout"],n=ko[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var ae=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=hx().nativeRequestAnimationFrame,mx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new A(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,fx,Lv,Lv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},fx={};function df(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function px(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ko,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gh(e),e.isCheckStableRunning=!0,df(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gh(e))}function mx(e){let t=()=>{px(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(gx(a))return n.invokeTask(i,o,s,a);try{return Vv(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),jv(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Vv(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),jv(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,gh(e),df(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function gh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Vv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function jv(e){e._nesting--,df(e)}function gx(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var jw=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})();function vc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=hv(i,a);else if(o==2){let c=a,l=t[++s];r=hv(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var yc=class extends Wc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=wr(t);return new Go(n,this.ngModule)}};function Uv(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function _x(e){let t=e.toLowerCase();return t==="svg"?WS:t==="math"?GS:null}var _h=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Sc(r);let i=this.injector.get(t,jd,r);return i!==jd||n===jd?i:this.parentInjector.get(t,n,r)}},Go=class extends _c{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Uv(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Uv(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=ES(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Z(null);try{i=i||this.ngModule;let s=i instanceof it?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new _h(t,s):t,c=a.get(Wo,null);if(c===null)throw new A(407,!1);let l=a.get(dx,null),u=a.get(jw,null),d=a.get(fh,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?vA(p,r,this.componentDef.encapsulation,a):dw(p,m,_x(m)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let S=null;_!==null&&(S=Kh(_,a,!0));let ue=of(0,null,null,1,0,null,null,null,null,null,null),H=$c(null,ue,null,I,null,null,h,p,a,null,S);zh(H);let Re,Pn;try{let ut=this.componentDef,li,sd=null;ut.findHostDirectiveDefs?(li=[],sd=new Map,ut.findHostDirectiveDefs(ut,li,sd),li.push(ut)):li=[ut];let uT=vx(H,_),dT=yx(uT,_,ut,li,H,h,p);Pn=Ay(ue,Kt),_&&Cx(p,ut,_,r),n!==void 0&&Ix(Pn,this.ngContentSelectors,n),Re=bx(dT,ut,li,sd,H,[Ex]),cf(ue,H,null)}finally{Wh()}return new vh(this.componentType,Re,Lc(Pn,H),H,Pn)}finally{Z(o)}}},vh=class extends ph{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Dr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;af(o[Y],o,i,t,n),this.previousInputValues.set(t,n);let s=Wn(this._tNode.index,o);lf(s)}}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function vx(e,t){let n=e[Y],r=Kt;return e[r]=t,Ui(n,r,2,"#host",null)}function yx(e,t,n,r,i,o,s){let a=i[Y];wx(r,e,t,s);let c=null;t!==null&&(c=Kh(t,i[xi]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=$c(i,Tw(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&uh(a,e,r.length-1),Hc(i,d),i[e.index]=d}function wx(e,t,n,r){for(let i of e)t.mergedAttrs=Vo(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(vc(t,t.mergedAttrs,!0),n!==null&&bw(r,n,t))}function bx(e,t,n,r,i,o){let s=ot(),a=i[Y],c=It(s,i);Mw(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Ri(i,a,d,s);$n(h,i)}Aw(a,i,s),c&&$n(c,i);let l=Ri(i,a,s.directiveStart+s.componentOffset,s);if(e[Lt]=i[Lt]=l,o!==null)for(let u of o)u(l,t);return tf(a,s,i),l}function Cx(e,t,n,r){if(r)Kd(e,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=DS(t.selectors[0]);i&&Kd(e,n,i),o&&o.length>0&&ww(e,n,o.join(" "))}}function Ix(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Ex(){let e=ot();Fc(re()[Y],e)}var Bi=(()=>{class e{static{this.__NG_ELEMENT_ID__=Dx}}return e})();function Dx(){let e=ot();return Sx(e,re())}var Tx=Bi,Uw=class extends Tx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Lc(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){let t=qh(this._hostTNode,this._hostLView);if(Hy(t)){let n=hc(t,this._hostLView),r=dc(t),i=n[Y].data[r+8];return new yr(i,n)}else return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Bv(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ov(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!US(t),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?t:new Go(wr(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?l:this.parentInjector).get(it,null);_&&(o=_)}let u=wr(c.componentType??{}),d=kv(this._lContainer,u?.id??null),h=d?.firstChild??null,p=c.create(l,i,h,o);return this.insertImpl(p.hostView,a,Ov(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(KS(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[$e],l=new Uw(c,c[pt],c[$e]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return GA(s,i,o,r),t.attachToViewContainerRef(),sy(Ud(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Bv(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);r&&(ac(Ud(this._lContainer),n),pw(r[Y],r))}detach(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);return r&&ac(Ud(this._lContainer),n)!=null?new Dr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Bv(e){return e[lc]}function Ud(e){return e[lc]||(e[lc]=[])}function Sx(e,t){let n,r=t[e.index];return wn(r)?n=r:(n=xw(r,t,null,e),t[e.index]=n,Hc(t,n)),Ax(n,t,e,r),new Uw(n,e,t)}function Mx(e,t){let n=e[_e],r=n.createComment(""),i=It(t,e),o=Xh(n,i);return mc(n,o,r,aA(n,i),!1),r}var Ax=Px,xx=()=>!1;function Nx(e,t,n){return xx(e,t,n)}function Px(e,t,n,r){if(e[Cr])return;let i;n.type&8?i=Qt(r):i=Mx(t,n),e[Cr]=i}function Bw(e){return typeof e=="function"&&e[cd]!==void 0}function $w(e){return Bw(e)&&typeof e.set=="function"}function Rx(e){return Object.getPrototypeOf(e.prototype).constructor}function Ut(e){let t=Rx(e.type),n=!0,r=[e];for(;t;){let i;if(Bn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new A(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Ja(e.inputs),s.inputTransforms=Ja(e.inputTransforms),s.declaredInputs=Ja(e.declaredInputs),s.outputs=Ja(e.outputs);let a=i.hostBindings;a&&Vx(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Fx(e,c),l&&Lx(e,l),Ox(e,i),HT(e.outputs,i.outputs),Bn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Ut&&(n=!1)}}t=Object.getPrototypeOf(t)}kx(r)}function Ox(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function kx(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Vo(i.hostAttrs,n=Vo(n,i.hostAttrs))}}function Ja(e){return e===Si?{}:e===bt?[]:e}function Fx(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function Lx(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function Vx(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var Hn=class{},qo=class{};var yh=class extends Hn{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yc(this);let i=my(t);this._bootstrapComponents=uw(i.bootstrap),this._r3Injector=Jy(t,n,[{provide:Hn,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver},...r],qe(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},wh=class extends qo{constructor(t){super(),this.moduleType=t}create(t){return new yh(this.moduleType,t,[])}};var wc=class extends Hn{constructor(t){super(),this.componentFactoryResolver=new yc(this),this.instance=null;let n=new jo([...t.providers,{provide:Hn,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],t.parent||Lh(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function hf(e,t,n=null){return new wc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Mr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Hw(e){return Ux(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function jx(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Ux(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Jo(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Bx(e){return(e.flags&32)===32}function $x(e,t,n,r,i,o,s,a,c){let l=t.consts,u=Ui(t,e,4,s||null,Pi(l,a));sf(t,n,u,Pi(l,c)),Fc(t,u);let d=u.tView=of(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function Ie(e,t,n,r,i,o,s,a){let c=re(),l=He(),u=e+Kt,d=l.firstCreatePass?$x(u,l,c,t,n,r,i,o,s):l.data[u];Sr(d,!1);let h=Hx(l,c,d,e);Oc()&&Uc(l,c,h,d),$n(h,c);let p=xw(h,c,h,d);return c[u]=p,Hc(c,p),Nx(p,d,c),Pc(d)&&nf(l,c,d),s!=null&&rf(c,d,a),Ie}var Hx=zx;function zx(e,t,n,r){return kc(!0),t[_e].createComment("")}function Ar(e,t,n,r){let i=re(),o=Rc();if(Jo(i,o,t)){let s=He(),a=Gh();kA(a,i,e,t,n,r)}return Ar}function Wx(e,t,n,r){return Jo(e,Rc(),n)?t+Tc(n)+r:ji}function Xa(e,t){return e<<17|t<<2}function Tr(e){return e>>17&32767}function Gx(e){return(e&2)==2}function qx(e,t){return e&131071|t<<17}function bh(e){return e|2}function Oi(e){return(e&131068)>>2}function Bd(e,t){return e&-131069|t<<2}function Yx(e){return(e&1)===1}function Ch(e){return e|1}function Kx(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Tr(s),c=Oi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Qo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Tr(e[a+1]);e[r+1]=Xa(h,a),h!==0&&(e[h+1]=Bd(e[h+1],r)),e[a+1]=qx(e[a+1],r)}else e[r+1]=Xa(a,0),a!==0&&(e[a+1]=Bd(e[a+1],r)),a=r;else e[r+1]=Xa(c,0),a===0?a=r:e[c+1]=Bd(e[c+1],r),c=r;l&&(e[r+1]=bh(e[r+1])),$v(e,u,r,!0),$v(e,u,r,!1),Qx(t,u,e,r,o),s=Xa(a,c),o?t.classBindings=s:t.styleBindings=s}function Qx(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Qo(o,t)>=0&&(n[r+1]=Ch(n[r+1]))}function $v(e,t,n,r){let i=e[n+1],o=t===null,s=r?Tr(i):Oi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];Zx(c,t)&&(a=!0,e[s+1]=r?Ch(l):bh(l)),s=r?Tr(l):Oi(l)}a&&(e[n+1]=r?bh(i):Ch(i))}function Zx(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Qo(e,t)>=0:!1}function oe(e,t,n){let r=re(),i=Rc();if(Jo(r,i,t)){let o=He(),s=Gh();Sw(o,s,r,e,t,r[_e],n,!1)}return oe}function Hv(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";af(e,n,o[s],s,r)}function $i(e,t,n){return zw(e,t,n,!1),$i}function Jt(e,t){return zw(e,t,null,!0),Jt}function zw(e,t,n,r){let i=re(),o=He(),s=sM(2);if(o.firstUpdatePass&&Xx(o,e,s,r),t!==ji&&Jo(i,s,t)){let a=o.data[Li()];iN(o,a,i,i[_e],e,i[s+1]=oN(t,n),r,s)}}function Jx(e,t){return t>=e.expandoStartIndex}function Xx(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Li()],s=Jx(e,n);sN(o,r)&&t===null&&!s&&(t=!1),t=eN(i,o,t,r),Kx(i,o,t,n,s,r)}}function eN(e,t,n,r){let i=uM(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=$d(null,e,t,n,r),n=Yo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=$d(i,e,t,n,r),o===null){let c=tN(e,t,r);c!==void 0&&Array.isArray(c)&&(c=$d(null,e,t,c[1],r),c=Yo(c,t.attrs,r),nN(e,t,r,c))}else o=rN(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function tN(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Oi(r)!==0)return e[Tr(r)]}function nN(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Tr(i)]=r}function rN(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Yo(r,s,n)}return Yo(r,t.attrs,n)}function $d(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Yo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Yo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),uS(e,s,n?!0:t[++o]))}return e===void 0?null:e}function iN(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=Yx(l)?zv(c,t,n,i,Oi(l),s):void 0;if(!bc(u)){bc(o)||Gx(l)&&(o=zv(c,null,n,i,a,s));let d=My(Li(),n);fA(r,s,d,i,o)}}function zv(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===ji&&(h=d?bt:void 0);let p=d?Nd(h,r):u===r?h:void 0;if(l&&!bc(p)&&(p=Nd(c,r)),bc(p)&&(a=p,s))return a;let m=e[i+1];i=s?Tr(m):Oi(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Nd(c,r))}return a}function bc(e){return e!==void 0}function oN(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=qe(jc(e)))),e}function sN(e,t){return(e.flags&(t?8:16))!==0}function aN(e,t,n,r,i,o){let s=t.consts,a=Pi(s,i),c=Ui(t,e,2,r,a);return sf(t,n,c,Pi(s,o)),c.attrs!==null&&vc(c,c.attrs,!1),c.mergedAttrs!==null&&vc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function y(e,t,n,r){let i=re(),o=He(),s=Kt+e,a=i[_e],c=o.firstCreatePass?aN(s,o,i,t,n,r):o.data[s],l=cN(o,i,c,a,t,e);i[s]=l;let u=Pc(c);return Sr(c,!0),bw(a,l,c),!Bx(c)&&Oc()&&Uc(o,i,l,c),XS()===0&&$n(l,i),eM(),u&&(nf(o,i,c),tf(o,c,i)),r!==null&&rf(i,c),y}function w(){let e=ot();$h()?Hh():(e=e.parent,Sr(e,!1));let t=e;nM(t)&&rM(),tM();let n=He();return n.firstCreatePass&&(Fc(n,e),jh(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&_M(t)&&Hv(n,t,re(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&vM(t)&&Hv(n,t,re(),t.stylesWithoutHost,!1),w}function Ke(e,t,n,r){return y(e,t,n,r),w(),Ke}var cN=(e,t,n,r,i,o)=>(kc(!0),dw(r,i,fM()));function lN(e,t,n,r,i){let o=t.consts,s=Pi(o,r),a=Ui(t,e,8,"ng-container",s);s!==null&&vc(a,s,!0);let c=Pi(o,i);return sf(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function ff(e,t,n){let r=re(),i=He(),o=e+Kt,s=i.firstCreatePass?lN(o,i,r,t,n):i.data[o];Sr(s,!0);let a=uN(i,r,s,e);return r[o]=a,Oc()&&Uc(i,r,a,s),$n(a,r),Pc(s)&&(nf(i,r,s),tf(i,s,r)),n!=null&&rf(r,s),ff}function pf(){let e=ot(),t=He();return $h()?Hh():(e=e.parent,Sr(e,!1)),t.firstCreatePass&&(Fc(t,e),jh(e)&&t.queries.elementEnd(e)),pf}var uN=(e,t,n,r)=>(kc(!0),ZM(t[_e],""));function Et(){return re()}var Cc="en-US";var dN=Cc;function hN(e){typeof e=="string"&&(dN=e.toLowerCase().replace(/_/g,"-"))}function K(e,t,n,r){let i=re(),o=He(),s=ot();return Ww(o,i,i[_e],s,e,t,r),K}function fN(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Bo],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Ww(e,t,n,r,i,o,s){let a=Pc(r),l=e.firstCreatePass&&UA(e),u=t[Lt],d=jA(t),h=!0;if(r.type&3||s){let _=It(r,t),I=s?s(_):_,S=d.length,ue=s?Re=>s(Qt(Re[r.index])):r.index,H=null;if(!s&&a&&(H=fN(e,t,i,r.index)),H!==null){let Re=H.__ngLastListenerFn__||H;Re.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,h=!1}else{o=Gv(r,t,u,o,!1);let Re=n.listen(I,i,o);d.push(o,Re),l&&l.push(i,ue,S,S+1)}}else o=Gv(r,t,u,o,!1);let p=r.outputs,m;if(h&&p!==null&&(m=p[i])){let _=m.length;if(_)for(let I=0;I<_;I+=2){let S=m[I],ue=m[I+1],Pn=t[S][ue].subscribe(o),ut=d.length;d.push(o,Pn),l&&l.push(i,r.index,ut,-(ut+1))}}}function Wv(e,t,n,r){let i=Z(null);try{return Gt(6,t,n),n(r)!==!1}catch(o){return Pw(e,o),!1}finally{Gt(7,t,n),Z(i)}}function Gv(e,t,n,r,i){return function o(s){if(s===Function)return r;let a=e.componentOffset>-1?Wn(e.index,t):t;lf(a);let c=Wv(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=Wv(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function se(e=1){return hM(e)}function pN(e,t){let n=null,r=yS(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?dy(e,o,!0):CS(r,o))return i}return n}function mf(e){let t=re()[jt][pt];if(!t.projection){let n=e?e.length:1,r=t.projection=cS(n,null),i=r.slice(),o=t.child;for(;o!==null;){let s=e?pN(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function gf(e,t=0,n){let r=re(),i=He(),o=Ui(i,Kt+e,16,null,n||null);o.projection===null&&(o.projection=t),Hh(),(!r[Uo]||Ry())&&(o.flags&32)!==32&&dA(i,r,o)}function T(e,t=""){let n=re(),r=He(),i=e+Kt,o=r.firstCreatePass?Ui(r,i,1,t,null):r.data[i],s=mN(r,n,o,t,e);n[i]=s,Oc()&&Uc(r,n,s,o),Sr(o,!1)}var mN=(e,t,n,r,i)=>(kc(!0),KM(t[_e],r));function mt(e){return Xt("",e,""),mt}function Xt(e,t,n){let r=re(),i=Wx(r,e,t,n);return i!==ji&&BA(r,Li(),i),Xt}function Qe(e,t,n){$w(t)&&(t=t());let r=re(),i=Rc();if(Jo(r,i,t)){let o=He(),s=Gh();Sw(o,s,r,e,t,r[_e],n,!1)}return Qe}function st(e,t){let n=$w(e);return n&&e.set(t),n}function Ze(e,t){let n=re(),r=He(),i=ot();return Ww(r,n,n[_e],i,e,t),Ze}function gN(e,t,n){let r=He();if(r.firstCreatePass){let i=Bn(e);Ih(n,r.data,r.blueprint,i,!0),Ih(t,r.data,r.blueprint,i,!1)}}function Ih(e,t,n,r,i){if(e=Ge(e),Array.isArray(e))for(let o=0;o<e.length;o++)Ih(e[o],t,n,r,i);else{let o=He(),s=re(),a=ot(),c=Ai(e)?e:Ge(e.provide),l=by(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ai(e)||!e.multi){let p=new Er(l,i,D),m=zd(c,t,i?u:u+h,d);m===-1?(rh(fc(a,s),o,c),Hd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{let p=zd(c,t,u+h,d),m=zd(c,t,u,u+h),_=p>=0&&n[p],I=m>=0&&n[m];if(i&&!I||!i&&!_){rh(fc(a,s),o,c);let S=yN(i?vN:_N,n.length,i,r,l);!i&&I&&(n[m].providerFactory=S),Hd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),s.push(S)}else{let S=Gw(n[i?m:p],l,!i&&r);Hd(o,e,p>-1?p:m,S)}!i&&r&&I&&n[m].componentProviders++}}}function Hd(e,t,n,r){let i=Ai(t),o=PS(t);if(i||o){let c=(o?Ge(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Gw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function zd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function _N(e,t,n,r){return Eh(this.multi,[])}function vN(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ri(n,n[Y],this.providerFactory.index,r);o=a.slice(0,s),Eh(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Eh(i,o);return o}function Eh(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function yN(e,t,n,r,i){let o=new Er(e,n,D);return o.multi=[],o.index=t,o.componentProviders=0,Gw(o,i,r&&!n),o}function bn(e,t=[]){return n=>{n.providersResolver=(r,i)=>gN(r,i?i(e):e,t)}}var wN=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=vy(!1,n.type),i=r.length>0?hf([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(C(it))})}}return e})();function Ee(e){uf("NgStandalone"),e.getStandaloneInjector=t=>t.get(wN).getOrCreateStandaloneInjector(e)}var Gc=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var qw=new M("");function xr(e){return!!e&&typeof e.then=="function"}function Yw(e){return!!e&&typeof e.subscribe=="function"}var Kw=new M(""),Qw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=b(Kw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(xr(o))n.push(o);else if(Yw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),qc=new M("");function bN(){U_(()=>{throw new A(600,!1)})}function CN(e){return e.isBoundToModule}function IN(e,t,n){try{let r=n();return xr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Hi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(Xy),this.afterRenderEffectManager=b(jw),this.externalTestViews=new Set,this.beforeRender=new Oe,this.afterTick=new Oe,this.componentTypes=[],this.components=[],this.isStable=b(Mr).hasPendingTasks.pipe(k(n=>!n)),this._injector=b(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof _c;if(!this._injector.get(Qw).done){let h=!i&&py(n),p=!1;throw new A(405,p)}let s;i?s=n:s=this._injector.get(Wc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=CN(s)?void 0:this._injector.get(Hn),c=r||s.selector,l=s.create(Vi.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(qw,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Wd(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new A(101,!1);let r=Z(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Z(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===Ow)throw new A(103,!1);if(n){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)EN(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dh(o))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Wd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(qc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Wd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new A(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Wd(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function EN(e,t,n){!t&&!Dh(e)||DN(e,n,t)}function Dh(e){return Bh(e)}function DN(e,t,n){let r;n?(r=0,e[P]|=1024):e[P]&64?r=0:r=1,kw(e,t,r)}var Th=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},_f=(()=>{class e{compileModuleSync(n){return new wh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=my(n),o=uw(i.declarations).reduce((s,a)=>{let c=wr(a);return c&&s.push(new Go(c)),s},[]);return new Th(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var TN=(()=>{class e{constructor(){this.zone=b(ae),this.applicationRef=b(Hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function SN(e){return[{provide:ae,useFactory:e},{provide:Mi,multi:!0,useFactory:()=>{let t=b(TN,{optional:!0});return()=>t.initialize()}},{provide:Mi,multi:!0,useFactory:()=>{let t=b(NN);return()=>{t.initialize()}}},{provide:Xy,useFactory:MN}]}function MN(){let e=b(ae),t=b(mn);return n=>e.runOutsideAngular(()=>t.handleError(n))}function AN(e){let t=SN(()=>new ae(xN(e)));return ki([[],t])}function xN(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var NN=(()=>{class e{constructor(){this.subscription=new ge,this.initialized=!1,this.zone=b(ae),this.pendingTasks=b(Mr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ae.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function PN(){return typeof $localize<"u"&&$localize.locale||Cc}var Yc=new M("",{providedIn:"root",factory:()=>b(Yc,U.Optional|U.SkipSelf)||PN()});var Zw=new M("");var ic=null;function RN(e=[],t){return Vi.create({name:t,providers:[{provide:Mc,useValue:"platform"},{provide:Zw,useValue:new Set([()=>ic=null])},...e]})}function ON(e=[]){if(ic)return ic;let t=RN(e);return ic=t,bN(),kN(t),t}function kN(e){e.get(Yh,null)?.forEach(n=>n())}var en=(()=>{class e{static{this.__NG_ELEMENT_ID__=FN}}return e})();function FN(e){return LN(ot(),re(),(e&16)===16)}function LN(e,t,n){if(Nc(e)&&!n){let r=Wn(e.index,t);return new Dr(r,r)}else if(e.type&47){let r=t[jt];return new Dr(r,t)}return null}var Sh=class{constructor(){}supports(t){return Hw(t)}create(t){return new Mh(t)}},VN=(e,t)=>t,Mh=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||VN}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<qv(r,i,o)?n:r,a=qv(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;u<=m&&m<l&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Hw(t))throw new A(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,jx(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Ah(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ic),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ic),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ah=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xh=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ic=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new xh,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qv(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Yv(){return new vf([new Sh])}var vf=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:Yv})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Yv()),deps:[[e,new oy,new Ph]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new A(901,!1)}}return e})();function Jw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=ON(r),o=[AN(),...n||[]],a=new wc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ae);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(mn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let d=()=>a.destroy(),h=i.get(Zw);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),IN(l,c,()=>{let p=a.get(Qw);return p.runInitializers(),p.donePromise.then(()=>{let m=a.get(Yc,Cc);hN(m||Cc);let _=a.get(Hi);return t!==void 0&&_.bootstrap(t),_})})})}catch(t){return Promise.reject(t)}}function Nr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var rb=null;function In(){return rb}function ib(e){rb??=e}var Kc=class{};var xe=new M(""),bf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(UN),providedIn:"platform"})}}return e})();var UN=(()=>{class e extends bf{constructor(){super(),this._doc=b(xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function Cf(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Xw(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Cn(e){return e&&e[0]!=="?"?"?"+e:e}var Wi=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(sb),providedIn:"root"})}}return e})(),ob=new M(""),sb=(()=>{class e extends Wi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Cf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Cn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Cn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Cn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(bf),C(ob,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ab=(()=>{class e extends Wi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Cf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Cn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Cn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(bf),C(ob,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Xo=(()=>{class e{constructor(n){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=HN(Xw(eb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Cn(r))}normalize(n){return e.stripTrailingSlash($N(this._basePath,eb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Cn}static{this.joinWithSlash=Cf}static{this.stripTrailingSlash=Xw}static{this.\u0275fac=function(r){return new(r||e)(C(Wi))}}static{this.\u0275prov=E({token:e,factory:()=>BN(),providedIn:"root"})}}return e})();function BN(){return new Xo(C(Wi))}function $N(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function eb(e){return e.replace(/\/index.html$/,"")}function HN(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Jc(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var yf=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new yf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),tb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);tb(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(D(Bi),D(zc),D(vf))}}static{this.\u0275dir=ce({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function tb(e,t){e.context.$implicit=t.item}var Yn=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new wf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){nb("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){nb("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(D(Bi),D(zc))}}static{this.\u0275dir=ce({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),wf=class{constructor(){this.$implicit=null,this.ngIf=null}};function nb(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${qe(t)}'.`)}var Fe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({})}}return e})(),If="browser",zN="server";function cb(e){return e===If}function el(e){return e===zN}var zi=class{};var ns=class{},nl=class{},Pr=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Df=class{encodeKey(t){return lb(t)}encodeValue(t){return lb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function qN(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var YN=/%(\d[a-f0-9])/gi,KN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lb(e){return encodeURIComponent(e).replace(YN,(t,n)=>KN[n]??t)}function tl(e){return`${e}`}var Kn=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Df,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=qN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(tl):[tl(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(tl(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(tl(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Tf=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function QN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ub(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function db(e){return typeof Blob<"u"&&e instanceof Blob}function hb(e){return typeof FormData<"u"&&e instanceof FormData}function ZN(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var ts=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(QN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Pr,this.context??=new Tf,!this.params)this.params=new Kn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ub(this.body)||db(this.body)||hb(this.body)||ZN(this.body)?this.body:this.body instanceof Kn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||hb(this.body)?null:db(this.body)?this.body.type||null:ub(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Kn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new e(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Gi=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Gi||{}),rs=class{constructor(t,n=ol.Ok,r="OK"){this.headers=t.headers||new Pr,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Sf=class e extends rs{constructor(t={}){super(t),this.type=Gi.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},rl=class e extends rs{constructor(t={}){super(t),this.type=Gi.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},il=class extends rs{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},ol=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(ol||{});function Ef(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Rr=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ts)o=n;else{let c;i.headers instanceof Pr?c=i.headers:c=new Pr(i.headers);let l;i.params&&(i.params instanceof Kn?l=i.params:l=new Kn({fromObject:i.params})),o=new ts(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=R(o).pipe(Fn(c=>this.handler.handle(c)));if(n instanceof ts||i.observe==="events")return s;let a=s.pipe(We(c=>c instanceof rl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(k(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(k(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(k(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(k(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Kn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Ef(i,r))}post(n,r,i={}){return this.request("POST",n,Ef(i,r))}put(n,r,i={}){return this.request("PUT",n,Ef(i,r))}static{this.\u0275fac=function(r){return new(r||e)(C(ns))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function gb(e,t){return t(e)}function JN(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function XN(e,t,n){return(r,i)=>vn(n,()=>t(r,o=>e(o,i)))}var eP=new M(""),Mf=new M(""),tP=new M(""),nP=new M("");function rP(){let e=null;return(t,n)=>{e===null&&(e=(b(eP,{optional:!0})??[]).reduceRight(JN,gb));let r=b(Mr),i=r.add();return e(t,n).pipe(Vn(()=>r.remove(i)))}}var fb=(()=>{class e extends ns{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=b(Mr);let i=b(nP,{optional:!0});this.backend=i??n}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Mf),...this.injector.get(tP,[])]));this.chain=i.reduceRight((o,s)=>XN(o,s,this.injector),gb)}let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Vn(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||e)(C(nl),C(it))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();var iP=/^\)\]\}',?\n/;function oP(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var pb=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new A(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?fe(r.\u0275loadImpl()):R(null)).pipe(ft(()=>new q(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((_,I)=>s.setRequestHeader(_,I.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let _=n.detectContentTypeHeader();_!==null&&s.setRequestHeader("Content-Type",_)}if(n.responseType){let _=n.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=s.statusText||"OK",I=new Pr(s.getAllResponseHeaders()),S=oP(s)||n.url;return c=new Sf({headers:I,status:s.status,statusText:_,url:S}),c},u=()=>{let{headers:_,status:I,statusText:S,url:ue}=l(),H=null;I!==ol.NoContent&&(H=typeof s.response>"u"?s.responseText:s.response),I===0&&(I=H?ol.Ok:0);let Re=I>=200&&I<300;if(n.responseType==="json"&&typeof H=="string"){let Pn=H;H=H.replace(iP,"");try{H=H!==""?JSON.parse(H):null}catch(ut){H=Pn,Re&&(Re=!1,H={error:ut,text:H})}}Re?(o.next(new rl({body:H,headers:_,status:I,statusText:S,url:ue||void 0})),o.complete()):o.error(new il({error:H,headers:_,status:I,statusText:S,url:ue||void 0}))},d=_=>{let{url:I}=l(),S=new il({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(S)},h=!1,p=_=>{h||(o.next(l()),h=!0);let I={type:Gi.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(I.total=_.total),n.responseType==="text"&&s.responseText&&(I.partialText=s.responseText),o.next(I)},m=_=>{let I={type:Gi.UploadProgress,loaded:_.loaded};_.lengthComputable&&(I.total=_.total),o.next(I)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Gi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||e)(C(zi))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),_b=new M(""),sP="XSRF-TOKEN",aP=new M("",{providedIn:"root",factory:()=>sP}),cP="X-XSRF-TOKEN",lP=new M("",{providedIn:"root",factory:()=>cP}),sl=class{},uP=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||e)(C(xe),C(Zt),C(aP))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function dP(e,t){let n=e.url.toLowerCase();if(!b(_b)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=b(sl).getToken(),i=b(lP);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var vb=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(vb||{});function hP(e,t){return{\u0275kind:e,\u0275providers:t}}function fP(...e){let t=[Rr,pb,fb,{provide:ns,useExisting:fb},{provide:nl,useExisting:pb},{provide:Mf,useValue:dP,multi:!0},{provide:_b,useValue:!0},{provide:sl,useClass:uP}];for(let n of e)t.push(...n.\u0275providers);return ki(t)}var mb=new M("");function pP(){return hP(vb.LegacyInterceptors,[{provide:mb,useFactory:rP},{provide:Mf,useExisting:mb,multi:!0}])}var al=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({providers:[fP(pP())]})}}return e})();var Pf=class extends Kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Rf=class e extends Pf{static makeCurrent(){ib(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=mP();return n==null?null:gP(n)}resetBaseElement(){is=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Jc(document.cookie,t)}},is=null;function mP(){return is=is||document.querySelector("base"),is?is.getAttribute("href"):null}function gP(e){return new URL(e,document.baseURI).pathname}var _P=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Of=new M(""),Cb=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(C(Of),C(ae))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),cl=class{constructor(t){this._doc=t}},xf="ng-app-id",Ib=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=el(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${xf}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(xf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(xf,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(C(xe),C(Vc),C(Zo,8),C(Zt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Nf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ff=/%COMP%/g,Eb="%COMP%",vP=`_nghost-${Eb}`,yP=`_ngcontent-${Eb}`,wP=!0,bP=new M("",{providedIn:"root",factory:()=>wP});function CP(e){return yP.replace(Ff,e)}function IP(e){return vP.replace(Ff,e)}function Db(e,t){return t.map(n=>n.replace(Ff,e))}var yb=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=el(a),this.defaultRenderer=new os(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yt.ShadowDom&&(r=O(g({},r),{encapsulation:Yt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ll?i.applyToHost(n):i instanceof ss&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Yt.Emulated:o=new ll(c,l,r,this.appId,u,s,a,d);break;case Yt.ShadowDom:return new kf(c,l,n,r,s,a,this.nonce,d);default:o=new ss(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(C(Cb),C(Ib),C(Vc),C(bP),C(xe),C(Zt),C(ae),C(Zo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),os=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Nf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(wb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(wb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Nf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Nf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(gn.DashCase|gn.Important)?t.style.setProperty(n,r,i&gn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&gn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=In().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function wb(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var kf=class extends os{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Db(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ss=class extends os{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Db(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ll=class extends ss{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=CP(l),this.hostAttr=IP(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},EP=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(C(xe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),bb=["alt","control","meta","shift"],DP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},SP=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),bb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=DP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),bb.forEach(s=>{if(s!==i){let a=TP[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(C(xe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function Tb(e,t){return Jw(g({rootComponent:e},MP(t)))}function MP(e){return{appProviders:[...RP,...e?.providers??[]],platformProviders:PP}}function AP(){Rf.makeCurrent()}function xP(){return new mn}function NP(){return sw(document),document}var PP=[{provide:Zt,useValue:If},{provide:Yh,useValue:AP,multi:!0},{provide:xe,useFactory:NP,deps:[]}];var RP=[{provide:Mc,useValue:"root"},{provide:mn,useFactory:xP,deps:[]},{provide:Of,useClass:EP,multi:!0,deps:[xe,ae,Zt]},{provide:Of,useClass:SP,multi:!0,deps:[xe]},yb,Ib,Cb,{provide:Wo,useExisting:yb},{provide:zi,useClass:_P,deps:[]},[]];var Sb=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(C(xe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V="primary",bs=Symbol("RouteTitle"),Bf=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Zi(e){return new Bf(e)}function kP(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function FP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!tn(e[n],t[n]))return!1;return!0}function tn(e,t){let n=e?$f(e):void 0,r=t?$f(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!kb(e[i],t[i]))return!1;return!0}function $f(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function kb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Fb(e){return e.length>0?e[e.length-1]:null}function Jn(e){return Cd(e)?e:xr(e)?fe(Promise.resolve(e)):R(e)}var LP={exact:Vb,subset:jb},Lb={exact:VP,subset:jP,ignored:()=>!0};function Mb(e,t,n){return LP[n.paths](e.root,t.root,n.matrixParams)&&Lb[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function VP(e,t){return tn(e,t)}function Vb(e,t,n){if(!kr(e.segments,t.segments)||!hl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Vb(e.children[r],t.children[r],n))return!1;return!0}function jP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>kb(e[n],t[n]))}function jb(e,t,n){return Ub(e,t,t.segments,n)}function Ub(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!kr(i,n)||t.hasChildren()||!hl(i,n,r))}else if(e.segments.length===n.length){if(!kr(e.segments,n)||!hl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!jb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!kr(e.segments,i)||!hl(e.segments,i,r)||!e.children[V]?!1:Ub(e.children[V],t,o,r)}}function hl(e,t,n){return t.every((r,i)=>Lb[n](e[i].parameters,r.parameters))}var Qn=class{constructor(t=new J([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){return $P.serialize(this)}},J=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fl(this)}},Or=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Zi(this.parameters),this._parameterMap}toString(){return $b(this)}};function UP(e,t){return kr(e,t)&&e.every((n,r)=>tn(n.parameters,t[r].parameters))}function kr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function BP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var pp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new ml,providedIn:"root"})}}return e})(),ml=class{parse(t){let n=new zf(t);return new Qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${as(t.root,!0)}`,r=WP(t.queryParams),i=typeof t.fragment=="string"?`#${HP(t.fragment)}`:"";return`${n}${r}${i}`}},$P=new ml;function fl(e){return e.segments.map(t=>$b(t)).join("/")}function as(e,t){if(!e.hasChildren())return fl(e);if(t){let n=e.children[V]?as(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${as(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=BP(e,(r,i)=>i===V?[as(e.children[V],!1)]:[`${i}:${as(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${fl(e)}/${n[0]}`:`${fl(e)}/(${n.join("//")})`}}function Bb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ul(e){return Bb(e).replace(/%3B/gi,";")}function HP(e){return encodeURI(e)}function Hf(e){return Bb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pl(e){return decodeURIComponent(e)}function Ab(e){return pl(e.replace(/\+/g,"%20"))}function $b(e){return`${Hf(e.path)}${zP(e.parameters)}`}function zP(e){return Object.entries(e).map(([t,n])=>`;${Hf(t)}=${Hf(n)}`).join("")}function WP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ul(n)}=${ul(i)}`).join("&"):`${ul(n)}=${ul(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var GP=/^[^\/()?;#]+/;function Lf(e){let t=e.match(GP);return t?t[0]:""}var qP=/^[^\/()?;=#]+/;function YP(e){let t=e.match(qP);return t?t[0]:""}var KP=/^[^=?&#]+/;function QP(e){let t=e.match(KP);return t?t[0]:""}var ZP=/^[^&#]+/;function JP(e){let t=e.match(ZP);return t?t[0]:""}var zf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new J(t,n)),r}parseSegment(){let t=Lf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new Or(pl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=YP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Lf(this.remaining);i&&(r=i,this.capture(r))}t[pl(n)]=pl(r)}parseQueryParam(t){let n=QP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=JP(this.remaining);s&&(r=s,this.capture(r))}let i=Ab(n),o=Ab(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[V]:new J([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function Hb(e){return e.segments.length>0?new J([],{[V]:e}):e}function zb(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=zb(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new J(e.segments,t);return XP(n)}function XP(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new J(e.segments.concat(t.segments),t.children)}return e}function Ji(e){return e instanceof Qn}function eR(e,t,n=null,r=null){let i=Wb(e);return Gb(i,t,n,r)}function Wb(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new J(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=Hb(r);return t??i}function Gb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Vf(i,i,i,n,r);let o=tR(t);if(o.toRoot())return Vf(i,i,new J([],{}),n,r);let s=nR(o,i,e),a=s.processChildren?us(s.segmentGroup,s.index,o.commands):Yb(s.segmentGroup,s.index,o.commands);return Vf(i,s.segmentGroup,a,n,r)}function gl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function fs(e){return typeof e=="object"&&e!=null&&e.outlets}function Vf(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=qb(e,t,n);let a=Hb(zb(s));return new Qn(a,o,i)}function qb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=qb(o,t,n)}),new J(e.segments,r)}var _l=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&gl(r[0]))throw new A(4003,!1);let i=r.find(fs);if(i&&i!==Fb(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new _l(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _l(n,t,r)}var Ki=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function nR(e,t,n){if(e.isAbsolute)return new Ki(t,!0,0);if(!n)return new Ki(t,!1,NaN);if(n.parent===null)return new Ki(n,!0,0);let r=gl(e.commands[0])?0:1,i=n.segments.length-1+r;return rR(n,i,e.numberOfDoubleDots)}function rR(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Ki(r,!1,i-o)}function iR(e){return fs(e[0])?e[0].outlets:{[V]:e}}function Yb(e,t,n){if(e??=new J([],{}),e.segments.length===0&&e.hasChildren())return us(e,t,n);let r=oR(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new J(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new J(e.segments.slice(r.pathIndex),e.children),us(o,0,i)}else return r.match&&i.length===0?new J(e.segments,{}):r.match&&!e.hasChildren()?Wf(e,t,n):r.match?us(e,0,i):Wf(e,t,n)}function us(e,t,n){if(n.length===0)return new J(e.segments,{});{let r=iR(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=us(e.children[V],t,n);return new J(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Yb(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new J(e.segments,i)}}function oR(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(fs(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Nb(c,l,s))return o;r+=2}else{if(!Nb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Wf(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(fs(o)){let c=sR(o.outlets);return new J(r,c)}if(i===0&&gl(n[0])){let c=e.segments[t];r.push(new Or(c.path,xb(n[0]))),i++;continue}let s=fs(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&gl(a)?(r.push(new Or(s,xb(a))),i+=2):(r.push(new Or(s,{})),i++)}return new J(r,{})}function sR(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Wf(new J([],{}),0,r))}),t}function xb(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Nb(e,t,n){return e==n.path&&tn(t,n.parameters)}var ds="imperative",Le=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Le||{}),Dt=class{constructor(t,n){this.id=t,this.url=n}},ps=class extends Dt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Le.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Dt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Le.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(_t||{}),Gf=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Gf||{}),Zn=class extends Dt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Le.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Dt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Le.NavigationSkipped}},ms=class extends Dt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Le.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vl=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class extends Dt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Le.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zf=class{constructor(t){this.route=t,this.type=Le.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jf=class{constructor(t){this.route=t,this.type=Le.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xf=class{constructor(t){this.snapshot=t,this.type=Le.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ep=class{constructor(t){this.snapshot=t,this.type=Le.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tp=class{constructor(t){this.snapshot=t,this.type=Le.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},np=class{constructor(t){this.snapshot=t,this.type=Le.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var gs=class{},_s=class{constructor(t){this.url=t}};var rp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new El,this.attachRef=null}},El=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new rp,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ip(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=ip(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=op(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return op(t,this._root).map(n=>n.value)}};function ip(e,t){if(e===t.value)return t;for(let n of t.children){let r=ip(e,n);if(r)return r}return null}function op(e,t){if(e===t.value)return[t];for(let n of t.children){let r=op(e,n);if(r.length)return r.unshift(t),r}return[]}var gt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var wl=class extends yl{constructor(t,n){super(t),this.snapshot=n,gp(this,t)}toString(){return this.snapshot.toString()}};function Kb(e){let t=aR(e),n=new ke([new Or("",{})]),r=new ke({}),i=new ke({}),o=new ke({}),s=new ke(""),a=new nn(n,r,o,s,i,V,e,t.root);return a.snapshot=t.root,new wl(new gt(a,[]),t)}function aR(e){let t={},n={},r={},i="",o=new vs([],t,r,i,n,V,e,null,{});return new bl("",new gt(o,[]))}var nn=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(k(l=>l[bs]))??R(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(k(t=>Zi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(k(t=>Zi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mp(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:g(g({},t.params),e.params),data:g(g({},t.data),e.data),resolve:g(g(g(g({},e.data),t.data),i?.data),e._resolvedData)}:r={params:g({},e.params),data:g({},e.data),resolve:g(g({},e.data),e._resolvedData??{})},i&&Zb(i)&&(r.resolve[bs]=i.title),r}var vs=class{get title(){return this.data?.[bs]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},bl=class extends yl{constructor(t,n){super(n),this.url=t,gp(this,n)}toString(){return Qb(this._root)}};function gp(e,t){t.value._routerState=e,t.children.forEach(n=>gp(e,n))}function Qb(e){let t=e.children.length>0?` { ${e.children.map(Qb).join(", ")} } `:"";return`${e.value}${t}`}function jf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,tn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),tn(t.params,n.params)||e.paramsSubject.next(n.params),FP(t.url,n.url)||e.urlSubject.next(n.url),tn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function sp(e,t){let n=tn(e.params,t.params)&&UP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||sp(e.parent,t.parent))}function Zb(e){return typeof e.title=="string"||e.title===null}var _p=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=V,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=b(El),this.location=b(Bi),this.changeDetector=b(en),this.environmentInjector=b(it),this.inputBinder=b(vp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ap(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ce({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zn]})}}return e})(),ap=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===nn?this.route:t===El?this.childContexts:this.parent.get(t,n)}},vp=new M("");function cR(e,t,n){let r=ys(e,t._root,n?n._root:void 0);return new wl(r,t)}function ys(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=lR(e,t,n);return new gt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ys(e,a)),s}}let r=uR(t.value),i=t.children.map(o=>ys(e,o));return new gt(r,i)}}function lR(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ys(e,r,i);return ys(e,r)})}function uR(e){return new nn(new ke(e.url),new ke(e.params),new ke(e.queryParams),new ke(e.fragment),new ke(e.data),e.outlet,e.component,e)}var Jb="ngNavigationCancelingError";function Xb(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Ji(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=eC(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function eC(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Jb]=!0,n.cancellationCode=t,n}function dR(e){return tC(e)&&Ji(e.url)}function tC(e){return!!e&&e[Jb]}var hR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=be({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ee],decls:1,vars:0,template:function(r,i){r&1&&Ke(0,"router-outlet")},dependencies:[_p],encapsulation:2})}}return e})();function fR(e,t){return e.providers&&!e._injector&&(e._injector=hf(e.providers,t,`Route: ${e.path}`)),e._injector??t}function yp(e){let t=e.children&&e.children.map(yp),n=t?O(g({},e),{children:t}):g({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=hR),n}function rn(e){return e.outlet||V}function pR(e,t){let n=e.filter(r=>rn(r)===t);return n.push(...e.filter(r=>rn(r)!==t)),n}function Cs(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mR=(e,t,n,r)=>k(i=>(new cp(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),cp=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),jf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Yi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Yi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Yi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Yi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new np(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ep(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(jf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),jf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Cs(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},Cl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Qi=class{constructor(t,n){this.component=t,this.route=n}};function gR(e,t,n){let r=e._root,i=t?t._root:null;return cs(r,i,n,[r.value])}function _R(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function eo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Jv(e)?e:t.get(e):r}function cs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yi(t);return e.children.forEach(s=>{vR(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>hs(a,n.getContext(s),i)),i}function vR(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=yR(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Cl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?cs(e,t,a?a.children:null,r,i):cs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qi(a.outlet.component,s))}else s&&hs(t,a,i),i.canActivateChecks.push(new Cl(r)),o.component?cs(e,null,a?a.children:null,r,i):cs(e,null,n,r,i);return i}function yR(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!kr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!kr(e.url,t.url)||!tn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sp(e,t)||!tn(e.queryParams,t.queryParams);case"paramsChange":default:return!sp(e,t)}}function hs(e,t,n){let r=Yi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?hs(s,t.children.getContext(o),n):hs(s,null,n):hs(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Qi(t.outlet.component,i)):n.canDeactivateChecks.push(new Qi(null,i)):n.canDeactivateChecks.push(new Qi(null,i))}function Is(e){return typeof e=="function"}function wR(e){return typeof e=="boolean"}function bR(e){return e&&Is(e.canLoad)}function CR(e){return e&&Is(e.canActivate)}function IR(e){return e&&Is(e.canActivateChild)}function ER(e){return e&&Is(e.canDeactivate)}function DR(e){return e&&Is(e.canMatch)}function nC(e){return e instanceof Rt||e?.name==="EmptyError"}var dl=Symbol("INITIAL_VALUE");function Xi(){return ft(e=>yi(e.map(t=>t.pipe(Ot(1),Ro(dl)))).pipe(k(t=>{for(let n of t)if(n!==!0){if(n===dl)return dl;if(n===!1||n instanceof Qn)return n}return!0}),We(t=>t!==dl),Ot(1)))}function TR(e,t){return Te(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?R(O(g({},n),{guardsResult:!0})):SR(s,r,i,e).pipe(Te(a=>a&&wR(a)?MR(r,o,e,t):R(a)),k(a=>O(g({},n),{guardsResult:a})))})}function SR(e,t,n,r){return fe(e).pipe(Te(i=>RR(i.component,i.route,n,t,r)),Wt(i=>i!==!0,!0))}function MR(e,t,n,r){return fe(t).pipe(Fn(i=>On(xR(i.route.parent,r),AR(i.route,r),PR(e,i.path,n),NR(e,i.route,n))),Wt(i=>i!==!0,!0))}function AR(e,t){return e!==null&&t&&t(new tp(e)),R(!0)}function xR(e,t){return e!==null&&t&&t(new Xf(e)),R(!0)}function NR(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return R(!0);let i=r.map(o=>Ka(()=>{let s=Cs(t)??n,a=eo(o,s),c=CR(a)?a.canActivate(t,e):vn(s,()=>a(t,e));return Jn(c).pipe(Wt())}));return R(i).pipe(Xi())}function PR(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>_R(s)).filter(s=>s!==null).map(s=>Ka(()=>{let a=s.guards.map(c=>{let l=Cs(s.node)??n,u=eo(c,l),d=IR(u)?u.canActivateChild(r,e):vn(l,()=>u(r,e));return Jn(d).pipe(Wt())});return R(a).pipe(Xi())}));return R(o).pipe(Xi())}function RR(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return R(!0);let s=o.map(a=>{let c=Cs(t)??i,l=eo(a,c),u=ER(l)?l.canDeactivate(e,t,n,r):vn(c,()=>l(e,t,n,r));return Jn(u).pipe(Wt())});return R(s).pipe(Xi())}function OR(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return R(!0);let o=i.map(s=>{let a=eo(s,e),c=bR(a)?a.canLoad(t,n):vn(e,()=>a(t,n));return Jn(c)});return R(o).pipe(Xi(),rC(r))}function rC(e){return _d(Me(t=>{if(Ji(t))throw Xb(e,t)}),k(t=>t===!0))}function kR(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return R(!0);let o=i.map(s=>{let a=eo(s,e),c=DR(a)?a.canMatch(t,n):vn(e,()=>a(t,n));return Jn(c)});return R(o).pipe(Xi(),rC(r))}var ws=class{constructor(t){this.segmentGroup=t||null}},Il=class extends Error{constructor(t){super(),this.urlTree=t}};function qi(e){return vi(new ws(e))}function FR(e){return vi(new A(4e3,!1))}function LR(e){return vi(eC(!1,_t.GuardRejected))}var lp=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return R(r);if(i.numberOfChildren>1||!i.children[V])return FR(t.redirectTo);i=i.children[V]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Il(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Qn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new J(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VR(e,t,n,r,i){let o=wp(e,t,n);return o.matched?(r=fR(t,r),kR(r,t,n,i).pipe(k(s=>s===!0?o:g({},up)))):R(o)}function wp(e,t,n){if(t.path==="**")return jR(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?g({},up):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||kP)(n,e,t);if(!i)return g({},up);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?g(g({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function jR(e){return{matched:!0,parameters:e.length>0?Fb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Pb(e,t,n,r){return n.length>0&&$R(e,n,r)?{segmentGroup:new J(t,BR(r,new J(n,e.children))),slicedSegments:[]}:n.length===0&&HR(e,n,r)?{segmentGroup:new J(e.segments,UR(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new J(e.segments,e.children),slicedSegments:n}}function UR(e,t,n,r){let i={};for(let o of n)if(Dl(e,t,o)&&!r[rn(o)]){let s=new J([],{});i[rn(o)]=s}return g(g({},r),i)}function BR(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&rn(r)!==V){let i=new J([],{});n[rn(r)]=i}return n}function $R(e,t,n){return n.some(r=>Dl(e,t,r)&&rn(r)!==V)}function HR(e,t,n){return n.some(r=>Dl(e,t,r))}function Dl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function zR(e,t,n,r){return rn(e)!==r&&(r===V||!Dl(t,n,e))?!1:wp(t,e,n).matched}function WR(e,t,n){return t.length===0&&!e.children[n]}var dp=class{};function GR(e,t,n,r,i,o,s="emptyOnly"){return new hp(e,t,n,r,i,s,o).recognize()}var qR=31,hp=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new lp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=Pb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(k(n=>{let r=new vs([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,{},V,this.rootComponentType,null,{}),i=new gt(r,n),o=new bl("",i),s=eR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,V).pipe(kn(r=>{if(r instanceof Il)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ws?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=mp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(k(o=>o instanceof gt?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return fe(i).pipe(Fn(o=>{let s=r.children[o],a=pR(n,o);return this.processSegmentGroup(t,a,s,o)}),Ad((o,s)=>(o.push(...s),o)),Ln(null),Md(),Te(o=>{if(o===null)return qi(r);let s=iC(o);return YR(s),R(s)}))}processSegment(t,n,r,i,o,s){return fe(n).pipe(Fn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(kn(c=>{if(c instanceof ws)return R(null);throw c}))),Wt(a=>!!a),kn(a=>{if(nC(a))return WR(r,i,o)?R(new dp):qi(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return zR(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):qi(i):qi(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=wp(n,i,o);if(!a)return qi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qR&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Te(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=VR(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ft(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ft(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new vs(u,h,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,QR(r),rn(r),r.component??r._loadedComponent??null,r,ZR(r)),{segmentGroup:m,slicedSegments:_}=Pb(n,u,d,c);if(_.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(k(S=>S===null?null:new gt(p,S)));if(c.length===0&&_.length===0)return R(new gt(p,[]));let I=rn(r)===o;return this.processSegment(l,c,m,_,I?V:o,!0).pipe(k(S=>new gt(p,S instanceof gt?[S]:[])))}))):qi(n)))}getChildConfig(t,n,r){return n.children?R({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?R({routes:n._loadedRoutes,injector:n._loadedInjector}):OR(t,n,r,this.urlSerializer).pipe(Te(i=>i?this.configLoader.loadChildren(t,n).pipe(Me(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):LR(n))):R({routes:[],injector:t})}};function YR(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function KR(e){let t=e.value.routeConfig;return t&&t.path===""}function iC(e){let t=[],n=new Set;for(let r of e){if(!KR(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=iC(r.children);t.push(new gt(r.value,i))}return t.filter(r=>!n.has(r))}function QR(e){return e.data||{}}function ZR(e){return e.resolve||{}}function JR(e,t,n,r,i,o){return Te(s=>GR(e,t,n,r,s.extractedUrl,i,o).pipe(k(({state:a,tree:c})=>O(g({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function XR(e,t){return Te(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return R(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of oC(c))s.add(l);let a=0;return fe(s).pipe(Fn(c=>o.has(c)?eO(c,r,e,t):(c.data=mp(c,c.parent,e).resolve,R(void 0))),Me(()=>a++),wi(1),Te(c=>a===s.size?R(n):ht))})}function oC(e){let t=e.children.map(n=>oC(n)).flat();return[e,...t]}function eO(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Zb(i)&&(o[bs]=i.title),tO(o,e,t,r).pipe(k(s=>(e._resolvedData=s,e.data=mp(e,e.parent,n).resolve,null)))}function tO(e,t,n,r){let i=$f(e);if(i.length===0)return R({});let o={};return fe(i).pipe(Te(s=>nO(e[s],t,n,r).pipe(Wt(),Me(a=>{o[s]=a}))),wi(1),Sd(o),kn(s=>nC(s)?ht:vi(s)))}function nO(e,t,n,r){let i=Cs(t)??r,o=eo(e,i),s=o.resolve?o.resolve(t,n):vn(i,()=>o(t,n));return Jn(s)}function Uf(e){return ft(t=>{let n=e(t);return n?fe(n).pipe(k(()=>t)):R(t)})}var sC=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[bs]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(rO),providedIn:"root"})}}return e})(),rO=(()=>{class e extends sC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(C(Sb))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),bp=new M("",{providedIn:"root",factory:()=>({})}),Cp=new M(""),iO=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(_f)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return R(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Jn(n.loadComponent()).pipe(k(aC),Me(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Vn(()=>{this.componentLoaders.delete(n)})),i=new gi(r,()=>new Oe).pipe(mi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return R({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oO(r,this.compiler,n,this.onLoadEndListener).pipe(Vn(()=>{this.childrenLoaders.delete(r)})),s=new gi(o,()=>new Oe).pipe(mi());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function oO(e,t,n,r){return Jn(e.loadChildren()).pipe(k(aC),Te(i=>i instanceof qo||Array.isArray(i)?R(i):fe(t.compileModuleAsync(i))),k(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Cp,[],{optional:!0,self:!0}).flat()),{routes:s.map(yp),injector:o}}))}function sO(e){return e&&typeof e=="object"&&"default"in e}function aC(e){return sO(e)?e.default:e}var Ip=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(aO),providedIn:"root"})}}return e})(),aO=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),cO=new M("");var lO=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=b(iO),this.environmentInjector=b(it),this.urlSerializer=b(pp),this.rootContexts=b(El),this.location=b(Xo),this.inputBindingEnabled=b(vp,{optional:!0})!==null,this.titleStrategy=b(sC),this.options=b(bp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(Ip),this.createViewTransition=b(cO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Zf(i)),r=i=>this.events.next(new Jf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(O(g(g({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ds,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(We(o=>o.id!==0),k(o=>O(g({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ft(o=>{let s=!1,a=!1;return R(o).pipe(ft(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",_t.SupersededByNewNavigation),ht;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?O(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Lr(c.id,this.urlSerializer.serialize(c.rawUrl),d,Gf.IgnoredSameUrlNavigation)),c.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(ft(d=>{let h=this.transitions?.getValue();return this.events.next(new ps(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ht:Promise.resolve(d)}),JR(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=O(g({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new vl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:m,extras:_}=c,I=new ps(d,this.urlSerializer.serialize(h),p,m);this.events.next(I);let S=Kb(this.rootComponentType).snapshot;return this.currentTransition=o=O(g({},c),{targetSnapshot:S,urlAfterRedirects:h,extras:O(g({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,R(o)}else{let d="";return this.events.next(new Lr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Gf.IgnoredByUrlHandlingStrategy)),c.resolve(null),ht}}),Me(c=>{let l=new qf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),k(c=>(this.currentTransition=o=O(g({},c),{guards:gR(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),TR(this.environmentInjector,c=>this.events.next(c)),Me(c=>{if(o.guardsResult=c.guardsResult,Ji(c.guardsResult))throw Xb(this.urlSerializer,c.guardsResult);let l=new Yf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),We(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",_t.GuardRejected),!1)),Uf(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(Me(l=>{let u=new Kf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ft(l=>{let u=!1;return R(l).pipe(XR(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",_t.NoDataFromResolver)}}))}),Me(l=>{let u=new Qf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Uf(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Me(h=>{u.component=h}),k(()=>{})));for(let h of u.children)d.push(...l(h));return d};return yi(l(c.targetSnapshot.root)).pipe(Ln(null),Ot(1))}),Uf(()=>this.afterPreactivation()),ft(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?fe(u).pipe(k(()=>o)):R(o)}),k(c=>{let l=cR(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=O(g({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Me(()=>{this.events.next(new gs)}),mR(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ot(1),Me({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Oo(this.transitionAbortSubject.pipe(Me(c=>{throw c}))),Vn(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",_t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),kn(c=>{if(a=!0,tC(c))this.events.next(new Zn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),dR(c)?this.events.next(new _s(c.url)):o.resolve(!1);else{this.events.next(new ms(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return ht}))}))}cancelNavigationTransition(n,r,i){let o=new Zn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function uO(e){return e!==ds}var dO=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(hO),providedIn:"root"})}}return e})(),fp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},hO=(()=>{class e extends fp{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),cC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(fO),providedIn:"root"})}}return e})(),fO=(()=>{class e extends cC{constructor(){super(...arguments),this.location=b(Xo),this.urlSerializer=b(pp),this.options=b(bp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(Ip),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ps)this.stateMemento=this.createStateMemento();else if(n instanceof Lr)this.rawUrlTree=r.initialUrl;else if(n instanceof vl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof gs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Zn&&(n.code===_t.GuardRejected||n.code===_t.NoDataFromResolver)?this.restoreHistory(r):n instanceof ms?this.restoreHistory(r,!0):n instanceof Fr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=g(g({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=g(g({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ls=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ls||{});function pO(e,t){e.events.pipe(We(n=>n instanceof Fr||n instanceof Zn||n instanceof ms||n instanceof Lr),k(n=>n instanceof Fr||n instanceof Lr?ls.COMPLETE:(n instanceof Zn?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?ls.REDIRECTING:ls.FAILED),We(n=>n!==ls.REDIRECTING),Ot(1)).subscribe(()=>{t()})}function mO(e){throw e}var gO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_O={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},at=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(Gc),this.stateManager=b(cC),this.options=b(bp,{optional:!0})||{},this.pendingTasks=b(Mr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(lO),this.urlSerializer=b(pp),this.location=b(Xo),this.urlHandlingStrategy=b(Ip),this._events=new Oe,this.errorHandler=this.options.errorHandler||mO,this.navigated=!1,this.routeReuseStrategy=b(dO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(Cp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(vp,{optional:!0}),this.eventsSubscription=new ge,this.isNgZoneEnabled=b(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Zn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fr)this.navigated=!0;else if(r instanceof _s){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||uO(i.source)};this.scheduleNavigation(s,ds,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ds,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=g({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(yp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=g(g({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=Wb(h)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return Gb(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ji(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ds,null,r)}navigate(n,r={skipLocationChange:!1}){return vO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=g({},gO):r===!1?i=g({},_O):i=r,Ji(n))return Mb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Mb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return pO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function vO(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new A(4008,!1)}function yO(e){return!(e instanceof gs)&&!(e instanceof _s)}var wO=new M("");function lC(e,...t){return ki([{provide:Cp,multi:!0,useValue:e},[],{provide:nn,useFactory:bO,deps:[at]},{provide:qc,multi:!0,useFactory:IO},t.map(n=>n.\u0275providers)])}function bO(e){return e.routerState.root}function CO(e,t){return{\u0275kind:e,\u0275providers:t}}function IO(){let e=b(Vi);return t=>{let n=e.get(Hi);if(t!==n.components[0])return;let r=e.get(at),i=e.get(EO);e.get(DO)===1&&r.initialNavigation(),e.get(TO,null,U.Optional)?.setUpPreloading(),e.get(wO,null,U.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var EO=new M("",{factory:()=>new Oe}),DO=new M("",{providedIn:"root",factory:()=>1});var TO=new M("");function uC(){return CO(6,[{provide:Wi,useClass:ab}])}var Ep;try{Ep=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ep=!1}var Ds=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?cb(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ep)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||e)(C(Zt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Es;function SO(){if(Es==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Es=!0}))}finally{Es=Es||!1}return Es}function Dp(e){return SO()?e:!!e.capture}function dC(e){return e.composedPath?e.composedPath()[0]:e.target}function hC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Tp(e){return Array.isArray(e)?e:[e]}function Sp(e){return e instanceof Ye?e.nativeElement:e}var pC=new Set,Vr,MO=(()=>{class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xO}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&AO(n,this._nonce),this._matchMedia(n)}static{this.\u0275fac=function(r){return new(r||e)(C(Ds),C(Zo,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function AO(e,t){if(!pC.has(e))try{Vr||(Vr=document.createElement("style"),t&&Vr.setAttribute("nonce",t),Vr.setAttribute("type","text/css"),document.head.appendChild(Vr)),Vr.sheet&&(Vr.sheet.insertRule(`@media ${e} {body{ }}`,0),pC.add(e))}catch(n){console.error(n)}}function xO(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var gC=(()=>{class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new Oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return mC(Tp(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let i=mC(Tp(n)).map(s=>this._registerQuery(s).observable),o=yi(i);return o=On(o.pipe(Ot(1)),o.pipe(xd(1),Td(0))),o.pipe(k(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new q(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ro(r),k(({matches:s})=>({query:n,matches:s})),Oo(this._destroySubject)),mql:r};return this._queries.set(n,o),o}static{this.\u0275fac=function(r){return new(r||e)(C(MO),C(ae))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function mC(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function yC(e){return e.buttons===0||e.detail===0}function wC(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var jr=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(jr||{}),_C="cdk-high-contrast-black-on-white",vC="cdk-high-contrast-white-on-black",Mp="cdk-high-contrast-active",bC=(()=>{class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=b(gC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return jr.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return jr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return jr.BLACK_ON_WHITE}return jr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(Mp,_C,vC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===jr.BLACK_ON_WHITE?n.add(Mp,_C):r===jr.WHITE_ON_BLACK&&n.add(Mp,vC)}}static{this.\u0275fac=function(r){return new(r||e)(C(Ds),C(xe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ap=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({})}}return e})();function RO(){return!0}var OO=new M("mat-sanity-checks",{providedIn:"root",factory:RO}),Ts=(()=>{class e{constructor(n,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return hC()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}static{this.\u0275fac=function(r){return new(r||e)(C(bC),C(OO,8),C(xe))}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({imports:[Ap,Ap]})}}return e})();var Tt=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Tt||{}),xp=class{constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Tt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},CC=Dp({passive:!0,capture:!0}),Np=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=dC(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,CC)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,CC)))}},IC={enterDuration:225,exitDuration:150},kO=800,EC=Dp({passive:!0,capture:!0}),DC=["mousedown","touchstart"],TC=["mouseup","mouseleave","touchend","touchcancel"],SC=class e{static{this._eventManager=new Np}constructor(t,n,r,i){this._target=t,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Sp(r))}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=g(g({},IC),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||FO(t,n,i),a=t-i.left,c=n-i.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||i.width===0&&i.height===0,_=new xp(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",_.state=Tt.FADING_IN,r.persistent||(this._mostRecentTransientRipple=_);let I=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let S=()=>this._finishRippleTransition(_),ue=()=>this._destroyRipple(_);u.addEventListener("transitionend",S),u.addEventListener("transitioncancel",ue),I={onTransitionEnd:S,onTransitionCancel:ue}}),this._activeRipples.set(_,I),(m||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===Tt.FADING_OUT||t.state===Tt.HIDDEN)return;let n=t.element,r=g(g({},IC),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=Tt.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=Sp(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,DC.forEach(r=>{e._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{TC.forEach(n=>{this._triggerElement.addEventListener(n,this,EC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Tt.FADING_IN?this._startFadeOutTransition(t):t.state===Tt.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=Tt.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Tt.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=yC(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+kO;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!wC(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===Tt.VISIBLE||t.config.terminateOnPointerUp&&t.state===Tt.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(DC.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(TC.forEach(n=>t.removeEventListener(n,this,EC)),this._pointerUpEventsRegistered=!1))}};function FO(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var LO=["*"];var VO=new M("MAT_CARD_CONFIG"),MC=(()=>{class e{constructor(n){this.appearance=n?.appearance||"raised"}static{this.\u0275fac=function(r){return new(r||e)(D(VO,8))}}static{this.\u0275cmp=be({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){r&2&&Jt("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Ee],ngContentSelectors:LO,decls:1,vars:0,template:function(r,i){r&1&&(mf(),gf(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return e})();var AC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ce({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return e})();var xC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ce({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}}return e})();var NC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({imports:[Ts,Fe,Ts]})}}return e})();var Sl=class{constructor(){this.id="",this.link="",this.name="",this.description="",this.tags=[]}};var PC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({imports:[Fe,Ts]})}}return e})();var RC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=be({type:e,selectors:[["app-loader"]],standalone:!0,features:[Ee],decls:2,vars:0,consts:[[1,"loader-overlay"],[1,"custom-spinner"]],template:function(r,i){r&1&&(y(0,"div",0),Ke(1,"div",1),w())},dependencies:[Fe,PC],styles:[".loader-overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#00000040}.custom-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:6px solid #e0e7ef;border-top:6px solid #2193b0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return e})();var Ne=(()=>{class e{constructor(n){this.http_service=n}getUserSession(){let n=localStorage.getItem("lastLoggedUser");if(n)try{this.lastLoggedUser=JSON.parse(n)}catch{this.lastLoggedUser=void 0}if(this.lastLoggedUser)return this.lastLoggedUser;throw new Error("No user session found")}saveUserSession(){try{if(this.lastLoggedUser){let n=O(g({},this.lastLoggedUser),{loginTime:Date.now()});localStorage.setItem("lastLoggedUser",JSON.stringify(n))}else localStorage.removeItem("lastLoggedUser");return!0}catch(n){return console.error("Errore nel salvataggio della sessione utente:",n),!1}}loadAppConfig(){return f(this,null,function*(){return yield Id(this.http_service.get("assets/config/default-config.json"))})}static{this.\u0275fac=function(r){return new(r||e)(C(Rr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var OC=()=>{};var Rp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v=function(e,t){if(!e)throw Ur(t)},Ur=function(e){return new Error("Firebase Database ("+Rp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var LC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},UO=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Al={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(h=64)),r.push(n[u],n[d],n[h],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(LC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):UO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Op;let h=o<<2|a>>4;if(r.push(h),l!==64){let p=a<<4&240|l>>2;if(r.push(p),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Op=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Fp=function(e){let t=LC(e);return Al.encodeByteArray(t,!0)},Ms=function(e){return Fp(e).replace(/\./g,"")},to=function(e){try{return Al.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function VC(e){return jC(void 0,e)}function jC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!BO(n)||(e[n]=jC(e[n],t[n]));return e}function BO(e){return e!=="__proto__"}function $O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HO=()=>$O().__FIREBASE_DEFAULTS__,zO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},WO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&to(e[1]);return t&&JSON.parse(t)},Lp=()=>{try{return OC()||HO()||zO()||WO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Vp=e=>Lp()?.emulatorHosts?.[e],UC=e=>{let t=Vp(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},jp=()=>Lp()?.config,Up=e=>Lp()?.[`_${e}`];var Dn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Xn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function xl(e){return f(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function BC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=g({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ms(JSON.stringify(n)),Ms(JSON.stringify(s)),""].join(".")}var Ss={};function GO(){let e={prod:[],emulator:[]};for(let t of Object.keys(Ss))Ss[t]?e.emulator.push(t):e.prod.push(t);return e}function qO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var kC=!1;function Nl(e,t){if(typeof window>"u"||typeof document>"u"||!Xn(window.location.host)||Ss[e]===t||Ss[e]||kC)return;Ss[e]=t;function n(h){return`__firebase__banner__${h}`}let r="__firebase__banner",o=GO().prod.length>0;function s(){let h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{kC=!0,s()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=qO(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),I=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),ue=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let H=h.element;a(H),u(I,_);let Re=l();c(ue,S),H.append(ue,m,I,Re),document.body.appendChild(H)}o?(m.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function As(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function $C(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pl(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Rl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HC(){let e=ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function on(){return Rp.NODE_CLIENT===!0||Rp.NODE_ADMIN===!0}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function kl(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function zC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var YO="FirebaseError",Je=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=YO,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}},vt=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?KO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Je(i,a,r)}};function KO(e,t){return e.replace(QO,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var QO=/\{\$([^}]+)}/g;function no(e){return JSON.parse(e)}function De(e){return JSON.stringify(e)}var WC=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=no(to(o[0])||""),n=no(to(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var GC=function(e){let t=WC(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},qC=function(e){let t=WC(e).claims;return typeof t=="object"&&t.admin===!0};function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Br(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function xs(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ns(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function St(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(FC(o)&&FC(s)){if(!St(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function FC(e){return e!==null&&typeof e=="object"}function $r(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ro(e){let t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function io(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ml=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function YC(e,t){let n=new kp(e,t);return n.subscribe.bind(n)}var kp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZO(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Pp),i.error===void 0&&(i.error=Pp),i.complete===void 0&&(i.complete=Pp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZO(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Pp(){}function Ps(e,t){return`${e} failed: ${t} argument `}var KC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,v(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Rs=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var JO=1e3,XO=2,ek=4*60*60*1e3,tk=.5;function Bp(e,t=JO,n=XO){let r=t*Math.pow(n,e),i=Math.round(tk*r*(Math.random()-.5)*2);return Math.min(ek,r+i)}function ve(e){return e&&e._delegate?e._delegate:e}var Pe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Hr="[DEFAULT]";var Fl=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Dn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rk(t))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Hr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return f(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Hr){return this.instances.has(t)}getOptions(t=Hr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nk(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Hr){return this.component?this.component.multipleInstances?t:Hr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nk(e){return e===Hr?void 0:e}function rk(e){return e.instantiationMode==="EAGER"}var Os=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Fl(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var ik=[],ne=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(ne||{}),ok={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},sk=ne.INFO,ak={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ck=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=ak[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},sn=class{constructor(t){this.name=t,this._logLevel=sk,this._logHandler=ck,this._userLogHandler=null,ik.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ne))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ok[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...t),this._logHandler(this,ne.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...t),this._logHandler(this,ne.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...t),this._logHandler(this,ne.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...t),this._logHandler(this,ne.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...t),this._logHandler(this,ne.ERROR,...t)}};var lk=(e,t)=>t.some(n=>e instanceof n),QC,ZC;function uk(){return QC||(QC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dk(){return ZC||(ZC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JC=new WeakMap,Hp=new WeakMap,XC=new WeakMap,$p=new WeakMap,Wp=new WeakMap;function hk(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(an(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&JC.set(n,e)}).catch(()=>{}),Wp.set(t,e),t}function fk(e){if(Hp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Hp.set(e,t)}var zp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||XC.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function eI(e){zp=e(zp)}function pk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Ll(this),t,...n);return XC.set(r,t.sort?t.sort():[t]),an(r)}:dk().includes(e)?function(...t){return e.apply(Ll(this),t),an(JC.get(this))}:function(...t){return an(e.apply(Ll(this),t))}}function mk(e){return typeof e=="function"?pk(e):(e instanceof IDBTransaction&&fk(e),lk(e,uk())?new Proxy(e,zp):e)}function an(e){if(e instanceof IDBRequest)return hk(e);if($p.has(e))return $p.get(e);let t=mk(e);return t!==e&&($p.set(e,t),Wp.set(t,e)),t}var Ll=e=>Wp.get(e);function Vl(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=an(s);return r&&s.addEventListener("upgradeneeded",c=>{r(an(s.result),c.oldVersion,c.newVersion,an(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var gk=["get","getKey","getAll","getAllKeys","count"],_k=["put","add","delete","clear"],Gp=new Map;function tI(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gp.get(t))return Gp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=_k.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gk.includes(n)))return;let o=function(s,...a){return f(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Gp.set(t,o),o}eI(e=>O(g({},e),{get:(t,n,r)=>tI(t,n)||e.get(t,n,r),has:(t,n)=>!!tI(t,n)||e.has(t,n)}));var Yp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function vk(e){return e.getComponent()?.type==="VERSION"}var Kp="@firebase/app",nI="0.14.1";var Tn=new sn("@firebase/app"),yk="@firebase/app-compat",wk="@firebase/analytics-compat",bk="@firebase/analytics",Ck="@firebase/app-check-compat",Ik="@firebase/app-check",Ek="@firebase/auth",Dk="@firebase/auth-compat",Tk="@firebase/database",Sk="@firebase/data-connect",Mk="@firebase/database-compat",Ak="@firebase/functions",xk="@firebase/functions-compat",Nk="@firebase/installations",Pk="@firebase/installations-compat",Rk="@firebase/messaging",Ok="@firebase/messaging-compat",kk="@firebase/performance",Fk="@firebase/performance-compat",Lk="@firebase/remote-config",Vk="@firebase/remote-config-compat",jk="@firebase/storage",Uk="@firebase/storage-compat",Bk="@firebase/firestore",$k="@firebase/ai",Hk="@firebase/firestore-compat",zk="firebase",Wk="12.1.0";var Qp="[DEFAULT]",Gk={[Kp]:"fire-core",[yk]:"fire-core-compat",[bk]:"fire-analytics",[wk]:"fire-analytics-compat",[Ik]:"fire-app-check",[Ck]:"fire-app-check-compat",[Ek]:"fire-auth",[Dk]:"fire-auth-compat",[Tk]:"fire-rtdb",[Sk]:"fire-data-connect",[Mk]:"fire-rtdb-compat",[Ak]:"fire-fn",[xk]:"fire-fn-compat",[Nk]:"fire-iid",[Pk]:"fire-iid-compat",[Rk]:"fire-fcm",[Ok]:"fire-fcm-compat",[kk]:"fire-perf",[Fk]:"fire-perf-compat",[Lk]:"fire-rc",[Vk]:"fire-rc-compat",[jk]:"fire-gcs",[Uk]:"fire-gcs-compat",[Bk]:"fire-fst",[Hk]:"fire-fst-compat",[$k]:"fire-vertex","fire-js":"fire-js",[zk]:"fire-js-all"};var jl=new Map,qk=new Map,Zp=new Map;function rI(e,t){try{e.container.addComponent(t)}catch(n){Tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ct(e){let t=e.name;if(Zp.has(t))return Tn.debug(`There were multiple attempts to register component ${t}.`),!1;Zp.set(t,e);for(let n of jl.values())rI(n,e);for(let n of qk.values())rI(n,e);return!0}function $t(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xe(e){return e==null?!1:e.settings!==void 0}var Yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new vt("app","Firebase",Yk);var Jp=class{constructor(t,n,r){this._isDeleted=!1,this._options=g({},t),this._config=g({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}};var tr=Wk;function Fs(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=g({name:Qp,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw er.create("bad-app-name",{appName:String(i)});if(n||(n=jp()),!n)throw er.create("no-options");let o=jl.get(i);if(o){if(St(n,o.options)&&St(r,o.config))return o;throw er.create("duplicate-app",{appName:i})}let s=new Os(i);for(let c of Zp.values())s.addComponent(c);let a=new Jp(n,r,s);return jl.set(i,a),a}function zr(e=Qp){let t=jl.get(e);if(!t&&e===Qp&&jp())return Fs();if(!t)throw er.create("no-app",{appName:e});return t}function Ve(e,t,n){let r=Gk[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tn.warn(s.join(" "));return}ct(new Pe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var Kk="firebase-heartbeat-database",Qk=1,ks="firebase-heartbeat-store",qp=null;function aI(){return qp||(qp=Vl(Kk,Qk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ks)}catch(n){console.warn(n)}}}}).catch(e=>{throw er.create("idb-open",{originalErrorMessage:e.message})})),qp}function Zk(e){return f(this,null,function*(){try{let n=(yield aI()).transaction(ks),r=yield n.objectStore(ks).get(cI(e));return yield n.done,r}catch(t){if(t instanceof Je)Tn.warn(t.message);else{let n=er.create("idb-get",{originalErrorMessage:t?.message});Tn.warn(n.message)}}})}function iI(e,t){return f(this,null,function*(){try{let r=(yield aI()).transaction(ks,"readwrite");yield r.objectStore(ks).put(t,cI(e)),yield r.done}catch(n){if(n instanceof Je)Tn.warn(n.message);else{let r=er.create("idb-set",{originalErrorMessage:n?.message});Tn.warn(r.message)}}})}function cI(e){return`${e.name}!${e.options.appId}`}var Jk=1024,Xk=30,Xp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new em(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Xk){let i=t1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Tn.warn(t)}})}getHeartbeatsHeader(){return f(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=oI(),{heartbeatsToSend:n,unsentEntries:r}=e1(this._heartbeatsCache.heartbeats),i=Ms(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Tn.warn(t),""}})}};function oI(){return new Date().toISOString().substring(0,10)}function e1(e,t=Jk){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sI(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sI(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var em=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return Ol()?kl().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Zk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return iI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return iI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function sI(e){return Ms(JSON.stringify({version:2,heartbeats:e})).length}function t1(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function n1(e){ct(new Pe("platform-logger",t=>new Yp(t),"PRIVATE")),ct(new Pe("heartbeat",t=>new Xp(t),"PRIVATE")),Ve(Kp,nI,e),Ve(Kp,nI,"esm2020"),Ve("fire-js","")}n1("");var r1="firebase",i1="12.1.0";Ve(r1,i1,"app");var dI="@firebase/installations",im="0.6.19";var hI=1e4,fI=`w:${im}`,pI="FIS_v2",o1="https://firebaseinstallations.googleapis.com/v1",s1=60*60*1e3,a1="installations",c1="Installations";var l1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gr=new vt(a1,c1,l1);function mI(e){return e instanceof Je&&e.code.includes("request-failed")}function gI({projectId:e}){return`${o1}/projects/${e}/installations`}function _I(e){return{token:e.token,requestStatus:2,expiresIn:d1(e.expiresIn),creationTime:Date.now()}}function vI(e,t){return f(this,null,function*(){let r=(yield t.json()).error;return Gr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function yI({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function u1(e,{refreshToken:t}){let n=yI(e);return n.append("Authorization",h1(t)),n}function wI(e){return f(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function d1(e){return Number(e.replace("s","000"))}function h1(e){return`${pI} ${e}`}function f1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=gI(e),s=yI(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:pI,appId:e.appId,sdkVersion:fI},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield wI(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:_I(d.authToken)}}else throw yield vI("Create Installation",u)})}function bI(e){return new Promise(t=>{setTimeout(t,e)})}function p1(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var m1=/^[cdef][\w-]{21}$/,rm="";function g1(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=_1(e);return m1.test(n)?n:rm}catch{return rm}}function _1(e){return p1(e).substr(0,22)}function Bl(e){return`${e.appName}!${e.appId}`}var CI=new Map;function II(e,t){let n=Bl(e);EI(n,t),v1(n,t)}function EI(e,t){let n=CI.get(e);if(n)for(let r of n)r(t)}function v1(e,t){let n=y1();n&&n.postMessage({key:e,fid:t}),w1()}var Wr=null;function y1(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=e=>{EI(e.data.key,e.data.fid)}),Wr}function w1(){CI.size===0&&Wr&&(Wr.close(),Wr=null)}var b1="firebase-installations-database",C1=1,qr="firebase-installations-store",tm=null;function om(){return tm||(tm=Vl(b1,C1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(qr)}}})),tm}function Ul(e,t){return f(this,null,function*(){let n=Bl(e),i=(yield om()).transaction(qr,"readwrite"),o=i.objectStore(qr),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&II(e,t.fid),t})}function DI(e){return f(this,null,function*(){let t=Bl(e),r=(yield om()).transaction(qr,"readwrite");yield r.objectStore(qr).delete(t),yield r.done})}function $l(e,t){return f(this,null,function*(){let n=Bl(e),i=(yield om()).transaction(qr,"readwrite"),o=i.objectStore(qr),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&II(e,a.fid),a})}function sm(e){return f(this,null,function*(){let t,n=yield $l(e.appConfig,r=>{let i=I1(r),o=E1(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===rm?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function I1(e){let t=e||{fid:g1(),registrationStatus:0};return TI(t)}function E1(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Gr.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=D1(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:T1(e)}:{installationEntry:t}}function D1(e,t){return f(this,null,function*(){try{let n=yield f1(e,t);return Ul(e.appConfig,n)}catch(n){throw mI(n)&&n.customData.serverCode===409?yield DI(e.appConfig):yield Ul(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function T1(e){return f(this,null,function*(){let t=yield lI(e.appConfig);for(;t.registrationStatus===1;)yield bI(100),t=yield lI(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield sm(e);return r||n}return t})}function lI(e){return $l(e,t=>{if(!t)throw Gr.create("installation-not-found");return TI(t)})}function TI(e){return S1(e)?{fid:e.fid,registrationStatus:0}:e}function S1(e){return e.registrationStatus===1&&e.registrationTime+hI<Date.now()}function M1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=A1(e,n),s=u1(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:fI,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield wI(()=>fetch(o,l));if(u.ok){let d=yield u.json();return _I(d)}else throw yield vI("Generate Auth Token",u)})}function A1(e,{fid:t}){return`${gI(e)}/${t}/authTokens:generate`}function am(e,t=!1){return f(this,null,function*(){let n,r=yield $l(e.appConfig,o=>{if(!SI(o))throw Gr.create("not-registered");let s=o.authToken;if(!t&&P1(s))return o;if(s.requestStatus===1)return n=x1(e,t),o;{if(!navigator.onLine)throw Gr.create("app-offline");let a=O1(o);return n=N1(e,a),a}});return n?yield n:r.authToken})}function x1(e,t){return f(this,null,function*(){let n=yield uI(e.appConfig);for(;n.authToken.requestStatus===1;)yield bI(100),n=yield uI(e.appConfig);let r=n.authToken;return r.requestStatus===0?am(e,t):r})}function uI(e){return $l(e,t=>{if(!SI(t))throw Gr.create("not-registered");let n=t.authToken;return k1(n)?O(g({},t),{authToken:{requestStatus:0}}):t})}function N1(e,t){return f(this,null,function*(){try{let n=yield M1(e,t),r=O(g({},t),{authToken:n});return yield Ul(e.appConfig,r),n}catch(n){if(mI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield DI(e.appConfig);else{let r=O(g({},t),{authToken:{requestStatus:0}});yield Ul(e.appConfig,r)}throw n}})}function SI(e){return e!==void 0&&e.registrationStatus===2}function P1(e){return e.requestStatus===2&&!R1(e)}function R1(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+s1}function O1(e){let t={requestStatus:1,requestTime:Date.now()};return O(g({},e),{authToken:t})}function k1(e){return e.requestStatus===1&&e.requestTime+hI<Date.now()}function F1(e){return f(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield sm(t);return r?r.catch(console.error):am(t).catch(console.error),n.fid})}function L1(e,t=!1){return f(this,null,function*(){let n=e;return yield V1(n),(yield am(n,t)).token})}function V1(e){return f(this,null,function*(){let{registrationPromise:t}=yield sm(e);t&&(yield t)})}function j1(e){if(!e||!e.options)throw nm("App Configuration");if(!e.name)throw nm("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw nm(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function nm(e){return Gr.create("missing-app-config-values",{valueName:e})}var MI="installations",U1="installations-internal",B1=e=>{let t=e.getProvider("app").getImmediate(),n=j1(t),r=$t(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$1=e=>{let t=e.getProvider("app").getImmediate(),n=$t(t,MI).getImmediate();return{getId:()=>F1(n),getToken:i=>L1(n,i)}};function H1(){ct(new Pe(MI,B1,"PUBLIC")),ct(new Pe(U1,$1,"PRIVATE"))}H1();Ve(dI,im);Ve(dI,im,"esm2020");var Hl="analytics",z1="firebase_id",W1="origin",G1=60*1e3,q1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pm="https://www.googletagmanager.com/gtag/js";var lt=new sn("@firebase/analytics");var Y1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yt=new vt("analytics","Analytics",Y1);function K1(e){if(!e.startsWith(pm)){let t=yt.create("invalid-gtag-resource",{gtagURL:e});return lt.warn(t.message),""}return e}function kI(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Q1(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Z1(e,t){let n=Q1("firebase-js-sdk-policy",{createScriptURL:K1}),r=document.createElement("script"),i=`${pm}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function J1(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function X1(e,t,n,r,i,o){return f(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield kI(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){lt.error(a)}e("config",i,o)})}function eF(e,t,n,r,i){return f(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield kI(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){lt.error(o)}})}function tF(e,t,n,r){function i(o,...s){return f(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield eF(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield X1(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){lt.error(a)}})}return i}function nF(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=tF(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function rF(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(pm)&&n.src.includes(e))return n;return null}var iF=30,oF=1e3,lm=class{constructor(t={},n=oF){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},FI=new lm;function sF(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function aF(e){return f(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:sF(n)},i=q1.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw yt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function cF(r){return f(this,arguments,function*(e,t=FI,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw yt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw yt.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new um;return setTimeout(()=>f(this,null,function*(){c.abort()}),n!==void 0?n:G1),LI({appId:i,apiKey:o,measurementId:s},a,c,t)})}function LI(o,s,a){return f(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=FI){let{appId:c,measurementId:l}=e;try{yield lF(r,t)}catch(u){if(l)return lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield aF(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!uF(d)){if(i.deleteThrottleMetadata(c),l)return lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let h=Number(d?.customData?.httpStatus)===503?Bp(n,i.intervalMillis,iF):Bp(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(c,p),lt.debug(`Calling attemptFetch again in ${h} millis`),LI(e,p,r,i)}})}function lF(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(yt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function uF(e){if(!(e instanceof Je)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var um=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var dm;function dF(e,t,n,r,i){return f(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=O(g({},r),{send_to:o});e("event",n,s)}})}var hm;function hF(e){hm=e}function fF(e){dm=e}function pF(){return f(this,null,function*(){if(Ol())try{yield kl()}catch(e){return lt.warn(yt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return lt.warn(yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function mF(e,t,n,r,i,o,s){return f(this,null,function*(){let a=cF(e);a.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&lt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>lt.error(h)),t.push(a);let c=pF().then(h=>{if(h)return r.getId()}),[l,u]=yield Promise.all([a,c]);rF(o)||Z1(o,l.measurementId),hm&&(i("consent","default",hm),hF(void 0)),i("js",new Date);let d=s?.config??{};return d[W1]="firebase",d.update=!0,u!=null&&(d[z1]=u),i("config",l.measurementId,d),dm&&(i("set",dm),fF(void 0)),l.measurementId})}var fm=class{constructor(t){this.app=t}_delete(){return delete Ls[this.app.options.appId],Promise.resolve()}},Ls={},AI=[],xI={},cm="dataLayer",gF="gtag",NI,VI,PI=!1;function _F(){let e=[];if(Pl()&&e.push("This is a browser extension environment."),zC()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yt.create("invalid-analytics-context",{errorInfo:t});lt.warn(n.message)}}function vF(e,t,n){_F();let r=e.options.appId;if(!r)throw yt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yt.create("no-api-key");if(Ls[r]!=null)throw yt.create("already-exists",{id:r});if(!PI){J1(cm);let{wrappedGtag:o,gtagCore:s}=nF(Ls,AI,xI,cm,gF);VI=o,NI=s,PI=!0}return Ls[r]=mF(e,AI,xI,t,NI,cm,n),new fm(e)}function jI(e=zr()){e=ve(e);let t=$t(e,Hl);return t.isInitialized()?t.getImmediate():yF(e)}function yF(e,t={}){let n=$t(e,Hl);if(n.isInitialized()){let i=n.getImmediate();if(St(t,n.getOptions()))return i;throw yt.create("already-initialized")}return n.initialize({options:t})}function wF(e,t,n,r){e=ve(e),dF(VI,Ls[e.app.options.appId],t,n,r).catch(i=>lt.error(i))}var RI="@firebase/analytics",OI="0.10.18";function bF(){ct(new Pe(Hl,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return vF(r,i,n)},"PUBLIC")),ct(new Pe("analytics-internal",e,"PRIVATE")),Ve(RI,OI),Ve(RI,OI,"esm2020");function e(t){try{let n=t.getProvider(Hl).getImmediate();return{logEvent:(r,i,o)=>wF(n,r,i,o)}}catch(n){throw yt.create("interop-component-reg-failed",{reason:n})}}}bF();function tE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var nE=tE,rE=new vt("auth","Firebase",tE());var Kl=new sn("@firebase/auth");function CF(e,...t){Kl.logLevel<=ne.WARN&&Kl.warn(`Auth (${tr}): ${e}`,...t)}function Wl(e,...t){Kl.logLevel<=ne.ERROR&&Kl.error(`Auth (${tr}): ${e}`,...t)}function un(e,...t){throw jm(e,...t)}function Yr(e,...t){return jm(e,...t)}function iE(e,t,n){let r=O(g({},nE()),{[t]:n});return new vt("auth","Firebase",r).create(t,{appName:e.name})}function cn(e){return iE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return rE.create(e,...t)}function N(e,t,...n){if(!e)throw jm(t,...n)}function Sn(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Wl(t),new Error(t)}function ir(e,t){e||Sn(t)}function vm(){return typeof self<"u"&&self.location?.href||""}function IF(){return UI()==="http:"||UI()==="https:"}function UI(){return typeof self<"u"&&self.location?.protocol||null}function EF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IF()||Pl()||"connection"in navigator)?navigator.onLine:!0}function DF(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Kr=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,ir(n>t,"Short delay should be less than long delay!"),this.isMobile=As()||Rl()}get(){return EF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Um(e,t){ir(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Ql=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var TF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var SF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MF=new Kr(3e4,6e4);function or(e,t){return e.tenantId&&!t.tenantId?O(g({},t),{tenantId:e.tenantId}):t}function An(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){return oE(e,i,()=>f(this,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=$r(g({key:e.config.apiKey},u)).slice(1),h=yield e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);let p=g({method:t,headers:h},l);return $C()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&Xn(e.emulatorConfig.host)&&(p.credentials="include"),Ql.fetch()(yield sE(e,e.config.apiHost,n,d),p)}))})}function oE(e,t,n){return f(this,null,function*(){e._canInitEmulator=!1;let r=g(g({},TF),t);try{let i=new ym(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw zl(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw zl(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw zl(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iE(e,u,l);un(e,u)}}catch(i){if(i instanceof Je)throw i;un(e,"network-request-failed",{message:String(i)})}})}function Ws(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){let l=yield An(e,t,n,r,i);return"mfaPendingCredential"in l&&un(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function sE(e,t,n,r){return f(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Um(e.config,i):`${e.config.apiScheme}://${i}`;return SF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function AF(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ym=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yr(this.auth,"network-request-failed")),MF.get())})}};function zl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yr(e,t,r);return i.customData._tokenResponse=n,i}function BI(e){return e!==void 0&&e.enterprise!==void 0}var wm=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return AF(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function xF(e,t){return f(this,null,function*(){return An(e,"GET","/v2/recaptchaConfig",or(e,t))})}function NF(e,t){return f(this,null,function*(){return An(e,"POST","/v1/accounts:delete",t)})}function Zl(e,t){return f(this,null,function*(){return An(e,"POST","/v1/accounts:lookup",t)})}function js(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function aE(e,t=!1){return f(this,null,function*(){let n=ve(e),r=yield n.getIdToken(t),i=Bm(r);N(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:js(mm(i.auth_time)),issuedAtTime:js(mm(i.iat)),expirationTime:js(mm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function mm(e){return Number(e)*1e3}function Bm(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Wl("JWT malformed, contained fewer than 3 sections"),null;try{let i=to(n);return i?JSON.parse(i):(Wl("Failed to decode base64 JWT payload"),null)}catch(i){return Wl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $I(e){let t=Bm(e);return N(t,"internal-error"),N(typeof t.exp<"u","internal-error"),N(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function oo(e,t,n=!1){return f(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Je&&PF(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function PF({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var bm=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Bs=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jl(e){return f(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield oo(e,Zl(t,{idToken:n}));N(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?lE(i.providerUserInfo):[],s=RF(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Bs(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function cE(e){return f(this,null,function*(){let t=ve(e);yield Jl(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function RF(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function lE(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Ia(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function OF(e,t){return f(this,null,function*(){let n=yield oE(e,{},()=>f(this,null,function*(){let r=$r({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield sE(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Xn(e.emulatorConfig.host)&&(c.credentials="include"),Ql.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kF(e,t){return f(this,null,function*(){return An(e,"POST","/v2/accounts:revokeToken",or(e,t))})}var Us=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){N(t.idToken,"internal-error"),N(typeof t.idToken<"u","internal-error"),N(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$I(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){N(t.length!==0,"internal-error");let n=$I(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(N(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield OF(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(N(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(N(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(N(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Sn("not implemented")}};function nr(e,t){N(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var rr=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Ia(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bs(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return f(this,null,function*(){let n=yield oo(this,this.stsTokenManager.getToken(this.auth,t));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return aE(this,t)}reload(){return cE(this)}_assign(t){this!==t&&(N(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>g({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(O(g({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return f(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Jl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(Xe(this.auth.app))return Promise.reject(cn(this.auth));let t=yield this.getIdToken();return yield oo(this,NF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return O(g({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>g({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:m,stsTokenManager:_}=n;N(d&&_,t,"internal-error");let I=Us.fromJSON(this.name,_);N(typeof d=="string",t,"internal-error"),nr(r,t.name),nr(i,t.name),N(typeof h=="boolean",t,"internal-error"),N(typeof p=="boolean",t,"internal-error"),nr(o,t.name),nr(s,t.name),nr(a,t.name),nr(c,t.name),nr(l,t.name),nr(u,t.name);let S=new e({uid:d,auth:t,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:I,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(S.providerData=m.map(ue=>g({},ue))),c&&(S._redirectEventId=c),S}static _fromIdTokenResponse(t,n,r=!1){return f(this,null,function*(){let i=new Us;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Jl(o),o})}static _fromGetAccountInfoResponse(t,n,r){return f(this,null,function*(){let i=n.users[0];N(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Us;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var HI=new Map;function Mn(e){ir(e instanceof Function,"Expected a class definition");let t=HI.get(e);return t?(ir(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,HI.set(e,t),t)}var FF=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),Cm=FF;function Gl(e,t,n){return`firebase:${e}:${t}:${n}`}var Xl=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Gl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return f(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Zl(this.auth,{idToken:t}).catch(()=>{});return n?rr._fromGetAccountInfoResponse(this.auth,n,t):null}return rr._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return f(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new e(Mn(Cm),t,r);let i=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Mn(Cm),s=Gl(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let h=yield Zl(t,{idToken:u}).catch(()=>{});if(!h)break;d=yield rr._fromGetAccountInfoResponse(t,h,u)}else d=rr._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function zI(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mE(t))return"Blackberry";if(gE(t))return"Webos";if(dE(t))return"Safari";if((t.includes("chrome/")||hE(t))&&!t.includes("edge/"))return"Chrome";if(pE(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function uE(e=ze()){return/firefox\//i.test(e)}function dE(e=ze()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hE(e=ze()){return/crios\//i.test(e)}function fE(e=ze()){return/iemobile/i.test(e)}function pE(e=ze()){return/android/i.test(e)}function mE(e=ze()){return/blackberry/i.test(e)}function gE(e=ze()){return/webos/i.test(e)}function $m(e=ze()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function LF(e=ze()){return $m(e)&&!!window.navigator?.standalone}function VF(){return HC()&&document.documentMode===10}function _E(e=ze()){return $m(e)||pE(e)||gE(e)||mE(e)||/windows phone/i.test(e)||fE(e)}function vE(e,t=[]){let n;switch(e){case"Browser":n=zI(ze());break;case"Worker":n=`${zI(ze())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tr}/${r}`}var Im=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return f(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jF(n){return f(this,arguments,function*(e,t={}){return An(e,"GET","/v2/passwordPolicy",or(e,t))})}var UF=6,Em=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var Dm=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eu(this),this.idTokenSubscription=new eu(this),this.beforeStateQueue=new Im(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Xl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return f(this,null,function*(){try{let n=yield Zl(this,{idToken:t}),r=yield rr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return f(this,null,function*(){if(Xe(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return f(this,null,function*(){try{yield Jl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=DF()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return f(this,null,function*(){if(Xe(this.app))return Promise.reject(cn(this));let n=t?ve(t):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return f(this,null,function*(){if(!this._deleted)return t&&N(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return Xe(this.app)?Promise.reject(cn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Xe(this.app)?Promise.reject(cn(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(Mn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let t=yield jF(this),n=new Em(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new vt("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kF(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&Mn(t)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=yield Xl.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return f(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return f(this,null,function*(){if(t===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(N(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return f(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return f(this,null,function*(){if(Xe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&CF(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zr(e){return ve(e)}var eu=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=YC(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var au={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BF(e){au=e}function yE(e){return au.loadJS(e)}function $F(){return au.recaptchaEnterpriseScript}function HF(){return au.gapiScript}function wE(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Tm=class{constructor(){this.enterprise=new Sm}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}},Sm=class{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}};var zF="recaptcha-enterprise",bE="NO_RECAPTCHA",Mm=class{constructor(t){this.type=zF,this.auth=Zr(t)}verify(t="verify",n=!1){return f(this,null,function*(){function r(o){return f(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>f(this,null,function*(){xF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new wm(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;BI(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:t}).then(l=>{s(l)}).catch(()=>{s(bE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&BI(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=$F();c.length!==0&&(c+=a),yE(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Vs(e,t,n,r=!1,i=!1){return f(this,null,function*(){let o=new Mm(e),s;if(i)s=bE;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=g({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Am(e,t,n,r,i){return f(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Vs(e,t,n,n==="getOobCode");return r(e,o)}else return r(e,t).catch(o=>f(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Vs(e,t,n,n==="getOobCode");return r(e,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Vs(e,t,n);return r(e,o).catch(s=>f(this,null,function*(){if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield Vs(e,t,n,!1,!0);return r(e,a)}return Promise.reject(s)}))}else{let o=yield Vs(e,t,n,!1,!0);return r(e,o)}else return Promise.reject(i+" provider is not supported.")})}function CE(e,t){let n=$t(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(St(o,t??{}))return i;un(i,"already-initialized")}return n.initialize({options:t})}function WF(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function IE(e,t,n){let r=Zr(e);N(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=EE(t),{host:s,port:a}=GF(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){N(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),N(St(l,r.config.emulator)&&St(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Xn(s)?(xl(`${o}//${s}${c}`),Nl("Auth",!0)):i||qF()}function EE(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function GF(e){let t=EE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WI(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WI(s)}}}function WI(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function qF(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var $s=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(t){return Sn("not implemented")}_linkToIdToken(t,n){return Sn("not implemented")}_getReauthenticationResolver(t){return Sn("not implemented")}};function YF(e,t){return f(this,null,function*(){return An(e,"POST","/v1/accounts:update",t)})}function KF(e,t){return f(this,null,function*(){return An(e,"POST","/v1/accounts:signUp",t)})}function QF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithPassword",or(e,t))})}function ZF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithEmailLink",or(e,t))})}function JF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithEmailLink",or(e,t))})}var Hs=class e extends $s{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new e(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(t,n,"signInWithPassword",QF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZF(t,{email:this._email,oobCode:this._password});default:un(t,"internal-error")}})}_linkToIdToken(t,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(t,r,"signUpPassword",KF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JF(t,{idToken:n,email:this._email,oobCode:this._password});default:un(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function gm(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithIdp",or(e,t))})}function XF(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(e){let t=ro(io(e)).link,n=t?ro(io(t)).deep_link_id:null,r=ro(io(e)).deep_link_id;return(r?ro(io(r)).link:null)||r||n||t||e}var tu=class e{constructor(t){let n=ro(io(t)),r=n.apiKey??null,i=n.oobCode??null,o=XF(n.mode??null);N(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){let n=eL(t);try{return new e(n)}catch{return null}}};var DE=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return Hs._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=tu.parseLink(r);return N(i,"argument-error"),Hs._fromEmailAndCode(n,i.code,i.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),nu=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var xm=class extends nu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function tL(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signUp",or(e,t))})}var so=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return f(this,null,function*(){let o=yield rr._fromIdTokenResponse(t,r,i),s=GI(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return f(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=GI(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function GI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Nm=class e extends Je{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function TE(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nm._fromErrorAndOperation(e,o,t,r):o})}function nL(e,t,n=!1){return f(this,null,function*(){let r=yield oo(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return so._forOperation(e,"link",r)})}function rL(e,t,n=!1){return f(this,null,function*(){let{auth:r}=e;if(Xe(r.app))return Promise.reject(cn(r));let i="reauthenticate";try{let o=yield oo(e,TE(r,i,t,e),n);N(o.idToken,r,"internal-error");let s=Bm(o.idToken);N(s,r,"internal-error");let{sub:a}=s;return N(e.uid===a,r,"user-mismatch"),so._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&un(r,"user-mismatch"),o}})}function SE(e,t,n=!1){return f(this,null,function*(){if(Xe(e.app))return Promise.reject(cn(e));let r="signIn",i=yield TE(e,r,t),o=yield so._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function ME(e,t){return f(this,null,function*(){return SE(Zr(e),t)})}function AE(e){return f(this,null,function*(){let t=Zr(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Hm(e,t,n){return f(this,null,function*(){if(Xe(e.app))return Promise.reject(cn(e));let r=Zr(e),s=yield Am(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tL,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&AE(e),c}),a=yield so._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function zm(e,t,n){return Xe(e.app)?Promise.reject(cn(e)):ME(ve(e),DE.credential(t,n)).catch(r=>f(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&AE(e),r}))}function Wm(e,t){let n=ve(e);return Xe(n.auth.app)?Promise.reject(cn(n.auth)):iL(n,t,null)}function iL(e,t,n){return f(this,null,function*(){let{auth:r}=e,o={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(o.email=t),n&&(o.password=n);let s=yield oo(e,YF(r,o));yield e._updateTokensIfNecessary(s,!0)})}function xE(e,t,n,r){return ve(e).onIdTokenChanged(t,n,r)}function NE(e,t,n){return ve(e).beforeAuthStateChanged(t,n)}function Gm(e){return f(this,null,function*(){return ve(e).delete()})}var ru="__sak";var iu=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var oL=1e3,sL=10,aL=(()=>{class e extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_E(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);VF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,sL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},oL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield fr(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield fr(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield fr(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),PE=aL;var cL=(()=>{class e extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),qm=cL;function lL(e){return Promise.all(e.map(t=>f(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var uL=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>f(this,null,function*(){return u(r.origin,s)})),l=yield lL(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function RE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var Pm=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=RE("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ln(){return window}function dL(e){ln().location.href=e}function OE(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}function hL(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function fL(){return navigator?.serviceWorker?.controller||null}function pL(){return OE()?self:null}var kE="firebaseLocalStorageDb",mL=1,ou="firebaseLocalStorage",FE="fbase_key",Qr=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function cu(e,t){return e.transaction([ou],t?"readwrite":"readonly").objectStore(ou)}function gL(){let e=indexedDB.deleteDatabase(kE);return new Qr(e).toPromise()}function Rm(){let e=indexedDB.open(kE,mL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(ou,{keyPath:FE})}catch(i){n(i)}}),e.addEventListener("success",()=>f(this,null,function*(){let r=e.result;r.objectStoreNames.contains(ou)?t(r):(r.close(),yield gL(),t(yield Rm()))}))})}function qI(e,t,n){return f(this,null,function*(){let r=cu(e,!0).put({[FE]:t,value:n});return new Qr(r).toPromise()})}function _L(e,t){return f(this,null,function*(){let n=cu(e,!1).get(t),r=yield new Qr(n).toPromise();return r===void 0?null:r.value})}function YI(e,t){let n=cu(e,!0).delete(t);return new Qr(n).toPromise()}var vL=800,yL=3,wL=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield Rm(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>yL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return OE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=uL._getInstance(pL()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){if(this.activeServiceWorker=yield hL(),!this.activeServiceWorker)return;this.sender=new Pm(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||fL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Rm();return yield qI(n,ru,"1"),yield YI(n,ru),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>qI(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>_L(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>YI(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(o=>{let s=cu(o,!1).getAll();return new Qr(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),LE=wL;var uq=wE("rcb"),dq=new Kr(3e4,6e4);function bL(e,t){return t?Mn(t):(N(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var zs=class extends $s{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gm(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gm(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gm(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function CL(e){return SE(e.auth,new zs(e),e.bypassAuthState)}function IL(e){let{auth:t,user:n}=e;return N(n,t,"internal-error"),rL(n,new zs(e),e.bypassAuthState)}function EL(e){return f(this,null,function*(){let{auth:t,user:n}=e;return N(n,t,"internal-error"),nL(n,new zs(e),e.bypassAuthState)})}var Om=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>f(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return EL;case"reauthViaPopup":case"reauthViaRedirect":return IL;default:un(this.auth,"internal-error")}}resolve(t){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hq=new Kr(2e3,1e4);var DL="pendingRedirect",ql=new Map,km=class e extends Om{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let t=ql.get(this.auth._key());if(!t){try{let r=(yield TL(this.resolver,this.auth))?yield fr(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}ql.set(this.auth._key(),t)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return f(this,null,function*(){if(t.type==="signInViaRedirect")return fr(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,fr(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function TL(e,t){return f(this,null,function*(){let n=AL(t),r=ML(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function SL(e,t){ql.set(e._key(),t)}function ML(e){return Mn(e._redirectPersistence)}function AL(e){return Gl(DL,e.config.apiKey,e.name)}function xL(e,t,n=!1){return f(this,null,function*(){if(Xe(e.app))return Promise.reject(cn(e));let r=Zr(e),i=bL(r,t),s=yield new km(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var NL=10*60*1e3,Fm=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!PL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!VE(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Yr(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=NL&&this.cachedEventUids.clear(),this.cachedEventUids.has(KI(t))}saveEventToCache(t){this.cachedEventUids.add(KI(t)),this.lastProcessedEventTime=Date.now()}};function KI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function VE({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function PL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VE(e);default:return!1}}function RL(n){return f(this,arguments,function*(e,t={}){return An(e,"GET","/v1/projects",t)})}var OL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kL=/^https?/;function FL(e){return f(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield RL(e);for(let n of t)try{if(LL(n))return}catch{}un(e,"unauthorized-domain")})}function LL(e){let t=vm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!kL.test(n))return!1;if(OL.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var VL=new Kr(3e4,6e4);function QI(){let e=ln().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function jL(e){return new Promise((t,n)=>{function r(){QI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{QI(),n(Yr(e,"network-request-failed"))},timeout:VL.get()})}if(ln().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ln().gapi?.load)r();else{let i=wE("iframefcb");return ln()[i]=()=>{gapi.load?r():n(Yr(e,"network-request-failed"))},yE(`${HF()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Yl=null,t})}var Yl=null;function UL(e){return Yl=Yl||jL(e),Yl}var BL=new Kr(5e3,15e3),$L="__/auth/iframe",HL="emulator/auth/iframe",zL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GL(e){let t=e.config;N(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?Um(t,HL):`https://${e.config.authDomain}/${$L}`,r={apiKey:t.apiKey,appName:e.name,v:tr},i=WL.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${$r(r).slice(1)}`}function qL(e){return f(this,null,function*(){let t=yield UL(e),n=ln().gapi;return N(n,e,"internal-error"),t.open({where:document.body,url:GL(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zL,dontclear:!0},r=>new Promise((i,o)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Yr(e,"network-request-failed"),a=ln().setTimeout(()=>{o(s)},BL.get());function c(){ln().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var YL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KL=500,QL=600,ZL="_blank",JL="http://localhost",su=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function XL(e,t,n,r=KL,i=QL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=O(g({},YL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ze().toLowerCase();n&&(a=hE(l)?ZL:n),uE(l)&&(t=t||JL,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(LF(l)&&a!=="_self")return eV(t||"",a),new su(null);let d=window.open(t||"",a,u);N(d,e,"popup-blocked");try{d.focus()}catch{}return new su(d)}function eV(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var tV="__/auth/handler",nV="emulator/auth/handler",rV=encodeURIComponent("fac");function ZI(e,t,n,r,i,o){return f(this,null,function*(){N(e.config.authDomain,e,"auth-domain-config-required"),N(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tr,eventId:i};if(t instanceof nu){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",xs(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof xm){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${rV}=${encodeURIComponent(c)}`:"";return`${iV(e)}?${$r(a).slice(1)}${l}`})}function iV({config:e}){return e.emulator?Um(e,nV):`https://${e.authDomain}/${tV}`}var _m="webStorageSupport",Lm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qm,this._completeRedirectFn=xL,this._overrideRedirectResult=SL}_openPopup(t,n,r,i){return f(this,null,function*(){ir(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield ZI(t,n,r,vm(),i);return XL(t,o,RE())})}_openRedirect(t,n,r,i){return f(this,null,function*(){yield this._originValidation(t);let o=yield ZI(t,n,r,vm(),i);return dL(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ir(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return f(this,null,function*(){let n=yield qL(t),r=new Fm(t);return n.register("authEvent",i=>(N(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_m,{type:_m},i=>{let o=i?.[0]?.[_m];o!==void 0&&n(!!o),un(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _E()||dE()||$m()}},jE=Lm;var JI="@firebase/auth",XI="1.11.0";var Vm=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function oV(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sV(e){ct(new Pe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;N(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vE(e)},l=new Dm(r,i,o,c);return WF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ct(new Pe("auth-internal",t=>{let n=Zr(t.getProvider("auth").getImmediate());return(r=>new Vm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(JI,XI,oV(e)),Ve(JI,XI,"esm2020")}var aV=5*60,cV=Up("authIdTokenMaxAge")||aV,eE=null,lV=e=>t=>f(void 0,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cV)return;let i=n?.token;eE!==i&&(eE=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Jr(e=zr()){let t=$t(e,"auth");if(t.isInitialized())return t.getImmediate();let n=CE(e,{popupRedirectResolver:jE,persistence:[LE,PE,qm]}),r=Up("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=lV(o.toString());NE(n,s,()=>s(n.currentUser)),xE(n,a=>s(a))}}let i=Vp("auth");return i&&IE(n,`http://${i}`),n}function uV(){return document.getElementsByTagName("head")?.[0]??document}BF({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=Yr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",uV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sV("Browser");var UE="@firebase/database",BE="1.1.0";var Qg="";function dV(e){Qg=e}var tg=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),De(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:no(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ng=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Bt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var yD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tg(t)}}catch{}return new ng},ei=yD("localStorage"),rg=yD("sessionStorage");var lo=new sn("@firebase/database"),hV=function(){let e=1;return function(){return e++}}(),wD=function(e){let t=KC(e),n=new Ml;n.update(t);let r=n.digest();return Al.encodeByteArray(r)},da=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=da.apply(null,r):typeof r=="object"?t+=De(r):t+=r,t+=" "}return t},ti=null,$E=!0,fV=function(e,t){v(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(lo.logLevel=ne.VERBOSE,ti=lo.log.bind(lo),t&&rg.set("logging_enabled",!0)):typeof e=="function"?ti=e:(ti=null,rg.remove("logging_enabled"))},je=function(...e){if($E===!0&&($E=!1,ti===null&&rg.get("logging_enabled")===!0&&fV(!0)),ti){let t=da.apply(null,e);ti(t)}},ha=function(e){return function(...t){je(e,...t)}},ig=function(...e){let t="FIREBASE INTERNAL ERROR: "+da(...e);lo.error(t)},xn=function(...e){let t=`FIREBASE FATAL ERROR: ${da(...e)}`;throw lo.error(t),new Error(t)},tt=function(...e){let t="FIREBASE WARNING: "+da(...e);lo.warn(t)},pV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zg=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},mV=function(e){if(on()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ho="[MIN_NAME]",ni="[MAX_NAME]",ii=function(e,t){if(e===t)return 0;if(e===ho||t===ni)return-1;if(t===ho||e===ni)return 1;{let n=HE(e),r=HE(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},gV=function(e,t){return e===t?0:e<t?-1:1},Gs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+De(t))},Jg=function(e){if(typeof e!="object"||e===null)return De(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=De(t[r]),n+=":",n+=Jg(e[t[r]]);return n+="}",n},bD=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ue(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var CD=function(e){v(!Zg(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},_V=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yV(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var wV=new RegExp("^-?(0*)\\d{1,10}$"),bV=-2147483648,CV=2147483647,HE=function(e){if(wV.test(e)){let t=Number(e);if(t>=bV&&t<=CV)return t}return null},bo=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw tt("Exception was thrown by user callback.",n),t},Math.floor(0))}},IV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zs=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var og=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Xe(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var sg=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(t)}},Js=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),uu="5",ID="v",ED="s",DD="r",TD="f",SD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MD="ls",AD="p",ag="ac",xD="websocket",ND="long_polling";var du=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ei.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ei.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function EV(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function PD(e,t,n){v(typeof t=="string","typeof type must == string"),v(typeof n=="object","typeof params must == object");let r;if(t===xD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===ND)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);EV(e)&&(n.ns=e.namespace);let i=[];return Ue(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var cg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Bt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return VC(this.counters_)}};var Ym={},Km={};function Xg(e){let t=e.toString();return Ym[t]||(Ym[t]=new cg),Ym[t]}function DV(e,t){let n=e.toString();return Km[n]||(Km[n]=t()),Km[n]}var lg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&bo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var zE="start",TV="close",SV="pLPCommand",MV="pRTLPCB",RD="id",OD="pw",kD="ser",AV="cb",xV="seg",NV="ts",PV="d",RV="dframe",FD=1870,LD=30,OV=FD-LD,kV=25e3,FV=3e4,ug=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ha(t),this.stats_=Xg(n),this.urlFn=c=>(this.appCheckToken&&(c[ag]=this.appCheckToken),PD(n,ND,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(FV)),mV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dg((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===zE)this.id=a,this.password=c;else if(s===TV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[zE]="t",r[kD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[AV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ID]=uu,this.transportSessionId&&(r[ED]=this.transportSessionId),this.lastSessionId&&(r[MD]=this.lastSessionId),this.applicationId&&(r[AD]=this.applicationId),this.appCheckToken&&(r[ag]=this.appCheckToken),typeof location<"u"&&location.hostname&&SD.test(location.hostname)&&(r[DD]=TD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return on()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_V()&&!vV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=De(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Fp(n),i=bD(r,OV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(on())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[RV]="t",r[RD]=t,r[OD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=De(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},dg=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,on())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=hV(),window[SV+this.uniqueCallbackIdentifier]=t,window[MV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){je("frame writing exception"),a.stack&&je(a.stack),je(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||je("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[RD]=this.myID,t[OD]=this.myPW,t[kD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+LD+r.length<=FD;){let s=this.pendingSegs.shift();r=r+"&"+xV+i+"="+s.seg+"&"+NV+i+"="+s.ts+"&"+PV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(kV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){on()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{je("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var LV=16384,VV=45e3,hu=null;typeof MozWebSocket<"u"?hu=MozWebSocket:typeof WebSocket<"u"&&(hu=WebSocket);var qs=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ha(this.connId),this.stats_=Xg(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[ID]=uu,!on()&&typeof location<"u"&&location.hostname&&SD.test(location.hostname)&&(a[DD]=TD),r&&(a[ED]=r),i&&(a[MD]=i),o&&(a[ag]=o),s&&(a[AD]=s),PD(n,xD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ei.set("previous_websocket_failure",!0);try{let i;if(on()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${uu}/${Qg}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new hu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&hu!==null&&!e.forceDisallow_}static previouslyFailed(){return ei.isInMemoryStorage||ei.get("previous_websocket_failure")===!0}markConnectionHealthy(){ei.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=no(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(v(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=De(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=bD(r,LV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(VV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),jV=(()=>{class e{static get ALL_TRANSPORTS(){return[ug,qs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=qs&&qs.isAvailable(),i=r&&!qs.previouslyFailed();if(n.webSocketOnly&&(r||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qs];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),UV=6e4,BV=5e3,$V=10*1024,HV=100*1024,Qm="t",WE="d",zV="s",GE="r",WV="e",qE="o",YE="a",KE="n",QE="p",GV="h",hg=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ha("c:"+this.id+":"),this.transportManager_=new jV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$V?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Qm in t){let n=t[Qm];n===YE?this.upgradeIfSecondaryHealthy_():n===GE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Gs("t",t),r=Gs("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:QE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:YE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Gs("t",t),r=Gs("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Gs(Qm,t);if(WE in t){let r=t[WE];if(n===GV){let i=g({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===zV?this.onConnectionShutdown_(r):n===GE?this.onReset_(r):n===WV?ig("Server Error: "+r):n===qE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ig("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),uu!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(BV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:QE,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ei.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fu=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var pu=class{constructor(t){this.allowedEvents_=t,this.listeners_={},v(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){v(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var mu=class e extends pu{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!As()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return v(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var ZE=32,JE=768,X=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function Q(){return new X("")}function B(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function lr(e){return e.pieces_.length-e.pieceNum_}function le(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new X(e.pieces_,t)}function e_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function qV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function na(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function VD(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new X(t,0)}function pe(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof X)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new X(n,0)}function z(e){return e.pieceNum_>=e.pieces_.length}function et(e,t){let n=B(e),r=B(t);if(n===null)return t;if(n===r)return et(le(e),le(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function YV(e,t){let n=na(e,0),r=na(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=ii(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function t_(e,t){if(lr(e)!==lr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Mt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(lr(e)>lr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var fg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=na(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rs(this.parts_[r]);jD(this)}};function KV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Rs(t),jD(e)}function QV(e){let t=e.parts_.pop();e.byteLength_-=Rs(t),e.parts_.length>0&&(e.byteLength_-=1)}function jD(e){if(e.byteLength_>JE)throw new Error(e.errorPrefix_+"has a key path longer than "+JE+" bytes ("+e.byteLength_+").");if(e.parts_.length>ZE)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZE+") or object contains a cycle "+Xr(e))}function Xr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var pg=class e extends pu{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return v(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ys=1e3,ZV=60*5*1e3,XE=30*1e3,JV=1.3,XV=3e4,ej="server_kill",eD=3,n_=(()=>{class e extends fu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=ha("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ys,this.maxReconnectDelay_=ZV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!on())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&mu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(De(s)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Dn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Bt(n,"w")){let i=Br(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||qC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=XE)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=GC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+De(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ig("Unrecognized action received from server: "+De(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>XV&&(this.reconnectDelay_=Ys),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*JV)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){v(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?je("getToken() completed but was canceled"):(je("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,c=new hg(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{tt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(ej)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&tt(h),l())}}})}interrupt(n){je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],xs(this.interruptReasons_)&&(this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Jg(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new X(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eD&&(this.reconnectDelay_=XE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";on()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Qg.replace(/\./g,"-")]=1,As()?n["framework.cordova"]=1:Rl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=mu.getInstance().currentlyOnline();return xs(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),$=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var fo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new $(ho,t),i=new $(ho,n);return this.compare(r,i)!==0}minPost(){return $.MIN}};var lu,gu=class extends fo{static get __EMPTY_NODE(){return lu}static set __EMPTY_NODE(t){lu=t}compare(t,n){return ii(t.name,n.name)}isDefinedOn(t){throw Ur("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return $.MIN}maxPost(){return new $(ni,lu)}makePost(t,n){return v(typeof t=="string","KeyIndex indexValue must always be a string."),new $(t,lu)}toString(){return".key"}},uo=new gu;var co=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ht=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??At.EMPTY_NODE,this.right=s??At.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),mg=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Ht(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},At=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ht.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ht.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new co(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new co(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new co(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new co(this.root_,null,this.comparator_,!0,t)}};At.EMPTY_NODE=new mg;function tj(e,t){return ii(e.name,t.name)}function r_(e,t){return ii(e,t)}var gg;function nj(e){gg=e}var UD=function(e){return typeof e=="number"?"number:"+CD(e):"string:"+e},BD=function(e){if(e.isLeafNode()){let t=e.val();v(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Bt(t,".sv"),"Priority must be a string or number.")}else v(e===gg||e.isEmpty(),"priority of unexpected type.");v(e===gg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var tD,po=(()=>{class e{static set __childrenNodeConstructor(n){tD=n}static get __childrenNodeConstructor(){return tD}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return z(n)?this:B(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=B(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(v(i!==".priority"||lr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+UD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=CD(this.value_):n+=this.value_,this.lazyHash_=wD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(v(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return v(o>=0,"Unknown leaf type: "+r),v(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),$D,HD;function rj(e){$D=e}function ij(e){HD=e}var _g=class extends fo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?ii(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return $.MIN}maxPost(){return new $(ni,new po("[PRIORITY-POST]",HD))}makePost(t,n){let r=$D(t);return new $(n,new po("[PRIORITY-POST]",r))}toString(){return".priority"}},me=new _g;var oj=Math.log(2),vg=class{constructor(t){let n=o=>parseInt(Math.log(o)/oj,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},_u=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=e[c],h=n?n(d):d,new Ht(h,d.node,Ht.BLACK,null,null);{let p=parseInt(u/2,10)+c,m=i(c,p),_=i(p+1,l);return d=e[p],h=n?n(d):d,new Ht(h,d.node,Ht.BLACK,m,_)}},o=function(c){let l=null,u=null,d=e.length,h=function(m,_){let I=d-m,S=d;d-=m;let ue=i(I+1,S),H=e[I],Re=n?n(H):H;p(new Ht(Re,H.node,_,null,ue))},p=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let _=c.nextBitIsOne(),I=Math.pow(2,c.count-(m+1));_?h(I,Ht.BLACK):(h(I,Ht.BLACK),h(I,Ht.RED))}return u},s=new vg(e.length),a=o(s);return new At(r||t,a)};var Zm,ao={},mo=class e{static get Default(){return v(ao&&me,"ChildrenNode.ts has not been loaded"),Zm=Zm||new e({".priority":ao},{".priority":me}),Zm}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Br(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof At?n:null}hasIndex(t){return Bt(this.indexSet_,t.toString())}addIndex(t,n){v(t!==uo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator($.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=_u(r,t.getCompare()):a=ao;let c=t.toString(),l=g({},this.indexSet_);l[c]=t;let u=g({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Ns(this.indexes_,(i,o)=>{let s=Br(this.indexSet_,o);if(v(s,"Missing index implementation for "+o),i===ao)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator($.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),_u(a,s.getCompare())}else return ao;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new $(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Ns(this.indexes_,i=>{if(i===ao)return i;{let o=n.get(t.name);return o?i.remove(new $(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ks,L=(()=>{class e{static get EMPTY_NODE(){return Ks||(Ks=new e(new At(r_),null,mo.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&BD(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ks}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ks:r}}getChild(n){let r=B(n);return r===null?this:this.getImmediateChild(r).getChild(le(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(v(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new $(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ks:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=B(n);if(i===null)return r;{v(B(n)!==".priority"||lr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(le(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(me,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+UD(this.getPriority().val())+":"),this.forEachChild(me,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":wD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new $(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new $(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new $(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===fa?-1:0}withIndex(n){if(n===uo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===uo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(me),o=r.getIterator(me),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===uo?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),yg=class extends L{constructor(){super(new At(r_),L.EMPTY_NODE,mo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return L.EMPTY_NODE}isEmpty(){return!1}},fa=new yg;Object.defineProperties($,{MIN:{value:new $(ho,L.EMPTY_NODE)},MAX:{value:new $(ni,fa)}});gu.__EMPTY_NODE=L.EMPTY_NODE;po.__childrenNodeConstructor=L;nj(fa);ij(fa);var sj=!0;function Se(e,t=null){if(e===null)return L.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),v(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new po(n,Se(t))}if(!(e instanceof Array)&&sj){let n=[],r=!1;if(Ue(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Se(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new $(s,c)))}}),n.length===0)return L.EMPTY_NODE;let o=_u(n,tj,s=>s.name,r_);if(r){let s=_u(n,me.getCompare());return new L(o,Se(t),new mo({".priority":s},{".priority":me}))}else return new L(o,Se(t),mo.Default)}else{let n=L.EMPTY_NODE;return Ue(e,(r,i)=>{if(Bt(e,r)&&r.substring(0,1)!=="."){let o=Se(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Se(t))}}rj(Se);var wg=class extends fo{constructor(t){super(),this.indexPath_=t,v(!z(t)&&B(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?ii(t.name,n.name):o}makePost(t,n){let r=Se(t),i=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new $(n,i)}maxPost(){let t=L.EMPTY_NODE.updateChild(this.indexPath_,fa);return new $(ni,t)}toString(){return na(this.indexPath_,0).join("/")}};var bg=class extends fo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?ii(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return $.MIN}maxPost(){return $.MAX}makePost(t,n){let r=Se(t);return new $(n,r)}toString(){return".value"}},aj=new bg;function zD(e){return{type:"value",snapshotNode:e}}function go(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ra(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ia(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function cj(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var oa=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){v(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(ra(n,a)):v(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(go(n,r)):s.trackChildChange(ia(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(me,(i,o)=>{n.hasChild(i)||r.trackChildChange(ra(i,o))}),n.isLeafNode()||n.forEachChild(me,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(ia(i,o,s))}else r.trackChildChange(go(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?L.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vu=class e{constructor(t){this.indexedFilter_=new oa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new $(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(L.EMPTY_NODE);let o=this;return n.forEachChild(me,(s,a)=>{o.matches(new $(s,a))||(i=i.updateImmediateChild(s,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Cg=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new $(n,r))||(r=L.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=L.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(L.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();let a=t;v(a.numChildren()===this.limit_,"");let c=new $(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let p=h==null?1:s(h,c);if(u&&!r.isEmpty()&&p>=0)return o?.trackChildChange(ia(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(ra(n,d));let _=a.updateImmediateChild(n,L.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(go(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(ra(l.name,l.node)),o.trackChildChange(go(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,L.EMPTY_NODE)):t}};var Ig=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ho}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ni}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===me}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function lj(e){return e.loadsAllData()?new oa(e.getIndex()):e.hasLimit()?new Cg(e):new vu(e)}function nD(e){let t={};if(e.isDefault())return t;let n;if(e.index_===me?n="$priority":e.index_===aj?n="$value":e.index_===uo?n="$key":(v(e.index_ instanceof wg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=De(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=De(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+De(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=De(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+De(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function rD(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==me&&(t.i=e.index_.toString()),t}var Eg=class e extends fu{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(v(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ha("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=nD(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Br(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=nD(t._queryParams),r=t._path.toString(),i=new Dn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+$r(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=no(a.responseText)}catch{tt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Dg=class{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function yu(){return{value:null,children:new Map}}function WD(e,t,n){if(z(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=B(t);e.children.has(r)||e.children.set(r,yu());let i=e.children.get(r);t=le(t),WD(i,t,n)}}function Tg(e,t,n){e.value!==null?n(t,e.value):uj(e,(r,i)=>{let o=new X(t.toString()+"/"+r);Tg(i,o,n)})}function uj(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Sg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=g({},t);return this.last_&&Ue(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var iD=10*1e3,dj=30*1e3,hj=5*60*1e3,Mg=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Sg(t);let r=iD+(dj-iD)*Math.random();Zs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Ue(t,(i,o)=>{o>0&&Bt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*hj))}};var dn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(dn||{});function i_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function o_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function s_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Ag=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=dn.ACK_USER_WRITE,this.source=i_()}operationForChild(t){if(z(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new X(t));return new e(Q(),n,this.revert)}}else return v(B(this.path)===t,"operationForChild called for unrelated child."),new e(le(this.path),this.affectedTree,this.revert)}};var wu=class e{constructor(t,n){this.source=t,this.path=n,this.type=dn.LISTEN_COMPLETE}operationForChild(t){return z(this.path)?new e(this.source,Q()):new e(this.source,le(this.path))}};var _o=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=dn.OVERWRITE}operationForChild(t){return z(this.path)?new e(this.source,Q(),this.snap.getImmediateChild(t)):new e(this.source,le(this.path),this.snap)}};var sa=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=dn.MERGE}operationForChild(t){if(z(this.path)){let n=this.children.subtree(new X(t));return n.isEmpty()?null:n.value?new _o(this.source,Q(),n.value):new e(this.source,Q(),n)}else return v(B(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var hn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(z(t))return this.isFullyInitialized()&&!this.filtered_;let n=B(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var xg=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function fj(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(cj(s.childName,s.snapshotNode))}),Qs(e,i,"child_removed",t,r,n),Qs(e,i,"child_added",t,r,n),Qs(e,i,"child_moved",o,r,n),Qs(e,i,"child_changed",t,r,n),Qs(e,i,"value",t,r,n),i}function Qs(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>mj(e,a,c)),s.forEach(a=>{let c=pj(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function pj(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function mj(e,t,n){if(t.childName==null||n.childName==null)throw Ur("Should only compare child_ events.");let r=new $(t.childName,t.snapshotNode),i=new $(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Ou(e,t){return{eventCache:e,serverCache:t}}function Xs(e,t,n,r){return Ou(new hn(t,n,r),e.serverCache)}function GD(e,t,n,r){return Ou(e.eventCache,new hn(t,n,r))}function bu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ri(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Jm,gj=()=>(Jm||(Jm=new At(gV)),Jm),nt=class e{static fromObject(t){let n=new e(null);return Ue(t,(r,i)=>{n=n.set(new X(r),i)}),n}constructor(t,n=gj()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(z(t))return null;{let r=B(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(le(t),n);return o!=null?{path:pe(new X(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(z(t))return this;{let n=B(t),r=this.children.get(n);return r!==null?r.subtree(le(t)):new e(null)}}set(t,n){if(z(t))return new e(n,this.children);{let r=B(t),o=(this.children.get(r)||new e(null)).set(le(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(z(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=B(t),r=this.children.get(n);if(r){let i=r.remove(le(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(z(t))return this.value;{let n=B(t),r=this.children.get(n);return r?r.get(le(t)):null}}setTree(t,n){if(z(t))return n;{let r=B(t),o=(this.children.get(r)||new e(null)).setTree(le(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(Q(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(pe(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Q(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(z(t))return null;{let o=B(t),s=this.children.get(o);return s?s.findOnPath_(le(t),pe(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Q(),n)}foreachOnPath_(t,n,r){if(z(t))return this;{this.value&&r(n,this.value);let i=B(t),o=this.children.get(i);return o?o.foreachOnPath_(le(t),pe(n,i),r):new e(null)}}foreach(t){this.foreach_(Q(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(pe(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var zt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new nt(null))}};function ea(e,t,n){if(z(t))return new zt(new nt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=et(i,t);return o=o.updateChild(s,n),new zt(e.writeTree_.set(i,o))}else{let i=new nt(n),o=e.writeTree_.setTree(t,i);return new zt(o)}}}function Ng(e,t,n){let r=e;return Ue(n,(i,o)=>{r=ea(r,pe(t,i),o)}),r}function oD(e,t){if(z(t))return zt.empty();{let n=e.writeTree_.setTree(t,new nt(null));return new zt(n)}}function Pg(e,t){return oi(e,t)!=null}function oi(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(et(n.path,t)):null}function sD(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(me,(r,i)=>{t.push(new $(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new $(r,i.value))}),t}function ar(e,t){if(z(t))return e;{let n=oi(e,t);return n!=null?new zt(new nt(n)):new zt(e.writeTree_.subtree(t))}}function Rg(e){return e.writeTree_.isEmpty()}function vo(e,t){return qD(Q(),e.writeTree_,t)}function qD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=qD(pe(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(pe(e,".priority"),r)),n}}function ku(e,t){return ZD(t,e)}function _j(e,t,n,r,i){v(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ea(e.visibleWrites,t,n)),e.lastWriteId=r}function vj(e,t,n,r){v(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Ng(e.visibleWrites,t,n),e.lastWriteId=r}function yj(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function wj(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);v(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&bj(a,r.path)?i=!1:Mt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return Cj(e),!0;if(r.snap)e.visibleWrites=oD(e.visibleWrites,r.path);else{let a=r.children;Ue(a,c=>{e.visibleWrites=oD(e.visibleWrites,pe(r.path,c))})}return!0}else return!1}function bj(e,t){if(e.snap)return Mt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Mt(pe(e.path,n),t))return!0;return!1}function Cj(e){e.visibleWrites=YD(e.allWrites,Ij,Q()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ij(e){return e.visible}function YD(e,t,n){let r=zt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Mt(n,s)?(a=et(n,s),r=ea(r,a,o.snap)):Mt(s,n)&&(a=et(s,n),r=ea(r,Q(),o.snap.getChild(a)));else if(o.children){if(Mt(n,s))a=et(n,s),r=Ng(r,a,o.children);else if(Mt(s,n))if(a=et(s,n),z(a))r=Ng(r,Q(),o.children);else{let c=Br(o.children,B(a));if(c){let l=c.getChild(le(a));r=ea(r,Q(),l)}}}else throw Ur("WriteRecord should have .snap or .children")}}return r}function KD(e,t,n,r,i){if(!r&&!i){let o=oi(e.visibleWrites,t);if(o!=null)return o;{let s=ar(e.visibleWrites,t);if(Rg(s))return n;if(n==null&&!Pg(s,Q()))return null;{let a=n||L.EMPTY_NODE;return vo(s,a)}}}else{let o=ar(e.visibleWrites,t);if(!i&&Rg(o))return n;if(!i&&n==null&&!Pg(o,Q()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Mt(l.path,t)||Mt(t,l.path))},a=YD(e.allWrites,s,t),c=n||L.EMPTY_NODE;return vo(a,c)}}}function Ej(e,t,n){let r=L.EMPTY_NODE,i=oi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(me,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=ar(e.visibleWrites,t);return n.forEachChild(me,(s,a)=>{let c=vo(ar(o,new X(s)),a);r=r.updateImmediateChild(s,c)}),sD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=ar(e.visibleWrites,t);return sD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function Dj(e,t,n,r,i){v(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=pe(t,n);if(Pg(e.visibleWrites,o))return null;{let s=ar(e.visibleWrites,o);return Rg(s)?i.getChild(n):vo(s,i.getChild(n))}}function Tj(e,t,n,r){let i=pe(t,n),o=oi(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=ar(e.visibleWrites,i);return vo(s,r.getNode().getImmediateChild(n))}else return null}function Sj(e,t){return oi(e.visibleWrites,t)}function Mj(e,t,n,r,i,o,s){let a,c=ar(e.visibleWrites,t),l=oi(c,Q());if(l!=null)a=l;else if(n!=null)a=vo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=h.getNext();for(;p&&u.length<i;)d(p,r)!==0&&u.push(p),p=h.getNext();return u}else return[]}function Aj(){return{visibleWrites:zt.empty(),allWrites:[],lastWriteId:-1}}function Cu(e,t,n,r){return KD(e.writeTree,e.treePath,t,n,r)}function a_(e,t){return Ej(e.writeTree,e.treePath,t)}function aD(e,t,n,r){return Dj(e.writeTree,e.treePath,t,n,r)}function Iu(e,t){return Sj(e.writeTree,pe(e.treePath,t))}function xj(e,t,n,r,i,o){return Mj(e.writeTree,e.treePath,t,n,r,i,o)}function c_(e,t,n){return Tj(e.writeTree,e.treePath,t,n)}function QD(e,t){return ZD(pe(e.treePath,t),e.writeTree)}function ZD(e,t){return{treePath:e,writeTree:t}}var Og=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;v(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),v(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ia(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,ra(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,go(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ia(r,t.snapshotNode,i.oldSnap));else throw Ur("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var kg=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},JD=new kg,aa=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new hn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return c_(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ri(this.viewCache_),o=xj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function Nj(e){return{filter:e}}function Pj(e,t){v(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),v(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Rj(e,t,n,r,i){let o=new Og,s,a;if(n.type===dn.OVERWRITE){let l=n;l.source.fromUser?s=Fg(e,t,l.path,l.snap,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!z(l.path),s=Eu(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===dn.MERGE){let l=n;l.source.fromUser?s=kj(e,t,l.path,l.children,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Lg(e,t,l.path,l.children,r,i,a,o))}else if(n.type===dn.ACK_USER_WRITE){let l=n;l.revert?s=Vj(e,t,l.path,r,i,o):s=Fj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===dn.LISTEN_COMPLETE)s=Lj(e,t,n.path,r,o);else throw Ur("Unknown operation type: "+n.type);let c=o.getChanges();return Oj(t,s,c),{viewCache:s,changes:c}}function Oj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(zD(bu(t)))}}function XD(e,t,n,r,i,o){let s=t.eventCache;if(Iu(r,n)!=null)return t;{let a,c;if(z(n))if(v(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=ri(t),u=l instanceof L?l:L.EMPTY_NODE,d=a_(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=Cu(r,ri(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=B(n);if(l===".priority"){v(lr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=aD(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=le(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let h=aD(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=c_(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Xs(t,a,s.isFullyInitialized()||z(n),e.filter.filtersNodes())}}function Eu(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(z(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=B(n);if(!c.isCompleteForPath(n)&&lr(n)>1)return t;let m=le(n),I=c.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),p,I,m,JD,null)}let d=GD(t,l,c.isFullyInitialized()||z(n),u.filtersNodes()),h=new aa(i,d,o);return XD(e,d,n,i,h,a)}function Fg(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new aa(i,t,o);if(z(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Xs(t,l,!0,e.filter.filtersNodes());else{let d=B(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Xs(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=le(n),p=a.getNode().getImmediateChild(d),m;if(z(h))m=r;else{let _=u.getCompleteChild(d);_!=null?e_(h)===".priority"&&_.getChild(VD(h)).isEmpty()?m=_:m=_.updateChild(h,r):m=L.EMPTY_NODE}if(p.equals(m))c=t;else{let _=e.filter.updateChild(a.getNode(),d,m,h,u,s);c=Xs(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function cD(e,t){return e.eventCache.isCompleteForChild(t)}function kj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=pe(n,c);cD(t,B(u))&&(a=Fg(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=pe(n,c);cD(t,B(u))||(a=Fg(e,a,u,l,i,o,s))}),a}function lD(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Lg(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;z(n)?l=r:l=new nt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=t.serverCache.getNode().getImmediateChild(d),m=lD(e,p,h);c=Eu(e,c,new X(d),m,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let m=t.serverCache.getNode().getImmediateChild(d),_=lD(e,m,h);c=Eu(e,c,new X(d),_,i,o,s,a)}}),c}function Fj(e,t,n,r,i,o,s){if(Iu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(z(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Eu(e,t,n,c.getNode().getChild(n),i,o,a,s);if(z(n)){let l=new nt(null);return c.getNode().forEachChild(uo,(u,d)=>{l=l.set(new X(u),d)}),Lg(e,t,n,l,i,o,a,s)}else return t}else{let l=new nt(null);return r.foreach((u,d)=>{let h=pe(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Lg(e,t,n,l,i,o,a,s)}}function Lj(e,t,n,r,i){let o=t.serverCache,s=GD(t,o.getNode(),o.isFullyInitialized()||z(n),o.isFiltered());return XD(e,s,n,r,JD,i)}function Vj(e,t,n,r,i,o){let s;if(Iu(r,n)!=null)return t;{let a=new aa(r,t,i),c=t.eventCache.getNode(),l;if(z(n)||B(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Cu(r,ri(t));else{let d=t.serverCache.getNode();v(d instanceof L,"serverChildren would be complete if leaf node"),u=a_(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=B(n),d=c_(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,le(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,L.EMPTY_NODE,le(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Cu(r,ri(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||Iu(r,Q())!=null,Xs(t,l,s,e.filter.filtersNodes())}}var Vg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new oa(r.getIndex()),o=lj(r);this.processor_=Nj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(L.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=new hn(c,s.isFullyInitialized(),i.filtersNodes()),d=new hn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ou(d,u),this.eventGenerator_=new xg(this.query_)}get query(){return this.query_}};function jj(e){return e.viewCache_.serverCache.getNode()}function Uj(e){return bu(e.viewCache_)}function Bj(e,t){let n=ri(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!z(t)&&!n.getImmediateChild(B(t)).isEmpty())?n.getChild(t):null}function uD(e){return e.eventRegistrations_.length===0}function $j(e,t){e.eventRegistrations_.push(t)}function dD(e,t,n){let r=[];if(n){v(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function hD(e,t,n,r){t.type===dn.MERGE&&t.source.queryId!==null&&(v(ri(e.viewCache_),"We should always have a full cache before handling merges"),v(bu(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=Rj(e.processor_,i,t,n,r);return Pj(e.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,e0(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Hj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(me,(o,s)=>{r.push(go(o,s))}),n.isFullyInitialized()&&r.push(zD(n.getNode())),e0(e,r,n.getNode(),t)}function e0(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return fj(e.eventGenerator_,t,n,i)}var Du,Tu=class{constructor(){this.views=new Map}};function zj(e){v(!Du,"__referenceConstructor has already been defined"),Du=e}function Wj(){return v(Du,"Reference.ts has not been loaded"),Du}function Gj(e){return e.views.size===0}function l_(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return v(o!=null,"SyncTree gave us an op for an invalid query."),hD(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(hD(s,t,n,r));return o}}function t0(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Cu(n,i?r:null),c=!1;a?c=!0:r instanceof L?(a=a_(n,r),c=!1):(a=L.EMPTY_NODE,c=!1);let l=Ou(new hn(a,c,!1),new hn(r,i,!1));return new Vg(t,l)}return s}function qj(e,t,n,r,i,o){let s=t0(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),$j(s,n),Hj(s,n)}function Yj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=ur(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(dD(l,n,r)),uD(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(dD(c,n,r)),uD(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!ur(e)&&o.push(new(Wj())(t._repo,t._path)),{removed:o,events:s}}function n0(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function cr(e,t){let n=null;for(let r of e.views.values())n=n||Bj(r,t);return n}function r0(e,t){if(t._queryParams.loadsAllData())return Fu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function i0(e,t){return r0(e,t)!=null}function ur(e){return Fu(e)!=null}function Fu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Su;function Kj(e){v(!Su,"__referenceConstructor has already been defined"),Su=e}function Qj(){return v(Su,"Reference.ts has not been loaded"),Su}var Zj=1,Mu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nt(null),this.pendingWriteTree_=Aj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function o0(e,t,n,r,i){return _j(e.pendingWriteTree_,t,n,r,i),i?Co(e,new _o(i_(),t,n)):[]}function Jj(e,t,n,r){vj(e.pendingWriteTree_,t,n,r);let i=nt.fromObject(n);return Co(e,new sa(i_(),t,i))}function sr(e,t,n=!1){let r=yj(e.pendingWriteTree_,t);if(wj(e.pendingWriteTree_,t)){let o=new nt(null);return r.snap!=null?o=o.set(Q(),!0):Ue(r.children,s=>{o=o.set(new X(s),!0)}),Co(e,new Ag(r.path,o,n))}else return[]}function pa(e,t,n){return Co(e,new _o(o_(),t,n))}function Xj(e,t,n){let r=nt.fromObject(n);return Co(e,new sa(o_(),t,r))}function eU(e,t){return Co(e,new wu(o_(),t))}function tU(e,t,n){let r=d_(e,n);if(r){let i=h_(r),o=i.path,s=i.queryId,a=et(o,t),c=new wu(s_(s),a);return f_(e,o,c)}else return[]}function Au(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||i0(s,t))){let c=Yj(s,t,n,r);Gj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(h,p)=>ur(p));if(u&&!d){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let p=iU(h);for(let m=0;m<p.length;++m){let _=p[m],I=_.query,S=l0(e,_);e.listenProvider_.startListening(ta(I),ca(e,I),S.hashFn,S.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(ta(t),null):l.forEach(h=>{let p=e.queryToTagMap.get(Lu(h));e.listenProvider_.stopListening(ta(h),p)}))}oU(e,l)}return a}function s0(e,t,n,r){let i=d_(e,r);if(i!=null){let o=h_(i),s=o.path,a=o.queryId,c=et(s,t),l=new _o(s_(a),c,n);return f_(e,s,l)}else return[]}function nU(e,t,n,r){let i=d_(e,r);if(i){let o=h_(i),s=o.path,a=o.queryId,c=et(s,t),l=nt.fromObject(n),u=new sa(s_(a),c,l);return f_(e,s,u)}else return[]}function jg(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(h,p)=>{let m=et(h,i);o=o||cr(p,m),s=s||ur(p)});let a=e.syncPointTree_.get(i);a?(s=s||ur(a),o=o||cr(a,Q())):(a=new Tu,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=L.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((p,m)=>{let _=cr(m,Q());_&&(o=o.updateImmediateChild(p,_))}));let l=i0(a,t);if(!l&&!t._queryParams.loadsAllData()){let h=Lu(t);v(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let p=sU();e.queryToTagMap.set(h,p),e.tagToQueryMap.set(p,h)}let u=ku(e.pendingWriteTree_,i),d=qj(a,t,n,u,o,c);if(!l&&!s&&!r){let h=r0(a,t);d=d.concat(aU(e,t,h))}return d}function u_(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=et(s,t),l=cr(a,c);if(l)return l});return KD(i,t,o,n,!0)}function rU(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=et(l,n);r=r||cr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||cr(i,Q()):(i=new Tu,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new hn(r,!0,!1):null,a=ku(e.pendingWriteTree_,t._path),c=t0(i,t,a,o?s.getNode():L.EMPTY_NODE,o);return Uj(c)}function Co(e,t){return a0(t,e.syncPointTree_,null,ku(e.pendingWriteTree_,Q()))}function a0(e,t,n,r){if(z(e.path))return c0(e,t,n,r);{let i=t.get(Q());n==null&&i!=null&&(n=cr(i,Q()));let o=[],s=B(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=QD(r,s);o=o.concat(a0(a,c,l,u))}return i&&(o=o.concat(l_(i,e,r,n))),o}}function c0(e,t,n,r){let i=t.get(Q());n==null&&i!=null&&(n=cr(i,Q()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=QD(r,s),u=e.operationForChild(s);u&&(o=o.concat(c0(u,a,c,l)))}),i&&(o=o.concat(l_(i,e,r,n))),o}function l0(e,t){let n=t.query,r=ca(e,n);return{hashFn:()=>(jj(t)||L.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?tU(e,n._path,r):eU(e,n._path);{let o=yV(i,n);return Au(e,n,null,o)}}}}function ca(e,t){let n=Lu(t);return e.queryToTagMap.get(n)}function Lu(e){return e._path.toString()+"$"+e._queryIdentifier}function d_(e,t){return e.tagToQueryMap.get(t)}function h_(e){let t=e.indexOf("$");return v(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new X(e.substr(0,t))}}function f_(e,t,n){let r=e.syncPointTree_.get(t);v(r,"Missing sync point for query tag that we're tracking");let i=ku(e.pendingWriteTree_,t);return l_(r,n,i,null)}function iU(e){return e.fold((t,n,r)=>{if(n&&ur(n))return[Fu(n)];{let i=[];return n&&(i=n0(n)),Ue(r,(o,s)=>{i=i.concat(s)}),i}})}function ta(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Qj())(e._repo,e._path):e}function oU(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Lu(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function sU(){return Zj++}function aU(e,t,n){let r=t._path,i=ca(e,t),o=l0(e,n),s=e.listenProvider_.startListening(ta(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)v(!ur(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!z(l)&&u&&ur(u))return[Fu(u).query];{let h=[];return u&&(h=h.concat(n0(u).map(p=>p.query))),Ue(d,(p,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(ta(u),ca(e,u))}}return s}var Ug=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Bg=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=pe(this.path_,t);return new e(this.syncTree_,n)}node(){return u_(this.syncTree_,this.path_)}},cU=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},fD=function(e,t,n){if(!e||typeof e!="object")return e;if(v(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return lU(e[".sv"],t,n);if(typeof e[".sv"]=="object")return uU(e[".sv"],t);v(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},lU=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:v(!1,"Unexpected server value: "+e)}},uU=function(e,t,n){e.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&v(!1,"Unexpected increment value: "+r);let i=t.node();if(v(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},u0=function(e,t,n,r){return p_(t,new Bg(n,e),r)},d0=function(e,t,n){return p_(e,new Ug(t),n)};function p_(e,t,n){let r=e.getPriority().val(),i=fD(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=fD(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new po(a,Se(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new po(i))),s.forEachChild(me,(a,c)=>{let l=p_(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var la=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function m_(e,t){let n=t instanceof X?t:new X(t),r=e,i=B(n);for(;i!==null;){let o=Br(r.node.children,i)||{children:{},childCount:0};r=new la(i,r,o),n=le(n),i=B(n)}return r}function Io(e){return e.node.value}function h0(e,t){e.node.value=t,$g(e)}function f0(e){return e.node.childCount>0}function dU(e){return Io(e)===void 0&&!f0(e)}function Vu(e,t){Ue(e.node.children,(n,r)=>{t(new la(n,e,r))})}function p0(e,t,n,r){n&&!r&&t(e),Vu(e,i=>{p0(i,t,!0,r)}),n&&r&&t(e)}function hU(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ma(e){return new X(e.parent===null?e.name:ma(e.parent)+"/"+e.name)}function $g(e){e.parent!==null&&fU(e.parent,e.name,e)}function fU(e,t,n){let r=dU(n),i=Bt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$g(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,$g(e))}var pU=/[\[\].#$\/\u0000-\u001F\u007F]/,mU=/[\[\].#$\u0000-\u001F\u007F]/,Xm=10*1024*1024,g_=function(e){return typeof e=="string"&&e.length!==0&&!pU.test(e)},m0=function(e){return typeof e=="string"&&e.length!==0&&!mU.test(e)},gU=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),m0(e)},_U=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Zg(e)||e&&typeof e=="object"&&Bt(e,".sv")},g0=function(e,t,n,r){r&&t===void 0||ju(Ps(e,"value"),t,n)},ju=function(e,t,n){let r=n instanceof X?new fg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Xr(r));if(typeof t=="function")throw new Error(e+"contains a function "+Xr(r)+" with contents = "+t.toString());if(Zg(t))throw new Error(e+"contains "+t.toString()+" "+Xr(r));if(typeof t=="string"&&t.length>Xm/3&&Rs(t)>Xm)throw new Error(e+"contains a string greater than "+Xm+" utf8 bytes "+Xr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Ue(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!g_(s)))throw new Error(e+" contains an invalid key ("+s+") "+Xr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KV(r,s),ju(e,a,r),QV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Xr(r)+" in addition to actual children.")}},vU=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=na(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!g_(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(YV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Mt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},yU=function(e,t,n,r){if(r&&t===void 0)return;let i=Ps(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Ue(t,(s,a)=>{let c=new X(s);if(ju(i,a,pe(n,c)),e_(c)===".priority"&&!_U(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),vU(i,o)};var _0=function(e,t,n,r){if(!(r&&n===void 0)&&!m0(n))throw new Error(Ps(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},wU=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_0(e,t,n,r)},__=function(e,t){if(B(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},bU=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!g_(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!gU(n))throw new Error(Ps(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Hg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Uu(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!t_(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function v0(e,t,n){Uu(e,n),y0(e,r=>t_(r,t))}function xt(e,t,n){Uu(e,n),y0(e,r=>Mt(r,t)||Mt(t,r))}function y0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(CU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function CU(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();ti&&je("event: "+n.toString()),bo(r)}}}var IU="repo_interrupt",EU=25,zg=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yu(),this.transactionQueueTree_=new la,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function DU(e,t,n){if(e.stats_=Xg(e.repoInfo_),e.forceRestClient_||IV())e.server_=new Eg(e.repoInfo_,(r,i,o,s)=>{pD(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>mD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new n_(e.repoInfo_,t,(r,i,o,s)=>{pD(e,r,i,o,s)},r=>{mD(e,r)},r=>{TU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=DV(e.repoInfo_,()=>new Mg(e.stats_,e.server_)),e.infoData_=new Dg,e.infoSyncTree_=new Mu({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=pa(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),v_(e,"connected",!1),e.serverSyncTree_=new Mu({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);xt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function w0(e){let n=e.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bu(e){return cU({timestamp:w0(e)})}function pD(e,t,n,r,i){e.dataUpdateCount++;let o=new X(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Ns(n,l=>Se(l));s=nU(e.serverSyncTree_,o,c,i)}else{let c=Se(n);s=s0(e.serverSyncTree_,o,c,i)}else if(r){let c=Ns(n,l=>Se(l));s=Xj(e.serverSyncTree_,o,c)}else{let c=Se(n);s=pa(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=yo(e,o)),xt(e.eventQueue_,a,s)}function mD(e,t){v_(e,"connected",t),t===!1&&xU(e)}function TU(e,t){Ue(t,(n,r)=>{v_(e,n,r)})}function v_(e,t,n){let r=new X("/.info/"+t),i=Se(n);e.infoData_.updateSnapshot(r,i);let o=pa(e.infoSyncTree_,r,i);xt(e.eventQueue_,r,o)}function y_(e){return e.nextWriteId_++}function SU(e,t,n){let r=rU(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Se(i).withIndex(t._queryParams.getIndex());jg(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=pa(e.serverSyncTree_,t._path,o);else{let a=ca(e.serverSyncTree_,t);s=s0(e.serverSyncTree_,t._path,o,a)}return xt(e.eventQueue_,t._path,s),Au(e.serverSyncTree_,t,n,null,!0),o},i=>(ga(e,"get for query "+De(t)+" failed: "+i),Promise.reject(new Error(i))))}function MU(e,t,n,r,i){ga(e,"set",{path:t.toString(),value:n,priority:r});let o=Bu(e),s=Se(n,r),a=u_(e.serverSyncTree_,t),c=d0(s,a,o),l=y_(e),u=o0(e.serverSyncTree_,t,c,l,!0);Uu(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,p)=>{let m=h==="ok";m||tt("set at "+t+" failed: "+h);let _=sr(e.serverSyncTree_,l,!m);xt(e.eventQueue_,t,_),Wg(e,i,h,p)});let d=b_(e,t);yo(e,d),xt(e.eventQueue_,d,[])}function AU(e,t,n,r){ga(e,"update",{path:t.toString(),value:n});let i=!0,o=Bu(e),s={};if(Ue(n,(a,c)=>{i=!1,s[a]=u0(pe(t,a),Se(c),e.serverSyncTree_,o)}),i)je("update() called with empty data.  Don't do anything."),Wg(e,r,"ok",void 0);else{let a=y_(e),c=Jj(e.serverSyncTree_,t,s,a);Uu(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||tt("update at "+t+" failed: "+l);let h=sr(e.serverSyncTree_,a,!d),p=h.length>0?yo(e,t):t;xt(e.eventQueue_,p,h),Wg(e,r,l,u)}),Ue(n,l=>{let u=b_(e,pe(t,l));yo(e,u)}),xt(e.eventQueue_,t,[])}}function xU(e){ga(e,"onDisconnectEvents");let t=Bu(e),n=yu();Tg(e.onDisconnect_,Q(),(i,o)=>{let s=u0(i,o,e.serverSyncTree_,t);WD(n,i,s)});let r=[];Tg(n,Q(),(i,o)=>{r=r.concat(pa(e.serverSyncTree_,i,o));let s=b_(e,i);yo(e,s)}),e.onDisconnect_=yu(),xt(e.eventQueue_,Q(),r)}function NU(e,t,n){let r;B(t._path)===".info"?r=jg(e.infoSyncTree_,t,n):r=jg(e.serverSyncTree_,t,n),v0(e.eventQueue_,t._path,r)}function gD(e,t,n){let r;B(t._path)===".info"?r=Au(e.infoSyncTree_,t,n):r=Au(e.serverSyncTree_,t,n),v0(e.eventQueue_,t._path,r)}function PU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(IU)}function ga(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),je(n,...t)}function Wg(e,t,n,r){t&&bo(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function b0(e,t,n){return u_(e.serverSyncTree_,t,n)||L.EMPTY_NODE}function w_(e,t=e.transactionQueueTree_){if(t||$u(e,t),Io(t)){let n=I0(e,t);v(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&RU(e,ma(t),n)}else f0(t)&&Vu(t,n=>{w_(e,n)})}function RU(e,t,n){let r=n.map(l=>l.currentWriteId),i=b0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];v(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=et(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{ga(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(sr(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();$u(e,m_(e.transactionQueueTree_,t)),w_(e,e.transactionQueueTree_),xt(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)bo(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}yo(e,t)}},s)}function yo(e,t){let n=C0(e,t),r=ma(n),i=I0(e,n);return OU(e,i,r),r}function OU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=et(n,c.path),u=!1,d;if(v(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(sr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=EU)u=!0,d="maxretry",i=i.concat(sr(e.serverSyncTree_,c.currentWriteId,!0));else{let h=b0(e,c.path,s);c.currentInputSnapshot=h;let p=t[a].update(h.val());if(p!==void 0){ju("transaction failed: Data returned ",p,c.path);let m=Se(p);typeof p=="object"&&p!=null&&Bt(p,".priority")||(m=m.updatePriority(h.getPriority()));let I=c.currentWriteId,S=Bu(e),ue=d0(m,h,S);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=ue,c.currentWriteId=y_(e),s.splice(s.indexOf(I),1),i=i.concat(o0(e.serverSyncTree_,c.path,ue,c.currentWriteId,c.applyLocally)),i=i.concat(sr(e.serverSyncTree_,I,!0))}else u=!0,d="nodata",i=i.concat(sr(e.serverSyncTree_,c.currentWriteId,!0))}xt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}$u(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)bo(r[a]);w_(e,e.transactionQueueTree_)}function C0(e,t){let n,r=e.transactionQueueTree_;for(n=B(t);n!==null&&Io(r)===void 0;)r=m_(r,n),t=le(t),n=B(t);return r}function I0(e,t){let n=[];return E0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function E0(e,t,n){let r=Io(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vu(t,i=>{E0(e,i,n)})}function $u(e,t){let n=Io(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,h0(t,n.length>0?n:void 0)}Vu(t,r=>{$u(e,r)})}function b_(e,t){let n=ma(C0(e,t)),r=m_(e.transactionQueueTree_,t);return hU(r,i=>{eg(e,i)}),eg(e,r),p0(r,i=>{eg(e,i)}),n}function eg(e,t){let n=Io(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(v(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(v(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(sr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?h0(t,void 0):n.length=o+1,xt(e.eventQueue_,ma(t),i);for(let s=0;s<r.length;s++)bo(r[s])}}function kU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function FU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${e}'`)}return t}var _D=function(e,t){let n=LU(e),r=n.namespace;n.domain==="firebase.com"&&xn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&xn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||pV();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new du(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new X(n.pathString)}},LU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=kU(e.substring(u,d)));let h=FU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var vD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",VU=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=vD.charAt(n%64),n=Math.floor(n/64);v(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=vD.charAt(t[i]);return v(s.length===20,"nextPushId: Length should be 20."),s}}();var xu=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}},Nu=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pu=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Gg=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:e_(this._path)}get ref(){return new fn(this._repo,this._path)}get _queryIdentifier(){let t=rD(this._queryParams),n=Jg(t);return n==="{}"?"default":n}get _queryObject(){return rD(this._queryParams)}isEqual(t){if(t=ve(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=t_(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+qV(this._path)}};var fn=class e extends Gg{constructor(t,n){super(t,n,new Ig,!1)}get parent(){let t=VD(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},ua=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new X(t),r=wo(this.ref,t);return new e(this._node.getChild(n),r,me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,wo(this.ref,r),me)))}hasChild(t){let n=new X(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Nn(e,t){return e=ve(e),e._checkNotDeleted("ref"),t!==void 0?wo(e._root,t):e._root}function wo(e,t){return e=ve(e),B(e._path)===null?wU("child","path",t,!1):_0("child","path",t,!1),new fn(e._repo,pe(e._path,t))}function D0(e,t){e=ve(e),__("push",e._path),g0("push",t,e._path,!0);let n=w0(e._repo),r=VU(n),i=wo(e,r),o=wo(e,r),s;return t!=null?s=Hu(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function T0(e){return __("remove",e._path),Hu(e,null)}function Hu(e,t){e=ve(e),__("set",e._path),g0("set",t,e._path,!1);let n=new Dn;return MU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function zu(e,t){yU("update",t,e._path,!1);let n=new Dn;return AU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function S0(e){e=ve(e);let t=new Pu(()=>{}),n=new Ru(t);return SU(e._repo,e,n).then(r=>new ua(r,new fn(e._repo,e._path),e._queryParams.getIndex()))}var Ru=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new xu("value",this,new ua(t.snapshotNode,new fn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Nu(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},qg=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Nu(this,t,n):null}createEvent(t,n){v(t.childName!=null,"Child events should have a childName.");let r=wo(new fn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new xu(t.type,this,new ua(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function jU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{gD(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Pu(n,o||void 0),a=t==="value"?new Ru(s):new qg(t,s);return NU(e._repo,e,a),()=>gD(e._repo,e,a)}function M0(e,t,n,r){return jU(e,"value",t,n,r)}zj(fn);Kj(fn);var UU="FIREBASE_DATABASE_EMULATOR_HOST",Yg={},BU=!1;function $U(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Xn(o);e.repoInfo_=new du(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function HU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||xn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),je("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=_D(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[UU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=_D(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Js(Js.OWNER):new sg(e.name,e.options,t);bU("Invalid Firebase Database URL",s),z(s.path)||xn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=WU(a,e,u,new og(e,n));return new Kg(d,e)}function zU(e,t){let n=Yg[t];(!n||n[e.key]!==e)&&xn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),PU(e),delete n[e.key]}function WU(e,t,n,r){let i=Yg[t.name];i||(i={},Yg[t.name]=i);let o=i[e.toURLString()];return o&&xn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new zg(e,BU,n,r),i[e.toURLString()]=o,o}var Kg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fn(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&xn("Cannot call "+t+" on a deleted database.")}};function Nt(e=zr(),t){let n=$t(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=UC("database");r&&GU(n,...r)}return n}function GU(e,t,n,r={}){e=ve(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&St(r,o.repoInfo_.emulatorOptions))return;xn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&xn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Js(Js.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:BC(r.mockUserToken,e.app.options.projectId);s=new Js(a)}Xn(t)&&(xl(t),Nl("Database",!0)),$U(o,i,r,s)}function qU(e){dV(tr),ct(new Pe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return HU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ve(UE,BE,e),Ve(UE,BE,"esm2020")}n_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};n_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};qU();var he=class e{static getData(t,n,r){return f(this,null,function*(){try{let i=r?Nt(t,r):Nt(t);return yield e.getDbData(i,n)}catch(i){return console.error("Errore nel recupero dei dati Firebase:",i),null}})}static getDbData(t,n){return f(this,null,function*(){let r=Nn(t,n);return new Promise((o,s)=>{M0(r,a=>{let c=a.val();o(c)},a=>{s(a)})})})}static writeUserData(t,n,r,i){return f(this,null,function*(){let o=i?Nt(n,i):Nt(n);yield Hu(Nn(o,r),t)})}static addOrUpdateProperties(t,n,r,i){return f(this,null,function*(){try{let o=i?Nt(t,i):Nt(t),s={};for(let[a,c]of Object.entries(r))s[`${n}/${a}`]=c;yield zu(Nn(o),s),console.log(`Aggiornato nodo "${n}" con:`,r)}catch(o){throw console.error(`Errore nell'aggiornamento di "${n}":`,o),o}})}static deleteProperties(t,n,r,i){return f(this,null,function*(){try{let o=i?Nt(t,i):Nt(t),s=Array.isArray(r)?r:[r],a={};for(let c of s)a[`${n}/${c}`]=null;yield zu(Nn(o),a),console.log(`Eliminate le propriet\xE0 [${s.join(", ")}] da "${n}"`)}catch(o){throw console.error(`Errore nell'eliminazione di propriet\xE0 da "${n}":`,o),o}})}static deleteData(t,n,r){return f(this,null,function*(){try{let i=r?Nt(t,r):Nt(t);yield T0(Nn(i,n)),console.log(`Nodo eliminato con successo da "${n}"`)}catch(i){throw console.error(`Errore nell'eliminazione di "${n}":`,i),i}})}static deleteCurrentUser(){return f(this,null,function*(){try{let n=Jr().currentUser;if(!n)throw new Error("Nessun utente attualmente loggato");yield Gm(n),console.log("Utente corrente eliminato con successo!")}catch(t){throw console.error("Errore nell'eliminazione dell'utente:",t),t}})}static pushToChild(t,n,r,i="RANDOM"){return f(this,null,function*(){try{let o=Fs(n),s=Nt(o),a=null;if(i==="RANDOM")a=D0(Nn(s,r)).key;else if(i==="NUMBER"){let l=yield S0(Nn(s,r)),u=l.exists()?l.val():{},d=Object.keys(u).length+1;a=String(d)}if(!a)throw new Error("Impossibile generare una nuova chiave.");let c={[`${r}/${a}`]:t};yield zu(Nn(s),c),console.log(`Elemento aggiunto a "${r}" con chiave "${a}"`)}catch(o){throw console.error(`Errore in pushToChild(${r}):`,o),o}})}static createFirebaseUser(t,n,r){try{let i=Jr(t);return Hm(i,n,r)}catch(i){throw console.error("Errore nella creazione dell'utente Firebase:",i),i}}static changeCurrentUserEmail(t){return f(this,null,function*(){try{let r=Jr().currentUser;if(!r)throw new Error("Nessun utente attualmente loggato");yield Wm(r,t),console.log("Email aggiornata con successo!")}catch(n){throw console.error("Errore nell'aggiornamento dell'email:",n),n}})}};var Wu=class{},Gu=class{},qu=class{constructor(t,n,r){this.icon=t,this.sex=n,this.username=r}};var A0=(()=>{class e{constructor(n){this.http=n}getFile(n){return f(this,null,function*(){return yield this.http.get(n).toPromise()})}static{this.\u0275fac=function(r){return new(r||e)(C(Rr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pn=(()=>{class e{constructor(n,r){this.common_service=n,this.assets_service=r}startFbApi(n){try{return this.common_service.fbApp=Fs(n),this.common_service.fbApiAnalytics=jI(this.common_service.fbApp),console.log("API Firebase inizializzata con successo."),!0}catch(r){return console.error("Errore nell'inizializzazione dell'API Firebase:",r),!1}}tryLogin(n){return f(this,null,function*(){try{let r=Jr(this.common_service.fbApp);return yield zm(r,n.email,n.password)}catch(r){console.error("Errore durante il tentativo di login:",r);return}})}getFirebaseConfig(n){return f(this,null,function*(){try{let r=yield this.assets_service.getFile("assets/firebase/fb-proj-configs.json");if(!r){console.error("Impossibile caricare la configurazione Firebase.");return}let i=r.users[n];if(!i){console.error(`Configurazione Firebase non trovata per l'utente: ${n}`);return}return this.common_service.fbUserConfig=i,i}catch(r){console.error("Errore nel recupero della configurazione Firebase:",r);return}})}getUserExtras(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}return yield he.getData(this.common_service.fbApp,`users/list/${n}/info`,this.common_service.appConfig.firebase.dbUrl||"")}catch(r){console.error("Errore nel recupero delle info dell'utente:",r);return}})}getUserAllowedProducts(n){return f(this,null,function*(){try{if(console.log(`Recupero prodotti per l'utente: ${n}`),!n)return console.error("Nessun nome utente fornito per il recupero dei prodotti."),null;if(this.common_service.fbApp==null)return console.error("API Firebase non inizializzata."),null;let r=yield he.getData(this.common_service.fbApp,`users/list/${n}/auth/allowedProds`,this.common_service.appConfig.firebase.dbUrl||"");return console.info(`Prodotti recuperati per l'utente ${n}:`,r),r?Object.entries(r).filter(([o,s])=>s===!0).map(([o])=>o):[]}catch(r){return console.error(`Errore nel recupero dei prodotti per l'utente ${n}:`,r),null}})}disableUserProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;let r=this.common_service.lastLoggedUser?.uId;if(!r)return console.error("Utente non trovato."),!1;let i=this.common_service.appConfig.firebase.dbUrl||"";return yield he.addOrUpdateProperties(this.common_service.fbApp,`users/list/${r}/auth/allowedProds`,{[n.id]:!1},i),!0}catch{return!1}})}deleteProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;if(!this.common_service.lastLoggedUser?.uId)return console.error("Utente non trovato."),!1;let i=this.common_service.appConfig.firebase.dbUrl||"";yield he.deleteData(this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,i),yield he.deleteProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",[`${n.id}`],i);let o=yield this.getAllUsersId();for(let s of o)he.deleteProperties(this.common_service.fbApp,`users/list/${s}/auth/allowedProds`,[`${n.id}`],i);return!0}catch(r){return console.error("Errore nell'eliminazione del prodotto:",r),!1}})}getUserProducts(n,r){return f(this,null,function*(){try{if(console.info("Recupero prodotti utente..."),!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let i={},o=this.common_service.appConfig.firebase.dbUrl||"";for(let s of r){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let a=yield he.getData(this.common_service.fbApp,`sharedLogin/products/list/${s}`,this.common_service.appConfig.firebase.dbUrl||"");i[s]=a}return console.info("Prodotti recuperati",i),i}catch(i){return console.error("Errore nel recupero dei prodotti dell'utente:",i),[]}})}createProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;let r=this.common_service.appConfig.firebase.dbUrl||"";n.id=yield this.createProductId(n),yield he.writeUserData(n,this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,r),yield he.addOrUpdateProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",{[n.id]:!0},r),yield he.addOrUpdateProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",{[n.id]:!0},r);let i=yield this.getAllUsersId();for(let o of i){let s=o===this.common_service.lastLoggedUser?.uId;he.addOrUpdateProperties(this.common_service.fbApp,`users/list/${o}/auth/allowedProds`,{[n.id]:s},r)}return console.info("Prodotto creato",n),!0}catch(r){return console.error("Errore nella creazione del prodotto:",r),!1}})}getAllProdsId(){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),[];let n=yield he.getData(this.common_service.fbApp,"sharedLogin/products/all_ids",this.common_service.appConfig.firebase.dbUrl||"");return Object.keys(n)??[]}catch{return console.error("could not get the list of all the products"),[]}})}createProductId(n){return f(this,null,function*(){try{if(n==null)return"";let r=yield this.getAllProdsId();console.log("Tutti gli ID dei prodotti esistenti:",r);let i=n.name.toLowerCase().replace(" ","_");if(r.includes(i)){let s=r.filter(a=>a.includes(i)).length+1;i=`${i}_${s}`}return i}catch{return console.error("Cannot make product id"),""}})}editProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let r=this.common_service.appConfig.firebase.dbUrl||"";yield he.addOrUpdateProperties(this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,n,r),console.info("Prodotto modificato",n)}catch(r){console.error("Errore nella modifica del prodotto:",r)}})}getAllUsersId(){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),[];let n=yield he.getData(this.common_service.fbApp,"users/all_ids",this.common_service.appConfig.firebase.dbUrl||"");return Object.keys(n)??[]}catch{return console.error("could not get the list of all the users"),[]}})}addUser(n){return f(this,null,function*(){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let r=this.common_service.appConfig.firebase.dbUrl||"",i=yield he.createFirebaseUser(this.common_service.fbApp,n.email,n.password);n.uId=i.user.uid,console.log("Utente creato in Firebase Authentication:",i);let o=new Wu;o.auth=new Gu,o.auth.role=n.role;let s=yield this.getAllProdsId(),a={};s.forEach(c=>{a[c]=!1}),o.auth.allowedProds=a??{},o.info=new qu(n.icon,n.sex??"male",n.username),yield he.writeUserData(o,this.common_service.fbApp,`users/list/${n.uId}`,r),yield he.addOrUpdateProperties(this.common_service.fbApp,"users/all_ids",{[n.uId]:!0},r)})}editUser(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let r=this.common_service.appConfig.firebase.dbUrl||"",i={icon:n.icon,sex:n.sex??"male",username:n.username};yield he.addOrUpdateProperties(this.common_service.fbApp,`users/list/${n.uId}/info`,i,r),!0&&(yield he.changeCurrentUserEmail(n.email)),console.info("Utente modificato",n)}catch(r){console.error("Errore nella modifica dell'utente:",r)}})}deleteUser(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;let r=this.common_service.appConfig.firebase.dbUrl||"";return yield he.deleteProperties(this.common_service.fbApp,"users/all_ids",[n.uId],r),yield he.deleteCurrentUser(),console.info("Utente eliminato",n),!0}catch(r){return console.error("Errore nella eliminazione dell'utente:",r),!1}})}static{this.\u0275fac=function(r){return new(r||e)(C(Ne),C(A0))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Eo=(()=>{class e{constructor(n,r){this.common=n,this.fb_service=r,this.user={username:"",email:"",password:"",uId:"",sex:"male",icon:"",role:"user"},this.error="",this.showPassword=!1}onSubmit(){return f(this,null,function*(){try{if(!this.user.email||!this.user.password){this.error="Inserisci nome utente e password.";return}this.common.lastLoggedUser=this.user,this.error="";let n=yield this.fb_service.tryLogin(this.user);if(console.info("Credenziali Firebase:",n),!n){this.error="Credenziali non valide. Riprova.";return}this.common.lastLoggedUser.uId=n.user.uid,this.common.lastLoggedUser.username=this.user.username,this.common.lastLoggedUser.email=n.user.email||"",this.common.lastLoggedUser.jwt=yield n.user.getIdToken(),yield this.includeUserExtra(n),console.log("this.common.lastLoggedUser",this.common.lastLoggedUser),this.common.saveUserSession()}catch(n){console.error("Errore durante il login:",n)}})}includeUserExtra(n){return f(this,null,function*(){if(!n)return;let r=yield this.fb_service.getUserExtras(n.user.uid);r&&this.common.lastLoggedUser&&(this.common.lastLoggedUser.sex=r?.sex??"male",this.common.lastLoggedUser.icon=r?.icon??(r?.sex==="male"?"man-default":"woman-default"),this.common.lastLoggedUser.username=r?.username??this.user.username)})}static{this.\u0275fac=function(r){return new(r||e)(C(Ne),C(pn))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Yu=(()=>{class e{constructor(n,r,i,o){this.common=n,this.login_service=r,this.fb_service=i,this.http_service=o,this.hasAppInitialized=!1}initApp(){return f(this,null,function*(){try{yield this.getFirebaseInit(),this.common.lastLoggedUser=this.common.getUserSession(),this.common.appConfig=yield this.common.loadAppConfig();let n=yield this.fb_service.tryLogin(this.common.lastLoggedUser);if(!n){console.error("Login fallito.");return}yield this.login_service.includeUserExtra(n),this.hasAppInitialized=!0}catch(n){console.error("Errore durante l'inizializzazione dell'app:",n);return}})}getFirebaseInit(){return f(this,null,function*(){try{let n=yield this.fb_service.getFirebaseConfig("ame.dev.apps");if(!n){console.error("Errore nel recupero della configurazione Firebase.");return}if(!this.fb_service.startFbApi(n)){console.error("Errore nell'inizializzazione dell'API Firebase.");return}}catch(n){console.error("Errore durante l'inizializzazione di Firebase:",n)}})}static{this.\u0275fac=function(r){return new(r||e)(C(Ne),C(Eo),C(pn),C(Rr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var N0=(()=>{class e{get openType(){return this.common.appConfig.products.show.open_mode}constructor(n){this.common=n}openProductLink(n){try{if(console.log("Opening product link with method:",this.openType),this.openType==="direct_link"&&window.open(n.link,"_blank"),this.openType==="uId_in_querystring"){let r=this.common.lastLoggedUser?.uId??"",i=`${n.link}?user=${r}`;window.open(i,"_blank")}this.openType==="uId_in_post_message"&&console.warn("Open product via JWT in post message is not implemented yet.")}catch(r){console.error("Error opening product link:",r)}}static{this.\u0275fac=function(r){return new(r||e)(C(Ne))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function QU(e,t){e&1&&Ke(0,"app-loader")}function ZU(e,t){if(e&1){let n=Et();ff(0),y(1,"button",25),K("click",function(){let i=ee(n).$implicit,o=se(2);return te(o.toggleTag(i))}),T(2),w(),pf()}if(e&2){let n=t.$implicit,r=se(2);x(),Jt("selected",r.selectedTags.includes(n)),x(),Xt(" ",n," ")}}function JU(e,t){if(e&1&&(y(0,"span",34),T(1),w()),e&2){let n=t.$implicit;x(),mt(n)}}function XU(e,t){if(e&1){let n=Et();y(0,"mat-card",26),K("click",function(){let i=ee(n).$implicit,o=se(2);return te(o.openProductLink(i))}),Ke(1,"img",27),y(2,"mat-card-content")(3,"h3"),T(4),w(),y(5,"p"),T(6),w(),y(7,"div",28)(8,"div",29),Ie(9,JU,2,1,"span",30),w(),y(10,"div",31)(11,"button",32),K("click",function(i){let o=ee(n).$implicit,s=se(2);return te(s.editProduct(i,o))}),T(12," Edit "),w(),y(13,"button",33),K("click",function(i){let o=ee(n).$implicit,s=se(2);return te(s.deleteProduct(i,o))}),T(14," Delete "),w()()()()()}if(e&2){let n=t.$implicit;x(),oe("src",n.image,Zh)("alt",n.name),x(3),mt(n.name),x(2),mt(n.description),x(3),oe("ngForOf",n.tags)}}function e2(e,t){if(e&1){let n=Et();y(0,"div",13)(1,"div",14)(2,"h2",15),T(3,"Prodotti disponibili"),w(),y(4,"div",16)(5,"span",17),T(6,"Filtra per tag:"),w(),Ie(7,ZU,3,3,"ng-container",18),w(),y(8,"div",19)(9,"mat-card",20),K("click",function(){ee(n);let i=se();return te(i.addProduct())}),y(10,"div",21)(11,"span",22),T(12,"+"),w(),y(13,"mat-card-content")(14,"h3",23),T(15,"Aggiungi nuovo prodotto"),w()()()(),Ie(16,XU,15,5,"mat-card",24),w()()()}if(e&2){let n=se();x(),$i("width",n.filteredProducts.length===0?"auto":"100%"),x(6),oe("ngForOf",n.allTags),x(9),oe("ngForOf",n.filteredProducts)}}var P0=(()=>{class e{constructor(n,r,i,o,s,a){this.common=n,this.app_service=r,this.router=i,this.fb_service=o,this.open_prod=s,this.cdRef=a,this.products=[],this.allTags=[],this.selectedTags=[],this.filteredProducts=[],this.canShowLoader=!1}ngOnInit(){return f(this,null,function*(){this.app_service.hasAppInitialized||(yield this.app_service.initApp()),this.canShowLoader=!0,yield this.getUserProduct(),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),this.canShowLoader=!1,console.log("Prodotti utente:",this.products)})}getUserProduct(){return f(this,null,function*(){try{let n=yield this.fb_service.getUserAllowedProducts(this.common.lastLoggedUser?.uId??""),r=yield this.fb_service.getUserProducts(this.common.lastLoggedUser?.uId??"",n??[]);this.products=Object.values(r||{})}catch(n){console.error("error getting products",n)}})}updateTags(){let n=new Set;this.products.forEach(r=>r.tags?.forEach(i=>n.add(i))),this.allTags=Array.from(n)}toggleTag(n){this.selectedTags.includes(n)?this.selectedTags=this.selectedTags.filter(r=>r!==n):this.selectedTags.push(n),this.filterProducts()}filterProducts(){this.selectedTags.length===0?this.filteredProducts=this.products.map(n=>g({},n)):this.filteredProducts=this.products.filter(n=>n.tags?.some(r=>this.selectedTags.includes(r)))}openProductLink(n){if(n?.link===null){console.warn("No selected project");return}this.open_prod.openProductLink(n)}addProduct(){this.common.selectedProduct=new Sl,console.log("adding product"),this.router.navigate(["/products/add"])}editProduct(n,r){n.stopPropagation(),this.common.selectedProduct=g({},r),this.router.navigate(["/products/edit"])}deleteProduct(n,r){return f(this,null,function*(){if(n.stopPropagation(),!confirm(`Sei sicuro di voler eliminare il prodotto "${r.name}"?`))return;let o=!1;!0?o=yield this.fb_service.deleteProduct(r):o=yield this.fb_service.disableUserProduct(r),o&&(this.canShowLoader=!0,setTimeout(()=>f(this,null,function*(){yield this.getUserProduct(),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),this.canShowLoader=!1}),100))})}editProfile(){this.router.navigate(["/user/edit"])}addProfile(){this.router.navigate(["/user/add"])}deleteProfile(){return f(this,null,function*(){if(confirm("Sei sicuro di voler eliminare il profilo?")){if(this.common.lastLoggedUser==null){console.error("Nessun utente loggato");return}(yield this.fb_service.deleteUser(this.common.lastLoggedUser))&&(this.common.lastLoggedUser=void 0,localStorage.removeItem("lastLoggedUser"),this.router.navigate(["/"]))}})}logout(){confirm("Sei sicuro di voler effettuare il logout?")&&(this.common.lastLoggedUser=void 0,localStorage.removeItem("lastLoggedUser"),this.router.navigate(["/"]))}static{this.\u0275fac=function(r){return new(r||e)(D(Ne),D(Yu),D(at),D(pn),D(N0),D(en))}}static{this.\u0275cmp=be({type:e,selectors:[["app-products"]],standalone:!0,features:[Ee],decls:19,vars:8,consts:[[1,"container"],[4,"ngIf"],["class","products-layout",4,"ngIf"],[1,"profile-menu-container"],[1,"profile-menu"],[1,"profile-pic"],["alt","Foto profilo",3,"src"],[1,"profile-name"],[1,"row"],["title","Edit profile",1,"profile-btn",3,"click"],["title","Delete profile",1,"profile-btn","delete",3,"click"],["title","Add profile",1,"profile-btn",3,"click"],["title","Logout",1,"profile-btn","warning",3,"click"],[1,"products-layout"],[1,"products-container"],[1,"products-title"],[1,"tag-filter"],[1,"filter-label"],[4,"ngFor","ngForOf"],[1,"products-grid"],[1,"product-card","add-card",3,"click"],[2,"display","flex","flex-direction","column","align-items","center","justify-content","center","height","100%","min-height","180px"],[2,"font-size","3rem","color","var(--primary)"],[2,"text-align","center","color","var(--primary-dark)"],["class","product-card",3,"click",4,"ngFor","ngForOf"],["type","button",1,"tag-chip",3,"click"],[1,"product-card",3,"click"],["mat-card-image","",3,"src","alt"],[1,"products"],[1,"product-tags"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"crud-container"],["title","Edit product",1,"product-crud","profile-btn",3,"click"],["title","Delete product",1,"product-crud","profile-btn","delete",2,"margin-left","0.5rem",3,"click"],[1,"tag-chip"]],template:function(r,i){r&1&&(y(0,"div",0),Ie(1,QU,1,0,"app-loader",1)(2,e2,17,4,"div",2),y(3,"div",3)(4,"div",4)(5,"div",5),Ke(6,"img",6),w(),y(7,"div",7),T(8),w(),y(9,"div",8)(10,"button",9),K("click",function(){return i.editProfile()}),T(11,"Edit"),w(),y(12,"button",10),K("click",function(){return i.deleteProfile()}),T(13,"Delete"),w(),y(14,"button",11),K("click",function(){return i.addProfile()}),T(15,"Add"),w()(),y(16,"div",8)(17,"button",12),K("click",function(){return i.logout()}),T(18,"Logout"),w()()()()()),r&2&&(x(),oe("ngIf",i.canShowLoader),x(),oe("ngIf",!i.canShowLoader),x(2),$i("width",i.filteredProducts.length===0?"auto":"100%")("left",i.filteredProducts.length===0?"0.25em":"1em"),x(2),oe("src","assets/images/users/"+(i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.icon)+".svg",Zh),x(2),mt((i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.username)||"Utente"))},dependencies:[Fe,Xc,Yn,NC,MC,AC,xC,RC],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;left:0}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100%;flex-direction:column}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px;padding:1rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.5rem;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-weight:500;color:var(--primary-dark);margin-right:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:1rem;cursor:pointer;transition:background .2s,color .2s;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip.selected[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-title[_ngcontent-%COMP%]{color:var(--primary);text-align:center;margin-bottom:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;border-radius:16px;box-shadow:0 8px 32px #2193b026;overflow:hidden;transition:box-shadow .2s}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #2193b040}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:contain;border-top-left-radius:16px;border-top-right-radius:16px;background:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:var(--primary-dark);font-size:1.2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:4px}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]   .product-crud[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:.3rem 1rem;background:var(--primary);color:#fff;font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{position:relative;top:-2em;left:.25em;background:var(--card-bg);border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.1);max-width:900px;min-width:220px;flex-direction:column;align-items:center;display:flex;justify-content:center;padding:2rem 1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid var(--primary);margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:var(--primary-dark);margin-bottom:1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1em}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.7rem;border:none;border-radius:8px;background:var(--primary);color:#fff;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.warning[_ngcontent-%COMP%]{background-color:var(--warning)!important}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]:hover{background:#b71c1c}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{flex:1}"]})}}return e})();var $0=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(D(qn),D(Ye))}}static{this.\u0275dir=ce({type:e})}}return e})(),E_=(()=>{class e extends $0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275dir=ce({type:e,features:[Ut]})}}return e})(),td=new M("");var t2={provide:td,useExisting:_n(()=>dr),multi:!0};function n2(){let e=In()?In().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var r2=new M(""),dr=(()=>{class e extends $0{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!n2())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(D(qn),D(Ye),D(r2,8))}}static{this.\u0275dir=ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&K("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[bn([t2]),Ut]})}}return e})();function i2(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var D_=new M(""),H0=new M("");function o2(e){return i2(e.value)?{required:!0}:null}function R0(e){return null}function z0(e){return e!=null}function W0(e){return xr(e)?fe(e):e}function G0(e){let t={};return e.forEach(n=>{t=n!=null?g(g({},t),n):t}),Object.keys(t).length===0?null:t}function q0(e,t){return t.map(n=>n(e))}function s2(e){return!e.validate}function Y0(e){return e.map(t=>s2(t)?t:n=>t.validate(n))}function a2(e){if(!e)return null;let t=e.filter(z0);return t.length==0?null:function(n){return G0(q0(n,t))}}function T_(e){return e!=null?a2(Y0(e)):null}function c2(e){if(!e)return null;let t=e.filter(z0);return t.length==0?null:function(n){let r=q0(n,t).map(W0);return Dd(r).pipe(k(G0))}}function S_(e){return e!=null?c2(Y0(e)):null}function O0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function l2(e){return e._rawValidators}function u2(e){return e._rawAsyncValidators}function I_(e){return e?Array.isArray(e)?e:[e]:[]}function Qu(e,t){return Array.isArray(e)?e.includes(t):e===t}function k0(e,t){let n=I_(t);return I_(e).forEach(i=>{Qu(n,i)||n.push(i)}),n}function F0(e,t){return I_(t).filter(n=>!Qu(e,n))}var Zu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=T_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=S_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},To=class extends Zu{get formDirective(){return null}get path(){return null}},ba=class extends Zu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ju=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},d2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},C9=O(g({},d2),{"[class.ng-submitted]":"isSubmitted"}),So=(()=>{class e extends Ju{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(ba,2))}}static{this.\u0275dir=ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ut]})}}return e})(),Mo=(()=>{class e extends Ju{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(To,10))}}static{this.\u0275dir=ce({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ut]})}}return e})();var va="VALID",Ku="INVALID",Do="PENDING",ya="DISABLED";function K0(e){return(nd(e)?e.validators:e)||null}function h2(e){return Array.isArray(e)?T_(e):e||null}function Q0(e,t){return(nd(t)?t.asyncValidators:e)||null}function f2(e){return Array.isArray(e)?S_(e):e||null}function nd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function p2(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new A(1e3,"");if(!r[n])throw new A(1001,"")}function m2(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new A(1002,"")})}var Xu=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===va}get invalid(){return this.status===Ku}get pending(){return this.status==Do}get disabled(){return this.status===ya}get enabled(){return this.status!==ya}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(k0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(k0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(F0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(F0(t,this._rawAsyncValidators))}hasValidator(t){return Qu(this._rawValidators,t)}hasAsyncValidator(t){return Qu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Do,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ya,this.errors=null,this._forEachChild(r=>{r.disable(O(g({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(O(g({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=va,this._forEachChild(r=>{r.enable(O(g({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(O(g({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===va||this.status===Do)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ya:va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Do,this._hasOwnPendingAsyncValidator=!0;let n=W0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?ya:this.errors?Ku:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Do)?Do:this._anyControlsHaveStatus(Ku)?Ku:va}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=h2(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=f2(this._rawAsyncValidators)}},ed=class extends Xu{constructor(t,n,r){super(K0(n),Q0(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){m2(this,!0,t),Object.keys(t).forEach(r=>{p2(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var M_=new M("CallSetDisabledState",{providedIn:"root",factory:()=>A_}),A_="always";function g2(e,t){return[...t.path,e]}function Z0(e,t,n=A_){J0(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),v2(e,t),w2(e,t),y2(e,t),_2(e,t)}function L0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function _2(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function J0(e,t){let n=l2(e);t.validator!==null?e.setValidators(O0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=u2(e);t.asyncValidator!==null?e.setAsyncValidators(O0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();L0(t._rawValidators,i),L0(t._rawAsyncValidators,i)}function v2(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&X0(e,t)})}function y2(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&X0(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function X0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function w2(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function b2(e,t){e==null,J0(e,t)}function C2(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function I2(e){return Object.getPrototypeOf(e.constructor)===E_}function E2(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function D2(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===dr?n=o:I2(o)?r=o:i=o}),i||r||n||null}var T2={provide:To,useExisting:_n(()=>si)},wa=Promise.resolve(),si=(()=>{class e extends To{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ae,this.form=new ed({},T_(n),S_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){wa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Z0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){wa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){wa.then(()=>{let r=this._findContainer(n.path),i=new ed({});b2(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){wa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){wa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,E2(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(D(D_,10),D(H0,10),D(M_,8))}}static{this.\u0275dir=ce({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&K("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Be.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([T2]),Ut]})}}return e})();function V0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function j0(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var S2=class extends Xu{constructor(t=null,n,r){super(K0(n),Q0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(j0(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){V0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){V0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){j0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var M2={provide:ba,useExisting:_n(()=>ai)},U0=Promise.resolve(),ai=(()=>{class e extends ba{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new S2,this._registered=!1,this.name="",this.update=new Ae,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=D2(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),C2(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Z0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){U0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Nr(r);U0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?g2(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(D(To,9),D(D_,10),D(H0,10),D(td,10),D(en,8),D(M_,8))}}static{this.\u0275dir=ce({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Be.None,"disabled","isDisabled"],model:[Be.None,"ngModel","model"],options:[Be.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bn([M2]),Ut,zn]})}}return e})(),Ao=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ce({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var A2={provide:td,useExisting:_n(()=>rd),multi:!0};function eT(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function x2(e){return e.split(":")[0]}var rd=(()=>{class e extends E_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=eT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=x2(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275dir=ce({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[bn([A2]),Ut]})}}return e})(),tT=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(eT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(D(Ye),D(qn),D(rd,9))}}static{this.\u0275dir=ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),N2={provide:td,useExisting:_n(()=>nT),multi:!0};function B0(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function P2(e){return e.split(":")[0]}var nT=(()=>{class e extends E_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=P2(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275dir=ce({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[bn([N2]),Ut]})}}return e})(),rT=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(B0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(B0(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(D(Ye),D(qn),D(nT,9))}}static{this.\u0275dir=ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var R2=(()=>{class e{constructor(){this._validator=R0}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):R0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ce({type:e,features:[zn]})}}return e})();var O2={provide:D_,useExisting:_n(()=>ci),multi:!0};var ci=(()=>{class e extends R2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nr,this.createValidator=n=>o2}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gn(e)))(i||e)}})()}static{this.\u0275dir=ce({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ar("required",i._enabled?"":null)},inputs:{required:"required"},features:[bn([O2]),Ut]})}}return e})();var k2=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({})}}return e})();var hr=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:M_,useValue:n.callSetDisabledState??A_}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=we({imports:[k2]})}}return e})();function F2(e,t){e&1&&(y(0,"span",19),T(1,"\u{1F441}\uFE0F"),w())}function L2(e,t){e&1&&(y(0,"span",20),T(1,"\u{1F648}"),w())}function V2(e,t){if(e&1&&(y(0,"div",21),T(1),w()),e&2){let n=se();x(),mt(n.login_service.error)}}var iT=(()=>{class e{constructor(n,r){this.login_service=n,this.router=r}togglePasswordVisibility(){this.login_service.showPassword=!this.login_service.showPassword}onSubmit(){return f(this,null,function*(){yield this.login_service.onSubmit(),this.router.navigate(["/products"])})}forgotPassword(){this.router.navigate(["/forgot"])}register(){this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||e)(D(Eo),D(at))}}static{this.\u0275cmp=be({type:e,selectors:[["app-login"]],standalone:!0,features:[Ee],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"container"],[1,"login-card"],[3,"ngSubmit"],[1,"input-group"],["for","email"],["type","text","id","email","name","email","placeholder","Inserisci l'email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Inserisci la password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit"],["class","error-message",4,"ngIf"],[1,"forgot-password"],[3,"click"],[1,"register-user"],["type","button",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"],[1,"error-message"]],template:function(r,i){if(r&1){let o=Et();y(0,"div",1)(1,"div",2)(2,"h2"),T(3,"Accedi"),w(),y(4,"form",3,0),K("ngSubmit",function(){return ee(o),te(i.onSubmit())}),y(6,"div",4)(7,"label",5),T(8,"Email"),w(),y(9,"input",6),Ze("ngModelChange",function(a){return ee(o),st(i.login_service.user.email,a)||(i.login_service.user.email=a),te(a)}),w()(),y(10,"div",7)(11,"label",8),T(12,"Password"),w(),y(13,"input",9),Ze("ngModelChange",function(a){return ee(o),st(i.login_service.user.password,a)||(i.login_service.user.password=a),te(a)}),w(),y(14,"button",10),K("click",function(){return ee(o),te(i.togglePasswordVisibility())}),Ie(15,F2,2,0,"span",11)(16,L2,2,0,"span",12),w()(),y(17,"button",13),T(18,"Login"),w(),Ie(19,V2,2,1,"div",14),w(),y(20,"div",15)(21,"span",16),K("click",function(){return ee(o),te(i.forgotPassword())}),T(22,"Hai dimenticato la password?"),w()(),y(23,"div",17)(24,"button",18),K("click",function(){return ee(o),te(i.register())}),T(25,"Registrati"),w()()()()}r&2&&(x(9),Qe("ngModel",i.login_service.user.email),x(4),oe("type",i.login_service.showPassword?"text":"password"),Qe("ngModel",i.login_service.user.password),x(2),oe("ngIf",!i.login_service.showPassword),x(),oe("ngIf",i.login_service.showPassword),x(3),oe("ngIf",i.login_service.error))},dependencies:[Fe,Yn,hr,Ao,dr,So,Mo,ci,ai,si],styles:[".register-user[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;padding:.6rem 1.5rem;cursor:pointer;transition:background .2s}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-password[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:underline;font-size:.98rem;cursor:pointer;transition:color .2s}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#2193b0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error);margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();var oT=(()=>{class e{constructor(n){this.common=n}sendResetLink(){let n=document.getElementById("email").value;if(!n){alert("Inserisci un'email valida.");return}this.common.lastforgotPswRequest={email:n,username:"",password:"",uId:"",sex:"male",icon:"",role:"user"},alert(`Link di reset inviato a ${n}`)}static{this.\u0275fac=function(r){return new(r||e)(D(Ne))}}static{this.\u0275cmp=be({type:e,selectors:[["app-forgot"]],standalone:!0,features:[Ee],decls:13,vars:0,consts:[[1,"forgot-container"],[1,"forgot-card"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required",""],["type","submit",3,"click"],[1,"info-message"]],template:function(r,i){r&1&&(y(0,"div",0)(1,"div",1)(2,"h2"),T(3,"Recupera la password"),w(),y(4,"form")(5,"div",2)(6,"label",3),T(7,"Email"),w(),Ke(8,"input",4),w(),y(9,"button",5),K("click",function(){return i.sendResetLink()}),T(10,"Invia richiesta"),w()(),y(11,"div",6),T(12,"Riceverai una mail con le istruzioni per il reset."),w()()())},styles:[".forgot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.forgot-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.forgot-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-card[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var xo=(e,t)=>{let n=b(at),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return console.log("time passed",s-o),!i||!o||!c?(localStorage.removeItem("lastLoggedUser"),n.navigate(["/"]),!1):!0};var sT=(e,t)=>{let n=b(at),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return i&&c?(console.info("utente gi\xE0 loggato!"),!1):!0};function j2(e,t){if(e&1){let n=Et();y(0,"span",21),T(1),y(2,"button",22),K("click",function(){let i=ee(n).$implicit,o=se(3);return te(o.removeTag(i))}),T(3," \xD7 "),w()()}if(e&2){let n=t.$implicit;x(),Xt(" ",n," ")}}function U2(e,t){if(e&1&&(y(0,"div",5)(1,"label"),T(2,"Tag selezionati"),w(),y(3,"div",19),Ie(4,j2,4,1,"span",20),w()()),e&2){let n=se(2);x(4),oe("ngForOf",n.selectedTags)}}function B2(e,t){e&1&&(y(0,"div",23),T(1," Prodotto aggiunto con successo! "),w())}function $2(e,t){if(e&1){let n=Et();y(0,"div",2)(1,"div",3)(2,"h2"),T(3),w(),y(4,"form",4,0),K("ngSubmit",function(){ee(n);let i=se();return te(i.onSubmit())}),y(6,"div",5)(7,"label",6),T(8,"Nome prodotto"),w(),y(9,"input",7),Ze("ngModelChange",function(i){ee(n);let o=se();return st(o.common.selectedProduct.name,i)||(o.common.selectedProduct.name=i),te(i)}),w()(),y(10,"div",5)(11,"label",8),T(12,"Descrizione"),w(),y(13,"input",9),Ze("ngModelChange",function(i){ee(n);let o=se();return st(o.common.selectedProduct.description,i)||(o.common.selectedProduct.description=i),te(i)}),w()(),y(14,"div",5)(15,"label",10),T(16,"Immagine (URL)"),w(),y(17,"input",11),Ze("ngModelChange",function(i){ee(n);let o=se();return st(o.common.selectedProduct.image,i)||(o.common.selectedProduct.image=i),te(i)}),w()(),y(18,"div",5)(19,"label",12),T(20,"Aggiungi tag"),w(),y(21,"div",13)(22,"input",14),Ze("ngModelChange",function(i){ee(n);let o=se();return st(o.customTag,i)||(o.customTag=i),te(i)}),w(),y(23,"button",15),K("click",function(){ee(n);let i=se();return te(i.addCustomTag())}),T(24,"Aggiungi"),w()()(),Ie(25,U2,5,1,"div",16),y(26,"button",17),T(27),w()(),Ie(28,B2,2,0,"div",18),w()()}if(e&2){let n=se();x(3),mt(n.pageTitle),x(6),Qe("ngModel",n.common.selectedProduct.name),x(4),Qe("ngModel",n.common.selectedProduct.description),x(4),Qe("ngModel",n.common.selectedProduct.image),x(5),Qe("ngModel",n.customTag),x(3),oe("ngIf",n.selectedTags.length),x(2),mt(n.isEdit?"Modifica prodotto":"Aggiungi prodotto"),x(),oe("ngIf",n.success)}}var N_=(()=>{class e{get isEdit(){return this.router.url.includes("edit")}constructor(n,r,i,o){this.route=n,this.router=r,this.common=i,this.fb_service=o,this.success=!1,this.selectedTags=this.common.selectedProduct?.tags??[],this.customTag="",this.pageTitle="Aggiungi nuovo prodotto"}ngOnInit(){this.isEdit&&(this.pageTitle="Modifica prodotto"),console.log("prodotto selezionato",this.common.selectedProduct)}toggleDefaultTag(n,r){r.target.checked?this.selectedTags.includes(n)||this.selectedTags.push(n):this.selectedTags=this.selectedTags.filter(i=>i!==n)}addCustomTag(){let n=this.customTag.trim();n&&!this.selectedTags.includes(n)&&(this.selectedTags.push(n),this.customTag="")}removeTag(n){this.selectedTags=this.selectedTags.filter(r=>r!==n)}onSubmit(){return f(this,null,function*(){this.common.selectedProduct&&(this.common.selectedProduct.tags=[...this.selectedTags]),this.success=!0,setTimeout(()=>this.success=!1,2e3),this.selectedTags=[],this.common.selectedProduct!=null&&(this.isEdit?yield this.fb_service.editProduct(this.common.selectedProduct):yield this.fb_service.createProduct(this.common.selectedProduct))})}static{this.\u0275fac=function(r){return new(r||e)(D(nn),D(at),D(Ne),D(pn))}}static{this.\u0275cmp=be({type:e,selectors:[["app-crud-product"]],standalone:!0,features:[Ee],decls:1,vars:1,consts:[["addProductForm","ngForm"],["class","add-product-container",4,"ngIf"],[1,"add-product-container"],[1,"add-product-card"],[3,"ngSubmit"],[1,"input-group"],["for","name"],["type","text","id","name","name","name","placeholder","Nome prodotto","required","",3,"ngModelChange","ngModel"],["for","description"],["type","text","id","description","name","description","placeholder","Descrizione","required","",3,"ngModelChange","ngModel"],["for","image"],["type","url","id","image","name","image","placeholder","URL immagine",3,"ngModelChange","ngModel"],["for","customTag"],[2,"display","flex","gap","0.5rem"],["type","text","id","customTag","name","customTag","placeholder","Scrivi un tag",3,"ngModelChange","ngModel"],["type","button",3,"click"],["class","input-group",4,"ngIf"],["type","submit"],["class","success-message",4,"ngIf"],[2,"display","flex","flex-wrap","wrap","gap","0.5rem"],["style",`
              background: #e0e7ef;
              border-radius: 12px;
              padding: 0.3rem 0.8rem;
              display: flex;
              align-items: center;
            `,4,"ngFor","ngForOf"],[2,"background","#e0e7ef","border-radius","12px","padding","0.3rem 0.8rem","display","flex","align-items","center"],["type","button",2,"margin-left","0.5rem","background","none","border","none","color","#c00","cursor","pointer","font-size","1rem",3,"click"],[1,"success-message"]],template:function(r,i){r&1&&Ie(0,$2,29,8,"div",1),r&2&&oe("ngIf",i.common.selectedProduct)},dependencies:[Fe,Xc,Yn,hr,Ao,dr,So,Mo,ci,ai,si],styles:[".add-product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var id=class{constructor(){this.username="",this.email="",this.password="",this.uId="",this.sex="male",this.icon="",this.role="user",this.jwt=""}};function H2(e,t){e&1&&(y(0,"span",24),T(1,"\u{1F441}\uFE0F"),w())}function z2(e,t){e&1&&(y(0,"span",25),T(1,"\u{1F648}"),w())}function W2(e,t){if(e&1){let n=Et();y(0,"div",18)(1,"label",19),T(2,"Password"),w(),y(3,"input",20),Ze("ngModelChange",function(i){ee(n);let o=se();return st(o.user.password,i)||(o.user.password=i),te(i)}),w(),y(4,"button",21),K("click",function(){ee(n);let i=se();return te(i.togglePasswordVisibility())}),Ie(5,H2,2,0,"span",22)(6,z2,2,0,"span",23),w()()}if(e&2){let n=se();x(3),oe("type",n.showPassword?"text":"password"),Qe("ngModel",n.user.password),x(2),oe("ngIf",!n.showPassword),x(),oe("ngIf",n.showPassword)}}function G2(e,t){if(e&1&&(y(0,"div",26),T(1),w()),e&2){let n=se();x(),Xt(" ",n.pageTitle==="Aggiungi nuovo utente"?"Utente aggiunto!":"Utente modificato!"," ")}}var od=(()=>{class e{constructor(n,r,i,o,s){this.common=n,this.route=r,this.router=i,this.firebase_service=o,this.login_service=s,this.user=new id,this.pageTitle="Aggiungi nuovo utente",this.success=!1,this.showPassword=!1}ngOnInit(){this.router.url.includes("/user/edit")&&(this.pageTitle="Modifica utente",this.common.lastLoggedUser&&(this.user=g({},this.common.lastLoggedUser)))}onSubmit(){return f(this,null,function*(){this.pageTitle==="Aggiungi nuovo utente"?(this.common.appConfig||(this.common.appConfig=yield this.common.loadAppConfig()),yield this.firebase_service.addUser(this.user),this.router.navigate(["/"]),console.log("Nuovo utente:",this.user)):(this.common.lastLoggedUser=g({},this.user),yield this.firebase_service.editUser(this.user),this.common.saveUserSession(),console.log("Utente modificato:",this.user)),this.success=!0,setTimeout(()=>this.success=!1,2e3)})}togglePasswordVisibility(){this.showPassword=!this.showPassword}static{this.\u0275fac=function(r){return new(r||e)(D(Ne),D(nn),D(at),D(pn),D(Eo))}}static{this.\u0275cmp=be({type:e,selectors:[["app-crud-user"]],standalone:!0,features:[Ee],decls:30,vars:8,consts:[["userForm","ngForm"],[1,"add-user-container"],[1,"add-user-card"],[3,"ngSubmit"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Username","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["class","input-group password-group",4,"ngIf"],["for","sex"],["id","sex","name","sex",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["for","icon"],["type","text","id","icon","name","icon","placeholder","Nome icona (es: man-default)",3,"ngModelChange","ngModel"],["type","submit"],["class","success-message",4,"ngIf"],[1,"input-group","password-group"],["for","password"],["id","password","name","password","placeholder","Inserisci la password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button","tabindex","-1",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"],[1,"success-message"]],template:function(r,i){if(r&1){let o=Et();y(0,"div",1)(1,"div",2)(2,"h2"),T(3),w(),y(4,"form",3,0),K("ngSubmit",function(){return ee(o),te(i.onSubmit())}),y(6,"div",4)(7,"label",5),T(8,"Username"),w(),y(9,"input",6),Ze("ngModelChange",function(a){return ee(o),st(i.user.username,a)||(i.user.username=a),te(a)}),w()(),y(10,"div",4)(11,"label",7),T(12,"Email"),w(),y(13,"input",8),Ze("ngModelChange",function(a){return ee(o),st(i.user.email,a)||(i.user.email=a),te(a)}),w()(),Ie(14,W2,7,4,"div",9),y(15,"div",4)(16,"label",10),T(17,"Sesso"),w(),y(18,"select",11),Ze("ngModelChange",function(a){return ee(o),st(i.user.sex,a)||(i.user.sex=a),te(a)}),y(19,"option",12),T(20,"Maschio"),w(),y(21,"option",13),T(22,"Femmina"),w()()(),y(23,"div",4)(24,"label",14),T(25,"Icona profilo"),w(),y(26,"input",15),Ze("ngModelChange",function(a){return ee(o),st(i.user.icon,a)||(i.user.icon=a),te(a)}),w()(),y(27,"button",16),T(28),w()(),Ie(29,G2,2,1,"div",17),w()()}r&2&&(x(3),mt(i.pageTitle),x(6),Qe("ngModel",i.user.username),x(4),Qe("ngModel",i.user.email),x(),oe("ngIf",i.pageTitle==="Aggiungi nuovo utente"),x(4),Qe("ngModel",i.user.sex),x(8),Qe("ngModel",i.user.icon),x(2),Xt(" ",i.pageTitle==="Aggiungi nuovo utente"?"Aggiungi utente":"Salva modifiche"," "),x(),oe("ngIf",i.success))},dependencies:[Fe,Yn,hr,Ao,tT,rT,dr,rd,So,Mo,ci,ai,si],styles:[".add-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:60vh;padding:2rem 0;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-user-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 2px 16px #2193b014,0 1.5px 4px #2193b01a;padding:2.5rem 2rem 2rem;min-width:320px;max-width:400px;width:100%}h2[_ngcontent-%COMP%]{text-align:center;color:var(--primary, #2193b0);margin-bottom:2rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3rem;color:#444}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.6rem .8rem;border:1px solid #b5d0e0;border-radius:6px;font-size:1rem;outline:none;transition:border-color .2s;background:#f7fafc}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary, #2193b0);background:#fff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary, #2193b0);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:600;cursor:pointer;margin-top:1.2rem;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#17607e}.success-message[_ngcontent-%COMP%]{margin-top:1.5rem;color:#2193b0;text-align:center;font-weight:600;font-size:1.1rem}.password-group[_ngcontent-%COMP%]{position:relative}.password-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:2.5rem}.password-group[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;top:25px;right:.7rem;background:transparent;border:none;cursor:pointer;outline:none;padding:0;z-index:2;color:var(--primary, #2193b0);display:flex;align-items:center;height:2rem}"]})}}return e})();var aT=[{path:"",component:iT,canActivate:[sT]},{path:"forgot",component:oT},{path:"products",component:P0,canActivate:[xo]},{path:"products/add",component:N_,canActivate:[xo]},{path:"products/edit",component:N_,canActivate:[xo]},{path:"register",component:od},{path:"user/add",component:od,canActivate:[xo]},{path:"user/edit",component:od,canActivate:[xo]}];var cT={providers:[lC(aT,uC()),kh(al)]};var lT=(()=>{class e{constructor(n,r){this.common_service=n,this.app_service=r,this.title="shared-login",this.username="",this.password="",this.error="",this.showPassword=!1}ngOnInit(){return f(this,null,function*(){yield this.app_service.initApp()})}static{this.\u0275fac=function(r){return new(r||e)(D(Ne),D(Yu))}}static{this.\u0275cmp=be({type:e,selectors:[["app-root"]],standalone:!0,features:[Ee],decls:1,vars:0,template:function(r,i){r&1&&Ke(0,"router-outlet")},dependencies:[_p,Fe,hr,al],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#6dd5ed,#2193b0)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px #2193b026;display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2193b0}.input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2193b0}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#2193b0;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#176b87}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();Tb(lT,cT).catch(e=>console.error(e));
