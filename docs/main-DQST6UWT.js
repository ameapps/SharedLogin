var Q0=Object.defineProperty,Z0=Object.defineProperties;var J0=Object.getOwnPropertyDescriptors;var va=Object.getOwnPropertySymbols,X0=Object.getPrototypeOf,y_=Object.prototype.hasOwnProperty,w_=Object.prototype.propertyIsEnumerable,eT=Reflect.get;var v_=(e,t,n)=>t in e?Q0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})y_.call(t,n)&&v_(e,n,t[n]);if(va)for(var n of va(t))w_.call(t,n)&&v_(e,n,t[n]);return e},P=(e,t)=>Z0(e,J0(t));var ya=(e,t)=>{var n={};for(var r in e)y_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&va)for(var r of va(e))t.indexOf(r)<0&&w_.call(e,r)&&(n[r]=e[r]);return n};var nr=(e,t,n)=>eT(X0(e),n,t);var f=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var b_=null;var Qu=1,Zu=Symbol("SIGNAL");function Q(e){let t=b_;return b_=e,t}var C_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tT(e){if(!(ed(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Qu)){if(!e.producerMustRecompute(e)&&!Ju(e)){e.dirty=!1,e.lastCleanEpoch=Qu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Qu}}function I_(e){return e&&(e.nextProducerIndex=0),Q(e)}function E_(e,t){if(Q(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(ed(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Xu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ju(e){wa(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(tT(n),r!==n.version))return!0}return!1}function D_(e){if(wa(e),ed(e))for(let t=0;t<e.producerNode.length;t++)Xu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Xu(e,t){if(nT(e),wa(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Xu(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];wa(i),i.producerIndexOfThis[r]=t}}function ed(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function wa(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function nT(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function rT(){throw new Error}var iT=rT;function T_(e){iT=e}function k(e){return typeof e=="function"}function ni(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ba=ni(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function rr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var he=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(o){t=o instanceof ba?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{S_(o)}catch(s){t=t??[],s instanceof ba?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ba(t)}}add(t){var n;if(t&&t!==this)if(this.closed)S_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&rr(n,t)}remove(t){let{_finalizers:n}=this;n&&rr(n,t),t instanceof e&&t._removeParent(this)}};he.EMPTY=(()=>{let e=new he;return e.closed=!0,e})();var td=he.EMPTY;function Ca(e){return e instanceof he||e&&"closed"in e&&k(e.remove)&&k(e.add)&&k(e.unsubscribe)}function S_(e){k(e)?e():e.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ri={setTimeout(e,t,...n){let{delegate:r}=ri;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ri;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ia(e){ri.setTimeout(()=>{let{onUnhandledError:t}=Mt;if(t)t(e);else throw e})}function Do(){}var M_=nd("C",void 0,void 0);function A_(e){return nd("E",void 0,e)}function N_(e){return nd("N",e,void 0)}function nd(e,t,n){return{kind:e,value:t,error:n}}var ir=null;function ii(e){if(Mt.useDeprecatedSynchronousErrorHandling){let t=!ir;if(t&&(ir={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=ir;if(ir=null,n)throw r}}else e()}function x_(e){Mt.useDeprecatedSynchronousErrorHandling&&ir&&(ir.errorThrown=!0,ir.error=e)}var or=class extends he{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ca(t)&&t.add(this)):this.destination=aT}static create(t,n,r){return new oi(t,n,r)}next(t){this.isStopped?id(N_(t),this):this._next(t)}error(t){this.isStopped?id(A_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?id(M_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oT=Function.prototype.bind;function rd(e,t){return oT.call(e,t)}var od=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ea(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ea(r)}else Ea(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ea(n)}}},oi=class extends or{constructor(t,n,r){super();let i;if(k(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Mt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&rd(t.next,o),error:t.error&&rd(t.error,o),complete:t.complete&&rd(t.complete,o)}):i=t}this.destination=new od(i)}};function Ea(e){Mt.useDeprecatedSynchronousErrorHandling?x_(e):Ia(e)}function sT(e){throw e}function id(e,t){let{onStoppedNotification:n}=Mt;n&&ri.setTimeout(()=>n(e,t))}var aT={closed:!0,next:Do,error:sT,complete:Do};var si=typeof Symbol=="function"&&Symbol.observable||"@@observable";function it(e){return e}function sd(...e){return ad(e)}function ad(e){return e.length===0?it:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lT(n)?n:new oi(n,r,i);return ii(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=R_(r),new r((i,o)=>{let s=new oi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[si](){return this}pipe(...n){return ad(n)(this)}toPromise(n){return n=R_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function R_(e){var t;return(t=e??Mt.Promise)!==null&&t!==void 0?t:Promise}function cT(e){return e&&k(e.next)&&k(e.error)&&k(e.complete)}function lT(e){return e&&e instanceof or||cT(e)&&Ca(e)}function cd(e){return k(e?.lift)}function z(e){return t=>{if(cd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,r,i){return new ld(e,t,n,r,i)}var ld=class extends or{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ai(){return z((e,t)=>{let n=null;e._refCount++;let r=j(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var ci=class extends q{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new he;let n=this.getSubject();t.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=he.EMPTY)}return t}refCount(){return ai()(this)}};var P_=ni(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Da(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new P_}next(n){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ii(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?td:(this.currentObservers=null,o.push(n),new he(()=>{this.currentObservers=null,rr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new Da(t,n),e})(),Da=class extends Ne{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:td}};var xe=class extends Ne{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var ud={now(){return(ud.delegate||Date).now()},delegate:void 0};var Ta=class extends he{constructor(t,n){super()}schedule(t,n=0){return this}};var To={setInterval(e,t,...n){let{delegate:r}=To;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=To;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Sa=class extends Ta{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return To.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&To.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,rr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var li=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};li.now=ud.now;var Ma=class extends li{constructor(t,n=li.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var O_=new Ma(Sa);var ot=new q(e=>e.complete());function k_(e){return e&&k(e.schedule)}function F_(e){return e[e.length-1]}function Aa(e){return k(F_(e))?e.pop():void 0}function Cn(e){return k_(F_(e))?e.pop():void 0}function V_(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function L_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function sr(e){return this instanceof sr?(this.v=e,this):new sr(e)}function j_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){r[p]&&(i[p]=function(g){return new Promise(function(I,D){o.push([p,g,I,D])>1||c(p,g)})},m&&(i[p]=m(i[p])))}function c(p,m){try{l(r[p](m))}catch(g){h(o[0][3],g)}}function l(p){p.value instanceof sr?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function U_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof L_=="function"?L_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Na=e=>e&&typeof e.length=="number"&&typeof e!="function";function xa(e){return k(e?.then)}function Ra(e){return k(e[si])}function Pa(e){return Symbol.asyncIterator&&k(e?.[Symbol.asyncIterator])}function Oa(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ka=uT();function Fa(e){return k(e?.[ka])}function La(e){return j_(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield sr(n.read());if(i)return yield sr(void 0);yield yield sr(r)}}finally{n.releaseLock()}})}function Va(e){return k(e?.getReader)}function pe(e){if(e instanceof q)return e;if(e!=null){if(Ra(e))return dT(e);if(Na(e))return hT(e);if(xa(e))return fT(e);if(Pa(e))return B_(e);if(Fa(e))return pT(e);if(Va(e))return mT(e)}throw Oa(e)}function dT(e){return new q(t=>{let n=e[si]();if(k(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hT(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function fT(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ia)})}function pT(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function B_(e){return new q(t=>{gT(e,t).catch(n=>t.error(n))})}function mT(e){return B_(La(e))}function gT(e,t){var n,r,i,o;return V_(this,void 0,void 0,function*(){try{for(n=U_(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Qe(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ja(e,t=0){return z((n,r)=>{n.subscribe(j(r,i=>Qe(r,e,()=>r.next(i),t),()=>Qe(r,e,()=>r.complete(),t),i=>Qe(r,e,()=>r.error(i),t)))})}function Ua(e,t=0){return z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function $_(e,t){return pe(e).pipe(Ua(t),ja(t))}function H_(e,t){return pe(e).pipe(Ua(t),ja(t))}function W_(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function z_(e,t){return new q(n=>{let r;return Qe(n,t,()=>{r=e[ka](),Qe(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function Ba(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{Qe(n,t,()=>{let r=e[Symbol.asyncIterator]();Qe(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function G_(e,t){return Ba(La(e),t)}function q_(e,t){if(e!=null){if(Ra(e))return $_(e,t);if(Na(e))return W_(e,t);if(xa(e))return H_(e,t);if(Pa(e))return Ba(e,t);if(Fa(e))return z_(e,t);if(Va(e))return G_(e,t)}throw Oa(e)}function ce(e,t){return t?q_(e,t):pe(e)}function R(...e){let t=Cn(e);return ce(e,t)}function ui(e,t){let n=k(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function dd(e){return!!e&&(e instanceof q||k(e.lift)&&k(e.subscribe))}var At=ni(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function hd(e,t){let n=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;e.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(t.defaultValue):i(new At)}})})}function O(e,t){return z((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:_T}=Array;function vT(e,t){return _T(t)?e(...t):e(t)}function $a(e){return O(t=>vT(e,t))}var{isArray:yT}=Array,{getPrototypeOf:wT,prototype:bT,keys:CT}=Object;function Ha(e){if(e.length===1){let t=e[0];if(yT(t))return{args:t,keys:null};if(IT(t)){let n=CT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function IT(e){return e&&typeof e=="object"&&wT(e)===bT}function Wa(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function di(...e){let t=Cn(e),n=Aa(e),{args:r,keys:i}=Ha(e);if(r.length===0)return ce([],t);let o=new q(ET(r,t,i?s=>Wa(i,s):it));return n?o.pipe($a(n)):o}function ET(e,t,n=it){return r=>{Y_(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Y_(t,()=>{let l=ce(e[c],t),u=!1;l.subscribe(j(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Y_(e,t,n){e?Qe(n,e,t):t()}function K_(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},p=g=>l<r?m(g):c.push(g),m=g=>{o&&t.next(g),l++;let I=!1;pe(n(g,u++)).subscribe(j(t,D=>{i?.(D),o?p(D):t.next(D)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<r;){let D=c.shift();s?Qe(t,s,()=>m(D)):m(D)}h()}catch(D){t.error(D)}}))};return e.subscribe(j(t,p,()=>{d=!0,h()})),()=>{a?.()}}function Ce(e,t,n=1/0){return k(t)?Ce((r,i)=>O((o,s)=>t(r,o,i,s))(pe(e(r,i))),n):(typeof t=="number"&&(n=t),z((r,i)=>K_(r,i,e,n)))}function fd(e=1/0){return Ce(it,e)}function Q_(){return fd(1)}function In(...e){return Q_()(ce(e,Cn(e)))}function za(e){return new q(t=>{pe(e()).subscribe(t)})}function pd(...e){let t=Aa(e),{args:n,keys:r}=Ha(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;pe(n[u]).subscribe(j(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Wa(r,a):a),o.complete())}))}});return t?i.pipe($a(t)):i}function $e(e,t){return z((n,r)=>{let i=0;n.subscribe(j(r,o=>e.call(t,o,i++)&&r.next(o)))})}function En(e){return z((t,n)=>{let r=null,i=!1,o;r=t.subscribe(j(n,void 0,void 0,s=>{o=pe(e(s,En(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Z_(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Dn(e,t){return k(t)?Ce(e,t,1):Ce(e,1)}function md(e,t=O_){return z((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+e,u=t.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(j(r,l=>{o=l,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Tn(e){return z((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Nt(e){return e<=0?()=>ot:z((t,n)=>{let r=0;t.subscribe(j(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function gd(e){return O(()=>e)}function Ga(e=DT){return z((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function DT(){return new At}function Sn(e){return z((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Ut(e,t){let n=arguments.length>=2;return r=>r.pipe(e?$e((i,o)=>e(i,o,r)):it,Nt(1),n?Tn(t):Ga(()=>new At))}function hi(e){return e<=0?()=>ot:z((t,n)=>{let r=[];t.subscribe(j(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function _d(e,t){let n=arguments.length>=2;return r=>r.pipe(e?$e((i,o)=>e(i,o,r)):it,hi(1),n?Tn(t):Ga(()=>new At))}function vd(e,t){return z(Z_(e,t,arguments.length>=2,!0))}function yd(e){return $e((t,n)=>e<=n)}function So(...e){let t=Cn(e);return z((n,r)=>{(t?In(e,n,t):In(e,n)).subscribe(r)})}function st(e,t){return z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;pe(e(c,u)).subscribe(i=j(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Mo(e){return z((t,n)=>{pe(e).subscribe(j(n,()=>n.complete(),Do)),!n.closed&&t.subscribe(n)})}function De(e,t,n){let r=k(e)||t||n?{next:e,error:t,complete:n}:e;return r?z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):it}var kv="https://g.co/ng/security#xss",S=class extends Error{constructor(t,n){super(wc(t,n)),this.code=t}};function wc(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Ho(e){return{toString:e}.toString()}var qa="__parameters__";function TT(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function Fv(e,t,n){return Ho(()=>{let r=TT(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(qa)?c[qa]:Object.defineProperty(c,qa,{value:[]})[qa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Ao=globalThis;function ne(e){for(let t in e)if(e[t]===ne)return t;throw Error("Could not find renamed property on target object.")}function ST(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function We(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(We).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function J_(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var MT=ne({__forward_ref__:ne});function gr(e){return e.__forward_ref__=gr,e.toString=function(){return We(this())},e}function He(e){return Lv(e)?e():e}function Lv(e){return typeof e=="function"&&e.hasOwnProperty(MT)&&e.__forward_ref__===gr}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){return{providers:e.providers||[],imports:e.imports||[]}}function bc(e){return X_(e,jv)||X_(e,Uv)}function Vv(e){return bc(e)!==null}function X_(e,t){return e.hasOwnProperty(t)?e[t]:null}function AT(e){let t=e&&(e[jv]||e[Uv]);return t||null}function ev(e){return e&&(e.hasOwnProperty(tv)||e.hasOwnProperty(NT))?e[tv]:null}var jv=ne({\u0275prov:ne}),tv=ne({\u0275inj:ne}),Uv=ne({ngInjectableDef:ne}),NT=ne({ngInjectorDef:ne}),T=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bv(e){return e&&!!e.\u0275providers}var xT=ne({\u0275cmp:ne}),RT=ne({\u0275dir:ne}),PT=ne({\u0275pipe:ne}),OT=ne({\u0275mod:ne}),tc=ne({\u0275fac:ne}),No=ne({__NG_ELEMENT_ID__:ne}),nv=ne({__NG_ENV_ID__:ne});function Cc(e){return typeof e=="string"?e:e==null?"":String(e)}function kT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Cc(e)}function FT(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new S(-200,e)}function wh(e,t){throw new S(-201,!1)}var U=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(U||{}),kd;function $v(){return kd}function gt(e){let t=kd;return kd=e,t}function Hv(e,t,n){let r=bc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&U.Optional)return null;if(t!==void 0)return t;wh(e,"Injector")}var LT={},xo=LT,Fd="__NG_DI_FLAG__",nc="ngTempTokenPath",VT="ngTokenPath",jT=/\n/gm,UT="\u0275",rv="__source",gi;function BT(){return gi}function Mn(e){let t=gi;return gi=e,t}function $T(e,t=U.Default){if(gi===void 0)throw new S(-203,!1);return gi===null?Hv(e,void 0,t):gi.get(e,t&U.Optional?null:void 0,t)}function C(e,t=U.Default){return($v()||$T)(He(e),t)}function y(e,t=U.Default){return C(e,Ic(t))}function Ic(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ld(e){let t=[];for(let n=0;n<e.length;n++){let r=He(e[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,o=U.Default;for(let s=0;s<r.length;s++){let a=r[s],c=HT(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(C(i,o))}else t.push(C(r))}return t}function Wv(e,t){return e[Fd]=t,e.prototype[Fd]=t,e}function HT(e){return e[Fd]}function WT(e,t,n,r){let i=e[nc];throw t[rv]&&i.unshift(t[rv]),e.message=zT(`
`+e.message,i,n,r),e[VT]=i,e[nc]=null,e}function zT(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==UT?e.slice(2):e;let i=We(t);if(Array.isArray(t))i=t.map(We).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):We(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(jT,`
  `)}`}var bh=Wv(Fv("Optional"),8);var zv=Wv(Fv("SkipSelf"),4);function vi(e,t){let n=e.hasOwnProperty(tc);return n?e[tc]:null}function Ch(e,t){e.forEach(n=>Array.isArray(n)?Ch(n,t):t(n))}function Gv(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function rc(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function GT(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function qT(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function YT(e,t,n){let r=Wo(e,t);return r>=0?e[r|1]=n:(r=~r,qT(e,r,t,n)),r}function wd(e,t){let n=Wo(e,t);if(n>=0)return e[n|1]}function Wo(e,t){return KT(e,t,1)}function KT(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var yi={},_t=[],wi=new T(""),qv=new T("",-1),Yv=new T(""),ic=class{get(t,n=xo){if(n===xo){let r=new Error(`NullInjectorError: No provider for ${We(t)}!`);throw r.name="NullInjectorError",r}return n}},Kv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Kv||{}),Ht=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ht||{}),Ve=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ve||{});function QT(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Vd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];JT(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function ZT(e){return e===3||e===4||e===6}function JT(e){return e.charCodeAt(0)===64}function Ro(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?iv(e,n,i,null,t[++r]):iv(e,n,i,null,null))}}return e}function iv(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Qv="ng-template";function XT(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&QT(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ih(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ih(e){return e.type===4&&e.value!==Qv}function eS(e,t,n){let r=e.type===4&&!n?Qv:e.value;return t===r}function tS(e,t,n){let r=4,i=e.attrs,o=i!==null?iS(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!xt(r)&&!xt(c))return!1;if(s&&xt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!eS(e,c,n)||c===""&&t.length===1){if(xt(r))return!1;s=!0}}else if(r&8){if(i===null||!XT(e,i,c,n)){if(xt(r))return!1;s=!0}}else{let l=t[++a],u=nS(c,i,Ih(e),n);if(u===-1){if(xt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(xt(r))return!1;s=!0}}}}return xt(r)||s}function xt(e){return(e&1)===0}function nS(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return oS(t,e)}function Zv(e,t,n=!1){for(let r=0;r<t.length;r++)if(tS(e,t[r],n))return!0;return!1}function rS(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function iS(e){for(let t=0;t<e.length;t++){let n=e[t];if(ZT(n))return t}return e.length}function oS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function sS(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function ov(e,t){return e?":not("+t.trim()+")":t}function aS(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!xt(s)&&(t+=ov(o,i),i=""),r=s,o=o||!xt(r);n++}return i!==""&&(t+=ov(o,i)),t}function cS(e){return e.map(aS).join(",")}function lS(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!xt(i))break;i=o}r++}return{attrs:t,classes:n}}function ge(e){return Ho(()=>{let t=ny(e),n=P(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Kv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ht.Emulated,styles:e.styles||_t,_:null,schemas:e.schemas||null,tView:null,id:""});ry(n);let r=e.dependencies;return n.directiveDefs=av(r,!1),n.pipeDefs=av(r,!0),n.id=hS(n),n})}function uS(e){return lr(e)||Jv(e)}function dS(e){return e!==null}function _e(e){return Ho(()=>({type:e.type,bootstrap:e.bootstrap||_t,declarations:e.declarations||_t,imports:e.imports||_t,exports:e.exports||_t,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function sv(e,t){if(e==null)return yi;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=Ve.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==Ve.None?[r,a]:r,t[o]=s):n[o]=r}return n}function le(e){return Ho(()=>{let t=ny(e);return ry(t),t})}function lr(e){return e[xT]||null}function Jv(e){return e[RT]||null}function Xv(e){return e[PT]||null}function ey(e){let t=lr(e)||Jv(e)||Xv(e);return t!==null?t.standalone:!1}function ty(e,t){let n=e[OT]||null;if(!n&&t===!0)throw new Error(`Type ${We(e)} does not have '\u0275mod' property.`);return n}function ny(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||yi,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||_t,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sv(e.inputs,t),outputs:sv(e.outputs),debugInfo:null}}function ry(e){e.features?.forEach(t=>t(e))}function av(e,t){if(!e)return null;let n=t?Xv:uS;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(dS)}function hS(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Si(e){return{\u0275providers:e}}function Eh(...e){return{\u0275providers:iy(!0,e),\u0275fromNgModule:!0}}function iy(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ch(t,s=>{let a=s;jd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oy(i,o),n}function oy(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Dh(i,o=>{t(o,r)})}}function jd(e,t,n,r){if(e=He(e),!e)return!1;let i=null,o=ev(e),s=!o&&lr(e);if(!o&&!s){let c=e.ngModule;if(o=ev(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)jd(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ch(o.imports,u=>{jd(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&oy(l,t)}if(!a){let l=vi(i)||(()=>new i);t({provide:i,useFactory:l,deps:_t},i),t({provide:Yv,useValue:i,multi:!0},i),t({provide:wi,useValue:()=>C(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Dh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Dh(e,t){for(let n of e)Bv(n)&&(n=n.\u0275providers),Array.isArray(n)?Dh(n,t):t(n)}var fS=ne({provide:String,useValue:ne});function sy(e){return e!==null&&typeof e=="object"&&fS in e}function pS(e){return!!(e&&e.useExisting)}function mS(e){return!!(e&&e.useFactory)}function bi(e){return typeof e=="function"}function gS(e){return!!e.useClass}var Ec=new T(""),Qa={},_S={},bd;function Th(){return bd===void 0&&(bd=new ic),bd}var Ze=class{},Po=class extends Ze{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bd(t,s=>this.processProvider(s)),this.records.set(qv,fi(void 0,this)),i.has("environment")&&this.records.set(Ze,fi(void 0,this));let o=this.records.get(Ec);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yv,_t,U.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Mn(this),r=gt(void 0),i;try{return t()}finally{Mn(n),gt(r)}}get(t,n=xo,r=U.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(nv))return t[nv](this);r=Ic(r);let i,o=Mn(this),s=gt(void 0);try{if(!(r&U.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=CS(t)&&bc(t);l&&this.injectableDefInScope(l)?c=fi(Ud(t),Qa):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&U.Self?Th():this.parent;return n=r&U.Optional&&n===xo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[nc]=a[nc]||[]).unshift(We(t)),o)throw a;return WT(a,t,"R3InjectorError",this.source)}else throw a}finally{gt(s),Mn(o)}}resolveInjectorInitializers(){let t=Q(null),n=Mn(this),r=gt(void 0),i;try{let o=this.get(wi,_t,U.Self);for(let s of o)s()}finally{Mn(n),gt(r),Q(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(We(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){t=He(t);let n=bi(t)?t:He(t&&t.provide),r=yS(t);if(!bi(t)&&t.multi===!0){let i=this.records.get(n);i||(i=fi(void 0,Qa,!0),i.factory=()=>Ld(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Q(null);try{return n.value===Qa&&(n.value=_S,n.value=n.factory()),typeof n.value=="object"&&n.value&&bS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=He(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ud(e){let t=bc(e),n=t!==null?t.factory:vi(e);if(n!==null)return n;if(e instanceof T)throw new S(204,!1);if(e instanceof Function)return vS(e);throw new S(204,!1)}function vS(e){if(e.length>0)throw new S(204,!1);let n=AT(e);return n!==null?()=>n.factory(e):()=>new e}function yS(e){if(sy(e))return fi(void 0,e.useValue);{let t=ay(e);return fi(t,Qa)}}function ay(e,t,n){let r;if(bi(e)){let i=He(e);return vi(i)||Ud(i)}else if(sy(e))r=()=>He(e.useValue);else if(mS(e))r=()=>e.useFactory(...Ld(e.deps||[]));else if(pS(e))r=()=>C(He(e.useExisting));else{let i=He(e&&(e.useClass||e.provide));if(wS(e))r=()=>new i(...Ld(e.deps));else return vi(i)||Ud(i)}return r}function fi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function wS(e){return!!e.deps}function bS(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function CS(e){return typeof e=="function"||typeof e=="object"&&e instanceof T}function Bd(e,t){for(let n of e)Array.isArray(n)?Bd(n,t):n&&Bv(n)?Bd(n.\u0275providers,t):t(n)}function ln(e,t){e instanceof Po&&e.assertNotDestroyed();let n,r=Mn(e),i=gt(void 0);try{return t()}finally{Mn(r),gt(i)}}function IS(){return $v()!==void 0||BT()!=null}function ES(e){return typeof e=="function"}var un=0,Y=1,x=2,je=3,Rt=4,at=5,Oo=6,ko=7,Pt=8,Ci=9,Ot=10,fe=11,Fo=12,cv=13,Mi=14,kt=15,Dc=16,pi=17,Ii=18,Tc=19,cy=20,An=21,Cd=22,ur=23,Wt=25,ly=1;var dr=7,oc=8,sc=9,vt=10,Sh=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Sh||{});function ar(e){return Array.isArray(e)&&typeof e[ly]=="object"}function dn(e){return Array.isArray(e)&&e[ly]===!0}function Mh(e){return(e.flags&4)!==0}function Sc(e){return e.componentOffset>-1}function Mc(e){return(e.flags&1)===1}function Nn(e){return!!e.template}function DS(e){return(e[x]&512)!==0}var $d=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uy(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Pn(){return dy}function dy(e){return e.type.prototype.ngOnChanges&&(e.setInput=SS),TS}Pn.ngInherit=!0;function TS(){let e=fy(this),t=e?.current;if(t){let n=e.previous;if(n===yi)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function SS(e,t,n,r,i){let o=this.declaredInputs[r],s=fy(e)||MS(e,{previous:yi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new $d(l&&l.currentValue,n,c===yi),uy(e,t,i,n)}var hy="__ngSimpleChanges__";function fy(e){return e[hy]||null}function MS(e,t){return e[hy]=t}var lv=null;var Bt=function(e,t,n){lv?.(e,t,n)},AS="svg",NS="math",xS=!1;function RS(){return xS}function zt(e){for(;Array.isArray(e);)e=e[un];return e}function py(e,t){return zt(t[e])}function yt(e,t){return zt(t[e.index])}function my(e,t){return e.data[t]}function On(e,t){let n=t[e];return ar(n)?n:n[un]}function Ah(e){return(e[x]&128)===128}function PS(e){return dn(e[je])}function Ei(e,t){return t==null?null:e[t]}function gy(e){e[pi]=0}function OS(e){e[x]&1024||(e[x]|=1024,Ah(e)&&Lo(e))}function kS(e,t){for(;e>0;)t=t[Mi],e--;return t}function Nh(e){return!!(e[x]&9216||e[ur]?.dirty)}function Hd(e){e[Ot].changeDetectionScheduler?.notify(1),Nh(e)?Lo(e):e[x]&64&&(RS()?(e[x]|=1024,Lo(e)):e[Ot].changeDetectionScheduler?.notify())}function Lo(e){e[Ot].changeDetectionScheduler?.notify();let t=Vo(e);for(;t!==null&&!(t[x]&8192||(t[x]|=8192,!Ah(t)));)t=Vo(t)}function _y(e,t){if((e[x]&256)===256)throw new S(911,!1);e[An]===null&&(e[An]=[]),e[An].push(t)}function FS(e,t){if(e[An]===null)return;let n=e[An].indexOf(t);n!==-1&&e[An].splice(n,1)}function Vo(e){let t=e[je];return dn(t)?t[je]:t}var G={lFrame:Ey(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function LS(){return G.lFrame.elementDepthCount}function VS(){G.lFrame.elementDepthCount++}function jS(){G.lFrame.elementDepthCount--}function vy(){return G.bindingsEnabled}function yy(){return G.skipHydrationRootTNode!==null}function US(e){return G.skipHydrationRootTNode===e}function BS(){G.skipHydrationRootTNode=null}function te(){return G.lFrame.lView}function Ue(){return G.lFrame.tView}function ve(e){return G.lFrame.contextLView=e,e[Pt]}function ye(e){return G.lFrame.contextLView=null,e}function Je(){let e=wy();for(;e!==null&&e.type===64;)e=e.parent;return e}function wy(){return G.lFrame.currentTNode}function $S(){let e=G.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function _r(e,t){let n=G.lFrame;n.currentTNode=e,n.isParent=t}function xh(){return G.lFrame.isParent}function Rh(){G.lFrame.isParent=!1}function HS(e){return G.lFrame.bindingIndex=e}function Ac(){return G.lFrame.bindingIndex++}function WS(e){let t=G.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function zS(){return G.lFrame.inI18n}function GS(e,t){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=e,Wd(t)}function qS(){return G.lFrame.currentDirectiveIndex}function Wd(e){G.lFrame.currentDirectiveIndex=e}function YS(e){let t=G.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function by(e){G.lFrame.currentQueryIndex=e}function KS(e){let t=e[Y];return t.type===2?t.declTNode:t.type===1?e[at]:null}function Cy(e,t,n){if(n&U.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&U.Host);)if(i=KS(o),i===null||(o=o[Mi],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=G.lFrame=Iy();return r.currentTNode=t,r.lView=e,!0}function Ph(e){let t=Iy(),n=e[Y];G.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Iy(){let e=G.lFrame,t=e===null?null:e.child;return t===null?Ey(e):t}function Ey(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Dy(){let e=G.lFrame;return G.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ty=Dy;function Oh(){let e=Dy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function QS(e){return(G.lFrame.contextLView=kS(e,G.lFrame.contextLView))[Pt]}function Ai(){return G.lFrame.selectedIndex}function hr(e){G.lFrame.selectedIndex=e}function kh(){let e=G.lFrame;return my(e.tView,e.selectedIndex)}function ZS(){return G.lFrame.currentNamespace}var Sy=!0;function Nc(){return Sy}function xc(e){Sy=e}function JS(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=dy(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Rc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Za(e,t,n){My(e,t,3,n)}function Ja(e,t,n,r){(e[x]&3)===n&&My(e,t,n,r)}function Id(e,t){let n=e[x];(n&3)===t&&(n&=16383,n+=1,e[x]=n)}function My(e,t,n,r){let i=r!==void 0?e[pi]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[pi]+=65536),(a<o||o==-1)&&(XS(e,n,t,c),e[pi]=(e[pi]&4294901760)+c+2),c++}function uv(e,t){Bt(4,e,t);let n=Q(null);try{t.call(e)}finally{Q(n),Bt(5,e,t)}}function XS(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[x]>>14<e[pi]>>16&&(e[x]&3)===t&&(e[x]+=16384,uv(a,o)):uv(a,o)}var _i=-1,fr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function eM(e){return e instanceof fr}function tM(e){return(e.flags&8)!==0}function nM(e){return(e.flags&16)!==0}function Ay(e){return e!==_i}function ac(e){return e&32767}function rM(e){return e>>16}function cc(e,t){let n=rM(e),r=t;for(;n>0;)r=r[Mi],n--;return r}var zd=!0;function dv(e){let t=zd;return zd=e,t}var iM=256,Ny=iM-1,xy=5,oM=0,$t={};function sM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(No)&&(r=n[No]),r==null&&(r=n[No]=oM++);let i=r&Ny,o=1<<i;t.data[e+(i>>xy)]|=o}function lc(e,t){let n=Ry(e,t);if(n!==-1)return n;let r=t[Y];r.firstCreatePass&&(e.injectorIndex=t.length,Ed(r.data,e),Ed(t,null),Ed(r.blueprint,null));let i=Fh(e,t),o=e.injectorIndex;if(Ay(i)){let s=ac(i),a=cc(i,t),c=a[Y].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Ed(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ry(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Fh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Ly(i),r===null)return _i;if(n++,i=i[Mi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _i}function Gd(e,t,n){sM(e,t,n)}function Py(e,t,n){if(n&U.Optional||e!==void 0)return e;wh(t,"NodeInjector")}function Oy(e,t,n,r){if(n&U.Optional&&r===void 0&&(r=null),!(n&(U.Self|U.Host))){let i=e[Ci],o=gt(void 0);try{return i?i.get(t,r,n&U.Optional):Hv(t,r,n&U.Optional)}finally{gt(o)}}return Py(r,t,n)}function ky(e,t,n,r=U.Default,i){if(e!==null){if(t[x]&2048&&!(r&U.Self)){let s=dM(e,t,n,r,$t);if(s!==$t)return s}let o=Fy(e,t,n,r,$t);if(o!==$t)return o}return Oy(t,n,r,i)}function Fy(e,t,n,r,i){let o=lM(n);if(typeof o=="function"){if(!Cy(t,e,r))return r&U.Host?Py(i,n,r):Oy(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&U.Optional))wh(n);else return s}finally{Ty()}}else if(typeof o=="number"){let s=null,a=Ry(e,t),c=_i,l=r&U.Host?t[kt][at]:null;for((a===-1||r&U.SkipSelf)&&(c=a===-1?Fh(e,t):t[a+8],c===_i||!fv(r,!1)?a=-1:(s=t[Y],a=ac(c),t=cc(c,t)));a!==-1;){let u=t[Y];if(hv(o,a,u.data)){let d=aM(a,t,n,s,r,l);if(d!==$t)return d}c=t[a+8],c!==_i&&fv(r,t[Y].data[a+8]===l)&&hv(o,a,t)?(s=u,a=ac(c),t=cc(c,t)):a=-1}}return i}function aM(e,t,n,r,i,o){let s=t[Y],a=s.data[e+8],c=r==null?Sc(a)&&zd:r!=s&&(a.type&3)!==0,l=i&U.Host&&o===a,u=cM(a,s,n,c,l);return u!==null?Di(t,s,u,a):$t}function cM(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let p=d;p<h;p++){let m=s[p];if(p<c&&n===m||p>=c&&m.type===n)return p}if(i){let p=s[c];if(p&&Nn(p)&&p.type===n)return c}return null}function Di(e,t,n,r){let i=e[n],o=t.data;if(eM(i)){let s=i;s.resolving&&FT(kT(o[n]));let a=dv(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?gt(s.injectImpl):null,u=Cy(e,r,U.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&JS(n,o[n],t)}finally{l!==null&&gt(l),dv(a),s.resolving=!1,Ty()}}return i}function lM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(No)?e[No]:void 0;return typeof t=="number"?t>=0?t&Ny:uM:t}function hv(e,t,n){let r=1<<e;return!!(n[t+(e>>xy)]&r)}function fv(e,t){return!(e&U.Self)&&!(e&U.Host&&t)}var cr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ky(this._tNode,this._lView,t,Ic(r),n)}};function uM(){return new cr(Je(),te())}function Ni(e){return Ho(()=>{let t=e.prototype.constructor,n=t[tc]||qd(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[tc]||qd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qd(e){return Lv(e)?()=>{let t=qd(He(e));return t&&t()}:vi(e)}function dM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[x]&2048&&!(s[x]&512);){let a=Fy(o,s,n,r|U.Self,$t);if(a!==$t)return a;let c=o.parent;if(!c){let l=s[cy];if(l){let u=l.get(n,$t,r);if(u!==$t)return u}c=Ly(s),s=s[Mi]}o=c}return i}function Ly(e){let t=e[Y],n=t.type;return n===2?t.declTNode:n===1?e[at]:null}function pv(e,t=null,n=null,r){let i=Vy(e,t,n,r);return i.resolveInjectorInitializers(),i}function Vy(e,t=null,n=null,r,i=new Set){let o=[n||_t,Eh(e)];return r=r||(typeof e=="object"?void 0:We(e)),new Po(o,t||Th(),r||null,i)}var xi=(()=>{class e{static{this.THROW_IF_NOT_FOUND=xo}static{this.NULL=new ic}static create(n,r){if(Array.isArray(n))return pv({name:""},r,n,"");{let i=n.name??"";return pv({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=E({token:e,providedIn:"any",factory:()=>C(qv)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var hM="ngOriginalError";function Dd(e){return e[hM]}var an=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Dd(t);for(;n&&Dd(n);)n=Dd(n);return n||null}},jy=new T("",{providedIn:"root",factory:()=>y(an).handleError.bind(void 0)}),Uy=(()=>{class e{static{this.__NG_ELEMENT_ID__=fM}static{this.__NG_ENV_ID__=n=>n}}return e})(),Yd=class extends Uy{constructor(t){super(),this._lView=t}onDestroy(t){return _y(this._lView,t),()=>FS(this._lView,t)}};function fM(){return new Yd(te())}function pM(){return Pc(Je(),te())}function Pc(e,t){return new ct(yt(e,t))}var ct=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=pM}}return e})();var Kd=class extends Ne{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,IS()&&(this.destroyRef=y(Uy,{optional:!0})??void 0)}emit(t){let n=Q(null);try{super.next(t)}finally{Q(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Td(o),i&&(i=Td(i)),s&&(s=Td(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof he&&t.add(a),a}};function Td(e){return t=>{setTimeout(e,void 0,t)}}var Te=Kd;function By(e){return(e.flags&128)===128}var $y=new Map,mM=0;function gM(){return mM++}function _M(e){$y.set(e[Tc],e)}function vM(e){$y.delete(e[Tc])}var mv="__ngContext__";function xn(e,t){ar(t)?(e[mv]=t[Tc],_M(t)):e[mv]=t}function Hy(e){return zy(e[Fo])}function Wy(e){return zy(e[Rt])}function zy(e){for(;e!==null&&!dn(e);)e=e[Rt];return e}var Qd;function Gy(e){Qd=e}function yM(){if(Qd!==void 0)return Qd;if(typeof document<"u")return document;throw new S(210,!1)}var Oc=new T("",{providedIn:"root",factory:()=>wM}),wM="ng",Lh=new T(""),Gt=new T("",{providedIn:"platform",factory:()=>"unknown"});var zo=new T("",{providedIn:"root",factory:()=>yM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bM="h",CM="b";var IM=()=>null;function Vh(e,t,n=!1){return IM(e,t,n)}var qy=!1,EM=new T("",{providedIn:"root",factory:()=>qy});var uc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kv})`}};function kc(e){return e instanceof uc?e.changingThisBreaksApplicationSecurity:e}function Yy(e,t){let n=DM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${kv})`)}return n===t}function DM(e){return e instanceof uc&&e.getTypeName()||null}var TM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ky(e){return e=String(e),e.match(TM)?e:"unsafe:"+e}var jh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(jh||{});function Uh(e){let t=SM();return t?t.sanitize(jh.URL,e)||"":Yy(e,"URL")?kc(e):Ky(Cc(e))}function SM(){let e=te();return e&&e[Ot].sanitizer}var MM=/^>|^->|<!--|-->|--!>|<!-$/g,AM=/(<|>)/g,NM="\u200B$1\u200B";function xM(e){return e.replace(MM,t=>t.replace(AM,NM))}function Qy(e){return e instanceof Function?e():e}var cn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(cn||{}),RM;function Bh(e,t){return RM(e,t)}function mi(e,t,n,r,i){if(r!=null){let o,s=!1;dn(r)?o=r:ar(r)&&(s=!0,r=r[un]);let a=zt(r);e===0&&n!==null?i==null?nw(t,n,a):dc(t,n,a,i||null,!0):e===1&&n!==null?dc(t,n,a,i||null,!0):e===2?YM(t,a,s):e===3&&t.destroyNode(a),o!=null&&QM(t,e,o,n,i)}}function PM(e,t){return e.createText(t)}function OM(e,t,n){e.setValue(t,n)}function kM(e,t){return e.createComment(xM(t))}function Zy(e,t,n){return e.createElement(t,n)}function FM(e,t){Jy(e,t),t[un]=null,t[at]=null}function LM(e,t,n,r,i,o){r[un]=i,r[at]=t,Lc(e,r,n,1,i,o)}function Jy(e,t){t[Ot].changeDetectionScheduler?.notify(1),Lc(e,t,t[fe],2,null,null)}function VM(e){let t=e[Fo];if(!t)return Sd(e[Y],e);for(;t;){let n=null;if(ar(t))n=t[Fo];else{let r=t[vt];r&&(n=r)}if(!n){for(;t&&!t[Rt]&&t!==e;)ar(t)&&Sd(t[Y],t),t=t[je];t===null&&(t=e),ar(t)&&Sd(t[Y],t),n=t&&t[Rt]}t=n}}function jM(e,t,n,r){let i=vt+r,o=n.length;r>0&&(n[i-1][Rt]=t),r<o-vt?(t[Rt]=n[i],Gv(n,vt+r,t)):(n.push(t),t[Rt]=null),t[je]=n;let s=t[Dc];s!==null&&n!==s&&UM(s,t);let a=t[Ii];a!==null&&a.insertView(e),Hd(t),t[x]|=128}function UM(e,t){let n=e[sc],i=t[je][je][kt];t[kt]!==i&&(e[x]|=Sh.HasTransplantedViews),n===null?e[sc]=[t]:n.push(t)}function Xy(e,t){let n=e[sc],r=n.indexOf(t);n.splice(r,1)}function Zd(e,t){if(e.length<=vt)return;let n=vt+t,r=e[n];if(r){let i=r[Dc];i!==null&&i!==e&&Xy(i,r),t>0&&(e[n-1][Rt]=r[Rt]);let o=rc(e,vt+t);FM(r[Y],r);let s=o[Ii];s!==null&&s.detachView(o[Y]),r[je]=null,r[Rt]=null,r[x]&=-129}return r}function ew(e,t){if(!(t[x]&256)){let n=t[fe];n.destroyNode&&Lc(e,t,n,3,null,null),VM(t)}}function Sd(e,t){if(t[x]&256)return;let n=Q(null);try{t[x]&=-129,t[x]|=256,t[ur]&&D_(t[ur]),$M(e,t),BM(e,t),t[Y].type===1&&t[fe].destroy();let r=t[Dc];if(r!==null&&dn(t[je])){r!==t[je]&&Xy(r,t);let i=t[Ii];i!==null&&i.detachView(e)}vM(t)}finally{Q(n)}}function BM(e,t){let n=e.cleanup,r=t[ko];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[ko]=null);let i=t[An];if(i!==null){t[An]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function $M(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof fr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Bt(4,a,c);try{c.call(a)}finally{Bt(5,a,c)}}else{Bt(4,i,o);try{o.call(i)}finally{Bt(5,i,o)}}}}}function tw(e,t,n){return HM(e,t.parent,n)}function HM(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[un];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Ht.None||o===Ht.Emulated)return null}return yt(r,n)}}function dc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function nw(e,t,n){e.appendChild(t,n)}function gv(e,t,n,r,i){r!==null?dc(e,t,n,r,i):nw(e,t,n)}function WM(e,t,n,r){e.removeChild(t,n,r)}function $h(e,t){return e.parentNode(t)}function zM(e,t){return e.nextSibling(t)}function rw(e,t,n){return qM(e,t,n)}function GM(e,t,n){return e.type&40?yt(e,n):null}var qM=GM,_v;function Fc(e,t,n,r){let i=tw(e,r,t),o=t[fe],s=r.parent||t[at],a=rw(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)gv(o,i,n[c],a,!1);else gv(o,i,n,a,!1);_v!==void 0&&_v(o,r,t,n,i)}function Xa(e,t){if(t!==null){let n=t.type;if(n&3)return yt(t,e);if(n&4)return Jd(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Xa(e,r);{let i=e[t.index];return dn(i)?Jd(-1,i):zt(i)}}else{if(n&32)return Bh(t,e)()||zt(e[t.index]);{let r=iw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Vo(e[kt]);return Xa(i,r)}else return Xa(e,t.next)}}}return null}function iw(e,t){if(t!==null){let r=e[kt][at],i=t.projection;return r.projection[i]}return null}function Jd(e,t){let n=vt+e+1;if(n<t.length){let r=t[n],i=r[Y].firstChild;if(i!==null)return Xa(r,i)}return t[dr]}function YM(e,t,n){let r=$h(e,t);r&&WM(e,r,t,n)}function Hh(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&xn(zt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Hh(e,t,n.child,r,i,o,!1),mi(t,e,i,a,o);else if(c&32){let l=Bh(n,r),u;for(;u=l();)mi(t,e,i,u,o);mi(t,e,i,a,o)}else c&16?ow(e,t,r,n,i,o):mi(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Lc(e,t,n,r,i,o){Hh(n,r,e.firstChild,t,i,o,!1)}function KM(e,t,n){let r=t[fe],i=tw(e,n,t),o=n.parent||t[at],s=rw(o,n,t);ow(r,0,t,n,i,s)}function ow(e,t,n,r,i,o){let s=n[kt],c=s[at].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mi(t,e,i,u,o)}else{let l=c,u=s[je];By(r)&&(l.flags|=128),Hh(e,t,l,u,i,o,!0)}}function QM(e,t,n,r,i){let o=n[dr],s=zt(n);o!==s&&mi(t,e,r,o,i);for(let a=vt;a<n.length;a++){let c=n[a];Lc(c[Y],c,e,t,r,o)}}function ZM(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:cn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=cn.Important),e.setStyle(n,r,i,o))}}function JM(e,t,n){e.setAttribute(t,"style",n)}function sw(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function aw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Vd(e,t,r),i!==null&&sw(e,t,i),o!==null&&JM(e,t,o)}var Ri={};function L(e=1){cw(Ue(),te(),Ai()+e,!1)}function cw(e,t,n,r){if(!r)if((t[x]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Za(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ja(t,o,0,n)}hr(n)}function M(e,t=U.Default){let n=te();if(n===null)return C(e,t);let r=Je();return ky(r,n,He(e),t)}function lw(e,t,n,r,i,o){let s=Q(null);try{let a=null;i&Ve.SignalBased&&(a=t[r][Zu]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ve.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):uy(t,a,r,o)}finally{Q(s)}}function XM(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)hr(~i);else{let o=i,s=n[++r],a=n[++r];GS(s,o);let c=t[o];a(2,c)}}}finally{hr(-1)}}function Vc(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[un]=i,d[x]=r|4|128|8|64,(l!==null||e&&e[x]&2048)&&(d[x]|=2048),gy(d),d[je]=d[Mi]=e,d[Pt]=n,d[Ot]=s||e&&e[Ot],d[fe]=a||e&&e[fe],d[Ci]=c||e&&e[Ci]||null,d[at]=o,d[Tc]=gM(),d[Oo]=u,d[cy]=l,d[kt]=t.type==2?e[kt]:d,d}function Pi(e,t,n,r,i){let o=e.data[t];if(o===null)o=eA(e,t,n,r,i),zS()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=$S();o.injectorIndex=s===null?-1:s.injectorIndex}return _r(o,!0),o}function eA(e,t,n,r,i){let o=wy(),s=xh(),a=s?o:o&&o.parent,c=e.data[t]=oA(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function uw(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function dw(e,t,n,r,i){let o=Ai(),s=r&2;try{hr(-1),s&&t.length>Wt&&cw(e,t,Wt,!1),Bt(s?2:0,i),n(r,i)}finally{hr(o),Bt(s?3:1,i)}}function Wh(e,t,n){if(Mh(t)){let r=Q(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Q(r)}}}function zh(e,t,n){vy()&&(dA(e,t,n,yt(n,t)),(n.flags&64)===64&&mw(e,t,n))}function Gh(e,t,n=yt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function hw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=qh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function qh(e,t,n,r,i,o,s,a,c,l,u){let d=Wt+r,h=d+i,p=tA(d,h),m=typeof l=="function"?l():l;return p[Y]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function tA(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ri);return n}function nA(e,t,n,r){let o=r.get(EM,qy)||n===Ht.ShadowDom,s=e.selectRootElement(t,o);return rA(s),s}function rA(e){iA(e)}var iA=()=>null;function oA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return yy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vv(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=Ve.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?yv(r,n,l,a,c):yv(r,n,l,a)}return r}function yv(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function sA(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,m=h?h.outputs:null;c=vv(0,d.inputs,u,c,p),l=vv(1,d.outputs,u,l,m);let g=c!==null&&s!==null&&!Ih(t)?CA(c,u,s):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function aA(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function fw(e,t,n,r,i,o,s,a){let c=yt(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(Kh(e,n,u,r,i),Sc(t)&&cA(n,t.index)):t.type&3?(r=aA(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function cA(e,t){let n=On(t,e);n[x]&16||(n[x]|=64)}function Yh(e,t,n,r){if(vy()){let i=r===null?null:{"":-1},o=fA(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&pw(e,t,n,s,i,a),i&&pA(n,r,i)}n.mergedAttrs=Ro(n.mergedAttrs,n.attrs)}function pw(e,t,n,r,i,o){for(let l=0;l<r.length;l++)Gd(lc(n,t),e,r[l].type);gA(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=uw(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ro(n.mergedAttrs,u.hostAttrs),_A(e,n,t,c,u),mA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}sA(e,n,o)}function lA(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;uA(s)!=a&&s.push(a),s.push(n,r,o)}}function uA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function dA(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Sc(n)&&vA(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||lc(n,t),xn(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=Di(t,e,a,n);if(xn(l,t),s!==null&&bA(t,a-i,l,c,n,s),Nn(c)){let u=On(n.index,t);u[Pt]=Di(t,e,a,n)}}}function mw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qS();try{hr(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Wd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hA(c,l)}}finally{hr(-1),Wd(s)}}function hA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function fA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Zv(t,s.selectors,!1))if(r||(r=[]),Nn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Xd(e,t,c)}else r.unshift(s),Xd(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xd(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function pA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new S(-301,!1);r.push(t[i],o)}}}function mA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Nn(t)&&(n[""]=e)}}function gA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function _A(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=vi(i.type,!0)),s=new fr(o,Nn(i),M);e.blueprint[r]=s,n[r]=s,lA(e,t,r,uw(e,n,i.hostVars,Ri),i)}function vA(e,t,n){let r=yt(t,e),i=hw(n),o=e[Ot].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=jc(e,Vc(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function yA(e,t,n,r,i,o){let s=yt(e,t);wA(t[fe],s,o,e.value,n,r,i)}function wA(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Cc(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function bA(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];lw(r,n,c,l,u,d)}}function CA(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function gw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function _w(e,t){let n=e.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];by(o),a.contentQueries(2,t[s],s)}}}finally{Q(r)}}}function jc(e,t){return e[Fo]?e[cv][Rt]=t:e[Fo]=t,e[cv]=t,t}function eh(e,t,n){by(0);let r=Q(null);try{t(e,n)}finally{Q(r)}}function IA(e){return e[ko]||(e[ko]=[])}function EA(e){return e.cleanup||(e.cleanup=[])}function vw(e,t){let n=e[Ci],r=n?n.get(an,null):null;r&&r.handleError(t)}function Kh(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];lw(u,l,r,a,c,i)}}function DA(e,t,n){let r=py(t,e);OM(e[fe],r,n)}function TA(e,t){let n=On(t,e),r=n[Y];SA(r,n);let i=n[un];i!==null&&n[Oo]===null&&(n[Oo]=Vh(i,n[Ci])),Qh(r,n,n[Pt])}function SA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Qh(e,t,n){Ph(t);try{let r=e.viewQuery;r!==null&&eh(1,r,n);let i=e.template;i!==null&&dw(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ii]?.finishViewCreation(e),e.staticContentQueries&&_w(e,t),e.staticViewQueries&&eh(2,e.viewQuery,n);let o=e.components;o!==null&&MA(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[x]&=-5,Oh()}}function MA(e,t){for(let n=0;n<t.length;n++)TA(e,t[n])}function AA(e,t,n,r){let i=Q(null);try{let o=t.tView,a=e[x]&4096?4096:16,c=Vc(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Dc]=l;let u=e[Ii];return u!==null&&(c[Ii]=u.createEmbeddedView(o)),Qh(o,c,n),c}finally{Q(i)}}function wv(e,t){return!t||t.firstChild===null||By(e)}function NA(e,t,n,r=!0){let i=t[Y];if(jM(i,t,e,n),r){let s=Jd(n,e),a=t[fe],c=$h(a,e[dr]);c!==null&&LM(i,e[at],a,t,c,s)}let o=t[Oo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function hc(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(zt(o)),dn(o)&&xA(o,r);let s=n.type;if(s&8)hc(e,t,n.child,r);else if(s&32){let a=Bh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=iw(t,n);if(Array.isArray(a))r.push(...a);else{let c=Vo(t[kt]);hc(c[Y],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function xA(e,t){for(let n=vt;n<e.length;n++){let r=e[n],i=r[Y].firstChild;i!==null&&hc(r[Y],r,i,t)}e[dr]!==e[un]&&t.push(e[dr])}var yw=[];function RA(e){return e[ur]??PA(e)}function PA(e){let t=yw.pop()??Object.create(kA);return t.lView=e,t}function OA(e){e.lView[ur]!==e&&(e.lView=null,yw.push(e))}var kA=P(_({},C_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Lo(e.lView)},consumerOnSignalRead(){this.lView[ur]=this}}),ww=100;function bw(e,t=!0,n=0){let r=e[Ot],i=r.rendererFactory,o=!1;o||i.begin?.();try{FA(e,n)}catch(s){throw t&&vw(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function FA(e,t){th(e,t);let n=0;for(;Nh(e);){if(n===ww)throw new S(103,!1);n++,th(e,1)}}function LA(e,t,n,r){let i=t[x];if((i&256)===256)return;let o=!1;!o&&t[Ot].inlineEffectRunner?.flush(),Ph(t);let s=null,a=null;!o&&VA(e)&&(a=RA(t),s=I_(a));try{gy(t),HS(e.bindingStartIndex),n!==null&&dw(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=e.preOrderCheckHooks;d!==null&&Za(t,d,null)}else{let d=e.preOrderHooks;d!==null&&Ja(t,d,0,null),Id(t,0)}if(jA(t),Cw(t,0),e.contentQueries!==null&&_w(e,t),!o)if(c){let d=e.contentCheckHooks;d!==null&&Za(t,d)}else{let d=e.contentHooks;d!==null&&Ja(t,d,1),Id(t,1)}XM(e,t);let l=e.components;l!==null&&Ew(t,l,0);let u=e.viewQuery;if(u!==null&&eh(2,u,r),!o)if(c){let d=e.viewCheckHooks;d!==null&&Za(t,d)}else{let d=e.viewHooks;d!==null&&Ja(t,d,2),Id(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Cd]){for(let d of t[Cd])d();t[Cd]=null}o||(t[x]&=-73)}catch(c){throw Lo(t),c}finally{a!==null&&(E_(a,s),OA(a)),Oh()}}function VA(e){return e.type!==2}function Cw(e,t){for(let n=Hy(e);n!==null;n=Wy(n))for(let r=vt;r<n.length;r++){let i=n[r];Iw(i,t)}}function jA(e){for(let t=Hy(e);t!==null;t=Wy(t)){if(!(t[x]&Sh.HasTransplantedViews))continue;let n=t[sc];for(let r=0;r<n.length;r++){let i=n[r],o=i[je];OS(i)}}}function UA(e,t,n){let r=On(t,e);Iw(r,n)}function Iw(e,t){Ah(e)&&th(e,t)}function th(e,t){let r=e[Y],i=e[x],o=e[ur],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ju(o)),o&&(o.dirty=!1),e[x]&=-9217,s)LA(r,e,r.template,e[Pt]);else if(i&8192){Cw(e,1);let a=r.components;a!==null&&Ew(e,a,1)}}function Ew(e,t,n){for(let r=0;r<t.length;r++)UA(e,t[r],n)}function Zh(e){for(e[Ot].changeDetectionScheduler?.notify();e;){e[x]|=64;let t=Vo(e);if(DS(e)&&!t)return e;e=t}return null}var pr=class{get rootNodes(){let t=this._lView,n=t[Y];return hc(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pt]}set context(t){this._lView[Pt]=t}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[je];if(dn(t)){let n=t[oc],r=n?n.indexOf(this):-1;r>-1&&(Zd(t,r),rc(n,r))}this._attachedToViewContainer=!1}ew(this._lView[Y],this._lView)}onDestroy(t){_y(this._lView,t)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[x]&=-129}reattach(){Hd(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,bw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Jy(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t,Hd(this._lView)}},Uc=(()=>{class e{static{this.__NG_ELEMENT_ID__=HA}}return e})(),BA=Uc,$A=class extends BA{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=AA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new pr(i)}};function HA(){return WA(Je(),te())}function WA(e,t){return e.type&4?new $A(t,e,Pc(e,t)):null}var Wz=new RegExp(`^(\\d+)*(${CM}|${bM})*(.*)`);var zA=()=>null;function bv(e,t){return zA(e,t)}var nh=class{},rh=class{},fc=class{};function GA(e){let t=Error(`No component factory found for ${We(e)}.`);return t[qA]=e,t}var qA="ngComponent";var ih=class{resolveComponentFactory(t){throw GA(t)}},Bc=(()=>{class e{static{this.NULL=new ih}}return e})(),jo=class{},Oi=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>YA()}}return e})();function YA(){let e=te(),t=Je(),n=On(t.index,e);return(ar(n)?n:e)[fe]}var KA=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>null})}}return e})(),Md={};var Cv=new Set;function Jh(e){Cv.has(e)||(Cv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Iv(...e){}function QA(){let e=typeof Ao.requestAnimationFrame=="function",t=Ao[e?"requestAnimationFrame":"setTimeout"],n=Ao[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var re=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=QA().nativeRequestAnimationFrame,XA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new S(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,ZA,Iv,Iv);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},ZA={};function Xh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function JA(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ao,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,oh(e),e.isCheckStableRunning=!0,Xh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),oh(e))}function XA(e){let t=()=>{JA(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(eN(a))return n.invokeTask(i,o,s,a);try{return Ev(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Dv(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Ev(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),Dv(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,oh(e),Xh(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function oh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Ev(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Dv(e){e._nesting--,Xh(e)}function eN(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var Dw=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})();function pc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=J_(i,a);else if(o==2){let c=a,l=t[++s];r=J_(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var mc=class extends Bc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=lr(t);return new Uo(n,this.ngModule)}};function Tv(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function tN(e){let t=e.toLowerCase();return t==="svg"?AS:t==="math"?NS:null}var sh=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ic(r);let i=this.injector.get(t,Md,r);return i!==Md||n===Md?i:this.parentInjector.get(t,n,r)}},Uo=class extends fc{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Tv(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Tv(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=cS(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Q(null);try{i=i||this.ngModule;let s=i instanceof Ze?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new sh(t,s):t,c=a.get(jo,null);if(c===null)throw new S(407,!1);let l=a.get(KA,null),u=a.get(Dw,null),d=a.get(nh,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=r?nA(p,r,this.componentDef.encapsulation,a):Zy(p,m,tN(m)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let D=null;g!==null&&(D=Vh(g,a,!0));let oe=qh(0,null,null,1,0,null,null,null,null,null,null),H=Vc(null,oe,null,I,null,null,h,p,a,null,D);Ph(H);let Ae,bn;try{let rt=this.componentDef,ti,Ku=null;rt.findHostDirectiveDefs?(ti=[],Ku=new Map,rt.findHostDirectiveDefs(rt,ti,Ku),ti.push(rt)):ti=[rt];let Y0=nN(H,g),K0=rN(Y0,g,rt,ti,H,h,p);bn=my(oe,Wt),g&&sN(p,rt,g,r),n!==void 0&&aN(bn,this.ngContentSelectors,n),Ae=oN(K0,rt,ti,Ku,H,[cN]),Qh(oe,H,null)}finally{Oh()}return new ah(this.componentType,Ae,Pc(bn,H),H,bn)}finally{Q(o)}}},ah=class extends rh{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new pr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Kh(o[Y],o,i,t,n),this.previousInputValues.set(t,n);let s=On(this._tNode.index,o);Zh(s)}}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function nN(e,t){let n=e[Y],r=Wt;return e[r]=t,Pi(n,r,2,"#host",null)}function rN(e,t,n,r,i,o,s){let a=i[Y];iN(r,e,t,s);let c=null;t!==null&&(c=Vh(t,i[Ci]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Vc(i,hw(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&Xd(a,e,r.length-1),jc(i,d),i[e.index]=d}function iN(e,t,n,r){for(let i of e)t.mergedAttrs=Ro(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(pc(t,t.mergedAttrs,!0),n!==null&&aw(r,n,t))}function oN(e,t,n,r,i,o){let s=Je(),a=i[Y],c=yt(s,i);pw(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Di(i,a,d,s);xn(h,i)}mw(a,i,s),c&&xn(c,i);let l=Di(i,a,s.directiveStart+s.componentOffset,s);if(e[Pt]=i[Pt]=l,o!==null)for(let u of o)u(l,t);return Wh(a,s,i),l}function sN(e,t,n,r){if(r)Vd(e,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=lS(t.selectors[0]);i&&Vd(e,n,i),o&&o.length>0&&sw(e,n,o.join(" "))}}function aN(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function cN(){let e=Je();Rc(te()[Y],e)}var ki=(()=>{class e{static{this.__NG_ELEMENT_ID__=lN}}return e})();function lN(){let e=Je();return dN(e,te())}var uN=ki,Tw=class extends uN{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Pc(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Fh(this._hostTNode,this._hostLView);if(Ay(t)){let n=cc(t,this._hostLView),r=ac(t),i=n[Y].data[r+8];return new cr(i,n)}else return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Sv(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-vt}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,wv(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!ES(t),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?t:new Uo(lr(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let g=(s?l:this.parentInjector).get(Ze,null);g&&(o=g)}let u=lr(c.componentType??{}),d=bv(this._lContainer,u?.id??null),h=d?.firstChild??null,p=c.create(l,i,h,o);return this.insertImpl(p.hostView,a,wv(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(PS(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[je],l=new Tw(c,c[at],c[je]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return NA(s,i,o,r),t.attachToViewContainerRef(),Gv(Ad(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Sv(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Zd(this._lContainer,n);r&&(rc(Ad(this._lContainer),n),ew(r[Y],r))}detach(t){let n=this._adjustIndex(t,-1),r=Zd(this._lContainer,n);return r&&rc(Ad(this._lContainer),n)!=null?new pr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Sv(e){return e[oc]}function Ad(e){return e[oc]||(e[oc]=[])}function dN(e,t){let n,r=t[e.index];return dn(r)?n=r:(n=gw(r,t,null,e),t[e.index]=n,jc(t,n)),fN(n,t,e,r),new Tw(n,e,t)}function hN(e,t){let n=e[fe],r=n.createComment(""),i=yt(t,e),o=$h(n,i);return dc(n,o,r,zM(n,i),!1),r}var fN=gN,pN=()=>!1;function mN(e,t,n){return pN(e,t,n)}function gN(e,t,n,r){if(e[dr])return;let i;n.type&8?i=zt(r):i=hN(t,n),e[dr]=i}function Sw(e){return typeof e=="function"&&e[Zu]!==void 0}function Mw(e){return Sw(e)&&typeof e.set=="function"}function _N(e){return Object.getPrototypeOf(e.prototype).constructor}function hn(e){let t=_N(e.type),n=!0,r=[e];for(;t;){let i;if(Nn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Ya(e.inputs),s.inputTransforms=Ya(e.inputTransforms),s.declaredInputs=Ya(e.declaredInputs),s.outputs=Ya(e.outputs);let a=i.hostBindings;a&&CN(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&wN(e,c),l&&bN(e,l),vN(e,i),ST(e.outputs,i.outputs),Nn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===hn&&(n=!1)}}t=Object.getPrototypeOf(t)}yN(r)}function vN(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function yN(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ro(i.hostAttrs,n=Ro(n,i.hostAttrs))}}function Ya(e){return e===yi?{}:e===_t?[]:e}function wN(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function bN(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function CN(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var Rn=class{},Bo=class{};var ch=class extends Rn{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mc(this);let i=ty(t);this._bootstrapComponents=Qy(i.bootstrap),this._r3Injector=Vy(t,n,[{provide:Rn,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver},...r],We(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},lh=class extends Bo{constructor(t){super(),this.moduleType=t}create(t){return new ch(this.moduleType,t,[])}};var gc=class extends Rn{constructor(t){super(),this.componentFactoryResolver=new mc(this),this.instance=null;let n=new Po([...t.providers,{provide:Rn,useValue:this},{provide:Bc,useValue:this.componentFactoryResolver}],t.parent||Th(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function ef(e,t,n=null){return new gc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var vr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Aw(e){return EN(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function IN(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function EN(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Go(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function DN(e){return(e.flags&32)===32}function TN(e,t,n,r,i,o,s,a,c){let l=t.consts,u=Pi(t,e,4,s||null,Ei(l,a));Yh(t,n,u,Ei(l,c)),Rc(t,u);let d=u.tView=qh(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function Re(e,t,n,r,i,o,s,a){let c=te(),l=Ue(),u=e+Wt,d=l.firstCreatePass?TN(u,l,c,t,n,r,i,o,s):l.data[u];_r(d,!1);let h=SN(l,c,d,e);Nc()&&Fc(l,c,h,d),xn(h,c);let p=gw(h,c,h,d);return c[u]=p,jc(c,p),mN(p,d,c),Mc(d)&&zh(l,c,d),s!=null&&Gh(c,d,a),Re}var SN=MN;function MN(e,t,n,r){return xc(!0),t[fe].createComment("")}function yr(e,t,n,r){let i=te(),o=Ac();if(Go(i,o,t)){let s=Ue(),a=kh();yA(a,i,e,t,n,r)}return yr}function AN(e,t,n,r){return Go(e,Ac(),n)?t+Cc(n)+r:Ri}function Ka(e,t){return e<<17|t<<2}function mr(e){return e>>17&32767}function NN(e){return(e&2)==2}function xN(e,t){return e&131071|t<<17}function uh(e){return e|2}function Ti(e){return(e&131068)>>2}function Nd(e,t){return e&-131069|t<<2}function RN(e){return(e&1)===1}function dh(e){return e|1}function PN(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=mr(s),c=Ti(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Wo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=mr(e[a+1]);e[r+1]=Ka(h,a),h!==0&&(e[h+1]=Nd(e[h+1],r)),e[a+1]=xN(e[a+1],r)}else e[r+1]=Ka(a,0),a!==0&&(e[a+1]=Nd(e[a+1],r)),a=r;else e[r+1]=Ka(c,0),a===0?a=r:e[c+1]=Nd(e[c+1],r),c=r;l&&(e[r+1]=uh(e[r+1])),Mv(e,u,r,!0),Mv(e,u,r,!1),ON(t,u,e,r,o),s=Ka(a,c),o?t.classBindings=s:t.styleBindings=s}function ON(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Wo(o,t)>=0&&(n[r+1]=dh(n[r+1]))}function Mv(e,t,n,r){let i=e[n+1],o=t===null,s=r?mr(i):Ti(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];kN(c,t)&&(a=!0,e[s+1]=r?dh(l):uh(l)),s=r?mr(l):Ti(l)}a&&(e[n+1]=r?uh(i):dh(i))}function kN(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Wo(e,t)>=0:!1}function se(e,t,n){let r=te(),i=Ac();if(Go(r,i,t)){let o=Ue(),s=kh();fw(o,s,r,e,t,r[fe],n,!1)}return se}function Av(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";Kh(e,n,o[s],s,r)}function Fi(e,t,n){return Nw(e,t,n,!1),Fi}function qt(e,t){return Nw(e,t,null,!0),qt}function Nw(e,t,n,r){let i=te(),o=Ue(),s=WS(2);if(o.firstUpdatePass&&LN(o,e,s,r),t!==Ri&&Go(i,s,t)){let a=o.data[Ai()];$N(o,a,i,i[fe],e,i[s+1]=HN(t,n),r,s)}}function FN(e,t){return t>=e.expandoStartIndex}function LN(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Ai()],s=FN(e,n);WN(o,r)&&t===null&&!s&&(t=!1),t=VN(i,o,t,r),PN(i,o,t,n,s,r)}}function VN(e,t,n,r){let i=YS(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=xd(null,e,t,n,r),n=$o(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=xd(i,e,t,n,r),o===null){let c=jN(e,t,r);c!==void 0&&Array.isArray(c)&&(c=xd(null,e,t,c[1],r),c=$o(c,t.attrs,r),UN(e,t,r,c))}else o=BN(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function jN(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Ti(r)!==0)return e[mr(r)]}function UN(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[mr(i)]=r}function BN(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=$o(r,s,n)}return $o(r,t.attrs,n)}function xd(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=$o(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function $o(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),YT(e,s,n?!0:t[++o]))}return e===void 0?null:e}function $N(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=RN(l)?Nv(c,t,n,i,Ti(l),s):void 0;if(!_c(u)){_c(o)||NN(l)&&(o=Nv(c,null,n,i,a,s));let d=py(Ai(),n);ZM(r,s,d,i,o)}}function Nv(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Ri&&(h=d?_t:void 0);let p=d?wd(h,r):u===r?h:void 0;if(l&&!_c(p)&&(p=wd(c,r)),_c(p)&&(a=p,s))return a;let m=e[i+1];i=s?mr(m):Ti(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=wd(c,r))}return a}function _c(e){return e!==void 0}function HN(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=We(kc(e)))),e}function WN(e,t){return(e.flags&(t?8:16))!==0}function zN(e,t,n,r,i,o){let s=t.consts,a=Ei(s,i),c=Pi(t,e,2,r,a);return Yh(t,n,c,Ei(s,o)),c.attrs!==null&&pc(c,c.attrs,!1),c.mergedAttrs!==null&&pc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function w(e,t,n,r){let i=te(),o=Ue(),s=Wt+e,a=i[fe],c=o.firstCreatePass?zN(s,o,i,t,n,r):o.data[s],l=GN(o,i,c,a,t,e);i[s]=l;let u=Mc(c);return _r(c,!0),aw(a,l,c),!DN(c)&&Nc()&&Fc(o,i,l,c),LS()===0&&xn(l,i),VS(),u&&(zh(o,i,c),Wh(o,c,i)),r!==null&&Gh(i,c),w}function b(){let e=Je();xh()?Rh():(e=e.parent,_r(e,!1));let t=e;US(t)&&BS(),jS();let n=Ue();return n.firstCreatePass&&(Rc(n,e),Mh(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&tM(t)&&Av(n,t,te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&nM(t)&&Av(n,t,te(),t.stylesWithoutHost,!1),b}function ze(e,t,n,r){return w(e,t,n,r),b(),ze}var GN=(e,t,n,r,i,o)=>(xc(!0),Zy(r,i,ZS()));function qN(e,t,n,r,i){let o=t.consts,s=Ei(o,r),a=Pi(t,e,8,"ng-container",s);s!==null&&pc(a,s,!0);let c=Ei(o,i);return Yh(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function tf(e,t,n){let r=te(),i=Ue(),o=e+Wt,s=i.firstCreatePass?qN(o,i,r,t,n):i.data[o];_r(s,!0);let a=YN(i,r,s,e);return r[o]=a,Nc()&&Fc(i,r,a,s),xn(a,r),Mc(s)&&(zh(i,r,s),Wh(i,s,r)),n!=null&&Gh(r,s),tf}function nf(){let e=Je(),t=Ue();return xh()?Rh():(e=e.parent,_r(e,!1)),t.firstCreatePass&&(Rc(t,e),Mh(e)&&t.queries.elementEnd(e)),nf}var YN=(e,t,n,r)=>(xc(!0),kM(t[fe],""));function fn(){return te()}var vc="en-US";var KN=vc;function QN(e){typeof e=="string"&&(KN=e.toLowerCase().replace(/_/g,"-"))}function X(e,t,n,r){let i=te(),o=Ue(),s=Je();return xw(o,i,i[fe],s,e,t,r),X}function ZN(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[ko],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function xw(e,t,n,r,i,o,s){let a=Mc(r),l=e.firstCreatePass&&EA(e),u=t[Pt],d=IA(t),h=!0;if(r.type&3||s){let g=yt(r,t),I=s?s(g):g,D=d.length,oe=s?Ae=>s(zt(Ae[r.index])):r.index,H=null;if(!s&&a&&(H=ZN(e,t,i,r.index)),H!==null){let Ae=H.__ngLastListenerFn__||H;Ae.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,h=!1}else{o=Rv(r,t,u,o,!1);let Ae=n.listen(I,i,o);d.push(o,Ae),l&&l.push(i,oe,D,D+1)}}else o=Rv(r,t,u,o,!1);let p=r.outputs,m;if(h&&p!==null&&(m=p[i])){let g=m.length;if(g)for(let I=0;I<g;I+=2){let D=m[I],oe=m[I+1],bn=t[D][oe].subscribe(o),rt=d.length;d.push(o,bn),l&&l.push(i,r.index,rt,-(rt+1))}}}function xv(e,t,n,r){let i=Q(null);try{return Bt(6,t,n),n(r)!==!1}catch(o){return vw(e,o),!1}finally{Bt(7,t,n),Q(i)}}function Rv(e,t,n,r,i){return function o(s){if(s===Function)return r;let a=e.componentOffset>-1?On(e.index,t):t;Zh(a);let c=xv(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=xv(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function Xe(e=1){return QS(e)}function JN(e,t){let n=null,r=rS(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?Zv(e,o,!0):sS(r,o))return i}return n}function rf(e){let t=te()[kt][at];if(!t.projection){let n=e?e.length:1,r=t.projection=GT(n,null),i=r.slice(),o=t.child;for(;o!==null;){let s=e?JN(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function of(e,t=0,n){let r=te(),i=Ue(),o=Pi(i,Wt+e,16,null,n||null);o.projection===null&&(o.projection=t),Rh(),(!r[Oo]||yy())&&(o.flags&32)!==32&&KM(i,r,o)}function A(e,t=""){let n=te(),r=Ue(),i=e+Wt,o=r.firstCreatePass?Pi(r,i,1,t,null):r.data[i],s=XN(r,n,o,t,e);n[i]=s,Nc()&&Fc(r,n,s,o),_r(o,!1)}var XN=(e,t,n,r,i)=>(xc(!0),PM(t[fe],r));function Yt(e){return wr("",e,""),Yt}function wr(e,t,n){let r=te(),i=AN(r,e,t,n);return i!==Ri&&DA(r,Ai(),i),wr}function lt(e,t,n){Mw(t)&&(t=t());let r=te(),i=Ac();if(Go(r,i,t)){let o=Ue(),s=kh();fw(o,s,r,e,t,r[fe],n,!1)}return lt}function wt(e,t){let n=Mw(e);return n&&e.set(t),n}function ut(e,t){let n=te(),r=Ue(),i=Je();return xw(r,n,n[fe],i,e,t),ut}function ex(e,t,n){let r=Ue();if(r.firstCreatePass){let i=Nn(e);hh(n,r.data,r.blueprint,i,!0),hh(t,r.data,r.blueprint,i,!1)}}function hh(e,t,n,r,i){if(e=He(e),Array.isArray(e))for(let o=0;o<e.length;o++)hh(e[o],t,n,r,i);else{let o=Ue(),s=te(),a=Je(),c=bi(e)?e:He(e.provide),l=ay(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(bi(e)||!e.multi){let p=new fr(l,i,M),m=Pd(c,t,i?u:u+h,d);m===-1?(Gd(lc(a,s),o,c),Rd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{let p=Pd(c,t,u+h,d),m=Pd(c,t,u,u+h),g=p>=0&&n[p],I=m>=0&&n[m];if(i&&!I||!i&&!g){Gd(lc(a,s),o,c);let D=rx(i?nx:tx,n.length,i,r,l);!i&&I&&(n[m].providerFactory=D),Rd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(D),s.push(D)}else{let D=Rw(n[i?m:p],l,!i&&r);Rd(o,e,p>-1?p:m,D)}!i&&r&&I&&n[m].componentProviders++}}}function Rd(e,t,n,r){let i=bi(t),o=gS(t);if(i||o){let c=(o?He(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Rw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Pd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function tx(e,t,n,r){return fh(this.multi,[])}function nx(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Di(n,n[Y],this.providerFactory.index,r);o=a.slice(0,s),fh(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],fh(i,o);return o}function fh(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function rx(e,t,n,r,i){let o=new fr(e,n,M);return o.multi=[],o.index=t,o.componentProviders=0,Rw(o,i,r&&!n),o}function br(e,t=[]){return n=>{n.providersResolver=(r,i)=>ex(r,i?i(e):e,t)}}var ix=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=iy(!1,n.type),i=r.length>0?ef([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(C(Ze))})}}return e})();function we(e){Jh("NgStandalone"),e.getStandaloneInjector=t=>t.get(ix).getOrCreateStandaloneInjector(e)}var $c=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Pw=new T("");function Cr(e){return!!e&&typeof e.then=="function"}function Ow(e){return!!e&&typeof e.subscribe=="function"}var kw=new T(""),Fw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=y(kw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Cr(o))n.push(o);else if(Ow(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Hc=new T("");function ox(){T_(()=>{throw new S(600,!1)})}function sx(e){return e.isBoundToModule}function ax(e,t,n){try{let r=n();return Cr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Li=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(jy),this.afterRenderEffectManager=y(Dw),this.externalTestViews=new Set,this.beforeRender=new Ne,this.afterTick=new Ne,this.componentTypes=[],this.components=[],this.isStable=y(vr).hasPendingTasks.pipe(O(n=>!n)),this._injector=y(Ze)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof fc;if(!this._injector.get(Fw).done){let h=!i&&ey(n),p=!1;throw new S(405,p)}let s;i?s=n:s=this._injector.get(Bc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=sx(s)?void 0:this._injector.get(Rn),c=r||s.selector,l=s.create(xi.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Pw,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Od(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new S(101,!1);let r=Q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Q(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===ww)throw new S(103,!1);if(n){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)cx(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ph(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ph(o))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Od(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Hc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Od(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Od(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function cx(e,t,n){!t&&!ph(e)||lx(e,n,t)}function ph(e){return Nh(e)}function lx(e,t,n){let r;n?(r=0,e[x]|=1024):e[x]&64?r=0:r=1,bw(e,t,r)}var mh=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},sf=(()=>{class e{compileModuleSync(n){return new lh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ty(n),o=Qy(i.declarations).reduce((s,a)=>{let c=lr(a);return c&&s.push(new Uo(c)),s},[]);return new mh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ux=(()=>{class e{constructor(){this.zone=y(re),this.applicationRef=y(Li)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dx(e){return[{provide:re,useFactory:e},{provide:wi,multi:!0,useFactory:()=>{let t=y(ux,{optional:!0});return()=>t.initialize()}},{provide:wi,multi:!0,useFactory:()=>{let t=y(mx);return()=>{t.initialize()}}},{provide:jy,useFactory:hx}]}function hx(){let e=y(re),t=y(an);return n=>e.runOutsideAngular(()=>t.handleError(n))}function fx(e){let t=dx(()=>new re(px(e)));return Si([[],t])}function px(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var mx=(()=>{class e{constructor(){this.subscription=new he,this.initialized=!1,this.zone=y(re),this.pendingTasks=y(vr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gx(){return typeof $localize<"u"&&$localize.locale||vc}var Wc=new T("",{providedIn:"root",factory:()=>y(Wc,U.Optional|U.SkipSelf)||gx()});var Lw=new T("");var ec=null;function _x(e=[],t){return xi.create({name:t,providers:[{provide:Ec,useValue:"platform"},{provide:Lw,useValue:new Set([()=>ec=null])},...e]})}function vx(e=[]){if(ec)return ec;let t=_x(e);return ec=t,ox(),yx(t),t}function yx(e){e.get(Lh,null)?.forEach(n=>n())}var Kt=(()=>{class e{static{this.__NG_ELEMENT_ID__=wx}}return e})();function wx(e){return bx(Je(),te(),(e&16)===16)}function bx(e,t,n){if(Sc(e)&&!n){let r=On(e.index,t);return new pr(r,r)}else if(e.type&47){let r=t[kt];return new pr(r,t)}return null}var gh=class{constructor(){}supports(t){return Aw(t)}create(t){return new _h(t)}},Cx=(e,t)=>t,_h=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cx}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Pv(r,i,o)?n:r,a=Pv(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;u<=m&&m<l&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Aw(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,IN(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new vh(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new yc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new yc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},vh=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yh=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},yc=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new yh,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Pv(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Ov(){return new af([new gh])}var af=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:Ov})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Ov()),deps:[[e,new zv,new bh]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new S(901,!1)}}return e})();function Vw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=vx(r),o=[fx(),...n||[]],a=new gc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(re);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(an,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let d=()=>a.destroy(),h=i.get(Lw);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),ax(l,c,()=>{let p=a.get(Fw);return p.runInitializers(),p.donePromise.then(()=>{let m=a.get(Wc,vc);QN(m||vc);let g=a.get(Li);return t!==void 0&&g.bootstrap(t),g})})})}catch(t){return Promise.reject(t)}}function Ir(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var Hw=null;function mn(){return Hw}function Ww(e){Hw??=e}var zc=class{};var Se=new T(""),uf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(Ex),providedIn:"platform"})}}return e})();var Ex=(()=>{class e extends uf{constructor(){super(),this._doc=y(Se),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mn().getBaseHref(this._doc)}onPopState(n){let r=mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function df(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function jw(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function pn(e){return e&&e[0]!=="?"?"?"+e:e}var ji=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(Gw),providedIn:"root"})}}return e})(),zw=new T(""),Gw=(()=>{class e extends ji{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return df(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+pn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(uf),C(zw,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),qw=(()=>{class e extends ji{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=df(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(uf),C(zw,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),qo=(()=>{class e{constructor(n){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Sx(jw(Uw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+pn(r))}normalize(n){return e.stripTrailingSlash(Tx(this._basePath,Uw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=pn}static{this.joinWithSlash=df}static{this.stripTrailingSlash=jw}static{this.\u0275fac=function(r){return new(r||e)(C(ji))}}static{this.\u0275prov=E({token:e,factory:()=>Dx(),providedIn:"root"})}}return e})();function Dx(){return new qo(C(ji))}function Tx(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Uw(e){return e.replace(/\/index.html$/,"")}function Sx(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Yc(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var cf=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new cf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Bw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Bw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(M(ki),M(Uc),M(af))}}static{this.\u0275dir=le({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Bw(e,t){e.context.$implicit=t.item}var kn=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new lf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){$w("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){$w("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(M(ki),M(Uc))}}static{this.\u0275dir=le({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),lf=class{constructor(){this.$implicit=null,this.ngIf=null}};function $w(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${We(t)}'.`)}var Pe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({})}}return e})(),hf="browser",Mx="server";function Yw(e){return e===hf}function Qc(e){return e===Mx}var Vi=class{};var Qo=class{},Jc=class{},Er=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var pf=class{encodeKey(t){return Kw(t)}encodeValue(t){return Kw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function xx(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Rx=/%(\d[a-f0-9])/gi,Px={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kw(e){return encodeURIComponent(e).replace(Rx,(t,n)=>Px[n]??t)}function Zc(e){return`${e}`}var Fn=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=xx(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(Zc):[Zc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Zc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Zc(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var mf=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Ox(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Qw(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Zw(e){return typeof Blob<"u"&&e instanceof Blob}function Jw(e){return typeof FormData<"u"&&e instanceof FormData}function kx(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Ko=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(Ox(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Er,this.context??=new mf,!this.params)this.params=new Fn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Qw(this.body)||Zw(this.body)||Jw(this.body)||kx(this.body)?this.body:this.body instanceof Fn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Jw(this.body)?null:Zw(this.body)?this.body.type||null:Qw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new e(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ui=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Ui||{}),Zo=class{constructor(t,n=tl.Ok,r="OK"){this.headers=t.headers||new Er,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},gf=class e extends Zo{constructor(t={}){super(t),this.type=Ui.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Xc=class e extends Zo{constructor(t={}){super(t),this.type=Ui.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},el=class extends Zo{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},tl=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(tl||{});function ff(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Dr=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ko)o=n;else{let c;i.headers instanceof Er?c=i.headers:c=new Er(i.headers);let l;i.params&&(i.params instanceof Fn?l=i.params:l=new Fn({fromObject:i.params})),o=new Ko(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=R(o).pipe(Dn(c=>this.handler.handle(c)));if(n instanceof Ko||i.observe==="events")return s;let a=s.pipe($e(c=>c instanceof Xc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(O(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(O(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(O(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(O(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Fn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,ff(i,r))}post(n,r,i={}){return this.request("POST",n,ff(i,r))}put(n,r,i={}){return this.request("PUT",n,ff(i,r))}static{this.\u0275fac=function(r){return new(r||e)(C(Qo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function nb(e,t){return t(e)}function Fx(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function Lx(e,t,n){return(r,i)=>ln(n,()=>t(r,o=>e(o,i)))}var Vx=new T(""),_f=new T(""),jx=new T(""),Ux=new T("");function Bx(){let e=null;return(t,n)=>{e===null&&(e=(y(Vx,{optional:!0})??[]).reduceRight(Fx,nb));let r=y(vr),i=r.add();return e(t,n).pipe(Sn(()=>r.remove(i)))}}var Xw=(()=>{class e extends Qo{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=y(vr);let i=y(Ux,{optional:!0});this.backend=i??n}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(_f),...this.injector.get(jx,[])]));this.chain=i.reduceRight((o,s)=>Lx(o,s,this.injector),nb)}let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Sn(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||e)(C(Jc),C(Ze))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();var $x=/^\)\]\}',?\n/;function Hx(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var eb=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new S(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ce(r.\u0275loadImpl()):R(null)).pipe(st(()=>new q(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((g,I)=>s.setRequestHeader(g,I.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let g=n.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(n.responseType){let g=n.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=s.statusText||"OK",I=new Er(s.getAllResponseHeaders()),D=Hx(s)||n.url;return c=new gf({headers:I,status:s.status,statusText:g,url:D}),c},u=()=>{let{headers:g,status:I,statusText:D,url:oe}=l(),H=null;I!==tl.NoContent&&(H=typeof s.response>"u"?s.responseText:s.response),I===0&&(I=H?tl.Ok:0);let Ae=I>=200&&I<300;if(n.responseType==="json"&&typeof H=="string"){let bn=H;H=H.replace($x,"");try{H=H!==""?JSON.parse(H):null}catch(rt){H=bn,Ae&&(Ae=!1,H={error:rt,text:H})}}Ae?(o.next(new Xc({body:H,headers:g,status:I,statusText:D,url:oe||void 0})),o.complete()):o.error(new el({error:H,headers:g,status:I,statusText:D,url:oe||void 0}))},d=g=>{let{url:I}=l(),D=new el({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(D)},h=!1,p=g=>{h||(o.next(l()),h=!0);let I={type:Ui.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(I.total=g.total),n.responseType==="text"&&s.responseText&&(I.partialText=s.responseText),o.next(I)},m=g=>{let I={type:Ui.UploadProgress,loaded:g.loaded};g.lengthComputable&&(I.total=g.total),o.next(I)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Ui.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||e)(C(Vi))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),rb=new T(""),Wx="XSRF-TOKEN",zx=new T("",{providedIn:"root",factory:()=>Wx}),Gx="X-XSRF-TOKEN",qx=new T("",{providedIn:"root",factory:()=>Gx}),nl=class{},Yx=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||e)(C(Se),C(Gt),C(zx))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function Kx(e,t){let n=e.url.toLowerCase();if(!y(rb)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=y(nl).getToken(),i=y(qx);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var ib=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(ib||{});function Qx(e,t){return{\u0275kind:e,\u0275providers:t}}function Zx(...e){let t=[Dr,eb,Xw,{provide:Qo,useExisting:Xw},{provide:Jc,useExisting:eb},{provide:_f,useValue:Kx,multi:!0},{provide:rb,useValue:!0},{provide:nl,useClass:Yx}];for(let n of e)t.push(...n.\u0275providers);return Si(t)}var tb=new T("");function Jx(){return Qx(ib.LegacyInterceptors,[{provide:tb,useFactory:Bx},{provide:_f,useExisting:tb,multi:!0}])}var rl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({providers:[Zx(Jx())]})}}return e})();var bf=class extends zc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Cf=class e extends bf{static makeCurrent(){Ww(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Xx();return n==null?null:eR(n)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Yc(document.cookie,t)}},Jo=null;function Xx(){return Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null}function eR(e){return new URL(e,document.baseURI).pathname}var tR=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),If=new T(""),cb=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(C(If),C(re))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),il=class{constructor(t){this._doc=t}},yf="ng-app-id",lb=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qc(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${yf}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(yf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(yf,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(C(Se),C(Oc),C(zo,8),C(Gt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),wf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Df=/%COMP%/g,ub="%COMP%",nR=`_nghost-${ub}`,rR=`_ngcontent-${ub}`,iR=!0,oR=new T("",{providedIn:"root",factory:()=>iR});function sR(e){return rR.replace(Df,e)}function aR(e){return nR.replace(Df,e)}function db(e,t){return t.map(n=>n.replace(Df,e))}var ob=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Qc(a),this.defaultRenderer=new Xo(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ht.ShadowDom&&(r=P(_({},r),{encapsulation:Ht.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ol?i.applyToHost(n):i instanceof es&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ht.Emulated:o=new ol(c,l,r,this.appId,u,s,a,d);break;case Ht.ShadowDom:return new Ef(c,l,n,r,s,a,this.nonce,d);default:o=new es(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(C(cb),C(lb),C(Oc),C(oR),C(Se),C(Gt),C(re),C(zo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Xo=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(wf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(sb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(sb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=wf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=wf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(cn.DashCase|cn.Important)?t.style.setProperty(n,r,i&cn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&cn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=mn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function sb(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ef=class extends Xo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=db(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},es=class extends Xo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?db(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ol=class extends es{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=sR(l),this.hostAttr=aR(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},cR=(()=>{class e extends il{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(C(Se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),ab=["alt","control","meta","shift"],lR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uR={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},dR=(()=>{class e extends il{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ab.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=lR[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ab.forEach(s=>{if(s!==i){let a=uR[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(C(Se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function hb(e,t){return Vw(_({rootComponent:e},hR(t)))}function hR(e){return{appProviders:[..._R,...e?.providers??[]],platformProviders:gR}}function fR(){Cf.makeCurrent()}function pR(){return new an}function mR(){return Gy(document),document}var gR=[{provide:Gt,useValue:hf},{provide:Lh,useValue:fR,multi:!0},{provide:Se,useFactory:mR,deps:[]}];var _R=[{provide:Ec,useValue:"root"},{provide:an,useFactory:pR,deps:[]},{provide:If,useClass:cR,multi:!0,deps:[Se,re,Gt]},{provide:If,useClass:dR,multi:!0,deps:[Se]},ob,lb,cb,{provide:jo,useExisting:ob},{provide:Vi,useClass:tR,deps:[]},[]];var fb=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(C(Se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V="primary",ms=Symbol("RouteTitle"),Nf=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zi(e){return new Nf(e)}function yR(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function wR(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Qt(e[n],t[n]))return!1;return!0}function Qt(e,t){let n=e?xf(e):void 0,r=t?xf(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!bb(e[i],t[i]))return!1;return!0}function xf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function bb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Cb(e){return e.length>0?e[e.length-1]:null}function Un(e){return dd(e)?e:Cr(e)?ce(Promise.resolve(e)):R(e)}var bR={exact:Eb,subset:Db},Ib={exact:CR,subset:IR,ignored:()=>!0};function pb(e,t,n){return bR[n.paths](e.root,t.root,n.matrixParams)&&Ib[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function CR(e,t){return Qt(e,t)}function Eb(e,t,n){if(!Sr(e.segments,t.segments)||!cl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!Eb(e.children[r],t.children[r],n))return!1;return!0}function IR(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>bb(e[n],t[n]))}function Db(e,t,n){return Tb(e,t,t.segments,n)}function Tb(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Sr(i,n)||t.hasChildren()||!cl(i,n,r))}else if(e.segments.length===n.length){if(!Sr(e.segments,n)||!cl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Db(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Sr(e.segments,i)||!cl(e.segments,i,r)||!e.children[V]?!1:Tb(e.children[V],t,o,r)}}function cl(e,t,n){return t.every((r,i)=>Ib[n](e[i].parameters,r.parameters))}var Ln=class{constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){return TR.serialize(this)}},Z=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ll(this)}},Tr=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=zi(this.parameters),this._parameterMap}toString(){return Mb(this)}};function ER(e,t){return Sr(e,t)&&e.every((n,r)=>Qt(n.parameters,t[r].parameters))}function Sr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function DR(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var rp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new dl,providedIn:"root"})}}return e})(),dl=class{parse(t){let n=new Pf(t);return new Ln(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ts(t.root,!0)}`,r=AR(t.queryParams),i=typeof t.fragment=="string"?`#${SR(t.fragment)}`:"";return`${n}${r}${i}`}},TR=new dl;function ll(e){return e.segments.map(t=>Mb(t)).join("/")}function ts(e,t){if(!e.hasChildren())return ll(e);if(t){let n=e.children[V]?ts(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${ts(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DR(e,(r,i)=>i===V?[ts(e.children[V],!1)]:[`${i}:${ts(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${ll(e)}/${n[0]}`:`${ll(e)}/(${n.join("//")})`}}function Sb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sl(e){return Sb(e).replace(/%3B/gi,";")}function SR(e){return encodeURI(e)}function Rf(e){return Sb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ul(e){return decodeURIComponent(e)}function mb(e){return ul(e.replace(/\+/g,"%20"))}function Mb(e){return`${Rf(e.path)}${MR(e.parameters)}`}function MR(e){return Object.entries(e).map(([t,n])=>`;${Rf(t)}=${Rf(n)}`).join("")}function AR(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sl(n)}=${sl(i)}`).join("&"):`${sl(n)}=${sl(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var NR=/^[^\/()?;#]+/;function Tf(e){let t=e.match(NR);return t?t[0]:""}var xR=/^[^\/()?;=#]+/;function RR(e){let t=e.match(xR);return t?t[0]:""}var PR=/^[^=?&#]+/;function OR(e){let t=e.match(PR);return t?t[0]:""}var kR=/^[^&#]+/;function FR(e){let t=e.match(kR);return t?t[0]:""}var Pf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new Z(t,n)),r}parseSegment(){let t=Tf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new Tr(ul(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=RR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tf(this.remaining);i&&(r=i,this.capture(r))}t[ul(n)]=ul(r)}parseQueryParam(t){let n=OR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=FR(this.remaining);s&&(r=s,this.capture(r))}let i=mb(n),o=mb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[V]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function Ab(e){return e.segments.length>0?new Z([],{[V]:e}):e}function Nb(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Nb(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return LR(n)}function LR(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new Z(e.segments.concat(t.segments),t.children)}return e}function Gi(e){return e instanceof Ln}function VR(e,t,n=null,r=null){let i=xb(e);return Rb(i,t,n,r)}function xb(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=Ab(r);return t??i}function Rb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Sf(i,i,i,n,r);let o=jR(t);if(o.toRoot())return Sf(i,i,new Z([],{}),n,r);let s=UR(o,i,e),a=s.processChildren?is(s.segmentGroup,s.index,o.commands):Ob(s.segmentGroup,s.index,o.commands);return Sf(i,s.segmentGroup,a,n,r)}function hl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function as(e){return typeof e=="object"&&e!=null&&e.outlets}function Sf(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=Pb(e,t,n);let a=Ab(Nb(s));return new Ln(a,o,i)}function Pb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Pb(o,t,n)}),new Z(e.segments,r)}var fl=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&hl(r[0]))throw new S(4003,!1);let i=r.find(as);if(i&&i!==Cb(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new fl(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fl(n,t,r)}var Hi=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function UR(e,t,n){if(e.isAbsolute)return new Hi(t,!0,0);if(!n)return new Hi(t,!1,NaN);if(n.parent===null)return new Hi(n,!0,0);let r=hl(e.commands[0])?0:1,i=n.segments.length-1+r;return BR(n,i,e.numberOfDoubleDots)}function BR(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new Hi(r,!1,i-o)}function $R(e){return as(e[0])?e[0].outlets:{[V]:e}}function Ob(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return is(e,t,n);let r=HR(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new Z(e.segments.slice(r.pathIndex),e.children),is(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?Of(e,t,n):r.match?is(e,0,i):Of(e,t,n)}function is(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=$R(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=is(e.children[V],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Ob(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function HR(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(as(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_b(c,l,s))return o;r+=2}else{if(!_b(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Of(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(as(o)){let c=WR(o.outlets);return new Z(r,c)}if(i===0&&hl(n[0])){let c=e.segments[t];r.push(new Tr(c.path,gb(n[0]))),i++;continue}let s=as(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&hl(a)?(r.push(new Tr(s,gb(a))),i+=2):(r.push(new Tr(s,{})),i++)}return new Z(r,{})}function WR(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Of(new Z([],{}),0,r))}),t}function gb(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function _b(e,t,n){return e==n.path&&Qt(t,n.parameters)}var os="imperative",Oe=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Oe||{}),bt=class{constructor(t,n){this.id=t,this.url=n}},cs=class extends bt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Oe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mr=class extends bt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Oe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ht=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ht||{}),kf=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(kf||{}),Vn=class extends bt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Oe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ar=class extends bt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Oe.NavigationSkipped}},ls=class extends bt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Oe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pl=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Oe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ff=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Oe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lf=class extends bt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Oe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vf=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Oe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jf=class extends bt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Oe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uf=class{constructor(t){this.route=t,this.type=Oe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bf=class{constructor(t){this.route=t,this.type=Oe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$f=class{constructor(t){this.snapshot=t,this.type=Oe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hf=class{constructor(t){this.snapshot=t,this.type=Oe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wf=class{constructor(t){this.snapshot=t,this.type=Oe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zf=class{constructor(t){this.snapshot=t,this.type=Oe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var us=class{},ds=class{constructor(t){this.url=t}};var Gf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new wl,this.attachRef=null}},wl=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Gf,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ml=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=qf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=qf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Yf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Yf(t,this._root).map(n=>n.value)}};function qf(e,t){if(e===t.value)return t;for(let n of t.children){let r=qf(e,n);if(r)return r}return null}function Yf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Yf(e,n);if(r.length)return r.unshift(t),r}return[]}var dt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function $i(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var gl=class extends ml{constructor(t,n){super(t),this.snapshot=n,op(this,t)}toString(){return this.snapshot.toString()}};function kb(e){let t=zR(e),n=new xe([new Tr("",{})]),r=new xe({}),i=new xe({}),o=new xe({}),s=new xe(""),a=new jn(n,r,o,s,i,V,e,t.root);return a.snapshot=t.root,new gl(new dt(a,[]),t)}function zR(e){let t={},n={},r={},i="",o=new hs([],t,r,i,n,V,e,null,{});return new _l("",new dt(o,[]))}var jn=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(O(l=>l[ms]))??R(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(O(t=>zi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(O(t=>zi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ip(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&Lb(i)&&(r.resolve[ms]=i.title),r}var hs=class{get title(){return this.data?.[ms]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},_l=class extends ml{constructor(t,n){super(n),this.url=t,op(this,n)}toString(){return Fb(this._root)}};function op(e,t){t.value._routerState=e,t.children.forEach(n=>op(e,n))}function Fb(e){let t=e.children.length>0?` { ${e.children.map(Fb).join(", ")} } `:"";return`${e.value}${t}`}function Mf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Qt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Qt(t.params,n.params)||e.paramsSubject.next(n.params),wR(t.url,n.url)||e.urlSubject.next(n.url),Qt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Kf(e,t){let n=Qt(e.params,t.params)&&ER(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Kf(e.parent,t.parent))}function Lb(e){return typeof e.title=="string"||e.title===null}var sp=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=V,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=y(wl),this.location=y(ki),this.changeDetector=y(Kt),this.environmentInjector=y(Ze),this.inputBinder=y(ap,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Qf(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=le({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pn]})}}return e})(),Qf=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===jn?this.route:t===wl?this.childContexts:this.parent.get(t,n)}},ap=new T("");function GR(e,t,n){let r=fs(e,t._root,n?n._root:void 0);return new gl(r,t)}function fs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=qR(e,t,n);return new dt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>fs(e,a)),s}}let r=YR(t.value),i=t.children.map(o=>fs(e,o));return new dt(r,i)}}function qR(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return fs(e,r,i);return fs(e,r)})}function YR(e){return new jn(new xe(e.url),new xe(e.params),new xe(e.queryParams),new xe(e.fragment),new xe(e.data),e.outlet,e.component,e)}var Vb="ngNavigationCancelingError";function jb(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Gi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Ub(!1,ht.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Ub(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Vb]=!0,n.cancellationCode=t,n}function KR(e){return Bb(e)&&Gi(e.url)}function Bb(e){return!!e&&e[Vb]}var QR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["ng-component"]],standalone:!0,features:[we],decls:1,vars:0,template:function(r,i){r&1&&ze(0,"router-outlet")},dependencies:[sp],encapsulation:2})}}return e})();function ZR(e,t){return e.providers&&!e._injector&&(e._injector=ef(e.providers,t,`Route: ${e.path}`)),e._injector??t}function cp(e){let t=e.children&&e.children.map(cp),n=t?P(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=QR),n}function Zt(e){return e.outlet||V}function JR(e,t){let n=e.filter(r=>Zt(r)===t);return n.push(...e.filter(r=>Zt(r)!==t)),n}function gs(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var XR=(e,t,n,r)=>O(i=>(new Zf(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Zf=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Mf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=$i(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=$i(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=$i(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=$i(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Hf(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Mf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Mf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=gs(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},vl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Wi=class{constructor(t,n){this.component=t,this.route=n}};function eP(e,t,n){let r=e._root,i=t?t._root:null;return ns(r,i,n,[r.value])}function tP(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Yi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Vv(e)?e:t.get(e):r}function ns(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$i(t);return e.children.forEach(s=>{nP(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ss(a,n.getContext(s),i)),i}function nP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=rP(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new vl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ns(e,t,a?a.children:null,r,i):ns(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wi(a.outlet.component,s))}else s&&ss(t,a,i),i.canActivateChecks.push(new vl(r)),o.component?ns(e,null,a?a.children:null,r,i):ns(e,null,n,r,i);return i}function rP(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Sr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Sr(e.url,t.url)||!Qt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kf(e,t)||!Qt(e.queryParams,t.queryParams);case"paramsChange":default:return!Kf(e,t)}}function ss(e,t,n){let r=$i(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ss(s,t.children.getContext(o),n):ss(s,null,n):ss(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Wi(t.outlet.component,i)):n.canDeactivateChecks.push(new Wi(null,i)):n.canDeactivateChecks.push(new Wi(null,i))}function _s(e){return typeof e=="function"}function iP(e){return typeof e=="boolean"}function oP(e){return e&&_s(e.canLoad)}function sP(e){return e&&_s(e.canActivate)}function aP(e){return e&&_s(e.canActivateChild)}function cP(e){return e&&_s(e.canDeactivate)}function lP(e){return e&&_s(e.canMatch)}function $b(e){return e instanceof At||e?.name==="EmptyError"}var al=Symbol("INITIAL_VALUE");function qi(){return st(e=>di(e.map(t=>t.pipe(Nt(1),So(al)))).pipe(O(t=>{for(let n of t)if(n!==!0){if(n===al)return al;if(n===!1||n instanceof Ln)return n}return!0}),$e(t=>t!==al),Nt(1)))}function uP(e,t){return Ce(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?R(P(_({},n),{guardsResult:!0})):dP(s,r,i,e).pipe(Ce(a=>a&&iP(a)?hP(r,o,e,t):R(a)),O(a=>P(_({},n),{guardsResult:a})))})}function dP(e,t,n,r){return ce(e).pipe(Ce(i=>_P(i.component,i.route,n,t,r)),Ut(i=>i!==!0,!0))}function hP(e,t,n,r){return ce(t).pipe(Dn(i=>In(pP(i.route.parent,r),fP(i.route,r),gP(e,i.path,n),mP(e,i.route,n))),Ut(i=>i!==!0,!0))}function fP(e,t){return e!==null&&t&&t(new Wf(e)),R(!0)}function pP(e,t){return e!==null&&t&&t(new $f(e)),R(!0)}function mP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return R(!0);let i=r.map(o=>za(()=>{let s=gs(t)??n,a=Yi(o,s),c=sP(a)?a.canActivate(t,e):ln(s,()=>a(t,e));return Un(c).pipe(Ut())}));return R(i).pipe(qi())}function gP(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>tP(s)).filter(s=>s!==null).map(s=>za(()=>{let a=s.guards.map(c=>{let l=gs(s.node)??n,u=Yi(c,l),d=aP(u)?u.canActivateChild(r,e):ln(l,()=>u(r,e));return Un(d).pipe(Ut())});return R(a).pipe(qi())}));return R(o).pipe(qi())}function _P(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return R(!0);let s=o.map(a=>{let c=gs(t)??i,l=Yi(a,c),u=cP(l)?l.canDeactivate(e,t,n,r):ln(c,()=>l(e,t,n,r));return Un(u).pipe(Ut())});return R(s).pipe(qi())}function vP(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return R(!0);let o=i.map(s=>{let a=Yi(s,e),c=oP(a)?a.canLoad(t,n):ln(e,()=>a(t,n));return Un(c)});return R(o).pipe(qi(),Hb(r))}function Hb(e){return sd(De(t=>{if(Gi(t))throw jb(e,t)}),O(t=>t===!0))}function yP(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return R(!0);let o=i.map(s=>{let a=Yi(s,e),c=lP(a)?a.canMatch(t,n):ln(e,()=>a(t,n));return Un(c)});return R(o).pipe(qi(),Hb(r))}var ps=class{constructor(t){this.segmentGroup=t||null}},yl=class extends Error{constructor(t){super(),this.urlTree=t}};function Bi(e){return ui(new ps(e))}function wP(e){return ui(new S(4e3,!1))}function bP(e){return ui(Ub(!1,ht.GuardRejected))}var Jf=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return R(r);if(i.numberOfChildren>1||!i.children[V])return wP(t.redirectTo);i=i.children[V]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new yl(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Ln(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Xf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CP(e,t,n,r,i){let o=lp(e,t,n);return o.matched?(r=ZR(t,r),yP(r,t,n,i).pipe(O(s=>s===!0?o:_({},Xf)))):R(o)}function lp(e,t,n){if(t.path==="**")return IP(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},Xf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||yR)(n,e,t);if(!i)return _({},Xf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function IP(e){return{matched:!0,parameters:e.length>0?Cb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function vb(e,t,n,r){return n.length>0&&TP(e,n,r)?{segmentGroup:new Z(t,DP(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&SP(e,n,r)?{segmentGroup:new Z(e.segments,EP(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function EP(e,t,n,r){let i={};for(let o of n)if(bl(e,t,o)&&!r[Zt(o)]){let s=new Z([],{});i[Zt(o)]=s}return _(_({},r),i)}function DP(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&Zt(r)!==V){let i=new Z([],{});n[Zt(r)]=i}return n}function TP(e,t,n){return n.some(r=>bl(e,t,r)&&Zt(r)!==V)}function SP(e,t,n){return n.some(r=>bl(e,t,r))}function bl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function MP(e,t,n,r){return Zt(e)!==r&&(r===V||!bl(t,n,e))?!1:lp(t,e,n).matched}function AP(e,t,n){return t.length===0&&!e.children[n]}var ep=class{};function NP(e,t,n,r,i,o,s="emptyOnly"){return new tp(e,t,n,r,i,s,o).recognize()}var xP=31,tp=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Jf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=vb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(O(n=>{let r=new hs([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},V,this.rootComponentType,null,{}),i=new dt(r,n),o=new _l("",i),s=VR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,V).pipe(En(r=>{if(r instanceof yl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ps?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=ip(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(O(o=>o instanceof dt?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ce(i).pipe(Dn(o=>{let s=r.children[o],a=JR(n,o);return this.processSegmentGroup(t,a,s,o)}),vd((o,s)=>(o.push(...s),o)),Tn(null),_d(),Ce(o=>{if(o===null)return Bi(r);let s=Wb(o);return RP(s),R(s)}))}processSegment(t,n,r,i,o,s){return ce(n).pipe(Dn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(En(c=>{if(c instanceof ps)return R(null);throw c}))),Ut(a=>!!a),En(a=>{if($b(a))return AP(r,i,o)?R(new ep):Bi(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return MP(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Bi(i):Bi(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=lp(n,i,o);if(!a)return Bi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xP&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ce(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=CP(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(st(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(st(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new hs(u,h,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,OP(r),Zt(r),r.component??r._loadedComponent??null,r,kP(r)),{segmentGroup:m,slicedSegments:g}=vb(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(O(D=>D===null?null:new dt(p,D)));if(c.length===0&&g.length===0)return R(new dt(p,[]));let I=Zt(r)===o;return this.processSegment(l,c,m,g,I?V:o,!0).pipe(O(D=>new dt(p,D instanceof dt?[D]:[])))}))):Bi(n)))}getChildConfig(t,n,r){return n.children?R({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?R({routes:n._loadedRoutes,injector:n._loadedInjector}):vP(t,n,r,this.urlSerializer).pipe(Ce(i=>i?this.configLoader.loadChildren(t,n).pipe(De(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):bP(n))):R({routes:[],injector:t})}};function RP(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function PP(e){let t=e.value.routeConfig;return t&&t.path===""}function Wb(e){let t=[],n=new Set;for(let r of e){if(!PP(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Wb(r.children);t.push(new dt(r.value,i))}return t.filter(r=>!n.has(r))}function OP(e){return e.data||{}}function kP(e){return e.resolve||{}}function FP(e,t,n,r,i,o){return Ce(s=>NP(e,t,n,r,s.extractedUrl,i,o).pipe(O(({state:a,tree:c})=>P(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function LP(e,t){return Ce(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return R(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of zb(c))s.add(l);let a=0;return ce(s).pipe(Dn(c=>o.has(c)?VP(c,r,e,t):(c.data=ip(c,c.parent,e).resolve,R(void 0))),De(()=>a++),hi(1),Ce(c=>a===s.size?R(n):ot))})}function zb(e){let t=e.children.map(n=>zb(n)).flat();return[e,...t]}function VP(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Lb(i)&&(o[ms]=i.title),jP(o,e,t,r).pipe(O(s=>(e._resolvedData=s,e.data=ip(e,e.parent,n).resolve,null)))}function jP(e,t,n,r){let i=xf(e);if(i.length===0)return R({});let o={};return ce(i).pipe(Ce(s=>UP(e[s],t,n,r).pipe(Ut(),De(a=>{o[s]=a}))),hi(1),gd(o),En(s=>$b(s)?ot:ui(s)))}function UP(e,t,n,r){let i=gs(t)??r,o=Yi(e,i),s=o.resolve?o.resolve(t,n):ln(i,()=>o(t,n));return Un(s)}function Af(e){return st(t=>{let n=e(t);return n?ce(n).pipe(O(()=>t)):R(t)})}var Gb=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[ms]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(BP),providedIn:"root"})}}return e})(),BP=(()=>{class e extends Gb{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(C(fb))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),up=new T("",{providedIn:"root",factory:()=>({})}),dp=new T(""),$P=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(sf)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return R(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Un(n.loadComponent()).pipe(O(qb),De(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Sn(()=>{this.componentLoaders.delete(n)})),i=new ci(r,()=>new Ne).pipe(ai());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return R({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=HP(r,this.compiler,n,this.onLoadEndListener).pipe(Sn(()=>{this.childrenLoaders.delete(r)})),s=new ci(o,()=>new Ne).pipe(ai());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function HP(e,t,n,r){return Un(e.loadChildren()).pipe(O(qb),Ce(i=>i instanceof Bo||Array.isArray(i)?R(i):ce(t.compileModuleAsync(i))),O(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(dp,[],{optional:!0,self:!0}).flat()),{routes:s.map(cp),injector:o}}))}function WP(e){return e&&typeof e=="object"&&"default"in e}function qb(e){return WP(e)?e.default:e}var hp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(zP),providedIn:"root"})}}return e})(),zP=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),GP=new T("");var qP=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ne,this.transitionAbortSubject=new Ne,this.configLoader=y($P),this.environmentInjector=y(Ze),this.urlSerializer=y(rp),this.rootContexts=y(wl),this.location=y(qo),this.inputBindingEnabled=y(ap,{optional:!0})!==null,this.titleStrategy=y(Gb),this.options=y(up,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(hp),this.createViewTransition=y(GP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Uf(i)),r=i=>this.events.next(new Bf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(P(_(_({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:os,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($e(o=>o.id!==0),O(o=>P(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),st(o=>{let s=!1,a=!1;return R(o).pipe(st(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ht.SupersededByNewNavigation),ot;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?P(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Ar(c.id,this.urlSerializer.serialize(c.rawUrl),d,kf.IgnoredSameUrlNavigation)),c.resolve(null),ot}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(st(d=>{let h=this.transitions?.getValue();return this.events.next(new cs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ot:Promise.resolve(d)}),FP(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),De(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=P(_({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new pl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:m,extras:g}=c,I=new cs(d,this.urlSerializer.serialize(h),p,m);this.events.next(I);let D=kb(this.rootComponentType).snapshot;return this.currentTransition=o=P(_({},c),{targetSnapshot:D,urlAfterRedirects:h,extras:P(_({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,R(o)}else{let d="";return this.events.next(new Ar(c.id,this.urlSerializer.serialize(c.extractedUrl),d,kf.IgnoredByUrlHandlingStrategy)),c.resolve(null),ot}}),De(c=>{let l=new Ff(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),O(c=>(this.currentTransition=o=P(_({},c),{guards:eP(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),uP(this.environmentInjector,c=>this.events.next(c)),De(c=>{if(o.guardsResult=c.guardsResult,Gi(c.guardsResult))throw jb(this.urlSerializer,c.guardsResult);let l=new Lf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),$e(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ht.GuardRejected),!1)),Af(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(De(l=>{let u=new Vf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),st(l=>{let u=!1;return R(l).pipe(LP(this.paramsInheritanceStrategy,this.environmentInjector),De({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",ht.NoDataFromResolver)}}))}),De(l=>{let u=new jf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Af(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(De(h=>{u.component=h}),O(()=>{})));for(let h of u.children)d.push(...l(h));return d};return di(l(c.targetSnapshot.root)).pipe(Tn(null),Nt(1))}),Af(()=>this.afterPreactivation()),st(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?ce(u).pipe(O(()=>o)):R(o)}),O(c=>{let l=GR(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=P(_({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),De(()=>{this.events.next(new us)}),XR(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Nt(1),De({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Mo(this.transitionAbortSubject.pipe(De(c=>{throw c}))),Sn(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ht.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),En(c=>{if(a=!0,Bb(c))this.events.next(new Vn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),KR(c)?this.events.next(new ds(c.url)):o.resolve(!1);else{this.events.next(new ls(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return ot}))}))}cancelNavigationTransition(n,r,i){let o=new Vn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function YP(e){return e!==os}var KP=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(QP),providedIn:"root"})}}return e})(),np=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},QP=(()=>{class e extends np{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ni(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Yb=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(ZP),providedIn:"root"})}}return e})(),ZP=(()=>{class e extends Yb{constructor(){super(...arguments),this.location=y(qo),this.urlSerializer=y(rp),this.options=y(up,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(hp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ln,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof cs)this.stateMemento=this.createStateMemento();else if(n instanceof Ar)this.rawUrlTree=r.initialUrl;else if(n instanceof pl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof us?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Vn&&(n.code===ht.GuardRejected||n.code===ht.NoDataFromResolver)?this.restoreHistory(r):n instanceof ls?this.restoreHistory(r,!0):n instanceof Mr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=_(_({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=_(_({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ni(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),rs=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(rs||{});function JP(e,t){e.events.pipe($e(n=>n instanceof Mr||n instanceof Vn||n instanceof ls||n instanceof Ar),O(n=>n instanceof Mr||n instanceof Ar?rs.COMPLETE:(n instanceof Vn?n.code===ht.Redirect||n.code===ht.SupersededByNewNavigation:!1)?rs.REDIRECTING:rs.FAILED),$e(n=>n!==rs.REDIRECTING),Nt(1)).subscribe(()=>{t()})}function XP(e){throw e}var eO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ct=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=y($c),this.stateManager=y(Yb),this.options=y(up,{optional:!0})||{},this.pendingTasks=y(vr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(qP),this.urlSerializer=y(rp),this.location=y(qo),this.urlHandlingStrategy=y(hp),this._events=new Ne,this.errorHandler=this.options.errorHandler||XP,this.navigated=!1,this.routeReuseStrategy=y(KP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(dp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(ap,{optional:!0}),this.eventsSubscription=new he,this.isNgZoneEnabled=y(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vn&&r.code!==ht.Redirect&&r.code!==ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mr)this.navigated=!0;else if(r instanceof ds){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||YP(i.source)};this.scheduleNavigation(s,os,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}rO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),os,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(cp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=xb(h)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return Rb(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Gi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,os,null,r)}navigate(n,r={skipLocationChange:!1}){return nO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},eO):r===!1?i=_({},tO):i=r,Gi(n))return pb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return pb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return JP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function nO(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new S(4008,!1)}function rO(e){return!(e instanceof us)&&!(e instanceof ds)}var iO=new T("");function Kb(e,...t){return Si([{provide:dp,multi:!0,useValue:e},[],{provide:jn,useFactory:oO,deps:[Ct]},{provide:Hc,multi:!0,useFactory:aO},t.map(n=>n.\u0275providers)])}function oO(e){return e.routerState.root}function sO(e,t){return{\u0275kind:e,\u0275providers:t}}function aO(){let e=y(xi);return t=>{let n=e.get(Li);if(t!==n.components[0])return;let r=e.get(Ct),i=e.get(cO);e.get(lO)===1&&r.initialNavigation(),e.get(uO,null,U.Optional)?.setUpPreloading(),e.get(iO,null,U.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cO=new T("",{factory:()=>new Ne}),lO=new T("",{providedIn:"root",factory:()=>1});var uO=new T("");function Qb(){return sO(6,[{provide:ji,useClass:qw}])}var pp;try{pp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pp=!1}var ys=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Yw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||pp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||e)(C(Gt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var vs;function dO(){if(vs==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vs=!0}))}finally{vs=vs||!1}return vs}function mp(e){return dO()?e:!!e.capture}function Zb(e){return e.composedPath?e.composedPath()[0]:e.target}function Jb(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function gp(e){return Array.isArray(e)?e:[e]}function _p(e){return e instanceof ct?e.nativeElement:e}var eC=new Set,Nr,hO=(()=>{class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pO}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&fO(n,this._nonce),this._matchMedia(n)}static{this.\u0275fac=function(r){return new(r||e)(C(ys),C(zo,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function fO(e,t){if(!eC.has(e))try{Nr||(Nr=document.createElement("style"),t&&Nr.setAttribute("nonce",t),Nr.setAttribute("type","text/css"),document.head.appendChild(Nr)),Nr.sheet&&(Nr.sheet.insertRule(`@media ${e} {body{ }}`,0),eC.add(e))}catch(n){console.error(n)}}function pO(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var nC=(()=>{class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new Ne}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return tC(gp(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let i=tC(gp(n)).map(s=>this._registerQuery(s).observable),o=di(i);return o=In(o.pipe(Nt(1)),o.pipe(yd(1),md(0))),o.pipe(O(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new q(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(So(r),O(({matches:s})=>({query:n,matches:s})),Mo(this._destroySubject)),mql:r};return this._queries.set(n,o),o}static{this.\u0275fac=function(r){return new(r||e)(C(hO),C(re))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tC(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function oC(e){return e.buttons===0||e.detail===0}function sC(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var xr=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(xr||{}),rC="cdk-high-contrast-black-on-white",iC="cdk-high-contrast-white-on-black",vp="cdk-high-contrast-active",aC=(()=>{class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=y(nC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return xr.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return xr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return xr.BLACK_ON_WHITE}return xr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(vp,rC,iC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===xr.BLACK_ON_WHITE?n.add(vp,rC):r===xr.WHITE_ON_BLACK&&n.add(vp,iC)}}static{this.\u0275fac=function(r){return new(r||e)(C(ys),C(Se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var yp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({})}}return e})();function _O(){return!0}var vO=new T("mat-sanity-checks",{providedIn:"root",factory:_O}),ws=(()=>{class e{constructor(n,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return Jb()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}static{this.\u0275fac=function(r){return new(r||e)(C(aC),C(vO,8),C(Se))}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({imports:[yp,yp]})}}return e})();var It=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(It||{}),wp=class{constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=It.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},cC=mp({passive:!0,capture:!0}),bp=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=Zb(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,cC)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,cC)))}},lC={enterDuration:225,exitDuration:150},yO=800,uC=mp({passive:!0,capture:!0}),dC=["mousedown","touchstart"],hC=["mouseup","mouseleave","touchend","touchcancel"],fC=class e{static{this._eventManager=new bp}constructor(t,n,r,i){this._target=t,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=_p(r))}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=_(_({},lC),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||wO(t,n,i),a=t-i.left,c=n-i.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||i.width===0&&i.height===0,g=new wp(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",g.state=It.FADING_IN,r.persistent||(this._mostRecentTransientRipple=g);let I=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let D=()=>this._finishRippleTransition(g),oe=()=>this._destroyRipple(g);u.addEventListener("transitionend",D),u.addEventListener("transitioncancel",oe),I={onTransitionEnd:D,onTransitionCancel:oe}}),this._activeRipples.set(g,I),(m||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(t){if(t.state===It.FADING_OUT||t.state===It.HIDDEN)return;let n=t.element,r=_(_({},lC),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=It.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=_p(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,dC.forEach(r=>{e._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{hC.forEach(n=>{this._triggerElement.addEventListener(n,this,uC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===It.FADING_IN?this._startFadeOutTransition(t):t.state===It.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=It.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=It.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=oC(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+yO;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!sC(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===It.VISIBLE||t.config.terminateOnPointerUp&&t.state===It.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(dC.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(hC.forEach(n=>t.removeEventListener(n,this,uC)),this._pointerUpEventsRegistered=!1))}};function wO(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var bO=["*"];var CO=new T("MAT_CARD_CONFIG"),pC=(()=>{class e{constructor(n){this.appearance=n?.appearance||"raised"}static{this.\u0275fac=function(r){return new(r||e)(M(CO,8))}}static{this.\u0275cmp=ge({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){r&2&&qt("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[we],ngContentSelectors:bO,decls:1,vars:0,template:function(r,i){r&1&&(rf(),of(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return e})();var mC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=le({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return e})();var gC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=le({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}}return e})();var _C=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({imports:[ws,Pe,ws]})}}return e})();var vC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({imports:[Pe,ws]})}}return e})();var yC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["app-loader"]],standalone:!0,features:[we],decls:2,vars:0,consts:[[1,"loader-overlay"],[1,"custom-spinner"]],template:function(r,i){r&1&&(w(0,"div",0),ze(1,"div",1),b())},dependencies:[Pe,vC],styles:[".loader-overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#00000040}.custom-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:6px solid #e0e7ef;border-top:6px solid #2193b0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return e})();var et=(()=>{class e{constructor(n){this.http_service=n}getUserSession(){let n=localStorage.getItem("lastLoggedUser");if(n)try{this.lastLoggedUser=JSON.parse(n)}catch{this.lastLoggedUser=void 0}if(this.lastLoggedUser)return this.lastLoggedUser;throw new Error("No user session found")}saveUserSession(){try{if(this.lastLoggedUser){let n=P(_({},this.lastLoggedUser),{loginTime:Date.now()});localStorage.setItem("lastLoggedUser",JSON.stringify(n))}else localStorage.removeItem("lastLoggedUser");return!0}catch(n){return console.error("Errore nel salvataggio della sessione utente:",n),!1}}static{this.\u0275fac=function(r){return new(r||e)(C(Dr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var wC=()=>{};var Ip={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v=function(e,t){if(!e)throw Pr(t)},Pr=function(e){return new Error("Firebase Database ("+Ip.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var IC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},EO=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Il={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(h=64)),r.push(n[u],n[d],n[h],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(IC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):EO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Ep;let h=o<<2|a>>4;if(r.push(h),l!==64){let p=a<<4&240|l>>2;if(r.push(p),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ep=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Tp=function(e){let t=IC(e);return Il.encodeByteArray(t,!0)},Cs=function(e){return Tp(e).replace(/\./g,"")},Ki=function(e){try{return Il.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function EC(e){return DC(void 0,e)}function DC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!DO(n)||(e[n]=DC(e[n],t[n]));return e}function DO(e){return e!=="__proto__"}function TO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var SO=()=>TO().__FIREBASE_DEFAULTS__,MO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},AO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Ki(e[1]);return t&&JSON.parse(t)},Sp=()=>{try{return wC()||SO()||MO()||AO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Mp=e=>Sp()?.emulatorHosts?.[e],TC=e=>{let t=Mp(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ap=()=>Sp()?.config,Np=e=>Sp()?.[`_${e}`];var gn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Bn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function El(e){return f(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function SC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=_({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Cs(JSON.stringify(n)),Cs(JSON.stringify(s)),""].join(".")}var bs={};function NO(){let e={prod:[],emulator:[]};for(let t of Object.keys(bs))bs[t]?e.emulator.push(t):e.prod.push(t);return e}function xO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var bC=!1;function Dl(e,t){if(typeof window>"u"||typeof document>"u"||!Bn(window.location.host)||bs[e]===t||bs[e]||bC)return;bs[e]=t;function n(h){return`__firebase__banner__${h}`}let r="__firebase__banner",o=NO().prod.length>0;function s(){let h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{bC=!0,s()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=xO(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),I=document.getElementById(g)||document.createElement("a"),D=n("preprendIcon"),oe=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let H=h.element;a(H),u(I,g);let Ae=l();c(oe,D),H.append(oe,m,I,Ae),document.body.appendChild(H)}o?(m.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Is(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function MC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tl(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Sl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AC(){let e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Jt(){return Ip.NODE_CLIENT===!0||Ip.NODE_ADMIN===!0}function Ml(){try{return typeof indexedDB=="object"}catch{return!1}}function Al(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function NC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var RO="FirebaseError",Ge=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=RO,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}},ft=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?PO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ge(i,a,r)}};function PO(e,t){return e.replace(OO,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var OO=/\{\$([^}]+)}/g;function Qi(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var xC=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Qi(Ki(o[0])||""),n=Qi(Ki(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var RC=function(e){let t=xC(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},PC=function(e){let t=xC(e).claims;return typeof t=="object"&&t.admin===!0};function Ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Or(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Es(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ds(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Et(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(CC(o)&&CC(s)){if(!Et(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function CC(e){return e!==null&&typeof e=="object"}function kr(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Zi(e){let t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Ji(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Cl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function OC(e,t){let n=new Dp(e,t);return n.subscribe.bind(n)}var Dp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kO(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Cp),i.error===void 0&&(i.error=Cp),i.complete===void 0&&(i.complete=Cp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kO(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Cp(){}function Ts(e,t){return`${e} failed: ${t} argument `}var kC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,v(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ss=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var FO=1e3,LO=2,VO=4*60*60*1e3,jO=.5;function xp(e,t=FO,n=LO){let r=t*Math.pow(n,e),i=Math.round(jO*r*(Math.random()-.5)*2);return Math.min(VO,r+i)}function Ie(e){return e&&e._delegate?e._delegate:e}var Me=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Fr="[DEFAULT]";var Nl=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new gn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(BO(t))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Fr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return f(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Fr){return this.instances.has(t)}getOptions(t=Fr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fr){return this.component?this.component.multipleInstances?t:Fr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UO(e){return e===Fr?void 0:e}function BO(e){return e.instantiationMode==="EAGER"}var Ms=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Nl(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var $O=[],ee=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(ee||{}),HO={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},WO=ee.INFO,zO={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},GO=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=zO[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Xt=class{constructor(t){this.name=t,this._logLevel=WO,this._logHandler=GO,this._userLogHandler=null,$O.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ee))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?HO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...t),this._logHandler(this,ee.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...t),this._logHandler(this,ee.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...t),this._logHandler(this,ee.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...t),this._logHandler(this,ee.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...t),this._logHandler(this,ee.ERROR,...t)}};var qO=(e,t)=>t.some(n=>e instanceof n),FC,LC;function YO(){return FC||(FC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KO(){return LC||(LC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VC=new WeakMap,Pp=new WeakMap,jC=new WeakMap,Rp=new WeakMap,kp=new WeakMap;function QO(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(en(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&VC.set(n,e)}).catch(()=>{}),kp.set(t,e),t}function ZO(e){if(Pp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Pp.set(e,t)}var Op={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Pp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||jC.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return en(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function UC(e){Op=e(Op)}function JO(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(xl(this),t,...n);return jC.set(r,t.sort?t.sort():[t]),en(r)}:KO().includes(e)?function(...t){return e.apply(xl(this),t),en(VC.get(this))}:function(...t){return en(e.apply(xl(this),t))}}function XO(e){return typeof e=="function"?JO(e):(e instanceof IDBTransaction&&ZO(e),qO(e,YO())?new Proxy(e,Op):e)}function en(e){if(e instanceof IDBRequest)return QO(e);if(Rp.has(e))return Rp.get(e);let t=XO(e);return t!==e&&(Rp.set(e,t),kp.set(t,e)),t}var xl=e=>kp.get(e);function Rl(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=en(s);return r&&s.addEventListener("upgradeneeded",c=>{r(en(s.result),c.oldVersion,c.newVersion,en(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ek=["get","getKey","getAll","getAllKeys","count"],tk=["put","add","delete","clear"],Fp=new Map;function BC(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Fp.get(t))return Fp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=tk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ek.includes(n)))return;let o=function(s,...a){return f(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Fp.set(t,o),o}UC(e=>P(_({},e),{get:(t,n,r)=>BC(t,n)||e.get(t,n,r),has:(t,n)=>!!BC(t,n)||e.has(t,n)}));var Vp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function nk(e){return e.getComponent()?.type==="VERSION"}var jp="@firebase/app",$C="0.14.1";var _n=new Xt("@firebase/app"),rk="@firebase/app-compat",ik="@firebase/analytics-compat",ok="@firebase/analytics",sk="@firebase/app-check-compat",ak="@firebase/app-check",ck="@firebase/auth",lk="@firebase/auth-compat",uk="@firebase/database",dk="@firebase/data-connect",hk="@firebase/database-compat",fk="@firebase/functions",pk="@firebase/functions-compat",mk="@firebase/installations",gk="@firebase/installations-compat",_k="@firebase/messaging",vk="@firebase/messaging-compat",yk="@firebase/performance",wk="@firebase/performance-compat",bk="@firebase/remote-config",Ck="@firebase/remote-config-compat",Ik="@firebase/storage",Ek="@firebase/storage-compat",Dk="@firebase/firestore",Tk="@firebase/ai",Sk="@firebase/firestore-compat",Mk="firebase",Ak="12.1.0";var Up="[DEFAULT]",Nk={[jp]:"fire-core",[rk]:"fire-core-compat",[ok]:"fire-analytics",[ik]:"fire-analytics-compat",[ak]:"fire-app-check",[sk]:"fire-app-check-compat",[ck]:"fire-auth",[lk]:"fire-auth-compat",[uk]:"fire-rtdb",[dk]:"fire-data-connect",[hk]:"fire-rtdb-compat",[fk]:"fire-fn",[pk]:"fire-fn-compat",[mk]:"fire-iid",[gk]:"fire-iid-compat",[_k]:"fire-fcm",[vk]:"fire-fcm-compat",[yk]:"fire-perf",[wk]:"fire-perf-compat",[bk]:"fire-rc",[Ck]:"fire-rc-compat",[Ik]:"fire-gcs",[Ek]:"fire-gcs-compat",[Dk]:"fire-fst",[Sk]:"fire-fst-compat",[Tk]:"fire-vertex","fire-js":"fire-js",[Mk]:"fire-js-all"};var Pl=new Map,xk=new Map,Bp=new Map;function HC(e,t){try{e.container.addComponent(t)}catch(n){_n.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function tt(e){let t=e.name;if(Bp.has(t))return _n.debug(`There were multiple attempts to register component ${t}.`),!1;Bp.set(t,e);for(let n of Pl.values())HC(n,e);for(let n of xk.values())HC(n,e);return!0}function Lt(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pt(e){return e==null?!1:e.settings!==void 0}var Rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new ft("app","Firebase",Rk);var $p=class{constructor(t,n,r){this._isDeleted=!1,this._options=_({},t),this._config=_({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Me("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};var Hn=Ak;function Ns(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=_({name:Up,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw $n.create("bad-app-name",{appName:String(i)});if(n||(n=Ap()),!n)throw $n.create("no-options");let o=Pl.get(i);if(o){if(Et(n,o.options)&&Et(r,o.config))return o;throw $n.create("duplicate-app",{appName:i})}let s=new Ms(i);for(let c of Bp.values())s.addComponent(c);let a=new $p(n,r,s);return Pl.set(i,a),a}function Lr(e=Up){let t=Pl.get(e);if(!t&&e===Up&&Ap())return Ns();if(!t)throw $n.create("no-app",{appName:e});return t}function ke(e,t,n){let r=Nk[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_n.warn(s.join(" "));return}tt(new Me(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var Pk="firebase-heartbeat-database",Ok=1,As="firebase-heartbeat-store",Lp=null;function qC(){return Lp||(Lp=Rl(Pk,Ok,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(As)}catch(n){console.warn(n)}}}}).catch(e=>{throw $n.create("idb-open",{originalErrorMessage:e.message})})),Lp}function kk(e){return f(this,null,function*(){try{let n=(yield qC()).transaction(As),r=yield n.objectStore(As).get(YC(e));return yield n.done,r}catch(t){if(t instanceof Ge)_n.warn(t.message);else{let n=$n.create("idb-get",{originalErrorMessage:t?.message});_n.warn(n.message)}}})}function WC(e,t){return f(this,null,function*(){try{let r=(yield qC()).transaction(As,"readwrite");yield r.objectStore(As).put(t,YC(e)),yield r.done}catch(n){if(n instanceof Ge)_n.warn(n.message);else{let r=$n.create("idb-set",{originalErrorMessage:n?.message});_n.warn(r.message)}}})}function YC(e){return`${e.name}!${e.options.appId}`}var Fk=1024,Lk=30,Hp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Wp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Lk){let i=jk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){_n.warn(t)}})}getHeartbeatsHeader(){return f(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=zC(),{heartbeatsToSend:n,unsentEntries:r}=Vk(this._heartbeatsCache.heartbeats),i=Cs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return _n.warn(t),""}})}};function zC(){return new Date().toISOString().substring(0,10)}function Vk(e,t=Fk){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GC(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GC(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Wp=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return Ml()?Al().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield kk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return WC(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return WC(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function GC(e){return Cs(JSON.stringify({version:2,heartbeats:e})).length}function jk(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Uk(e){tt(new Me("platform-logger",t=>new Vp(t),"PRIVATE")),tt(new Me("heartbeat",t=>new Hp(t),"PRIVATE")),ke(jp,$C,e),ke(jp,$C,"esm2020"),ke("fire-js","")}Uk("");var Bk="firebase",$k="12.1.0";ke(Bk,$k,"app");var ZC="@firebase/installations",Yp="0.6.19";var JC=1e4,XC=`w:${Yp}`,eI="FIS_v2",Hk="https://firebaseinstallations.googleapis.com/v1",Wk=60*60*1e3,zk="installations",Gk="Installations";var qk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},jr=new ft(zk,Gk,qk);function tI(e){return e instanceof Ge&&e.code.includes("request-failed")}function nI({projectId:e}){return`${Hk}/projects/${e}/installations`}function rI(e){return{token:e.token,requestStatus:2,expiresIn:Kk(e.expiresIn),creationTime:Date.now()}}function iI(e,t){return f(this,null,function*(){let r=(yield t.json()).error;return jr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function oI({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Yk(e,{refreshToken:t}){let n=oI(e);return n.append("Authorization",Qk(t)),n}function sI(e){return f(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function Kk(e){return Number(e.replace("s","000"))}function Qk(e){return`${eI} ${e}`}function Zk(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=nI(e),s=oI(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:eI,appId:e.appId,sdkVersion:XC},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield sI(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:rI(d.authToken)}}else throw yield iI("Create Installation",u)})}function aI(e){return new Promise(t=>{setTimeout(t,e)})}function Jk(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var Xk=/^[cdef][\w-]{21}$/,qp="";function e1(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=t1(e);return Xk.test(n)?n:qp}catch{return qp}}function t1(e){return Jk(e).substr(0,22)}function kl(e){return`${e.appName}!${e.appId}`}var cI=new Map;function lI(e,t){let n=kl(e);uI(n,t),n1(n,t)}function uI(e,t){let n=cI.get(e);if(n)for(let r of n)r(t)}function n1(e,t){let n=r1();n&&n.postMessage({key:e,fid:t}),i1()}var Vr=null;function r1(){return!Vr&&"BroadcastChannel"in self&&(Vr=new BroadcastChannel("[Firebase] FID Change"),Vr.onmessage=e=>{uI(e.data.key,e.data.fid)}),Vr}function i1(){cI.size===0&&Vr&&(Vr.close(),Vr=null)}var o1="firebase-installations-database",s1=1,Ur="firebase-installations-store",zp=null;function Kp(){return zp||(zp=Rl(o1,s1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ur)}}})),zp}function Ol(e,t){return f(this,null,function*(){let n=kl(e),i=(yield Kp()).transaction(Ur,"readwrite"),o=i.objectStore(Ur),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&lI(e,t.fid),t})}function dI(e){return f(this,null,function*(){let t=kl(e),r=(yield Kp()).transaction(Ur,"readwrite");yield r.objectStore(Ur).delete(t),yield r.done})}function Fl(e,t){return f(this,null,function*(){let n=kl(e),i=(yield Kp()).transaction(Ur,"readwrite"),o=i.objectStore(Ur),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&lI(e,a.fid),a})}function Qp(e){return f(this,null,function*(){let t,n=yield Fl(e.appConfig,r=>{let i=a1(r),o=c1(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===qp?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function a1(e){let t=e||{fid:e1(),registrationStatus:0};return hI(t)}function c1(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(jr.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=l1(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:u1(e)}:{installationEntry:t}}function l1(e,t){return f(this,null,function*(){try{let n=yield Zk(e,t);return Ol(e.appConfig,n)}catch(n){throw tI(n)&&n.customData.serverCode===409?yield dI(e.appConfig):yield Ol(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function u1(e){return f(this,null,function*(){let t=yield KC(e.appConfig);for(;t.registrationStatus===1;)yield aI(100),t=yield KC(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Qp(e);return r||n}return t})}function KC(e){return Fl(e,t=>{if(!t)throw jr.create("installation-not-found");return hI(t)})}function hI(e){return d1(e)?{fid:e.fid,registrationStatus:0}:e}function d1(e){return e.registrationStatus===1&&e.registrationTime+JC<Date.now()}function h1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=f1(e,n),s=Yk(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:XC,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield sI(()=>fetch(o,l));if(u.ok){let d=yield u.json();return rI(d)}else throw yield iI("Generate Auth Token",u)})}function f1(e,{fid:t}){return`${nI(e)}/${t}/authTokens:generate`}function Zp(e,t=!1){return f(this,null,function*(){let n,r=yield Fl(e.appConfig,o=>{if(!fI(o))throw jr.create("not-registered");let s=o.authToken;if(!t&&g1(s))return o;if(s.requestStatus===1)return n=p1(e,t),o;{if(!navigator.onLine)throw jr.create("app-offline");let a=v1(o);return n=m1(e,a),a}});return n?yield n:r.authToken})}function p1(e,t){return f(this,null,function*(){let n=yield QC(e.appConfig);for(;n.authToken.requestStatus===1;)yield aI(100),n=yield QC(e.appConfig);let r=n.authToken;return r.requestStatus===0?Zp(e,t):r})}function QC(e){return Fl(e,t=>{if(!fI(t))throw jr.create("not-registered");let n=t.authToken;return y1(n)?P(_({},t),{authToken:{requestStatus:0}}):t})}function m1(e,t){return f(this,null,function*(){try{let n=yield h1(e,t),r=P(_({},t),{authToken:n});return yield Ol(e.appConfig,r),n}catch(n){if(tI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield dI(e.appConfig);else{let r=P(_({},t),{authToken:{requestStatus:0}});yield Ol(e.appConfig,r)}throw n}})}function fI(e){return e!==void 0&&e.registrationStatus===2}function g1(e){return e.requestStatus===2&&!_1(e)}function _1(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Wk}function v1(e){let t={requestStatus:1,requestTime:Date.now()};return P(_({},e),{authToken:t})}function y1(e){return e.requestStatus===1&&e.requestTime+JC<Date.now()}function w1(e){return f(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield Qp(t);return r?r.catch(console.error):Zp(t).catch(console.error),n.fid})}function b1(e,t=!1){return f(this,null,function*(){let n=e;return yield C1(n),(yield Zp(n,t)).token})}function C1(e){return f(this,null,function*(){let{registrationPromise:t}=yield Qp(e);t&&(yield t)})}function I1(e){if(!e||!e.options)throw Gp("App Configuration");if(!e.name)throw Gp("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw Gp(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Gp(e){return jr.create("missing-app-config-values",{valueName:e})}var pI="installations",E1="installations-internal",D1=e=>{let t=e.getProvider("app").getImmediate(),n=I1(t),r=Lt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},T1=e=>{let t=e.getProvider("app").getImmediate(),n=Lt(t,pI).getImmediate();return{getId:()=>w1(n),getToken:i=>b1(n,i)}};function S1(){tt(new Me(pI,D1,"PUBLIC")),tt(new Me(E1,T1,"PRIVATE"))}S1();ke(ZC,Yp);ke(ZC,Yp,"esm2020");var Ll="analytics",M1="firebase_id",A1="origin",N1=60*1e3,x1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",im="https://www.googletagmanager.com/gtag/js";var nt=new Xt("@firebase/analytics");var R1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mt=new ft("analytics","Analytics",R1);function P1(e){if(!e.startsWith(im)){let t=mt.create("invalid-gtag-resource",{gtagURL:e});return nt.warn(t.message),""}return e}function bI(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function O1(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function k1(e,t){let n=O1("firebase-js-sdk-policy",{createScriptURL:P1}),r=document.createElement("script"),i=`${im}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function F1(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function L1(e,t,n,r,i,o){return f(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield bI(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){nt.error(a)}e("config",i,o)})}function V1(e,t,n,r,i){return f(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield bI(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){nt.error(o)}})}function j1(e,t,n,r){function i(o,...s){return f(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield V1(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield L1(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){nt.error(a)}})}return i}function U1(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=j1(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function B1(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(im)&&n.src.includes(e))return n;return null}var $1=30,H1=1e3,Xp=class{constructor(t={},n=H1){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},CI=new Xp;function W1(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function z1(e){return f(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:W1(n)},i=x1.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw mt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function G1(r){return f(this,arguments,function*(e,t=CI,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw mt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw mt.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new em;return setTimeout(()=>f(this,null,function*(){c.abort()}),n!==void 0?n:N1),II({appId:i,apiKey:o,measurementId:s},a,c,t)})}function II(o,s,a){return f(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=CI){let{appId:c,measurementId:l}=e;try{yield q1(r,t)}catch(u){if(l)return nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield z1(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!Y1(d)){if(i.deleteThrottleMetadata(c),l)return nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let h=Number(d?.customData?.httpStatus)===503?xp(n,i.intervalMillis,$1):xp(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(c,p),nt.debug(`Calling attemptFetch again in ${h} millis`),II(e,p,r,i)}})}function q1(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(mt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Y1(e){if(!(e instanceof Ge)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var em=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var tm;function K1(e,t,n,r,i){return f(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=P(_({},r),{send_to:o});e("event",n,s)}})}var nm;function Q1(e){nm=e}function Z1(e){tm=e}function J1(){return f(this,null,function*(){if(Ml())try{yield Al()}catch(e){return nt.warn(mt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return nt.warn(mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function X1(e,t,n,r,i,o,s){return f(this,null,function*(){let a=G1(e);a.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&nt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>nt.error(h)),t.push(a);let c=J1().then(h=>{if(h)return r.getId()}),[l,u]=yield Promise.all([a,c]);B1(o)||k1(o,l.measurementId),nm&&(i("consent","default",nm),Q1(void 0)),i("js",new Date);let d=s?.config??{};return d[A1]="firebase",d.update=!0,u!=null&&(d[M1]=u),i("config",l.measurementId,d),tm&&(i("set",tm),Z1(void 0)),l.measurementId})}var rm=class{constructor(t){this.app=t}_delete(){return delete xs[this.app.options.appId],Promise.resolve()}},xs={},mI=[],gI={},Jp="dataLayer",eF="gtag",_I,EI,vI=!1;function tF(){let e=[];if(Tl()&&e.push("This is a browser extension environment."),NC()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=mt.create("invalid-analytics-context",{errorInfo:t});nt.warn(n.message)}}function nF(e,t,n){tF();let r=e.options.appId;if(!r)throw mt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mt.create("no-api-key");if(xs[r]!=null)throw mt.create("already-exists",{id:r});if(!vI){F1(Jp);let{wrappedGtag:o,gtagCore:s}=U1(xs,mI,gI,Jp,eF);EI=o,_I=s,vI=!0}return xs[r]=X1(e,mI,gI,t,_I,Jp,n),new rm(e)}function DI(e=Lr()){e=Ie(e);let t=Lt(e,Ll);return t.isInitialized()?t.getImmediate():rF(e)}function rF(e,t={}){let n=Lt(e,Ll);if(n.isInitialized()){let i=n.getImmediate();if(Et(t,n.getOptions()))return i;throw mt.create("already-initialized")}return n.initialize({options:t})}function iF(e,t,n,r){e=Ie(e),K1(EI,xs[e.app.options.appId],t,n,r).catch(i=>nt.error(i))}var yI="@firebase/analytics",wI="0.10.18";function oF(){tt(new Me(Ll,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return nF(r,i,n)},"PUBLIC")),tt(new Me("analytics-internal",e,"PRIVATE")),ke(yI,wI),ke(yI,wI,"esm2020");function e(t){try{let n=t.getProvider(Ll).getImmediate();return{logEvent:(r,i,o)=>iF(n,r,i,o)}}catch(n){throw mt.create("interop-component-reg-failed",{reason:n})}}}oF();function $I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HI=$I,WI=new ft("auth","Firebase",$I());var Hl=new Xt("@firebase/auth");function sF(e,...t){Hl.logLevel<=ee.WARN&&Hl.warn(`Auth (${Hn}): ${e}`,...t)}function jl(e,...t){Hl.logLevel<=ee.ERROR&&Hl.error(`Auth (${Hn}): ${e}`,...t)}function nn(e,...t){throw Mm(e,...t)}function Br(e,...t){return Mm(e,...t)}function zI(e,t,n){let r=P(_({},HI()),{[t]:n});return new ft("auth","Firebase",r).create(t,{appName:e.name})}function Gn(e){return zI(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return WI.create(e,...t)}function N(e,t,...n){if(!e)throw Mm(t,...n)}function vn(e){let t="INTERNAL ASSERTION FAILED: "+e;throw jl(t),new Error(t)}function qn(e,t){e||vn(t)}function cm(){return typeof self<"u"&&self.location?.href||""}function aF(){return TI()==="http:"||TI()==="https:"}function TI(){return typeof self<"u"&&self.location?.protocol||null}function cF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aF()||Tl()||"connection"in navigator)?navigator.onLine:!0}function lF(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var $r=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,qn(n>t,"Short delay should be less than long delay!"),this.isMobile=Is()||Sl()}get(){return cF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Am(e,t){qn(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Wl=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hF=new $r(3e4,6e4);function Wr(e,t){return e.tenantId&&!t.tenantId?P(_({},t),{tenantId:e.tenantId}):t}function Yn(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){return GI(e,i,()=>f(this,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=kr(_({key:e.config.apiKey},u)).slice(1),h=yield e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);let p=_({method:t,headers:h},l);return MC()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&Bn(e.emulatorConfig.host)&&(p.credentials="include"),Wl.fetch()(yield qI(e,e.config.apiHost,n,d),p)}))})}function GI(e,t,n){return f(this,null,function*(){e._canInitEmulator=!1;let r=_(_({},uF),t);try{let i=new lm(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Vl(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Vl(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Vl(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zI(e,u,l);nn(e,u)}}catch(i){if(i instanceof Ge)throw i;nn(e,"network-request-failed",{message:String(i)})}})}function tu(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){let l=yield Yn(e,t,n,r,i);return"mfaPendingCredential"in l&&nn(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function qI(e,t,n,r){return f(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Am(e.config,i):`${e.config.apiScheme}://${i}`;return dF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function fF(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),hF.get())})}};function Vl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Br(e,t,r);return i.customData._tokenResponse=n,i}function SI(e){return e!==void 0&&e.enterprise!==void 0}var um=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return fF(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function pF(e,t){return f(this,null,function*(){return Yn(e,"GET","/v2/recaptchaConfig",Wr(e,t))})}function mF(e,t){return f(this,null,function*(){return Yn(e,"POST","/v1/accounts:delete",t)})}function zl(e,t){return f(this,null,function*(){return Yn(e,"POST","/v1/accounts:lookup",t)})}function Ps(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function YI(e,t=!1){return f(this,null,function*(){let n=Ie(e),r=yield n.getIdToken(t),i=Nm(r);N(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ps(om(i.auth_time)),issuedAtTime:Ps(om(i.iat)),expirationTime:Ps(om(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function om(e){return Number(e)*1e3}function Nm(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return jl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ki(n);return i?JSON.parse(i):(jl("Failed to decode base64 JWT payload"),null)}catch(i){return jl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function MI(e){let t=Nm(e);return N(t,"internal-error"),N(typeof t.exp<"u","internal-error"),N(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function ks(e,t,n=!1){return f(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Ge&&gF(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function gF({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var dm=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Fs=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ps(this.lastLoginAt),this.creationTime=Ps(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Gl(e){return f(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield ks(e,zl(t,{idToken:n}));N(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?QI(i.providerUserInfo):[],s=_F(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Fs(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function KI(e){return f(this,null,function*(){let t=Ie(e);yield Gl(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function _F(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function QI(e){return e.map(r=>{var i=r,{providerId:t}=i,n=ya(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function vF(e,t){return f(this,null,function*(){let n=yield GI(e,{},()=>f(this,null,function*(){let r=kr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield qI(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&Bn(e.emulatorConfig.host)&&(c.credentials="include"),Wl.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function yF(e,t){return f(this,null,function*(){return Yn(e,"POST","/v2/accounts:revokeToken",Wr(e,t))})}var Os=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){N(t.idToken,"internal-error"),N(typeof t.idToken<"u","internal-error"),N(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):MI(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){N(t.length!==0,"internal-error");let n=MI(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(N(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield vF(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(N(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(N(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(N(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return vn("not implemented")}};function Wn(e,t){N(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var zn=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=ya(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fs(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return f(this,null,function*(){let n=yield ks(this,this.stsTokenManager.getToken(this.auth,t));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return YI(this,t)}reload(){return KI(this)}_assign(t){this!==t&&(N(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>_({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(P(_({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return f(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Gl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(pt(this.auth.app))return Promise.reject(Gn(this.auth));let t=yield this.getIdToken();return yield ks(this,mF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return P(_({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>_({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:m,stsTokenManager:g}=n;N(d&&g,t,"internal-error");let I=Os.fromJSON(this.name,g);N(typeof d=="string",t,"internal-error"),Wn(r,t.name),Wn(i,t.name),N(typeof h=="boolean",t,"internal-error"),N(typeof p=="boolean",t,"internal-error"),Wn(o,t.name),Wn(s,t.name),Wn(a,t.name),Wn(c,t.name),Wn(l,t.name),Wn(u,t.name);let D=new e({uid:d,auth:t,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:I,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(D.providerData=m.map(oe=>_({},oe))),c&&(D._redirectEventId=c),D}static _fromIdTokenResponse(t,n,r=!1){return f(this,null,function*(){let i=new Os;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Gl(o),o})}static _fromGetAccountInfoResponse(t,n,r){return f(this,null,function*(){let i=n.users[0];N(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?QI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Os;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var AI=new Map;function yn(e){qn(e instanceof Function,"Expected a class definition");let t=AI.get(e);return t?(qn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,AI.set(e,t),t)}var wF=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),hm=wF;function Ul(e,t,n){return`firebase:${e}:${t}:${n}`}var ql=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ul(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ul("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return f(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield zl(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return f(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new e(yn(hm),t,r);let i=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||yn(hm),s=Ul(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let h=yield zl(t,{idToken:u}).catch(()=>{});if(!h)break;d=yield zn._fromGetAccountInfoResponse(t,h,u)}else d=zn._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function NI(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ZI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nE(t))return"Blackberry";if(rE(t))return"Webos";if(JI(t))return"Safari";if((t.includes("chrome/")||XI(t))&&!t.includes("edge/"))return"Chrome";if(tE(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function ZI(e=Be()){return/firefox\//i.test(e)}function JI(e=Be()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function XI(e=Be()){return/crios\//i.test(e)}function eE(e=Be()){return/iemobile/i.test(e)}function tE(e=Be()){return/android/i.test(e)}function nE(e=Be()){return/blackberry/i.test(e)}function rE(e=Be()){return/webos/i.test(e)}function xm(e=Be()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bF(e=Be()){return xm(e)&&!!window.navigator?.standalone}function CF(){return AC()&&document.documentMode===10}function iE(e=Be()){return xm(e)||tE(e)||rE(e)||nE(e)||/windows phone/i.test(e)||eE(e)}function oE(e,t=[]){let n;switch(e){case"Browser":n=NI(Be());break;case"Worker":n=`${NI(Be())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hn}/${r}`}var fm=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return f(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function IF(n){return f(this,arguments,function*(e,t={}){return Yn(e,"GET","/v2/passwordPolicy",Wr(e,t))})}var EF=6,pm=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??EF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var mm=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yl(this),this.idTokenSubscription=new Yl(this),this.beforeStateQueue=new fm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=yn(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield ql.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return f(this,null,function*(){try{let n=yield zl(this,{idToken:t}),r=yield zn._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return f(this,null,function*(){if(pt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return f(this,null,function*(){try{yield Gl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=lF()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return f(this,null,function*(){if(pt(this.app))return Promise.reject(Gn(this));let n=t?Ie(t):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return f(this,null,function*(){if(!this._deleted)return t&&N(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return pt(this.app)?Promise.reject(Gn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return pt(this.app)?Promise.reject(Gn(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(yn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let t=yield IF(this),n=new pm(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ft("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield yF(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&yn(t)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=yield ql.create(this,[yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return f(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return f(this,null,function*(){if(t===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(N(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return f(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return f(this,null,function*(){if(pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&sF(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Xi(e){return Ie(e)}var Yl=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=OC(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nu={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DF(e){nu=e}function sE(e){return nu.loadJS(e)}function TF(){return nu.recaptchaEnterpriseScript}function SF(){return nu.gapiScript}function aE(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var gm=class{constructor(){this.enterprise=new _m}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}},_m=class{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}};var MF="recaptcha-enterprise",cE="NO_RECAPTCHA",vm=class{constructor(t){this.type=MF,this.auth=Xi(t)}verify(t="verify",n=!1){return f(this,null,function*(){function r(o){return f(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>f(this,null,function*(){pF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new um(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;SI(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:t}).then(l=>{s(l)}).catch(()=>{s(cE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&SI(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=TF();c.length!==0&&(c+=a),sE(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Rs(e,t,n,r=!1,i=!1){return f(this,null,function*(){let o=new vm(e),s;if(i)s=cE;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=_({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function xI(e,t,n,r,i){return f(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Rs(e,t,n,n==="getOobCode");return r(e,o)}else return r(e,t).catch(o=>f(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Rs(e,t,n,n==="getOobCode");return r(e,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Rs(e,t,n);return r(e,o).catch(s=>f(this,null,function*(){if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield Rs(e,t,n,!1,!0);return r(e,a)}return Promise.reject(s)}))}else{let o=yield Rs(e,t,n,!1,!0);return r(e,o)}else return Promise.reject(i+" provider is not supported.")})}function lE(e,t){let n=Lt(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Et(o,t??{}))return i;nn(i,"already-initialized")}return n.initialize({options:t})}function AF(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(yn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function uE(e,t,n){let r=Xi(e);N(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=dE(t),{host:s,port:a}=NF(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){N(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),N(Et(l,r.config.emulator)&&Et(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Bn(s)?(El(`${o}//${s}${c}`),Dl("Auth",!0)):i||xF()}function dE(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function NF(e){let t=dE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:RI(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:RI(s)}}}function RI(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function xF(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var Ls=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return vn("not implemented")}_getIdTokenResponse(t){return vn("not implemented")}_linkToIdToken(t,n){return vn("not implemented")}_getReauthenticationResolver(t){return vn("not implemented")}};function RF(e,t){return f(this,null,function*(){return Yn(e,"POST","/v1/accounts:signUp",t)})}function PF(e,t){return f(this,null,function*(){return tu(e,"POST","/v1/accounts:signInWithPassword",Wr(e,t))})}function OF(e,t){return f(this,null,function*(){return tu(e,"POST","/v1/accounts:signInWithEmailLink",Wr(e,t))})}function kF(e,t){return f(this,null,function*(){return tu(e,"POST","/v1/accounts:signInWithEmailLink",Wr(e,t))})}var Vs=class e extends Ls{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new e(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xI(t,n,"signInWithPassword",PF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return OF(t,{email:this._email,oobCode:this._password});default:nn(t,"internal-error")}})}_linkToIdToken(t,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xI(t,r,"signUpPassword",RF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kF(t,{idToken:n,email:this._email,oobCode:this._password});default:nn(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function sm(e,t){return f(this,null,function*(){return tu(e,"POST","/v1/accounts:signInWithIdp",Wr(e,t))})}function FF(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LF(e){let t=Zi(Ji(e)).link,n=t?Zi(Ji(t)).deep_link_id:null,r=Zi(Ji(e)).deep_link_id;return(r?Zi(Ji(r)).link:null)||r||n||t||e}var Kl=class e{constructor(t){let n=Zi(Ji(t)),r=n.apiKey??null,i=n.oobCode??null,o=FF(n.mode??null);N(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){let n=LF(t);try{return new e(n)}catch{return null}}};var hE=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return Vs._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Kl.parseLink(r);return N(i,"argument-error"),Vs._fromEmailAndCode(n,i.code,i.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),Ql=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var ym=class extends Ql{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var js=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return f(this,null,function*(){let o=yield zn._fromIdTokenResponse(t,r,i),s=PI(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return f(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=PI(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function PI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var wm=class e extends Ge{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function fE(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wm._fromErrorAndOperation(e,o,t,r):o})}function VF(e,t,n=!1){return f(this,null,function*(){let r=yield ks(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return js._forOperation(e,"link",r)})}function jF(e,t,n=!1){return f(this,null,function*(){let{auth:r}=e;if(pt(r.app))return Promise.reject(Gn(r));let i="reauthenticate";try{let o=yield ks(e,fE(r,i,t,e),n);N(o.idToken,r,"internal-error");let s=Nm(o.idToken);N(s,r,"internal-error");let{sub:a}=s;return N(e.uid===a,r,"user-mismatch"),js._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&nn(r,"user-mismatch"),o}})}function pE(e,t,n=!1){return f(this,null,function*(){if(pt(e.app))return Promise.reject(Gn(e));let r="signIn",i=yield fE(e,r,t),o=yield js._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function mE(e,t){return f(this,null,function*(){return pE(Xi(e),t)})}function UF(e){return f(this,null,function*(){let t=Xi(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Rm(e,t,n){return pt(e.app)?Promise.reject(Gn(e)):mE(Ie(e),hE.credential(t,n)).catch(r=>f(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&UF(e),r}))}function gE(e,t,n,r){return Ie(e).onIdTokenChanged(t,n,r)}function _E(e,t,n){return Ie(e).beforeAuthStateChanged(t,n)}var Zl="__sak";var Jl=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zl,"1"),this.storage.removeItem(Zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var BF=1e3,$F=10,HF=(()=>{class e extends Jl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iE(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);CF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,$F):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},BF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield nr(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield nr(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield nr(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),vE=HF;var WF=(()=>{class e extends Jl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),Pm=WF;function zF(e){return Promise.all(e.map(t=>f(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var GF=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>f(this,null,function*(){return u(r.origin,s)})),l=yield zF(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function yE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var bm=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=yE("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function tn(){return window}function qF(e){tn().location.href=e}function wE(){return typeof tn().WorkerGlobalScope<"u"&&typeof tn().importScripts=="function"}function YF(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function KF(){return navigator?.serviceWorker?.controller||null}function QF(){return wE()?self:null}var bE="firebaseLocalStorageDb",ZF=1,Xl="firebaseLocalStorage",CE="fbase_key",Hr=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ru(e,t){return e.transaction([Xl],t?"readwrite":"readonly").objectStore(Xl)}function JF(){let e=indexedDB.deleteDatabase(bE);return new Hr(e).toPromise()}function Cm(){let e=indexedDB.open(bE,ZF);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Xl,{keyPath:CE})}catch(i){n(i)}}),e.addEventListener("success",()=>f(this,null,function*(){let r=e.result;r.objectStoreNames.contains(Xl)?t(r):(r.close(),yield JF(),t(yield Cm()))}))})}function OI(e,t,n){return f(this,null,function*(){let r=ru(e,!0).put({[CE]:t,value:n});return new Hr(r).toPromise()})}function XF(e,t){return f(this,null,function*(){let n=ru(e,!1).get(t),r=yield new Hr(n).toPromise();return r===void 0?null:r.value})}function kI(e,t){let n=ru(e,!0).delete(t);return new Hr(n).toPromise()}var eL=800,tL=3,nL=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield Cm(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>tL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return wE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=GF._getInstance(QF()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){if(this.activeServiceWorker=yield YF(),!this.activeServiceWorker)return;this.sender=new bm(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||KF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Cm();return yield OI(n,Zl,"1"),yield kI(n,Zl),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>OI(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>XF(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>kI(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(o=>{let s=ru(o,!1).getAll();return new Hr(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),eL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),IE=nL;var L6=aE("rcb"),V6=new $r(3e4,6e4);function rL(e,t){return t?yn(t):(N(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Us=class extends Ls{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return sm(t,this._buildIdpRequest())}_linkToIdToken(t,n){return sm(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return sm(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function iL(e){return pE(e.auth,new Us(e),e.bypassAuthState)}function oL(e){let{auth:t,user:n}=e;return N(n,t,"internal-error"),jF(n,new Us(e),e.bypassAuthState)}function sL(e){return f(this,null,function*(){let{auth:t,user:n}=e;return N(n,t,"internal-error"),VF(n,new Us(e),e.bypassAuthState)})}var Im=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>f(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iL;case"linkViaPopup":case"linkViaRedirect":return sL;case"reauthViaPopup":case"reauthViaRedirect":return oL;default:nn(this.auth,"internal-error")}}resolve(t){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var j6=new $r(2e3,1e4);var aL="pendingRedirect",Bl=new Map,Em=class e extends Im{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let t=Bl.get(this.auth._key());if(!t){try{let r=(yield cL(this.resolver,this.auth))?yield nr(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Bl.set(this.auth._key(),t)}return this.bypassAuthState||Bl.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return f(this,null,function*(){if(t.type==="signInViaRedirect")return nr(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,nr(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function cL(e,t){return f(this,null,function*(){let n=dL(t),r=uL(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function lL(e,t){Bl.set(e._key(),t)}function uL(e){return yn(e._redirectPersistence)}function dL(e){return Ul(aL,e.config.apiKey,e.name)}function hL(e,t,n=!1){return f(this,null,function*(){if(pt(e.app))return Promise.reject(Gn(e));let r=Xi(e),i=rL(r,t),s=yield new Em(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var fL=10*60*1e3,Dm=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!pL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!EE(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Br(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(FI(t))}saveEventToCache(t){this.cachedEventUids.add(FI(t)),this.lastProcessedEventTime=Date.now()}};function FI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function EE({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function pL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EE(e);default:return!1}}function mL(n){return f(this,arguments,function*(e,t={}){return Yn(e,"GET","/v1/projects",t)})}var gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_L=/^https?/;function vL(e){return f(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield mL(e);for(let n of t)try{if(yL(n))return}catch{}nn(e,"unauthorized-domain")})}function yL(e){let t=cm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!_L.test(n))return!1;if(gL.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var wL=new $r(3e4,6e4);function LI(){let e=tn().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function bL(e){return new Promise((t,n)=>{function r(){LI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{LI(),n(Br(e,"network-request-failed"))},timeout:wL.get()})}if(tn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(tn().gapi?.load)r();else{let i=aE("iframefcb");return tn()[i]=()=>{gapi.load?r():n(Br(e,"network-request-failed"))},sE(`${SF()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw $l=null,t})}var $l=null;function CL(e){return $l=$l||bL(e),$l}var IL=new $r(5e3,15e3),EL="__/auth/iframe",DL="emulator/auth/iframe",TL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ML(e){let t=e.config;N(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?Am(t,DL):`https://${e.config.authDomain}/${EL}`,r={apiKey:t.apiKey,appName:e.name,v:Hn},i=SL.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${kr(r).slice(1)}`}function AL(e){return f(this,null,function*(){let t=yield CL(e),n=tn().gapi;return N(n,e,"internal-error"),t.open({where:document.body,url:ML(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TL,dontclear:!0},r=>new Promise((i,o)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Br(e,"network-request-failed"),a=tn().setTimeout(()=>{o(s)},IL.get());function c(){tn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var NL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xL=500,RL=600,PL="_blank",OL="http://localhost",eu=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function kL(e,t,n,r=xL,i=RL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=P(_({},NL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Be().toLowerCase();n&&(a=XI(l)?PL:n),ZI(l)&&(t=t||OL,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(bF(l)&&a!=="_self")return FL(t||"",a),new eu(null);let d=window.open(t||"",a,u);N(d,e,"popup-blocked");try{d.focus()}catch{}return new eu(d)}function FL(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var LL="__/auth/handler",VL="emulator/auth/handler",jL=encodeURIComponent("fac");function VI(e,t,n,r,i,o){return f(this,null,function*(){N(e.config.authDomain,e,"auth-domain-config-required"),N(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Hn,eventId:i};if(t instanceof Ql){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Es(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof ym){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${jL}=${encodeURIComponent(c)}`:"";return`${UL(e)}?${kr(a).slice(1)}${l}`})}function UL({config:e}){return e.emulator?Am(e,VL):`https://${e.authDomain}/${LL}`}var am="webStorageSupport",Tm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pm,this._completeRedirectFn=hL,this._overrideRedirectResult=lL}_openPopup(t,n,r,i){return f(this,null,function*(){qn(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield VI(t,n,r,cm(),i);return kL(t,o,yE())})}_openRedirect(t,n,r,i){return f(this,null,function*(){yield this._originValidation(t);let o=yield VI(t,n,r,cm(),i);return qF(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(qn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return f(this,null,function*(){let n=yield AL(t),r=new Dm(t);return n.register("authEvent",i=>(N(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(am,{type:am},i=>{let o=i?.[0]?.[am];o!==void 0&&n(!!o),nn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return iE()||JI()||xm()}},DE=Tm;var jI="@firebase/auth",UI="1.11.0";var Sm=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function BL(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $L(e){tt(new Me("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;N(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oE(e)},l=new mm(r,i,o,c);return AF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),tt(new Me("auth-internal",t=>{let n=Xi(t.getProvider("auth").getImmediate());return(r=>new Sm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(jI,UI,BL(e)),ke(jI,UI,"esm2020")}var HL=5*60,WL=Np("authIdTokenMaxAge")||HL,BI=null,zL=e=>t=>f(void 0,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WL)return;let i=n?.token;BI!==i&&(BI=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Om(e=Lr()){let t=Lt(e,"auth");if(t.isInitialized())return t.getImmediate();let n=lE(e,{popupRedirectResolver:DE,persistence:[IE,vE,Pm]}),r=Np("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=zL(o.toString());_E(n,s,()=>s(n.currentUser)),gE(n,a=>s(a))}}let i=Mp("auth");return i&&uE(n,`http://${i}`),n}function GL(){return document.getElementsByTagName("head")?.[0]??document}DF({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=Br("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",GL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$L("Browser");var TE="@firebase/database",SE="1.1.0";var Lg="";function qL(e){Lg=e}var $m=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),be(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Qi(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Hm=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ft(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var oD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $m(t)}}catch{}return new Hm},Gr=oD("localStorage"),Wm=oD("sessionStorage");var no=new Xt("@firebase/database"),YL=function(){let e=1;return function(){return e++}}(),sD=function(e){let t=kC(e),n=new Cl;n.update(t);let r=n.digest();return Il.encodeByteArray(r)},sa=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=sa.apply(null,r):typeof r=="object"?t+=be(r):t+=r,t+=" "}return t},qr=null,ME=!0,KL=function(e,t){v(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(no.logLevel=ee.VERBOSE,qr=no.log.bind(no),t&&Wm.set("logging_enabled",!0)):typeof e=="function"?qr=e:(qr=null,Wm.remove("logging_enabled"))},Fe=function(...e){if(ME===!0&&(ME=!1,qr===null&&Wm.get("logging_enabled")===!0&&KL(!0)),qr){let t=sa.apply(null,e);qr(t)}},aa=function(e){return function(...t){Fe(e,...t)}},zm=function(...e){let t="FIREBASE INTERNAL ERROR: "+sa(...e);no.error(t)},wn=function(...e){let t=`FIREBASE FATAL ERROR: ${sa(...e)}`;throw no.error(t),new Error(t)},Ye=function(...e){let t="FIREBASE WARNING: "+sa(...e);no.warn(t)},QL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ye("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vg=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ZL=function(e){if(Jt()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},io="[MIN_NAME]",Yr="[MAX_NAME]",Qr=function(e,t){if(e===t)return 0;if(e===io||t===Yr)return-1;if(t===io||e===Yr)return 1;{let n=AE(e),r=AE(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},JL=function(e,t){return e===t?0:e<t?-1:1},Bs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},jg=function(e){if(typeof e!="object"||e===null)return be(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=be(t[r]),n+=":",n+=jg(e[t[r]]);return n+="}",n},aD=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Le(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var cD=function(e){v(!Vg(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},XL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},eV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function tV(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var nV=new RegExp("^-?(0*)\\d{1,10}$"),rV=-2147483648,iV=2147483647,AE=function(e){if(nV.test(e)){let t=Number(e);if(t>=rV&&t<=iV)return t}return null},po=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Ye("Exception was thrown by user callback.",n),t},Math.floor(0))}},oV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gs=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Gm=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,pt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Ye(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var qm=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Fe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ye(t)}},qs=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),ou="5",lD="v",uD="s",dD="r",hD="f",fD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pD="ls",mD="p",Ym="ac",gD="websocket",_D="long_polling";var su=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Gr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function sV(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function vD(e,t,n){v(typeof t=="string","typeof type must == string"),v(typeof n=="object","typeof params must == object");let r;if(t===gD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===_D)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);sV(e)&&(n.ns=e.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Km=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Ft(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return EC(this.counters_)}};var km={},Fm={};function Ug(e){let t=e.toString();return km[t]||(km[t]=new Km),km[t]}function aV(e,t){let n=e.toString();return Fm[n]||(Fm[n]=t()),Fm[n]}var Qm=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&po(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var NE="start",cV="close",lV="pLPCommand",uV="pRTLPCB",yD="id",wD="pw",bD="ser",dV="cb",hV="seg",fV="ts",pV="d",mV="dframe",CD=1870,ID=30,gV=CD-ID,_V=25e3,vV=3e4,Zm=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=aa(t),this.stats_=Ug(n),this.urlFn=c=>(this.appCheckToken&&(c[Ym]=this.appCheckToken),vD(n,_D,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Qm(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(vV)),ZL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jm((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===NE)this.id=a,this.password=c;else if(s===cV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[NE]="t",r[bD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[lD]=ou,this.transportSessionId&&(r[uD]=this.transportSessionId),this.lastSessionId&&(r[pD]=this.lastSessionId),this.applicationId&&(r[mD]=this.applicationId),this.appCheckToken&&(r[Ym]=this.appCheckToken),typeof location<"u"&&location.hostname&&fD.test(location.hostname)&&(r[dD]=hD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Jt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XL()&&!eV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=be(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Tp(n),i=aD(r,gV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Jt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[mV]="t",r[yD]=t,r[wD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=be(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Jm=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Jt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=YL(),window[lV+this.uniqueCallbackIdentifier]=t,window[uV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Fe("frame writing exception"),a.stack&&Fe(a.stack),Fe(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Fe("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[yD]=this.myID,t[wD]=this.myPW,t[bD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ID+r.length<=CD;){let s=this.pendingSegs.shift();r=r+"&"+hV+i+"="+s.seg+"&"+fV+i+"="+s.ts+"&"+pV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(_V)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Jt()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Fe("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var yV=16384,wV=45e3,au=null;typeof MozWebSocket<"u"?au=MozWebSocket:typeof WebSocket<"u"&&(au=WebSocket);var $s=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=aa(this.connId),this.stats_=Ug(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[lD]=ou,!Jt()&&typeof location<"u"&&location.hostname&&fD.test(location.hostname)&&(a[dD]=hD),r&&(a[uD]=r),i&&(a[pD]=i),o&&(a[Ym]=o),s&&(a[mD]=s),vD(n,gD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gr.set("previous_websocket_failure",!0);try{let i;if(Jt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ou}/${Lg}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new au(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&au!==null&&!e.forceDisallow_}static previouslyFailed(){return Gr.isInMemoryStorage||Gr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Gr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Qi(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(v(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=be(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=aD(r,yV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(wV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),bV=(()=>{class e{static get ALL_TRANSPORTS(){return[Zm,$s]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=$s&&$s.isAvailable(),i=r&&!$s.previouslyFailed();if(n.webSocketOnly&&(r||Ye("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$s];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),CV=6e4,IV=5e3,EV=10*1024,DV=100*1024,Lm="t",xE="d",TV="s",RE="r",SV="e",PE="o",OE="a",kE="n",FE="p",MV="h",Xm=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=aa("c:"+this.id+":"),this.transportManager_=new bV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Lm in t){let n=t[Lm];n===OE?this.upgradeIfSecondaryHealthy_():n===RE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===PE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Bs("t",t),r=Bs("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:FE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:OE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Bs("t",t),r=Bs("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Bs(Lm,t);if(xE in t){let r=t[xE];if(n===MV){let i=_({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===kE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===TV?this.onConnectionShutdown_(r):n===RE?this.onReset_(r):n===SV?zm("Server Error: "+r):n===PE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zm("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ou!==r&&Ye("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(CV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(IV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:FE,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var cu=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var lu=class{constructor(t){this.allowedEvents_=t,this.listeners_={},v(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){v(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var uu=class e extends lu{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Is()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return v(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var LE=32,VE=768,J=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function K(){return new J("")}function B(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Jn(e){return e.pieces_.length-e.pieceNum_}function ie(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new J(e.pieces_,t)}function Bg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function AV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Zs(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ED(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new J(t,0)}function ue(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof J)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function qe(e,t){let n=B(e),r=B(t);if(n===null)return t;if(n===r)return qe(ie(e),ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function NV(e,t){let n=Zs(e,0),r=Zs(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Qr(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function $g(e,t){if(Jn(e)!==Jn(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Dt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Jn(e)>Jn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var eg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Zs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ss(this.parts_[r]);DD(this)}};function xV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ss(t),DD(e)}function RV(e){let t=e.parts_.pop();e.byteLength_-=Ss(t),e.parts_.length>0&&(e.byteLength_-=1)}function DD(e){if(e.byteLength_>VE)throw new Error(e.errorPrefix_+"has a key path longer than "+VE+" bytes ("+e.byteLength_+").");if(e.parts_.length>LE)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+LE+") or object contains a cycle "+zr(e))}function zr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var tg=class e extends lu{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return v(t==="visible","Unknown event type: "+t),[this.visible_]}};var Hs=1e3,PV=60*5*1e3,jE=30*1e3,OV=1.3,kV=3e4,FV="server_kill",UE=3,Hg=(()=>{class e extends cu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=aa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hs,this.maxReconnectDelay_=PV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Jt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&uu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(be(s)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new gn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ft(n,"w")){let i=Or(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ye(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||PC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jE)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=RC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),v(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+be(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):zm("Unrecognized action received from server: "+be(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>kV&&(this.reconnectDelay_=Hs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OV)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){v(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Fe("getToken() completed but was canceled"):(Fe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,c=new Xm(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{Ye(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(FV)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ye(h),l())}}})}interrupt(n){Fe("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Fe("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Es(this.interruptReasons_)&&(this.reconnectDelay_=Hs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>jg(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Fe("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=UE&&(this.reconnectDelay_=jE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Fe("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=UE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Jt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Lg.replace(/\./g,"-")]=1,Is()?n["framework.cordova"]=1:Sl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=uu.getInstance().currentlyOnline();return Es(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),$=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var oo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new $(io,t),i=new $(io,n);return this.compare(r,i)!==0}minPost(){return $.MIN}};var iu,du=class extends oo{static get __EMPTY_NODE(){return iu}static set __EMPTY_NODE(t){iu=t}compare(t,n){return Qr(t.name,n.name)}isDefinedOn(t){throw Pr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return $.MIN}maxPost(){return new $(Yr,iu)}makePost(t,n){return v(typeof t=="string","KeyIndex indexValue must always be a string."),new $(t,iu)}toString(){return".key"}},ro=new du;var to=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Vt=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Tt.EMPTY_NODE,this.right=s??Tt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),ng=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Vt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Tt=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Vt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Vt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new to(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new to(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new to(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new to(this.root_,null,this.comparator_,!0,t)}};Tt.EMPTY_NODE=new ng;function LV(e,t){return Qr(e.name,t.name)}function Wg(e,t){return Qr(e,t)}var rg;function VV(e){rg=e}var TD=function(e){return typeof e=="number"?"number:"+cD(e):"string:"+e},SD=function(e){if(e.isLeafNode()){let t=e.val();v(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ft(t,".sv"),"Priority must be a string or number.")}else v(e===rg||e.isEmpty(),"priority of unexpected type.");v(e===rg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var BE,so=(()=>{class e{static set __childrenNodeConstructor(n){BE=n}static get __childrenNodeConstructor(){return BE}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),SD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:B(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=B(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(v(i!==".priority"||Jn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+TD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=cD(this.value_):n+=this.value_,this.lazyHash_=sD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(v(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return v(o>=0,"Unknown leaf type: "+r),v(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),MD,AD;function jV(e){MD=e}function UV(e){AD=e}var ig=class extends oo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Qr(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return $.MIN}maxPost(){return new $(Yr,new so("[PRIORITY-POST]",AD))}makePost(t,n){let r=MD(t);return new $(n,new so("[PRIORITY-POST]",r))}toString(){return".priority"}},de=new ig;var BV=Math.log(2),og=class{constructor(t){let n=o=>parseInt(Math.log(o)/BV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},hu=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=e[c],h=n?n(d):d,new Vt(h,d.node,Vt.BLACK,null,null);{let p=parseInt(u/2,10)+c,m=i(c,p),g=i(p+1,l);return d=e[p],h=n?n(d):d,new Vt(h,d.node,Vt.BLACK,m,g)}},o=function(c){let l=null,u=null,d=e.length,h=function(m,g){let I=d-m,D=d;d-=m;let oe=i(I+1,D),H=e[I],Ae=n?n(H):H;p(new Vt(Ae,H.node,g,null,oe))},p=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let g=c.nextBitIsOne(),I=Math.pow(2,c.count-(m+1));g?h(I,Vt.BLACK):(h(I,Vt.BLACK),h(I,Vt.RED))}return u},s=new og(e.length),a=o(s);return new Tt(r||t,a)};var Vm,eo={},ao=class e{static get Default(){return v(eo&&de,"ChildrenNode.ts has not been loaded"),Vm=Vm||new e({".priority":eo},{".priority":de}),Vm}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Or(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Tt?n:null}hasIndex(t){return Ft(this.indexSet_,t.toString())}addIndex(t,n){v(t!==ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator($.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=hu(r,t.getCompare()):a=eo;let c=t.toString(),l=_({},this.indexSet_);l[c]=t;let u=_({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Ds(this.indexes_,(i,o)=>{let s=Or(this.indexSet_,o);if(v(s,"Missing index implementation for "+o),i===eo)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator($.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),hu(a,s.getCompare())}else return eo;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new $(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Ds(this.indexes_,i=>{if(i===eo)return i;{let o=n.get(t.name);return o?i.remove(new $(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ws,F=(()=>{class e{static get EMPTY_NODE(){return Ws||(Ws=new e(new Tt(Wg),null,ao.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SD(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ws}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ws:r}}getChild(n){let r=B(n);return r===null?this:this.getImmediateChild(r).getChild(ie(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(v(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new $(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ws:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=B(n);if(i===null)return r;{v(B(n)!==".priority"||Jn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ie(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(de,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+TD(this.getPriority().val())+":"),this.forEachChild(de,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":sD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new $(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new $(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new $(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ca?-1:0}withIndex(n){if(n===ro||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ro||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(de),o=r.getIterator(de),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ro?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),sg=class extends F{constructor(){super(new Tt(Wg),F.EMPTY_NODE,ao.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return F.EMPTY_NODE}isEmpty(){return!1}},ca=new sg;Object.defineProperties($,{MIN:{value:new $(io,F.EMPTY_NODE)},MAX:{value:new $(Yr,ca)}});du.__EMPTY_NODE=F.EMPTY_NODE;so.__childrenNodeConstructor=F;VV(ca);UV(ca);var $V=!0;function Ee(e,t=null){if(e===null)return F.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),v(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new so(n,Ee(t))}if(!(e instanceof Array)&&$V){let n=[],r=!1;if(Le(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ee(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new $(s,c)))}}),n.length===0)return F.EMPTY_NODE;let o=hu(n,LV,s=>s.name,Wg);if(r){let s=hu(n,de.getCompare());return new F(o,Ee(t),new ao({".priority":s},{".priority":de}))}else return new F(o,Ee(t),ao.Default)}else{let n=F.EMPTY_NODE;return Le(e,(r,i)=>{if(Ft(e,r)&&r.substring(0,1)!=="."){let o=Ee(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ee(t))}}jV(Ee);var ag=class extends oo{constructor(t){super(),this.indexPath_=t,v(!W(t)&&B(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Qr(t.name,n.name):o}makePost(t,n){let r=Ee(t),i=F.EMPTY_NODE.updateChild(this.indexPath_,r);return new $(n,i)}maxPost(){let t=F.EMPTY_NODE.updateChild(this.indexPath_,ca);return new $(Yr,t)}toString(){return Zs(this.indexPath_,0).join("/")}};var cg=class extends oo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Qr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return $.MIN}maxPost(){return $.MAX}makePost(t,n){let r=Ee(t);return new $(n,r)}toString(){return".value"}},HV=new cg;function ND(e){return{type:"value",snapshotNode:e}}function co(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Js(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Xs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function WV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var ea=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){v(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Js(n,a)):v(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(co(n,r)):s.trackChildChange(Xs(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(de,(i,o)=>{n.hasChild(i)||r.trackChildChange(Js(i,o))}),n.isLeafNode()||n.forEachChild(de,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Xs(i,o,s))}else r.trackChildChange(co(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?F.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var fu=class e{constructor(t){this.indexedFilter_=new ea(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new $(n,r))||(r=F.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=F.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(F.EMPTY_NODE);let o=this;return n.forEachChild(de,(s,a)=>{o.matches(new $(s,a))||(i=i.updateImmediateChild(s,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var lg=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new fu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new $(n,r))||(r=F.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=F.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(F.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();let a=t;v(a.numChildren()===this.limit_,"");let c=new $(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let p=h==null?1:s(h,c);if(u&&!r.isEmpty()&&p>=0)return o?.trackChildChange(Xs(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Js(n,d));let g=a.updateImmediateChild(n,F.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(co(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Js(l.name,l.node)),o.trackChildChange(co(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,F.EMPTY_NODE)):t}};var ug=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=de}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:io}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===de}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function zV(e){return e.loadsAllData()?new ea(e.getIndex()):e.hasLimit()?new lg(e):new fu(e)}function $E(e){let t={};if(e.isDefault())return t;let n;if(e.index_===de?n="$priority":e.index_===HV?n="$value":e.index_===ro?n="$key":(v(e.index_ instanceof ag,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=be(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=be(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+be(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=be(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+be(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function HE(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==de&&(t.i=e.index_.toString()),t}var dg=class e extends cu{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(v(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=aa("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=$E(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Or(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=$E(t._queryParams),r=t._path.toString(),i=new gn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+kr(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Qi(a.responseText)}catch{Ye("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ye("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var hg=class{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function pu(){return{value:null,children:new Map}}function xD(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=B(t);e.children.has(r)||e.children.set(r,pu());let i=e.children.get(r);t=ie(t),xD(i,t,n)}}function fg(e,t,n){e.value!==null?n(t,e.value):GV(e,(r,i)=>{let o=new J(t.toString()+"/"+r);fg(i,o,n)})}function GV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var pg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=_({},t);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var WE=10*1e3,qV=30*1e3,YV=5*60*1e3,mg=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new pg(t);let r=WE+(qV-WE)*Math.random();Gs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;Le(t,(i,o)=>{o>0&&Ft(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Gs(this.reportStats_.bind(this),Math.floor(Math.random()*2*YV))}};var rn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(rn||{});function zg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qg(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var gg=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=rn.ACK_USER_WRITE,this.source=zg()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(t));return new e(K(),n,this.revert)}}else return v(B(this.path)===t,"operationForChild called for unrelated child."),new e(ie(this.path),this.affectedTree,this.revert)}};var mu=class e{constructor(t,n){this.source=t,this.path=n,this.type=rn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,K()):new e(this.source,ie(this.path))}};var lo=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=rn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,K(),this.snap.getImmediateChild(t)):new e(this.source,ie(this.path),this.snap)}};var ta=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=rn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new J(t));return n.isEmpty()?null:n.value?new lo(this.source,K(),n.value):new e(this.source,K(),n)}else return v(B(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var on=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=B(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var _g=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function KV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(WV(s.childName,s.snapshotNode))}),zs(e,i,"child_removed",t,r,n),zs(e,i,"child_added",t,r,n),zs(e,i,"child_moved",o,r,n),zs(e,i,"child_changed",t,r,n),zs(e,i,"value",t,r,n),i}function zs(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>ZV(e,a,c)),s.forEach(a=>{let c=QV(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function QV(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function ZV(e,t,n){if(t.childName==null||n.childName==null)throw Pr("Should only compare child_ events.");let r=new $(t.childName,t.snapshotNode),i=new $(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Au(e,t){return{eventCache:e,serverCache:t}}function Ys(e,t,n,r){return Au(new on(t,n,r),e.serverCache)}function RD(e,t,n,r){return Au(e.eventCache,new on(t,n,r))}function gu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Kr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var jm,JV=()=>(jm||(jm=new Tt(JL)),jm),Ke=class e{static fromObject(t){let n=new e(null);return Le(t,(r,i)=>{n=n.set(new J(r),i)}),n}constructor(t,n=JV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(W(t))return null;{let r=B(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ie(t),n);return o!=null?{path:ue(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=B(t),r=this.children.get(n);return r!==null?r.subtree(ie(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=B(t),o=(this.children.get(r)||new e(null)).set(ie(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=B(t),r=this.children.get(n);if(r){let i=r.remove(ie(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=B(t),r=this.children.get(n);return r?r.get(ie(t)):null}}setTree(t,n){if(W(t))return n;{let r=B(t),o=(this.children.get(r)||new e(null)).setTree(ie(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(K(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ue(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,K(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=B(t),s=this.children.get(o);return s?s.findOnPath_(ie(t),ue(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,K(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=B(t),o=this.children.get(i);return o?o.foreachOnPath_(ie(t),ue(n,i),r):new e(null)}}foreach(t){this.foreach_(K(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ue(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var jt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Ke(null))}};function Ks(e,t,n){if(W(t))return new jt(new Ke(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=qe(i,t);return o=o.updateChild(s,n),new jt(e.writeTree_.set(i,o))}else{let i=new Ke(n),o=e.writeTree_.setTree(t,i);return new jt(o)}}}function vg(e,t,n){let r=e;return Le(n,(i,o)=>{r=Ks(r,ue(t,i),o)}),r}function zE(e,t){if(W(t))return jt.empty();{let n=e.writeTree_.setTree(t,new Ke(null));return new jt(n)}}function yg(e,t){return Zr(e,t)!=null}function Zr(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(qe(n.path,t)):null}function GE(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(de,(r,i)=>{t.push(new $(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new $(r,i.value))}),t}function Qn(e,t){if(W(t))return e;{let n=Zr(e,t);return n!=null?new jt(new Ke(n)):new jt(e.writeTree_.subtree(t))}}function wg(e){return e.writeTree_.isEmpty()}function uo(e,t){return PD(K(),e.writeTree_,t)}function PD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=PD(ue(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(ue(e,".priority"),r)),n}}function Nu(e,t){return LD(t,e)}function XV(e,t,n,r,i){v(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ks(e.visibleWrites,t,n)),e.lastWriteId=r}function ej(e,t,n,r){v(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=vg(e.visibleWrites,t,n),e.lastWriteId=r}function tj(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function nj(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);v(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&rj(a,r.path)?i=!1:Dt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return ij(e),!0;if(r.snap)e.visibleWrites=zE(e.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{e.visibleWrites=zE(e.visibleWrites,ue(r.path,c))})}return!0}else return!1}function rj(e,t){if(e.snap)return Dt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Dt(ue(e.path,n),t))return!0;return!1}function ij(e){e.visibleWrites=OD(e.allWrites,oj,K()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function oj(e){return e.visible}function OD(e,t,n){let r=jt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Dt(n,s)?(a=qe(n,s),r=Ks(r,a,o.snap)):Dt(s,n)&&(a=qe(s,n),r=Ks(r,K(),o.snap.getChild(a)));else if(o.children){if(Dt(n,s))a=qe(n,s),r=vg(r,a,o.children);else if(Dt(s,n))if(a=qe(s,n),W(a))r=vg(r,K(),o.children);else{let c=Or(o.children,B(a));if(c){let l=c.getChild(ie(a));r=Ks(r,K(),l)}}}else throw Pr("WriteRecord should have .snap or .children")}}return r}function kD(e,t,n,r,i){if(!r&&!i){let o=Zr(e.visibleWrites,t);if(o!=null)return o;{let s=Qn(e.visibleWrites,t);if(wg(s))return n;if(n==null&&!yg(s,K()))return null;{let a=n||F.EMPTY_NODE;return uo(s,a)}}}else{let o=Qn(e.visibleWrites,t);if(!i&&wg(o))return n;if(!i&&n==null&&!yg(o,K()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Dt(l.path,t)||Dt(t,l.path))},a=OD(e.allWrites,s,t),c=n||F.EMPTY_NODE;return uo(a,c)}}}function sj(e,t,n){let r=F.EMPTY_NODE,i=Zr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(de,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Qn(e.visibleWrites,t);return n.forEachChild(de,(s,a)=>{let c=uo(Qn(o,new J(s)),a);r=r.updateImmediateChild(s,c)}),GE(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Qn(e.visibleWrites,t);return GE(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function aj(e,t,n,r,i){v(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ue(t,n);if(yg(e.visibleWrites,o))return null;{let s=Qn(e.visibleWrites,o);return wg(s)?i.getChild(n):uo(s,i.getChild(n))}}function cj(e,t,n,r){let i=ue(t,n),o=Zr(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Qn(e.visibleWrites,i);return uo(s,r.getNode().getImmediateChild(n))}else return null}function lj(e,t){return Zr(e.visibleWrites,t)}function uj(e,t,n,r,i,o,s){let a,c=Qn(e.visibleWrites,t),l=Zr(c,K());if(l!=null)a=l;else if(n!=null)a=uo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=h.getNext();for(;p&&u.length<i;)d(p,r)!==0&&u.push(p),p=h.getNext();return u}else return[]}function dj(){return{visibleWrites:jt.empty(),allWrites:[],lastWriteId:-1}}function _u(e,t,n,r){return kD(e.writeTree,e.treePath,t,n,r)}function Yg(e,t){return sj(e.writeTree,e.treePath,t)}function qE(e,t,n,r){return aj(e.writeTree,e.treePath,t,n,r)}function vu(e,t){return lj(e.writeTree,ue(e.treePath,t))}function hj(e,t,n,r,i,o){return uj(e.writeTree,e.treePath,t,n,r,i,o)}function Kg(e,t,n){return cj(e.writeTree,e.treePath,t,n)}function FD(e,t){return LD(ue(e.treePath,t),e.writeTree)}function LD(e,t){return{treePath:e,writeTree:t}}var bg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;v(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),v(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Xs(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Js(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,co(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Xs(r,t.snapshotNode,i.oldSnap));else throw Pr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Cg=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},VD=new Cg,na=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new on(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kg(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kr(this.viewCache_),o=hj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function fj(e){return{filter:e}}function pj(e,t){v(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),v(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function mj(e,t,n,r,i){let o=new bg,s,a;if(n.type===rn.OVERWRITE){let l=n;l.source.fromUser?s=Ig(e,t,l.path,l.snap,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=yu(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===rn.MERGE){let l=n;l.source.fromUser?s=_j(e,t,l.path,l.children,r,i,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Eg(e,t,l.path,l.children,r,i,a,o))}else if(n.type===rn.ACK_USER_WRITE){let l=n;l.revert?s=wj(e,t,l.path,r,i,o):s=vj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===rn.LISTEN_COMPLETE)s=yj(e,t,n.path,r,o);else throw Pr("Unknown operation type: "+n.type);let c=o.getChanges();return gj(t,s,c),{viewCache:s,changes:c}}function gj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=gu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ND(gu(t)))}}function jD(e,t,n,r,i,o){let s=t.eventCache;if(vu(r,n)!=null)return t;{let a,c;if(W(n))if(v(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Kr(t),u=l instanceof F?l:F.EMPTY_NODE,d=Yg(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=_u(r,Kr(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=B(n);if(l===".priority"){v(Jn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=qE(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ie(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let h=qE(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=Kg(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Ys(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function yu(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=B(n);if(!c.isCompleteForPath(n)&&Jn(n)>1)return t;let m=ie(n),I=c.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),p,I,m,VD,null)}let d=RD(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),h=new na(i,d,o);return jD(e,d,n,i,h,a)}function Ig(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new na(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Ys(t,l,!0,e.filter.filtersNodes());else{let d=B(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Ys(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=ie(n),p=a.getNode().getImmediateChild(d),m;if(W(h))m=r;else{let g=u.getCompleteChild(d);g!=null?Bg(h)===".priority"&&g.getChild(ED(h)).isEmpty()?m=g:m=g.updateChild(h,r):m=F.EMPTY_NODE}if(p.equals(m))c=t;else{let g=e.filter.updateChild(a.getNode(),d,m,h,u,s);c=Ys(t,g,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function YE(e,t){return e.eventCache.isCompleteForChild(t)}function _j(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=ue(n,c);YE(t,B(u))&&(a=Ig(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ue(n,c);YE(t,B(u))||(a=Ig(e,a,u,l,i,o,s))}),a}function KE(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Eg(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new Ke(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=t.serverCache.getNode().getImmediateChild(d),m=KE(e,p,h);c=yu(e,c,new J(d),m,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let m=t.serverCache.getNode().getImmediateChild(d),g=KE(e,m,h);c=yu(e,c,new J(d),g,i,o,s,a)}}),c}function vj(e,t,n,r,i,o,s){if(vu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return yu(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new Ke(null);return c.getNode().forEachChild(ro,(u,d)=>{l=l.set(new J(u),d)}),Eg(e,t,n,l,i,o,a,s)}else return t}else{let l=new Ke(null);return r.foreach((u,d)=>{let h=ue(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Eg(e,t,n,l,i,o,a,s)}}function yj(e,t,n,r,i){let o=t.serverCache,s=RD(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return jD(e,s,n,r,VD,i)}function wj(e,t,n,r,i,o){let s;if(vu(r,n)!=null)return t;{let a=new na(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||B(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=_u(r,Kr(t));else{let d=t.serverCache.getNode();v(d instanceof F,"serverChildren would be complete if leaf node"),u=Yg(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=B(n),d=Kg(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ie(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,F.EMPTY_NODE,ie(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=_u(r,Kr(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||vu(r,K())!=null,Ys(t,l,s,e.filter.filtersNodes())}}var Dg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ea(r.getIndex()),o=zV(r);this.processor_=fj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(F.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(F.EMPTY_NODE,a.getNode(),null),u=new on(c,s.isFullyInitialized(),i.filtersNodes()),d=new on(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Au(d,u),this.eventGenerator_=new _g(this.query_)}get query(){return this.query_}};function bj(e){return e.viewCache_.serverCache.getNode()}function Cj(e){return gu(e.viewCache_)}function Ij(e,t){let n=Kr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild(B(t)).isEmpty())?n.getChild(t):null}function QE(e){return e.eventRegistrations_.length===0}function Ej(e,t){e.eventRegistrations_.push(t)}function ZE(e,t,n){let r=[];if(n){v(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function JE(e,t,n,r){t.type===rn.MERGE&&t.source.queryId!==null&&(v(Kr(e.viewCache_),"We should always have a full cache before handling merges"),v(gu(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=mj(e.processor_,i,t,n,r);return pj(e.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,UD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Dj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(de,(o,s)=>{r.push(co(o,s))}),n.isFullyInitialized()&&r.push(ND(n.getNode())),UD(e,r,n.getNode(),t)}function UD(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return KV(e.eventGenerator_,t,n,i)}var wu,bu=class{constructor(){this.views=new Map}};function Tj(e){v(!wu,"__referenceConstructor has already been defined"),wu=e}function Sj(){return v(wu,"Reference.ts has not been loaded"),wu}function Mj(e){return e.views.size===0}function Qg(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return v(o!=null,"SyncTree gave us an op for an invalid query."),JE(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(JE(s,t,n,r));return o}}function BD(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=_u(n,i?r:null),c=!1;a?c=!0:r instanceof F?(a=Yg(n,r),c=!1):(a=F.EMPTY_NODE,c=!1);let l=Au(new on(a,c,!1),new on(r,i,!1));return new Dg(t,l)}return s}function Aj(e,t,n,r,i,o){let s=BD(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),Ej(s,n),Dj(s,n)}function Nj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Xn(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(ZE(l,n,r)),QE(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(ZE(c,n,r)),QE(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Xn(e)&&o.push(new(Sj())(t._repo,t._path)),{removed:o,events:s}}function $D(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Zn(e,t){let n=null;for(let r of e.views.values())n=n||Ij(r,t);return n}function HD(e,t){if(t._queryParams.loadsAllData())return xu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function WD(e,t){return HD(e,t)!=null}function Xn(e){return xu(e)!=null}function xu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Cu;function xj(e){v(!Cu,"__referenceConstructor has already been defined"),Cu=e}function Rj(){return v(Cu,"Reference.ts has not been loaded"),Cu}var Pj=1,Iu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=dj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zD(e,t,n,r,i){return XV(e.pendingWriteTree_,t,n,r,i),i?mo(e,new lo(zg(),t,n)):[]}function Oj(e,t,n,r){ej(e.pendingWriteTree_,t,n,r);let i=Ke.fromObject(n);return mo(e,new ta(zg(),t,i))}function Kn(e,t,n=!1){let r=tj(e.pendingWriteTree_,t);if(nj(e.pendingWriteTree_,t)){let o=new Ke(null);return r.snap!=null?o=o.set(K(),!0):Le(r.children,s=>{o=o.set(new J(s),!0)}),mo(e,new gg(r.path,o,n))}else return[]}function la(e,t,n){return mo(e,new lo(Gg(),t,n))}function kj(e,t,n){let r=Ke.fromObject(n);return mo(e,new ta(Gg(),t,r))}function Fj(e,t){return mo(e,new mu(Gg(),t))}function Lj(e,t,n){let r=Jg(e,n);if(r){let i=Xg(r),o=i.path,s=i.queryId,a=qe(o,t),c=new mu(qg(s),a);return e_(e,o,c)}else return[]}function Eu(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||WD(s,t))){let c=Nj(s,t,n,r);Mj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(h,p)=>Xn(p));if(u&&!d){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let p=Uj(h);for(let m=0;m<p.length;++m){let g=p[m],I=g.query,D=KD(e,g);e.listenProvider_.startListening(Qs(I),ra(e,I),D.hashFn,D.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(Qs(t),null):l.forEach(h=>{let p=e.queryToTagMap.get(Ru(h));e.listenProvider_.stopListening(Qs(h),p)}))}Bj(e,l)}return a}function GD(e,t,n,r){let i=Jg(e,r);if(i!=null){let o=Xg(i),s=o.path,a=o.queryId,c=qe(s,t),l=new lo(qg(a),c,n);return e_(e,s,l)}else return[]}function Vj(e,t,n,r){let i=Jg(e,r);if(i){let o=Xg(i),s=o.path,a=o.queryId,c=qe(s,t),l=Ke.fromObject(n),u=new ta(qg(a),c,l);return e_(e,s,u)}else return[]}function Tg(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(h,p)=>{let m=qe(h,i);o=o||Zn(p,m),s=s||Xn(p)});let a=e.syncPointTree_.get(i);a?(s=s||Xn(a),o=o||Zn(a,K())):(a=new bu,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=F.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((p,m)=>{let g=Zn(m,K());g&&(o=o.updateImmediateChild(p,g))}));let l=WD(a,t);if(!l&&!t._queryParams.loadsAllData()){let h=Ru(t);v(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let p=$j();e.queryToTagMap.set(h,p),e.tagToQueryMap.set(p,h)}let u=Nu(e.pendingWriteTree_,i),d=Aj(a,t,n,u,o,c);if(!l&&!s&&!r){let h=HD(a,t);d=d.concat(Hj(e,t,h))}return d}function Zg(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=qe(s,t),l=Zn(a,c);if(l)return l});return kD(i,t,o,n,!0)}function jj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=qe(l,n);r=r||Zn(u,d)});let i=e.syncPointTree_.get(n);i?r=r||Zn(i,K()):(i=new bu,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new on(r,!0,!1):null,a=Nu(e.pendingWriteTree_,t._path),c=BD(i,t,a,o?s.getNode():F.EMPTY_NODE,o);return Cj(c)}function mo(e,t){return qD(t,e.syncPointTree_,null,Nu(e.pendingWriteTree_,K()))}function qD(e,t,n,r){if(W(e.path))return YD(e,t,n,r);{let i=t.get(K());n==null&&i!=null&&(n=Zn(i,K()));let o=[],s=B(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=FD(r,s);o=o.concat(qD(a,c,l,u))}return i&&(o=o.concat(Qg(i,e,r,n))),o}}function YD(e,t,n,r){let i=t.get(K());n==null&&i!=null&&(n=Zn(i,K()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=FD(r,s),u=e.operationForChild(s);u&&(o=o.concat(YD(u,a,c,l)))}),i&&(o=o.concat(Qg(i,e,r,n))),o}function KD(e,t){let n=t.query,r=ra(e,n);return{hashFn:()=>(bj(t)||F.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Lj(e,n._path,r):Fj(e,n._path);{let o=tV(i,n);return Eu(e,n,null,o)}}}}function ra(e,t){let n=Ru(t);return e.queryToTagMap.get(n)}function Ru(e){return e._path.toString()+"$"+e._queryIdentifier}function Jg(e,t){return e.tagToQueryMap.get(t)}function Xg(e){let t=e.indexOf("$");return v(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new J(e.substr(0,t))}}function e_(e,t,n){let r=e.syncPointTree_.get(t);v(r,"Missing sync point for query tag that we're tracking");let i=Nu(e.pendingWriteTree_,t);return Qg(r,n,i,null)}function Uj(e){return e.fold((t,n,r)=>{if(n&&Xn(n))return[xu(n)];{let i=[];return n&&(i=$D(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function Qs(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Rj())(e._repo,e._path):e}function Bj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Ru(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function $j(){return Pj++}function Hj(e,t,n){let r=t._path,i=ra(e,t),o=KD(e,n),s=e.listenProvider_.startListening(Qs(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)v(!Xn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Xn(u))return[xu(u).query];{let h=[];return u&&(h=h.concat($D(u).map(p=>p.query))),Le(d,(p,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(Qs(u),ra(e,u))}}return s}var Sg=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Mg=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=ue(this.path_,t);return new e(this.syncTree_,n)}node(){return Zg(this.syncTree_,this.path_)}},Wj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},XE=function(e,t,n){if(!e||typeof e!="object")return e;if(v(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return zj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Gj(e[".sv"],t);v(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},zj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:v(!1,"Unexpected server value: "+e)}},Gj=function(e,t,n){e.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&v(!1,"Unexpected increment value: "+r);let i=t.node();if(v(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},QD=function(e,t,n,r){return t_(t,new Mg(n,e),r)},ZD=function(e,t,n){return t_(e,new Sg(t),n)};function t_(e,t,n){let r=e.getPriority().val(),i=XE(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=XE(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new so(a,Ee(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new so(i))),s.forEachChild(de,(a,c)=>{let l=t_(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var ia=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function n_(e,t){let n=t instanceof J?t:new J(t),r=e,i=B(n);for(;i!==null;){let o=Or(r.node.children,i)||{children:{},childCount:0};r=new ia(i,r,o),n=ie(n),i=B(n)}return r}function go(e){return e.node.value}function JD(e,t){e.node.value=t,Ag(e)}function XD(e){return e.node.childCount>0}function qj(e){return go(e)===void 0&&!XD(e)}function Pu(e,t){Le(e.node.children,(n,r)=>{t(new ia(n,e,r))})}function e0(e,t,n,r){n&&!r&&t(e),Pu(e,i=>{e0(i,t,!0,r)}),n&&r&&t(e)}function Yj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ua(e){return new J(e.parent===null?e.name:ua(e.parent)+"/"+e.name)}function Ag(e){e.parent!==null&&Kj(e.parent,e.name,e)}function Kj(e,t,n){let r=qj(n),i=Ft(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ag(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Ag(e))}var Qj=/[\[\].#$\/\u0000-\u001F\u007F]/,Zj=/[\[\].#$\u0000-\u001F\u007F]/,Um=10*1024*1024,r_=function(e){return typeof e=="string"&&e.length!==0&&!Qj.test(e)},t0=function(e){return typeof e=="string"&&e.length!==0&&!Zj.test(e)},Jj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),t0(e)},Xj=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Vg(e)||e&&typeof e=="object"&&Ft(e,".sv")},n0=function(e,t,n,r){r&&t===void 0||Ou(Ts(e,"value"),t,n)},Ou=function(e,t,n){let r=n instanceof J?new eg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+zr(r));if(typeof t=="function")throw new Error(e+"contains a function "+zr(r)+" with contents = "+t.toString());if(Vg(t))throw new Error(e+"contains "+t.toString()+" "+zr(r));if(typeof t=="string"&&t.length>Um/3&&Ss(t)>Um)throw new Error(e+"contains a string greater than "+Um+" utf8 bytes "+zr(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Le(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!r_(s)))throw new Error(e+" contains an invalid key ("+s+") "+zr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);xV(r,s),Ou(e,a,r),RV(r)}),i&&o)throw new Error(e+' contains ".value" child '+zr(r)+" in addition to actual children.")}},eU=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=Zs(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!r_(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(NV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Dt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},tU=function(e,t,n,r){if(r&&t===void 0)return;let i=Ts(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Le(t,(s,a)=>{let c=new J(s);if(Ou(i,a,ue(n,c)),Bg(c)===".priority"&&!Xj(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),eU(i,o)};var r0=function(e,t,n,r){if(!(r&&n===void 0)&&!t0(n))throw new Error(Ts(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nU=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),r0(e,t,n,r)},i0=function(e,t){if(B(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},rU=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!r_(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Jj(n))throw new Error(Ts(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ng=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ku(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!$g(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function o0(e,t,n){ku(e,n),s0(e,r=>$g(r,t))}function St(e,t,n){ku(e,n),s0(e,r=>Dt(r,t)||Dt(t,r))}function s0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(iU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function iU(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();qr&&Fe("event: "+n.toString()),po(r)}}}var oU="repo_interrupt",sU=25,xg=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ng,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pu(),this.transactionQueueTree_=new ia,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function aU(e,t,n){if(e.stats_=Ug(e.repoInfo_),e.forceRestClient_||oV())e.server_=new dg(e.repoInfo_,(r,i,o,s)=>{eD(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>tD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Hg(e.repoInfo_,t,(r,i,o,s)=>{eD(e,r,i,o,s)},r=>{tD(e,r)},r=>{cU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=aV(e.repoInfo_,()=>new mg(e.stats_,e.server_)),e.infoData_=new hg,e.infoSyncTree_=new Iu({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=la(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),i_(e,"connected",!1),e.serverSyncTree_=new Iu({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);St(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function a0(e){let n=e.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Fu(e){return Wj({timestamp:a0(e)})}function eD(e,t,n,r,i){e.dataUpdateCount++;let o=new J(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Ds(n,l=>Ee(l));s=Vj(e.serverSyncTree_,o,c,i)}else{let c=Ee(n);s=GD(e.serverSyncTree_,o,c,i)}else if(r){let c=Ds(n,l=>Ee(l));s=kj(e.serverSyncTree_,o,c)}else{let c=Ee(n);s=la(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=ho(e,o)),St(e.eventQueue_,a,s)}function tD(e,t){i_(e,"connected",t),t===!1&&hU(e)}function cU(e,t){Le(t,(n,r)=>{i_(e,n,r)})}function i_(e,t,n){let r=new J("/.info/"+t),i=Ee(n);e.infoData_.updateSnapshot(r,i);let o=la(e.infoSyncTree_,r,i);St(e.eventQueue_,r,o)}function o_(e){return e.nextWriteId_++}function lU(e,t,n){let r=jj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=Ee(i).withIndex(t._queryParams.getIndex());Tg(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=la(e.serverSyncTree_,t._path,o);else{let a=ra(e.serverSyncTree_,t);s=GD(e.serverSyncTree_,t._path,o,a)}return St(e.eventQueue_,t._path,s),Eu(e.serverSyncTree_,t,n,null,!0),o},i=>(da(e,"get for query "+be(t)+" failed: "+i),Promise.reject(new Error(i))))}function uU(e,t,n,r,i){da(e,"set",{path:t.toString(),value:n,priority:r});let o=Fu(e),s=Ee(n,r),a=Zg(e.serverSyncTree_,t),c=ZD(s,a,o),l=o_(e),u=zD(e.serverSyncTree_,t,c,l,!0);ku(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,p)=>{let m=h==="ok";m||Ye("set at "+t+" failed: "+h);let g=Kn(e.serverSyncTree_,l,!m);St(e.eventQueue_,t,g),Rg(e,i,h,p)});let d=a_(e,t);ho(e,d),St(e.eventQueue_,d,[])}function dU(e,t,n,r){da(e,"update",{path:t.toString(),value:n});let i=!0,o=Fu(e),s={};if(Le(n,(a,c)=>{i=!1,s[a]=QD(ue(t,a),Ee(c),e.serverSyncTree_,o)}),i)Fe("update() called with empty data.  Don't do anything."),Rg(e,r,"ok",void 0);else{let a=o_(e),c=Oj(e.serverSyncTree_,t,s,a);ku(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||Ye("update at "+t+" failed: "+l);let h=Kn(e.serverSyncTree_,a,!d),p=h.length>0?ho(e,t):t;St(e.eventQueue_,p,h),Rg(e,r,l,u)}),Le(n,l=>{let u=a_(e,ue(t,l));ho(e,u)}),St(e.eventQueue_,t,[])}}function hU(e){da(e,"onDisconnectEvents");let t=Fu(e),n=pu();fg(e.onDisconnect_,K(),(i,o)=>{let s=QD(i,o,e.serverSyncTree_,t);xD(n,i,s)});let r=[];fg(n,K(),(i,o)=>{r=r.concat(la(e.serverSyncTree_,i,o));let s=a_(e,i);ho(e,s)}),e.onDisconnect_=pu(),St(e.eventQueue_,K(),r)}function fU(e,t,n){let r;B(t._path)===".info"?r=Tg(e.infoSyncTree_,t,n):r=Tg(e.serverSyncTree_,t,n),o0(e.eventQueue_,t._path,r)}function nD(e,t,n){let r;B(t._path)===".info"?r=Eu(e.infoSyncTree_,t,n):r=Eu(e.serverSyncTree_,t,n),o0(e.eventQueue_,t._path,r)}function pU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(oU)}function da(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Fe(n,...t)}function Rg(e,t,n,r){t&&po(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function c0(e,t,n){return Zg(e.serverSyncTree_,t,n)||F.EMPTY_NODE}function s_(e,t=e.transactionQueueTree_){if(t||Lu(e,t),go(t)){let n=u0(e,t);v(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&mU(e,ua(t),n)}else XD(t)&&Pu(t,n=>{s_(e,n)})}function mU(e,t,n){let r=n.map(l=>l.currentWriteId),i=c0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];v(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=qe(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{da(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Kn(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Lu(e,n_(e.transactionQueueTree_,t)),s_(e,e.transactionQueueTree_),St(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)po(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ye("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ho(e,t)}},s)}function ho(e,t){let n=l0(e,t),r=ua(n),i=u0(e,n);return gU(e,i,r),r}function gU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=qe(n,c.path),u=!1,d;if(v(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Kn(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=sU)u=!0,d="maxretry",i=i.concat(Kn(e.serverSyncTree_,c.currentWriteId,!0));else{let h=c0(e,c.path,s);c.currentInputSnapshot=h;let p=t[a].update(h.val());if(p!==void 0){Ou("transaction failed: Data returned ",p,c.path);let m=Ee(p);typeof p=="object"&&p!=null&&Ft(p,".priority")||(m=m.updatePriority(h.getPriority()));let I=c.currentWriteId,D=Fu(e),oe=ZD(m,h,D);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=oe,c.currentWriteId=o_(e),s.splice(s.indexOf(I),1),i=i.concat(zD(e.serverSyncTree_,c.path,oe,c.currentWriteId,c.applyLocally)),i=i.concat(Kn(e.serverSyncTree_,I,!0))}else u=!0,d="nodata",i=i.concat(Kn(e.serverSyncTree_,c.currentWriteId,!0))}St(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Lu(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)po(r[a]);s_(e,e.transactionQueueTree_)}function l0(e,t){let n,r=e.transactionQueueTree_;for(n=B(t);n!==null&&go(r)===void 0;)r=n_(r,n),t=ie(t),n=B(t);return r}function u0(e,t){let n=[];return d0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function d0(e,t,n){let r=go(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Pu(t,i=>{d0(e,i,n)})}function Lu(e,t){let n=go(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,JD(t,n.length>0?n:void 0)}Pu(t,r=>{Lu(e,r)})}function a_(e,t){let n=ua(l0(e,t)),r=n_(e.transactionQueueTree_,t);return Yj(r,i=>{Bm(e,i)}),Bm(e,r),e0(r,i=>{Bm(e,i)}),n}function Bm(e,t){let n=go(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(v(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(v(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Kn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?JD(t,void 0):n.length=o+1,St(e.eventQueue_,ua(t),i);for(let s=0;s<r.length;s++)po(r[s])}}function _U(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function vU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ye(`Invalid query segment '${n}' in query '${e}'`)}return t}var rD=function(e,t){let n=yU(e),r=n.namespace;n.domain==="firebase.com"&&wn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||QL();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new su(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new J(n.pathString)}},yU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=_U(e.substring(u,d)));let h=vU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var iD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wU=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=iD.charAt(n%64),n=Math.floor(n/64);v(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=iD.charAt(t[i]);return v(s.length===20,"nextPushId: Length should be 20."),s}}();var Du=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}},Tu=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Su=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Pg=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:Bg(this._path)}get ref(){return new sn(this._repo,this._path)}get _queryIdentifier(){let t=HE(this._queryParams),n=jg(t);return n==="{}"?"default":n}get _queryObject(){return HE(this._queryParams)}isEqual(t){if(t=Ie(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=$g(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+AV(this._path)}};var sn=class e extends Pg{constructor(t,n){super(t,n,new ug,!1)}get parent(){let t=ED(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},oa=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new J(t),r=fo(this.ref,t);return new e(this._node.getChild(n),r,de)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,fo(this.ref,r),de)))}hasChild(t){let n=new J(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function _o(e,t){return e=Ie(e),e._checkNotDeleted("ref"),t!==void 0?fo(e._root,t):e._root}function fo(e,t){return e=Ie(e),B(e._path)===null?nU("child","path",t,!1):r0("child","path",t,!1),new sn(e._repo,ue(e._path,t))}function h0(e,t){e=Ie(e),i0("push",e._path),n0("push",t,e._path,!0);let n=a0(e._repo),r=wU(n),i=fo(e,r),o=fo(e,r),s;return t!=null?s=c_(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function c_(e,t){e=Ie(e),i0("set",e._path),n0("set",t,e._path,!1);let n=new gn;return uU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function f0(e,t){tU("update",t,e._path,!1);let n=new gn;return dU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function p0(e){e=Ie(e);let t=new Su(()=>{}),n=new Mu(t);return lU(e._repo,e,n).then(r=>new oa(r,new sn(e._repo,e._path),e._queryParams.getIndex()))}var Mu=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Du("value",this,new oa(t.snapshotNode,new sn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Tu(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Og=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Tu(this,t,n):null}createEvent(t,n){v(t.childName!=null,"Child events should have a childName.");let r=fo(new sn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new Du(t.type,this,new oa(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function bU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{nD(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Su(n,o||void 0),a=t==="value"?new Mu(s):new Og(t,s);return fU(e._repo,e,a),()=>nD(e._repo,e,a)}function m0(e,t,n,r){return bU(e,"value",t,n,r)}Tj(sn);xj(sn);var CU="FIREBASE_DATABASE_EMULATOR_HOST",kg={},IU=!1;function EU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=Bn(o);e.repoInfo_=new su(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function DU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fe("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=rD(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[CU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=rD(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new qs(qs.OWNER):new qm(e.name,e.options,t);rU("Invalid Firebase Database URL",s),W(s.path)||wn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=SU(a,e,u,new Gm(e,n));return new Fg(d,e)}function TU(e,t){let n=kg[t];(!n||n[e.key]!==e)&&wn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),pU(e),delete n[e.key]}function SU(e,t,n,r){let i=kg[t.name];i||(i={},kg[t.name]=i);let o=i[e.toURLString()];return o&&wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new xg(e,IU,n,r),i[e.toURLString()]=o,o}var Fg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sn(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(TU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&wn("Cannot call "+t+" on a deleted database.")}};function ha(e=Lr(),t){let n=Lt(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=TC("database");r&&MU(n,...r)}return n}function MU(e,t,n,r={}){e=Ie(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Et(r,o.repoInfo_.emulatorOptions))return;wn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new qs(qs.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:SC(r.mockUserToken,e.app.options.projectId);s=new qs(a)}Bn(t)&&(El(t),Dl("Database",!0)),EU(o,i,r,s)}function AU(e){qL(Hn),tt(new Me("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return DU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ke(TE,SE,e),ke(TE,SE,"esm2020")}Hg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Hg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};AU();var vo=class e{static{this.apps=new Map}static getData(t,n,r){return f(this,null,function*(){try{let i=r?ha(t,r):ha(t);return yield e.getDbData(i,n)}catch(i){return console.error("Errore nel recupero dei dati Firebase:",i),null}})}static getDbData(t,n){return f(this,null,function*(){let r=_o(t,n);return new Promise((o,s)=>{m0(r,a=>{let c=a.val();o(c)},a=>{s(a)})})})}static writeUserData(t,n,r){return f(this,null,function*(){let i=ha(n);yield c_(_o(i,r),t)})}static pushToChild(t,n,r,i="RANDOM"){return f(this,null,function*(){try{let o=Ns(n),s=ha(o),a=null;if(i==="RANDOM")a=h0(_o(s,r)).key;else if(i==="NUMBER"){let l=yield p0(_o(s,r)),u=l.exists()?l.val():{},d=Object.keys(u).length+1;a=String(d)}if(!a)throw new Error("Impossibile generare una nuova chiave.");let c={[`${r}/${a}`]:t};yield f0(_o(s),c),console.log(`Elemento aggiunto a "${r}" con chiave "${a}"`)}catch(o){throw console.error(`Errore in pushToChild(${r}):`,o),o}})}};var g0=(()=>{class e{constructor(n){this.http=n}getFile(n){return f(this,null,function*(){return yield this.http.get(n).toPromise()})}static{this.\u0275fac=function(r){return new(r||e)(C(Dr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var yo=(()=>{class e{constructor(n,r){this.common_service=n,this.assets_service=r}startFbApi(n){try{return this.common_service.fbApp=Ns(n),this.common_service.fbApiAnalytics=DI(this.common_service.fbApp),console.log("API Firebase inizializzata con successo."),!0}catch(r){return console.error("Errore nell'inizializzazione dell'API Firebase:",r),!1}}tryLogin(n){return f(this,null,function*(){try{let r=Om(this.common_service.fbApp);return yield Rm(r,n.email,n.password)}catch(r){console.error("Errore durante il tentativo di login:",r);return}})}getFirebaseConfig(n){return f(this,null,function*(){try{let r=yield this.assets_service.getFile("assets/firebase/fb-proj-configs.json");if(!r){console.error("Impossibile caricare la configurazione Firebase.");return}let i=r.users[n];if(!i){console.error(`Configurazione Firebase non trovata per l'utente: ${n}`);return}return this.common_service.fbUserConfig=i,i}catch(r){console.error("Errore nel recupero della configurazione Firebase:",r);return}})}getUserExtras(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}return yield vo.getData(this.common_service.fbApp,`users/${n}/info`,this.common_service.appConfig.firebase.dbUrl||"")}catch(r){console.error("Errore nel recupero delle info dell'utente:",r);return}})}getUserAllowedProducts(n){return f(this,null,function*(){try{if(console.log(`Recupero prodotti per l'utente: ${n}`),!n)return console.error("Nessun nome utente fornito per il recupero dei prodotti."),null;if(this.common_service.fbApp==null)return console.error("API Firebase non inizializzata."),null;let r=yield vo.getData(this.common_service.fbApp,`users/${n}/auth/allowedProds`,this.common_service.appConfig.firebase.dbUrl||"");return console.info(`Prodotti recuperati per l'utente ${n}:`,r),r?Object.entries(r).filter(([o,s])=>s===!0).map(([o])=>o):[]}catch(r){return console.error(`Errore nel recupero dei prodotti per l'utente ${n}:`,r),null}})}getUserProducts(n,r){return f(this,null,function*(){try{if(console.info("Recupero prodotti utente..."),!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let i={},o=this.common_service.appConfig.firebase.dbUrl||"";for(let s of r){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let a=yield vo.getData(this.common_service.fbApp,`sharedLogin/products/${s}`,this.common_service.appConfig.firebase.dbUrl||"");i[s]=a}return console.info(`Prodotti recuperati per l'utente ${n}:`,i),i}catch(i){return console.error("Errore nel recupero dei prodotti dell'utente:",i),[]}})}static{this.\u0275fac=function(r){return new(r||e)(C(et),C(g0))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Vu=(()=>{class e{constructor(n,r){this.common=n,this.fb_service=r,this.user={username:"",email:"",password:"",uId:"",sex:"male",icon:""},this.error="",this.showPassword=!1}onSubmit(){return f(this,null,function*(){try{if(!this.user.email||!this.user.password){this.error="Inserisci nome utente e password.";return}this.common.lastLoggedUser=this.user,this.error="";let n=yield this.fb_service.tryLogin(this.user);if(console.info("Credenziali Firebase:",n),!n){this.error="Credenziali non valide. Riprova.";return}this.common.lastLoggedUser.uId=n.user.uid,this.common.lastLoggedUser.username=this.user.username,this.common.lastLoggedUser.email=n.user.email||"",yield this.includeUserExtra(n),console.log("this.common.lastLoggedUser",this.common.lastLoggedUser),this.common.saveUserSession()}catch(n){console.error("Errore durante il login:",n)}})}includeUserExtra(n){return f(this,null,function*(){if(!n)return;let r=yield this.fb_service.getUserExtras(n.user.uid);r&&this.common.lastLoggedUser&&(this.common.lastLoggedUser.sex=r?.sex??"male",this.common.lastLoggedUser.icon=r?.icon??(r?.sex==="male"?"man-default":"woman-default"),this.common.lastLoggedUser.username=r?.username??this.user.username)})}static{this.\u0275fac=function(r){return new(r||e)(C(et),C(yo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ju=(()=>{class e{constructor(n,r,i,o){this.common=n,this.login_service=r,this.fb_service=i,this.http_service=o,this.hasAppInitialized=!1}initApp(){return f(this,null,function*(){try{yield this.getFirebaseInit(),this.common.lastLoggedUser=this.common.getUserSession(),this.common.appConfig=yield this.loadAppConfig();let n=yield this.fb_service.tryLogin(this.common.lastLoggedUser);if(!n){console.error("Login fallito.");return}yield this.login_service.includeUserExtra(n),this.hasAppInitialized=!0}catch(n){console.error("Errore durante l'inizializzazione dell'app:",n);return}})}getFirebaseInit(){return f(this,null,function*(){try{let n=yield this.fb_service.getFirebaseConfig("ame.dev.apps");if(!n){console.error("Errore nel recupero della configurazione Firebase.");return}if(!this.fb_service.startFbApi(n)){console.error("Errore nell'inizializzazione dell'API Firebase.");return}}catch(n){console.error("Errore durante l'inizializzazione di Firebase:",n)}})}loadAppConfig(){return f(this,null,function*(){return yield hd(this.http_service.get("assets/config/default-config.json"))})}static{this.\u0275fac=function(r){return new(r||e)(C(et),C(Vu),C(yo),C(Dr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xU(e,t){e&1&&ze(0,"app-loader")}function RU(e,t){if(e&1){let n=fn();tf(0),w(1,"button",25),X("click",function(){let i=ve(n).$implicit,o=Xe(2);return ye(o.toggleTag(i))}),A(2),b(),nf()}if(e&2){let n=t.$implicit,r=Xe(2);L(),qt("selected",r.selectedTags.includes(n)),L(),wr(" ",n," ")}}function PU(e,t){if(e&1&&(w(0,"span",32),A(1),b()),e&2){let n=t.$implicit;L(),Yt(n)}}function OU(e,t){if(e&1){let n=fn();w(0,"mat-card",26),X("click",function(){let i=ve(n).$implicit,o=Xe(2);return ye(o.openProductLink(i.link))}),ze(1,"img",27),w(2,"mat-card-content")(3,"h3"),A(4),b(),w(5,"p"),A(6),b(),w(7,"div",28)(8,"div",29),Re(9,PU,2,1,"span",30),b(),w(10,"button",31),X("click",function(i){let o=ve(n).$implicit,s=Xe(2);return ye(s.editProduct(i,o))}),A(11,"Edit"),b()()()()}if(e&2){let n=t.$implicit;L(),se("src",n.image,Uh)("alt",n.name),L(3),Yt(n.name),L(2),Yt(n.description),L(3),se("ngForOf",n.tags)}}function kU(e,t){if(e&1){let n=fn();w(0,"div",13)(1,"div",14)(2,"h2",15),A(3,"Prodotti disponibili"),b(),w(4,"div",16)(5,"span",17),A(6,"Filtra per tag:"),b(),Re(7,RU,3,3,"ng-container",18),b(),w(8,"div",19)(9,"mat-card",20),X("click",function(){ve(n);let i=Xe();return ye(i.addProduct())}),w(10,"div",21)(11,"span",22),A(12,"+"),b(),w(13,"mat-card-content")(14,"h3",23),A(15,"Aggiungi nuovo prodotto"),b()()()(),Re(16,OU,12,5,"mat-card",24),b()()()}if(e&2){let n=Xe();L(),Fi("width",n.filteredProducts.length===0?"auto":"100%"),L(6),se("ngForOf",n.allTags),L(9),se("ngForOf",n.filteredProducts)}}var y0=(()=>{class e{constructor(n,r,i,o,s){this.common=n,this.app_service=r,this.router=i,this.fb_service=o,this.cdRef=s,this.products=[],this.allTags=[],this.selectedTags=[],this.filteredProducts=[],this.hasLoadedProds=!1}ngOnInit(){return f(this,null,function*(){this.app_service.hasAppInitialized||(yield this.app_service.initApp()),this.hasLoadedProds=!1;let n=yield this.fb_service.getUserAllowedProducts(this.common.lastLoggedUser?.uId??""),r=yield this.fb_service.getUserProducts(this.common.lastLoggedUser?.uId??"",n??[]);this.products=Object.values(r||{}),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),this.hasLoadedProds=!0,console.log("Prodotti utente:",this.products)})}updateTags(){let n=new Set;this.products.forEach(r=>r.tags?.forEach(i=>n.add(i))),this.allTags=Array.from(n)}toggleTag(n){this.selectedTags.includes(n)?this.selectedTags=this.selectedTags.filter(r=>r!==n):this.selectedTags.push(n),this.filterProducts()}filterProducts(){this.selectedTags.length===0?this.filteredProducts=[...this.products]:this.filteredProducts=this.products.filter(n=>n.tags?.some(r=>this.selectedTags.includes(r)))}openProductLink(n){window.open(n,"_blank")}addProduct(){this.router.navigate(["/products/add"])}editProfile(){alert("Funzione modifica profilo non ancora implementata.")}addProfile(){confirm("Sei sicuro di voler aggiungere un profilo?")&&alert("Funzione ADD profilo non ancora implementata.")}deleteProfile(){confirm("Sei sicuro di voler eliminare il profilo?")&&alert("Funzione elimina profilo non ancora implementata.")}editProduct(n,r){n.stopPropagation(),this.router.navigate(["/products/edit"])}logout(){confirm("Sei sicuro di voler effettuare il logout?")&&(this.common.lastLoggedUser=void 0,localStorage.removeItem("lastLoggedUser"),this.router.navigate(["/"]))}static{this.\u0275fac=function(r){return new(r||e)(M(et),M(ju),M(Ct),M(yo),M(Kt))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-products"]],standalone:!0,features:[we],decls:19,vars:8,consts:[[1,"container"],[4,"ngIf"],["class","products-layout",4,"ngIf"],[1,"profile-menu-container"],[1,"profile-menu"],[1,"profile-pic"],["alt","Foto profilo",3,"src"],[1,"profile-name"],[1,"row"],["title","Edit profile",1,"profile-btn",3,"click"],["title","Delete profile",1,"profile-btn","delete",3,"click"],["title","Add profile",1,"profile-btn",3,"click"],["title","Logout",1,"profile-btn","warning",3,"click"],[1,"products-layout"],[1,"products-container"],[1,"products-title"],[1,"tag-filter"],[1,"filter-label"],[4,"ngFor","ngForOf"],[1,"products-grid"],[1,"product-card","add-card",3,"click"],[2,"display","flex","flex-direction","column","align-items","center","justify-content","center","height","100%","min-height","180px"],[2,"font-size","3rem","color","var(--primary)"],[2,"text-align","center","color","var(--primary-dark)"],["class","product-card",3,"click",4,"ngFor","ngForOf"],["type","button",1,"tag-chip",3,"click"],[1,"product-card",3,"click"],["mat-card-image","",3,"src","alt"],[1,"products"],[1,"product-tags"],["class","tag-chip",4,"ngFor","ngForOf"],["title","Edit product",1,"product-crud",3,"click"],[1,"tag-chip"]],template:function(r,i){r&1&&(w(0,"div",0),Re(1,xU,1,0,"app-loader",1)(2,kU,17,4,"div",2),w(3,"div",3)(4,"div",4)(5,"div",5),ze(6,"img",6),b(),w(7,"div",7),A(8),b(),w(9,"div",8)(10,"button",9),X("click",function(){return i.editProfile()}),A(11,"Edit"),b(),w(12,"button",10),X("click",function(){return i.deleteProfile()}),A(13,"Delete"),b(),w(14,"button",11),X("click",function(){return i.addProfile()}),A(15,"Add"),b()(),w(16,"div",8)(17,"button",12),X("click",function(){return i.logout()}),A(18,"Logout"),b()()()()()),r&2&&(L(),se("ngIf",!i.hasLoadedProds),L(),se("ngIf",i.hasLoadedProds),L(2),Fi("width",i.filteredProducts.length===0?"auto":"100%")("left",i.filteredProducts.length===0?"0.25em":"1em"),L(2),se("src","assets/images/users/"+(i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.icon)+".svg",Uh),L(2),Yt((i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.username)||"Utente"))},dependencies:[Pe,Kc,kn,_C,pC,mC,gC,yC],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;left:0}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100%;flex-direction:column}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px;padding:1rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.5rem;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-weight:500;color:var(--primary-dark);margin-right:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:1rem;cursor:pointer;transition:background .2s,color .2s;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip.selected[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-title[_ngcontent-%COMP%]{color:var(--primary);text-align:center;margin-bottom:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;border-radius:16px;box-shadow:0 8px 32px #2193b026;overflow:hidden;transition:box-shadow .2s}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #2193b040}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:contain;border-top-left-radius:16px;border-top-right-radius:16px;background:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:var(--primary-dark);font-size:1.2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product-crud[_ngcontent-%COMP%]{margin-bottom:.7rem;border:none;border-radius:8px;background:var(--primary);color:#fff;font-weight:600;cursor:pointer;transition:background .2s;position:relative;z-index:99999}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{position:relative;top:-2em;left:.25em;background:var(--card-bg);border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.1);max-width:900px;min-width:220px;flex-direction:column;align-items:center;display:flex;justify-content:center;padding:2rem 1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid var(--primary);margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:var(--primary-dark);margin-bottom:1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1em}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.7rem;border:none;border-radius:8px;background:var(--primary);color:#fff;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.warning[_ngcontent-%COMP%]{background-color:var(--warning)!important}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]:hover{background:#b71c1c}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{flex:1}"]})}}return e})();var M0=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(M(Oi),M(ct))}}static{this.\u0275dir=le({type:e})}}return e})(),FU=(()=>{class e extends M0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ni(e)))(i||e)}})()}static{this.\u0275dir=le({type:e,features:[hn]})}}return e})(),A0=new T("");var LU={provide:A0,useExisting:gr(()=>er),multi:!0};function VU(){let e=mn()?mn().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var jU=new T(""),er=(()=>{class e extends M0{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!VU())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(M(Oi),M(ct),M(jU,8))}}static{this.\u0275dir=le({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&X("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[br([LU]),hn]})}}return e})();function UU(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var d_=new T(""),N0=new T("");function BU(e){return UU(e.value)?{required:!0}:null}function w0(e){return null}function x0(e){return e!=null}function R0(e){return Cr(e)?ce(e):e}function P0(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function O0(e,t){return t.map(n=>n(e))}function $U(e){return!e.validate}function k0(e){return e.map(t=>$U(t)?t:n=>t.validate(n))}function HU(e){if(!e)return null;let t=e.filter(x0);return t.length==0?null:function(n){return P0(O0(n,t))}}function h_(e){return e!=null?HU(k0(e)):null}function WU(e){if(!e)return null;let t=e.filter(x0);return t.length==0?null:function(n){let r=O0(n,t).map(R0);return pd(r).pipe(O(P0))}}function f_(e){return e!=null?WU(k0(e)):null}function b0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function zU(e){return e._rawValidators}function GU(e){return e._rawAsyncValidators}function u_(e){return e?Array.isArray(e)?e:[e]:[]}function Bu(e,t){return Array.isArray(e)?e.includes(t):e===t}function C0(e,t){let n=u_(t);return u_(e).forEach(i=>{Bu(n,i)||n.push(i)}),n}function I0(e,t){return u_(t).filter(n=>!Bu(e,n))}var $u=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=h_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=f_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},bo=class extends $u{get formDirective(){return null}get path(){return null}},ga=class extends $u{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Hu=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},qU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},K5=P(_({},qU),{"[class.ng-submitted]":"isSubmitted"}),Co=(()=>{class e extends Hu{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(M(ga,2))}}static{this.\u0275dir=le({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&qt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[hn]})}}return e})(),Io=(()=>{class e extends Hu{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(M(bo,10))}}static{this.\u0275dir=le({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&qt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[hn]})}}return e})();var fa="VALID",Uu="INVALID",wo="PENDING",pa="DISABLED";function F0(e){return(Gu(e)?e.validators:e)||null}function YU(e){return Array.isArray(e)?h_(e):e||null}function L0(e,t){return(Gu(t)?t.asyncValidators:e)||null}function KU(e){return Array.isArray(e)?f_(e):e||null}function Gu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function QU(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")}function ZU(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new S(1002,"")})}var Wu=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===fa}get invalid(){return this.status===Uu}get pending(){return this.status==wo}get disabled(){return this.status===pa}get enabled(){return this.status!==pa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(C0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(C0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(I0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(I0(t,this._rawAsyncValidators))}hasValidator(t){return Bu(this._rawValidators,t)}hasAsyncValidator(t){return Bu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=wo,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=pa,this.errors=null,this._forEachChild(r=>{r.disable(P(_({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=fa,this._forEachChild(r=>{r.enable(P(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fa||this.status===wo)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pa:fa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=wo,this._hasOwnPendingAsyncValidator=!0;let n=R0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?pa:this.errors?Uu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wo)?wo:this._anyControlsHaveStatus(Uu)?Uu:fa}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=YU(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=KU(this._rawAsyncValidators)}},zu=class extends Wu{constructor(t,n,r){super(F0(n),L0(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){ZU(this,!0,t),Object.keys(t).forEach(r=>{QU(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var p_=new T("CallSetDisabledState",{providedIn:"root",factory:()=>m_}),m_="always";function JU(e,t){return[...t.path,e]}function V0(e,t,n=m_){j0(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),e2(e,t),n2(e,t),t2(e,t),XU(e,t)}function E0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function XU(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function j0(e,t){let n=zU(e);t.validator!==null?e.setValidators(b0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=GU(e);t.asyncValidator!==null?e.setAsyncValidators(b0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();E0(t._rawValidators,i),E0(t._rawAsyncValidators,i)}function e2(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&U0(e,t)})}function t2(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&U0(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function U0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function n2(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function r2(e,t){e==null,j0(e,t)}function i2(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function o2(e){return Object.getPrototypeOf(e.constructor)===FU}function s2(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function a2(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===er?n=o:o2(o)?r=o:i=o}),i||r||n||null}var c2={provide:bo,useExisting:gr(()=>Jr)},ma=Promise.resolve(),Jr=(()=>{class e extends bo{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Te,this.form=new zu({},h_(n),f_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ma.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),V0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ma.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ma.then(()=>{let r=this._findContainer(n.path),i=new zu({});r2(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ma.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ma.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,s2(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(M(d_,10),M(N0,10),M(p_,8))}}static{this.\u0275dir=le({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&X("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Ve.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[br([c2]),hn]})}}return e})();function D0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function T0(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var l2=class extends Wu{constructor(t=null,n,r){super(F0(n),L0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(T0(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){D0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){D0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){T0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var u2={provide:ga,useExisting:gr(()=>Xr)},S0=Promise.resolve(),Xr=(()=>{class e extends ga{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new l2,this._registered=!1,this.name="",this.update=new Te,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=a2(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),i2(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){V0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){S0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ir(r);S0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?JU(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(M(bo,9),M(d_,10),M(N0,10),M(A0,10),M(Kt,8),M(p_,8))}}static{this.\u0275dir=le({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ve.None,"disabled","isDisabled"],model:[Ve.None,"ngModel","model"],options:[Ve.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[br([u2]),hn,Pn]})}}return e})(),Eo=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=le({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var d2=(()=>{class e{constructor(){this._validator=w0}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):w0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=le({type:e,features:[Pn]})}}return e})();var h2={provide:d_,useExisting:gr(()=>ei),multi:!0};var ei=(()=>{class e extends d2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ir,this.createValidator=n=>BU}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ni(e)))(i||e)}})()}static{this.\u0275dir=le({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&yr("required",i._enabled?"":null)},inputs:{required:"required"},features:[br([h2]),hn]})}}return e})();var f2=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({})}}return e})();var tr=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:p_,useValue:n.callSetDisabledState??m_}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=_e({type:e})}static{this.\u0275inj=me({imports:[f2]})}}return e})();function p2(e,t){e&1&&(w(0,"span",19),A(1,"\u{1F441}\uFE0F"),b())}function m2(e,t){e&1&&(w(0,"span",20),A(1,"\u{1F648}"),b())}function g2(e,t){if(e&1&&(w(0,"div",21),A(1),b()),e&2){let n=Xe();L(),Yt(n.login_service.error)}}var B0=(()=>{class e{constructor(n,r){this.login_service=n,this.router=r}togglePasswordVisibility(){this.login_service.showPassword=!this.login_service.showPassword}onSubmit(){return f(this,null,function*(){yield this.login_service.onSubmit(),this.router.navigate(["/products"])})}forgotPassword(){this.router.navigate(["/forgot"])}register(){this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||e)(M(Vu),M(Ct))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-login"]],standalone:!0,features:[we],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"container"],[1,"login-card"],[3,"ngSubmit"],[1,"input-group"],["for","email"],["type","text","id","email","name","email","placeholder","Inserisci l'email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Inserisci la password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit"],["class","error-message",4,"ngIf"],[1,"forgot-password"],[3,"click"],[1,"register-user"],["type","button",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"],[1,"error-message"]],template:function(r,i){if(r&1){let o=fn();w(0,"div",1)(1,"div",2)(2,"h2"),A(3,"Accedi"),b(),w(4,"form",3,0),X("ngSubmit",function(){return ve(o),ye(i.onSubmit())}),w(6,"div",4)(7,"label",5),A(8,"Email"),b(),w(9,"input",6),ut("ngModelChange",function(a){return ve(o),wt(i.login_service.user.email,a)||(i.login_service.user.email=a),ye(a)}),b()(),w(10,"div",7)(11,"label",8),A(12,"Password"),b(),w(13,"input",9),ut("ngModelChange",function(a){return ve(o),wt(i.login_service.user.password,a)||(i.login_service.user.password=a),ye(a)}),b(),w(14,"button",10),X("click",function(){return ve(o),ye(i.togglePasswordVisibility())}),Re(15,p2,2,0,"span",11)(16,m2,2,0,"span",12),b()(),w(17,"button",13),A(18,"Login"),b(),Re(19,g2,2,1,"div",14),b(),w(20,"div",15)(21,"span",16),X("click",function(){return ve(o),ye(i.forgotPassword())}),A(22,"Hai dimenticato la password?"),b()(),w(23,"div",17)(24,"button",18),X("click",function(){return ve(o),ye(i.register())}),A(25,"Registrati"),b()()()()}r&2&&(L(9),lt("ngModel",i.login_service.user.email),L(4),se("type",i.login_service.showPassword?"text":"password"),lt("ngModel",i.login_service.user.password),L(2),se("ngIf",!i.login_service.showPassword),L(),se("ngIf",i.login_service.showPassword),L(3),se("ngIf",i.login_service.error))},dependencies:[Pe,kn,tr,Eo,er,Co,Io,ei,Xr,Jr],styles:[".register-user[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;padding:.6rem 1.5rem;cursor:pointer;transition:background .2s}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-password[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:underline;font-size:.98rem;cursor:pointer;transition:color .2s}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#2193b0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error);margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();var $0=(()=>{class e{constructor(n){this.common=n}sendResetLink(){let n=document.getElementById("email").value;if(!n){alert("Inserisci un'email valida.");return}this.common.lastforgotPswRequest={email:n,username:"",password:"",uId:"",sex:"male",icon:""},alert(`Link di reset inviato a ${n}`)}static{this.\u0275fac=function(r){return new(r||e)(M(et))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-forgot"]],standalone:!0,features:[we],decls:13,vars:0,consts:[[1,"forgot-container"],[1,"forgot-card"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required",""],["type","submit",3,"click"],[1,"info-message"]],template:function(r,i){r&1&&(w(0,"div",0)(1,"div",1)(2,"h2"),A(3,"Recupera la password"),b(),w(4,"form")(5,"div",2)(6,"label",3),A(7,"Email"),b(),ze(8,"input",4),b(),w(9,"button",5),X("click",function(){return i.sendResetLink()}),A(10,"Invia richiesta"),b()(),w(11,"div",6),A(12,"Riceverai una mail con le istruzioni per il reset."),b()()())},styles:[".forgot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.forgot-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.forgot-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-card[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var qu=class{constructor(){this.username="",this.email="",this.password="",this.uId="",this.sex="male",this.icon=""}};function _2(e,t){e&1&&(w(0,"span",14),A(1,"\u{1F441}\uFE0F"),b())}function v2(e,t){e&1&&(w(0,"span",15),A(1,"\u{1F648}"),b())}var H0=(()=>{class e{constructor(n){this.common=n,this.showPassword=!1,this.user=new qu}togglePasswordVisibility(){this.showPassword=!this.showPassword}register(){return f(this,null,function*(){try{this.common.lastRegisteredUser=this.user,alert("Registrazione completata con successo!")}catch(n){console.error("Errore durante la registrazione:",n),alert("Si \xE8 verificato un errore durante la registrazione. Riprova pi\xF9 tardi.")}})}static{this.\u0275fac=function(r){return new(r||e)(M(et))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-register"]],standalone:!0,features:[we],decls:22,vars:6,consts:[[1,"register-container"],[1,"register-card"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Inserisci il nome utente","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Crea una password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"]],template:function(r,i){r&1&&(w(0,"div",0)(1,"div",1)(2,"h2"),A(3,"Crea un nuovo utente"),b(),w(4,"form")(5,"div",2)(6,"label",3),A(7,"Nome utente"),b(),w(8,"input",4),ut("ngModelChange",function(s){return wt(i.user.username,s)||(i.user.username=s),s}),b()(),w(9,"div",2)(10,"label",5),A(11,"Email"),b(),w(12,"input",6),ut("ngModelChange",function(s){return wt(i.user.email,s)||(i.user.email=s),s}),b()(),w(13,"div",7)(14,"label",8),A(15,"Password"),b(),w(16,"input",9),ut("ngModelChange",function(s){return wt(i.user.password,s)||(i.user.password=s),s}),b(),w(17,"button",10),X("click",function(){return i.togglePasswordVisibility()}),Re(18,_2,2,0,"span",11)(19,v2,2,0,"span",12),b()(),w(20,"button",13),X("click",function(){return i.register()}),A(21,"Registrati"),b()()()()),r&2&&(L(8),lt("ngModel",i.user.username),L(4),lt("ngModel",i.user.email),L(4),se("type",i.showPassword?"text":"password"),lt("ngModel",i.user.password),L(2),se("ngIf",!i.showPassword),L(),se("ngIf",i.showPassword))},dependencies:[Pe,kn,tr,Eo,er,Co,Io,ei,Xr,Jr],styles:[".register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;z-index:100;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}"]})}}return e})();var Yu=(e,t)=>{let n=y(Ct),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return console.log("time passed",s-o),!i||!o||!c?(localStorage.removeItem("lastLoggedUser"),n.navigate(["/"]),!1):!0};var W0=(e,t)=>{let n=y(Ct),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return i&&c?(console.info("utente gi\xE0 loggato!"),!1):!0};var _a=class{constructor(){this.name="",this.description="",this.tags=[]}};function y2(e,t){if(e&1){let n=fn();w(0,"span",20),A(1),w(2,"button",21),X("click",function(){let i=ve(n).$implicit,o=Xe(2);return ye(o.removeTag(i))}),A(3," \xD7 "),b()()}if(e&2){let n=t.$implicit;L(),wr(" ",n," ")}}function w2(e,t){if(e&1&&(w(0,"div",4)(1,"label"),A(2,"Tag selezionati"),b(),w(3,"div",18),Re(4,y2,4,1,"span",19),b()()),e&2){let n=Xe();L(4),se("ngForOf",n.selectedTags)}}function b2(e,t){e&1&&(w(0,"div",22),A(1," Prodotto aggiunto con successo! "),b())}var __=(()=>{class e{get product(){return this._product||(this._product=new _a),this._product}constructor(n,r){this.route=n,this.router=r,this.success=!1,this.selectedTags=["gioco","app"],this.customTag="",this.pageTitle="Aggiungi nuovo prodotto"}ngOnInit(){this.router.url.includes("/products/edit")&&(this.pageTitle="Modifica prodotto")}toggleDefaultTag(n,r){r.target.checked?this.selectedTags.includes(n)||this.selectedTags.push(n):this.selectedTags=this.selectedTags.filter(i=>i!==n)}addCustomTag(){let n=this.customTag.trim();n&&!this.selectedTags.includes(n)&&(this.selectedTags.push(n),this.customTag="")}removeTag(n){this.selectedTags=this.selectedTags.filter(r=>r!==n)}onSubmit(){this.product.tags=[...this.selectedTags],console.log("prodotto",this._product),this.success=!0,setTimeout(()=>this.success=!1,2e3),this._product=new _a,this.selectedTags=[]}static{this.\u0275fac=function(r){return new(r||e)(M(jn),M(Ct))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-crud-product"]],inputs:{_product:"_product"},standalone:!0,features:[we],decls:29,vars:7,consts:[["addProductForm","ngForm"],[1,"add-product-container"],[1,"add-product-card"],[3,"ngSubmit"],[1,"input-group"],["for","name"],["type","text","id","name","name","name","placeholder","Nome prodotto","required","",3,"ngModelChange","ngModel"],["for","description"],["type","text","id","description","name","description","placeholder","Descrizione","required","",3,"ngModelChange","ngModel"],["for","image"],["type","url","id","image","name","image","placeholder","URL immagine",3,"ngModelChange","ngModel"],["for","customTag"],[2,"display","flex","gap","0.5rem"],["type","text","id","customTag","name","customTag","placeholder","Scrivi un tag",3,"ngModelChange","ngModel"],["type","button",3,"click"],["class","input-group",4,"ngIf"],["type","submit"],["class","success-message",4,"ngIf"],[2,"display","flex","flex-wrap","wrap","gap","0.5rem"],["style",`
              background: #e0e7ef;
              border-radius: 12px;
              padding: 0.3rem 0.8rem;
              display: flex;
              align-items: center;
            `,4,"ngFor","ngForOf"],[2,"background","#e0e7ef","border-radius","12px","padding","0.3rem 0.8rem","display","flex","align-items","center"],["type","button",2,"margin-left","0.5rem","background","none","border","none","color","#c00","cursor","pointer","font-size","1rem",3,"click"],[1,"success-message"]],template:function(r,i){if(r&1){let o=fn();w(0,"div",1)(1,"div",2)(2,"h2"),A(3),b(),w(4,"form",3,0),X("ngSubmit",function(){return ve(o),ye(i.onSubmit())}),w(6,"div",4)(7,"label",5),A(8,"Nome prodotto"),b(),w(9,"input",6),ut("ngModelChange",function(a){return ve(o),wt(i.product.name,a)||(i.product.name=a),ye(a)}),b()(),w(10,"div",4)(11,"label",7),A(12,"Descrizione"),b(),w(13,"input",8),ut("ngModelChange",function(a){return ve(o),wt(i.product.description,a)||(i.product.description=a),ye(a)}),b()(),w(14,"div",4)(15,"label",9),A(16,"Immagine (URL)"),b(),w(17,"input",10),ut("ngModelChange",function(a){return ve(o),wt(i.product.image,a)||(i.product.image=a),ye(a)}),b()(),w(18,"div",4)(19,"label",11),A(20,"Aggiungi tag"),b(),w(21,"div",12)(22,"input",13),ut("ngModelChange",function(a){return ve(o),wt(i.customTag,a)||(i.customTag=a),ye(a)}),b(),w(23,"button",14),X("click",function(){return ve(o),ye(i.addCustomTag())}),A(24,"Aggiungi"),b()()(),Re(25,w2,5,1,"div",15),w(26,"button",16),A(27,"Aggiungi prodotto"),b()(),Re(28,b2,2,0,"div",17),b()()}r&2&&(L(3),Yt(i.pageTitle),L(6),lt("ngModel",i.product.name),L(4),lt("ngModel",i.product.description),L(4),lt("ngModel",i.product.image),L(5),lt("ngModel",i.customTag),L(3),se("ngIf",i.selectedTags.length),L(3),se("ngIf",i.success))},dependencies:[Pe,Kc,kn,tr,Eo,er,Co,Io,ei,Xr,Jr],styles:[".add-product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var z0=[{path:"",component:B0,canActivate:[W0]},{path:"forgot",component:$0},{path:"register",component:H0},{path:"products",component:y0,canActivate:[Yu]},{path:"products/add",component:__,canActivate:[Yu]},{path:"products/edit",component:__,canActivate:[Yu]}];var G0={providers:[Kb(z0,Qb()),Eh(rl)]};var q0=(()=>{class e{constructor(n,r){this.common_service=n,this.app_service=r,this.title="shared-login",this.username="",this.password="",this.error="",this.showPassword=!1}ngOnInit(){return f(this,null,function*(){yield this.app_service.initApp()})}static{this.\u0275fac=function(r){return new(r||e)(M(et),M(ju))}}static{this.\u0275cmp=ge({type:e,selectors:[["app-root"]],standalone:!0,features:[we],decls:1,vars:0,template:function(r,i){r&1&&ze(0,"router-outlet")},dependencies:[sp,Pe,tr,rl],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#6dd5ed,#2193b0)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px #2193b026;display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2193b0}.input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2193b0}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#2193b0;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#176b87}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();hb(q0,G0).catch(e=>console.error(e));
