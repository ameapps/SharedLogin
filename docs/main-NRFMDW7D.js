var uT=Object.defineProperty,dT=Object.defineProperties;var hT=Object.getOwnPropertyDescriptors;var Ca=Object.getOwnPropertySymbols,fT=Object.getPrototypeOf,x_=Object.prototype.hasOwnProperty,N_=Object.prototype.propertyIsEnumerable,pT=Reflect.get;var A_=(e,t,n)=>t in e?uT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||={})x_.call(t,n)&&A_(e,n,t[n]);if(Ca)for(var n of Ca(t))N_.call(t,n)&&A_(e,n,t[n]);return e},O=(e,t)=>dT(e,hT(t));var Ia=(e,t)=>{var n={};for(var r in e)x_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ca)for(var r of Ca(e))t.indexOf(r)<0&&N_.call(e,r)&&(n[r]=e[r]);return n};var yr=(e,t,n)=>pT(fT(e),n,t);var f=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var P_=null;var ad=1,cd=Symbol("SIGNAL");function Z(e){let t=P_;return P_=e,t}var R_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mT(e){if(!(dd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ad)){if(!e.producerMustRecompute(e)&&!ld(e)){e.dirty=!1,e.lastCleanEpoch=ad;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ad}}function O_(e){return e&&(e.nextProducerIndex=0),Z(e)}function k_(e,t){if(Z(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(dd(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ud(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ld(e){Ea(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(mT(n),r!==n.version))return!0}return!1}function F_(e){if(Ea(e),dd(e))for(let t=0;t<e.producerNode.length;t++)ud(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ud(e,t){if(gT(e),Ea(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)ud(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ea(i),i.producerIndexOfThis[r]=t}}function dd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ea(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function gT(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function _T(){throw new Error}var vT=_T;function L_(e){vT=e}function F(e){return typeof e=="function"}function hi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Da=hi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function wr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _e=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){t=o instanceof Da?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{V_(o)}catch(s){t=t??[],s instanceof Da?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Da(t)}}add(t){var n;if(t&&t!==this)if(this.closed)V_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&wr(n,t)}remove(t){let{_finalizers:n}=this;n&&wr(n,t),t instanceof e&&t._removeParent(this)}};_e.EMPTY=(()=>{let e=new _e;return e.closed=!0,e})();var hd=_e.EMPTY;function Ta(e){return e instanceof _e||e&&"closed"in e&&F(e.remove)&&F(e.add)&&F(e.unsubscribe)}function V_(e){F(e)?e():e.unsubscribe()}var Pt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fi={setTimeout(e,t,...n){let{delegate:r}=fi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=fi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Sa(e){fi.setTimeout(()=>{let{onUnhandledError:t}=Pt;if(t)t(e);else throw e})}function xo(){}var j_=fd("C",void 0,void 0);function U_(e){return fd("E",void 0,e)}function B_(e){return fd("N",e,void 0)}function fd(e,t,n){return{kind:e,value:t,error:n}}var br=null;function pi(e){if(Pt.useDeprecatedSynchronousErrorHandling){let t=!br;if(t&&(br={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=br;if(br=null,n)throw r}}else e()}function $_(e){Pt.useDeprecatedSynchronousErrorHandling&&br&&(br.errorThrown=!0,br.error=e)}var Cr=class extends _e{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ta(t)&&t.add(this)):this.destination=bT}static create(t,n,r){return new mi(t,n,r)}next(t){this.isStopped?md(B_(t),this):this._next(t)}error(t){this.isStopped?md(U_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?md(j_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yT=Function.prototype.bind;function pd(e,t){return yT.call(e,t)}var gd=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ma(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ma(r)}else Ma(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ma(n)}}},mi=class extends Cr{constructor(t,n,r){super();let i;if(F(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Pt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&pd(t.next,o),error:t.error&&pd(t.error,o),complete:t.complete&&pd(t.complete,o)}):i=t}this.destination=new gd(i)}};function Ma(e){Pt.useDeprecatedSynchronousErrorHandling?$_(e):Sa(e)}function wT(e){throw e}function md(e,t){let{onStoppedNotification:n}=Pt;n&&fi.setTimeout(()=>n(e,t))}var bT={closed:!0,next:xo,error:wT,complete:xo};var gi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(e){return e}function _d(...e){return vd(e)}function vd(e){return e.length===0?dt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=IT(n)?n:new mi(n,r,i);return pi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=H_(r),new r((i,o)=>{let s=new mi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[gi](){return this}pipe(...n){return vd(n)(this)}toPromise(n){return n=H_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function H_(e){var t;return(t=e??Pt.Promise)!==null&&t!==void 0?t:Promise}function CT(e){return e&&F(e.next)&&F(e.error)&&F(e.complete)}function IT(e){return e&&e instanceof Cr||CT(e)&&Ta(e)}function yd(e){return F(e?.lift)}function z(e){return t=>{if(yd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,r,i){return new wd(e,t,n,r,i)}var wd=class extends Cr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function _i(){return z((e,t)=>{let n=null;e._refCount++;let r=j(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var vi=class extends q{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new _e;let n=this.getSubject();t.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=_e.EMPTY)}return t}refCount(){return _i()(this)}};var W_=hi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Aa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new W_}next(n){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hd:(this.currentObservers=null,o.push(n),new _e(()=>{this.currentObservers=null,wr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new Aa(t,n),e})(),Aa=class extends Ve{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:hd}};var je=class extends Ve{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var bd={now(){return(bd.delegate||Date).now()},delegate:void 0};var xa=class extends _e{constructor(t,n){super()}schedule(t,n=0){return this}};var No={setInterval(e,t,...n){let{delegate:r}=No;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=No;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Na=class extends xa{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return No.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&No.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,wr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var yi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};yi.now=bd.now;var Pa=class extends yi{constructor(t,n=yi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var z_=new Pa(Na);var ht=new q(e=>e.complete());function G_(e){return e&&F(e.schedule)}function q_(e){return e[e.length-1]}function Ra(e){return F(q_(e))?e.pop():void 0}function Vn(e){return G_(q_(e))?e.pop():void 0}function K_(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Y_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ir(e){return this instanceof Ir?(this.v=e,this):new Ir(e)}function Q_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){r[p]&&(i[p]=function(_){return new Promise(function(I,S){o.push([p,_,I,S])>1||c(p,_)})},m&&(i[p]=m(i[p])))}function c(p,m){try{l(r[p](m))}catch(_){h(o[0][3],_)}}function l(p){p.value instanceof Ir?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Z_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Y_=="function"?Y_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Oa=e=>e&&typeof e.length=="number"&&typeof e!="function";function ka(e){return F(e?.then)}function Fa(e){return F(e[gi])}function La(e){return Symbol.asyncIterator&&F(e?.[Symbol.asyncIterator])}function Va(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ET(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ja=ET();function Ua(e){return F(e?.[ja])}function Ba(e){return Q_(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Ir(n.read());if(i)return yield Ir(void 0);yield yield Ir(r)}}finally{n.releaseLock()}})}function $a(e){return F(e?.getReader)}function we(e){if(e instanceof q)return e;if(e!=null){if(Fa(e))return DT(e);if(Oa(e))return TT(e);if(ka(e))return ST(e);if(La(e))return J_(e);if(Ua(e))return MT(e);if($a(e))return AT(e)}throw Va(e)}function DT(e){return new q(t=>{let n=e[gi]();if(F(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function TT(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function ST(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Sa)})}function MT(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function J_(e){return new q(t=>{xT(e,t).catch(n=>t.error(n))})}function AT(e){return J_(Ba(e))}function xT(e,t){var n,r,i,o;return K_(this,void 0,void 0,function*(){try{for(n=Z_(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function rt(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ha(e,t=0){return z((n,r)=>{n.subscribe(j(r,i=>rt(r,e,()=>r.next(i),t),()=>rt(r,e,()=>r.complete(),t),i=>rt(r,e,()=>r.error(i),t)))})}function Wa(e,t=0){return z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function X_(e,t){return we(e).pipe(Wa(t),Ha(t))}function ev(e,t){return we(e).pipe(Wa(t),Ha(t))}function tv(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function nv(e,t){return new q(n=>{let r;return rt(n,t,()=>{r=e[ja](),rt(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function za(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{rt(n,t,()=>{let r=e[Symbol.asyncIterator]();rt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rv(e,t){return za(Ba(e),t)}function iv(e,t){if(e!=null){if(Fa(e))return X_(e,t);if(Oa(e))return tv(e,t);if(ka(e))return ev(e,t);if(La(e))return za(e,t);if(Ua(e))return nv(e,t);if($a(e))return rv(e,t)}throw Va(e)}function he(e,t){return t?iv(e,t):we(e)}function R(...e){let t=Vn(e);return he(e,t)}function wi(e,t){let n=F(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function Cd(e){return!!e&&(e instanceof q||F(e.lift)&&F(e.subscribe))}var Rt=hi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Id(e,t){let n=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;e.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(t.defaultValue):i(new Rt)}})})}function k(e,t){return z((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:NT}=Array;function PT(e,t){return NT(t)?e(...t):e(t)}function Ga(e){return k(t=>PT(e,t))}var{isArray:RT}=Array,{getPrototypeOf:OT,prototype:kT,keys:FT}=Object;function qa(e){if(e.length===1){let t=e[0];if(RT(t))return{args:t,keys:null};if(LT(t)){let n=FT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function LT(e){return e&&typeof e=="object"&&OT(e)===kT}function Ya(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function bi(...e){let t=Vn(e),n=Ra(e),{args:r,keys:i}=qa(e);if(r.length===0)return he([],t);let o=new q(VT(r,t,i?s=>Ya(i,s):dt));return n?o.pipe(Ga(n)):o}function VT(e,t,n=dt){return r=>{ov(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ov(t,()=>{let l=he(e[c],t),u=!1;l.subscribe(j(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ov(e,t,n){e?rt(n,e,t):t()}function sv(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},p=_=>l<r?m(_):c.push(_),m=_=>{o&&t.next(_),l++;let I=!1;we(n(_,u++)).subscribe(j(t,S=>{i?.(S),o?p(S):t.next(S)},()=>{I=!0},void 0,()=>{if(I)try{for(l--;c.length&&l<r;){let S=c.shift();s?rt(t,s,()=>m(S)):m(S)}h()}catch(S){t.error(S)}}))};return e.subscribe(j(t,p,()=>{d=!0,h()})),()=>{a?.()}}function De(e,t,n=1/0){return F(t)?De((r,i)=>k((o,s)=>t(r,o,i,s))(we(e(r,i))),n):(typeof t=="number"&&(n=t),z((r,i)=>sv(r,i,e,n)))}function Ed(e=1/0){return De(dt,e)}function av(){return Ed(1)}function jn(...e){return av()(he(e,Vn(e)))}function Ka(e){return new q(t=>{we(e()).subscribe(t)})}function Dd(...e){let t=Ra(e),{args:n,keys:r}=qa(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;we(n[u]).subscribe(j(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ya(r,a):a),o.complete())}))}});return t?i.pipe(Ga(t)):i}function Ye(e,t){return z((n,r)=>{let i=0;n.subscribe(j(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Un(e){return z((t,n)=>{let r=null,i=!1,o;r=t.subscribe(j(n,void 0,void 0,s=>{o=we(e(s,Un(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function cv(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Bn(e,t){return F(t)?De(e,t,1):De(e,1)}function Td(e,t=z_){return z((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+e,u=t.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(j(r,l=>{o=l,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function $n(e){return z((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Ot(e){return e<=0?()=>ht:z((t,n)=>{let r=0;t.subscribe(j(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Sd(e){return k(()=>e)}function Qa(e=jT){return z((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function jT(){return new Rt}function Hn(e){return z((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function zt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ye((i,o)=>e(i,o,r)):dt,Ot(1),n?$n(t):Qa(()=>new Rt))}function Ci(e){return e<=0?()=>ht:z((t,n)=>{let r=[];t.subscribe(j(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Md(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ye((i,o)=>e(i,o,r)):dt,Ci(1),n?$n(t):Qa(()=>new Rt))}function Ad(e,t){return z(cv(e,t,arguments.length>=2,!0))}function xd(e){return Ye((t,n)=>e<=n)}function Po(...e){let t=Vn(e);return z((n,r)=>{(t?jn(e,n,t):jn(e,n)).subscribe(r)})}function ft(e,t){return z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;we(e(c,u)).subscribe(i=j(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ro(e){return z((t,n)=>{we(e).subscribe(j(n,()=>n.complete(),xo)),!n.closed&&t.subscribe(n)})}function Ne(e,t,n){let r=F(e)||t||n?{next:e,error:t,complete:n}:e;return r?z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var Gv="https://g.co/ng/security#xss",A=class extends Error{constructor(t,n){super(Ec(t,n)),this.code=t}};function Ec(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Yo(e){return{toString:e}.toString()}var Za="__parameters__";function UT(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function qv(e,t,n){return Yo(()=>{let r=UT(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Za)?c[Za]:Object.defineProperty(c,Za,{value:[]})[Za];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var Oo=globalThis;function oe(e){for(let t in e)if(e[t]===oe)return t;throw Error("Could not find renamed property on target object.")}function BT(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Qe(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Qe).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function lv(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var $T=oe({__forward_ref__:oe});function yn(e){return e.__forward_ref__=yn,e.toString=function(){return Qe(this())},e}function Ke(e){return Yv(e)?e():e}function Yv(e){return typeof e=="function"&&e.hasOwnProperty($T)&&e.__forward_ref__===yn}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function be(e){return{providers:e.providers||[],imports:e.imports||[]}}function Dc(e){return uv(e,Qv)||uv(e,Zv)}function Kv(e){return Dc(e)!==null}function uv(e,t){return e.hasOwnProperty(t)?e[t]:null}function HT(e){let t=e&&(e[Qv]||e[Zv]);return t||null}function dv(e){return e&&(e.hasOwnProperty(hv)||e.hasOwnProperty(WT))?e[hv]:null}var Qv=oe({\u0275prov:oe}),hv=oe({\u0275inj:oe}),Zv=oe({ngInjectableDef:oe}),WT=oe({ngInjectorDef:oe}),M=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Jv(e){return e&&!!e.\u0275providers}var zT=oe({\u0275cmp:oe}),GT=oe({\u0275dir:oe}),qT=oe({\u0275pipe:oe}),YT=oe({\u0275mod:oe}),oc=oe({\u0275fac:oe}),ko=oe({__NG_ELEMENT_ID__:oe}),fv=oe({__NG_ENV_ID__:oe});function Tc(e){return typeof e=="string"?e:e==null?"":String(e)}function KT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Tc(e)}function QT(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new A(-200,e)}function Nh(e,t){throw new A(-201,!1)}var U=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(U||{}),Gd;function Xv(){return Gd}function wt(e){let t=Gd;return Gd=e,t}function ey(e,t,n){let r=Dc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&U.Optional)return null;if(t!==void 0)return t;Nh(e,"Injector")}var ZT={},Fo=ZT,qd="__NG_DI_FLAG__",sc="ngTempTokenPath",JT="ngTokenPath",XT=/\n/gm,eS="\u0275",pv="__source",Ti;function tS(){return Ti}function Wn(e){let t=Ti;return Ti=e,t}function nS(e,t=U.Default){if(Ti===void 0)throw new A(-203,!1);return Ti===null?ey(e,void 0,t):Ti.get(e,t&U.Optional?null:void 0,t)}function C(e,t=U.Default){return(Xv()||nS)(Ke(e),t)}function b(e,t=U.Default){return C(e,Sc(t))}function Sc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Yd(e){let t=[];for(let n=0;n<e.length;n++){let r=Ke(e[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,o=U.Default;for(let s=0;s<r.length;s++){let a=r[s],c=rS(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(C(i,o))}else t.push(C(r))}return t}function ty(e,t){return e[qd]=t,e.prototype[qd]=t,e}function rS(e){return e[qd]}function iS(e,t,n,r){let i=e[sc];throw t[pv]&&i.unshift(t[pv]),e.message=oS(`
`+e.message,i,n,r),e[JT]=i,e[sc]=null,e}function oS(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==eS?e.slice(2):e;let i=Qe(t);if(Array.isArray(t))i=t.map(Qe).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Qe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(XT,`
  `)}`}var Ph=ty(qv("Optional"),8);var ny=ty(qv("SkipSelf"),4);function Mi(e,t){let n=e.hasOwnProperty(oc);return n?e[oc]:null}function Rh(e,t){e.forEach(n=>Array.isArray(n)?Rh(n,t):t(n))}function ry(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ac(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sS(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function aS(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function cS(e,t,n){let r=Ko(e,t);return r>=0?e[r|1]=n:(r=~r,aS(e,r,t,n)),r}function Nd(e,t){let n=Ko(e,t);if(n>=0)return e[n|1]}function Ko(e,t){return lS(e,t,1)}function lS(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Ai={},bt=[],xi=new M(""),iy=new M("",-1),oy=new M(""),cc=class{get(t,n=Fo){if(n===Fo){let r=new Error(`NullInjectorError: No provider for ${Qe(t)}!`);throw r.name="NullInjectorError",r}return n}},sy=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(sy||{}),Yt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Yt||{}),We=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(We||{});function uS(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Kd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];hS(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function dS(e){return e===3||e===4||e===6}function hS(e){return e.charCodeAt(0)===64}function Lo(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?mv(e,n,i,null,t[++r]):mv(e,n,i,null,null))}}return e}function mv(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var ay="ng-template";function fS(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&uS(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Oh(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Oh(e){return e.type===4&&e.value!==ay}function pS(e,t,n){let r=e.type===4&&!n?ay:e.value;return t===r}function mS(e,t,n){let r=4,i=e.attrs,o=i!==null?vS(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!kt(r)&&!kt(c))return!1;if(s&&kt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!pS(e,c,n)||c===""&&t.length===1){if(kt(r))return!1;s=!0}}else if(r&8){if(i===null||!fS(e,i,c,n)){if(kt(r))return!1;s=!0}}else{let l=t[++a],u=gS(c,i,Oh(e),n);if(u===-1){if(kt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(kt(r))return!1;s=!0}}}}return kt(r)||s}function kt(e){return(e&1)===0}function gS(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yS(t,e)}function cy(e,t,n=!1){for(let r=0;r<t.length;r++)if(mS(e,t[r],n))return!0;return!1}function _S(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function vS(e){for(let t=0;t<e.length;t++){let n=e[t];if(dS(n))return t}return e.length}function yS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function wS(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function gv(e,t){return e?":not("+t.trim()+")":t}function bS(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kt(s)&&(t+=gv(o,i),i=""),r=s,o=o||!kt(r);n++}return i!==""&&(t+=gv(o,i)),t}function CS(e){return e.map(bS).join(",")}function IS(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!kt(i))break;i=o}r++}return{attrs:t,classes:n}}function fe(e){return Yo(()=>{let t=fy(e),n=O(g({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===sy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Yt.Emulated,styles:e.styles||bt,_:null,schemas:e.schemas||null,tView:null,id:""});py(n);let r=e.dependencies;return n.directiveDefs=vv(r,!1),n.pipeDefs=vv(r,!0),n.id=TS(n),n})}function ES(e){return Tr(e)||ly(e)}function DS(e){return e!==null}function Ce(e){return Yo(()=>({type:e.type,bootstrap:e.bootstrap||bt,declarations:e.declarations||bt,imports:e.imports||bt,exports:e.exports||bt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function _v(e,t){if(e==null)return Ai;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=We.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==We.None?[r,a]:r,t[o]=s):n[o]=r}return n}function ae(e){return Yo(()=>{let t=fy(e);return py(t),t})}function Tr(e){return e[zT]||null}function ly(e){return e[GT]||null}function uy(e){return e[qT]||null}function dy(e){let t=Tr(e)||ly(e)||uy(e);return t!==null?t.standalone:!1}function hy(e,t){let n=e[YT]||null;if(!n&&t===!0)throw new Error(`Type ${Qe(e)} does not have '\u0275mod' property.`);return n}function fy(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ai,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||bt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_v(e.inputs,t),outputs:_v(e.outputs),debugInfo:null}}function py(e){e.features?.forEach(t=>t(e))}function vv(e,t){if(!e)return null;let n=t?uy:ES;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(DS)}function TS(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Li(e){return{\u0275providers:e}}function kh(...e){return{\u0275providers:my(!0,e),\u0275fromNgModule:!0}}function my(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Rh(t,s=>{let a=s;Qd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gy(i,o),n}function gy(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Fh(i,o=>{t(o,r)})}}function Qd(e,t,n,r){if(e=Ke(e),!e)return!1;let i=null,o=dv(e),s=!o&&Tr(e);if(!o&&!s){let c=e.ngModule;if(o=dv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Qd(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rh(o.imports,u=>{Qd(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&gy(l,t)}if(!a){let l=Mi(i)||(()=>new i);t({provide:i,useFactory:l,deps:bt},i),t({provide:oy,useValue:i,multi:!0},i),t({provide:xi,useValue:()=>C(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Fh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Fh(e,t){for(let n of e)Jv(n)&&(n=n.\u0275providers),Array.isArray(n)?Fh(n,t):t(n)}var SS=oe({provide:String,useValue:oe});function _y(e){return e!==null&&typeof e=="object"&&SS in e}function MS(e){return!!(e&&e.useExisting)}function AS(e){return!!(e&&e.useFactory)}function Ni(e){return typeof e=="function"}function xS(e){return!!e.useClass}var Mc=new M(""),ec={},NS={},Pd;function Lh(){return Pd===void 0&&(Pd=new cc),Pd}var it=class{},Vo=class extends it{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jd(t,s=>this.processProvider(s)),this.records.set(iy,Ii(void 0,this)),i.has("environment")&&this.records.set(it,Ii(void 0,this));let o=this.records.get(Mc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oy,bt,U.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Wn(this),r=wt(void 0),i;try{return t()}finally{Wn(n),wt(r)}}get(t,n=Fo,r=U.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(fv))return t[fv](this);r=Sc(r);let i,o=Wn(this),s=wt(void 0);try{if(!(r&U.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=FS(t)&&Dc(t);l&&this.injectableDefInScope(l)?c=Ii(Zd(t),ec):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&U.Self?Lh():this.parent;return n=r&U.Optional&&n===Fo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sc]=a[sc]||[]).unshift(Qe(t)),o)throw a;return iS(a,t,"R3InjectorError",this.source)}else throw a}finally{wt(s),Wn(o)}}resolveInjectorInitializers(){let t=Z(null),n=Wn(this),r=wt(void 0),i;try{let o=this.get(xi,bt,U.Self);for(let s of o)s()}finally{Wn(n),wt(r),Z(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Qe(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(t){t=Ke(t);let n=Ni(t)?t:Ke(t&&t.provide),r=RS(t);if(!Ni(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Ii(void 0,ec,!0),i.factory=()=>Yd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Z(null);try{return n.value===ec&&(n.value=NS,n.value=n.factory()),typeof n.value=="object"&&n.value&&kS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Z(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ke(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Zd(e){let t=Dc(e),n=t!==null?t.factory:Mi(e);if(n!==null)return n;if(e instanceof M)throw new A(204,!1);if(e instanceof Function)return PS(e);throw new A(204,!1)}function PS(e){if(e.length>0)throw new A(204,!1);let n=HT(e);return n!==null?()=>n.factory(e):()=>new e}function RS(e){if(_y(e))return Ii(void 0,e.useValue);{let t=vy(e);return Ii(t,ec)}}function vy(e,t,n){let r;if(Ni(e)){let i=Ke(e);return Mi(i)||Zd(i)}else if(_y(e))r=()=>Ke(e.useValue);else if(AS(e))r=()=>e.useFactory(...Yd(e.deps||[]));else if(MS(e))r=()=>C(Ke(e.useExisting));else{let i=Ke(e&&(e.useClass||e.provide));if(OS(e))r=()=>new i(...Yd(e.deps));else return Mi(i)||Zd(i)}return r}function Ii(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function OS(e){return!!e.deps}function kS(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function FS(e){return typeof e=="function"||typeof e=="object"&&e instanceof M}function Jd(e,t){for(let n of e)Array.isArray(n)?Jd(n,t):n&&Jv(n)?Jd(n.\u0275providers,t):t(n)}function wn(e,t){e instanceof Vo&&e.assertNotDestroyed();let n,r=Wn(e),i=wt(void 0);try{return t()}finally{Wn(r),wt(i)}}function LS(){return Xv()!==void 0||tS()!=null}function VS(e){return typeof e=="function"}var bn=0,Y=1,P=2,ze=3,Ft=4,pt=5,jo=6,Uo=7,Lt=8,Pi=9,Vt=10,ve=11,Bo=12,yv=13,Vi=14,jt=15,Ac=16,Ei=17,Ri=18,xc=19,yy=20,zn=21,Rd=22,Sr=23,Kt=25,wy=1;var Mr=7,lc=8,uc=9,Ct=10,Vh=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Vh||{});function Er(e){return Array.isArray(e)&&typeof e[wy]=="object"}function Cn(e){return Array.isArray(e)&&e[wy]===!0}function jh(e){return(e.flags&4)!==0}function Nc(e){return e.componentOffset>-1}function Pc(e){return(e.flags&1)===1}function Gn(e){return!!e.template}function jS(e){return(e[P]&512)!==0}var Xd=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function by(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Kn(){return Cy}function Cy(e){return e.type.prototype.ngOnChanges&&(e.setInput=BS),US}Kn.ngInherit=!0;function US(){let e=Ey(this),t=e?.current;if(t){let n=e.previous;if(n===Ai)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function BS(e,t,n,r,i){let o=this.declaredInputs[r],s=Ey(e)||$S(e,{previous:Ai,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Xd(l&&l.currentValue,n,c===Ai),by(e,t,i,n)}var Iy="__ngSimpleChanges__";function Ey(e){return e[Iy]||null}function $S(e,t){return e[Iy]=t}var wv=null;var Gt=function(e,t,n){wv?.(e,t,n)},HS="svg",WS="math",zS=!1;function GS(){return zS}function Qt(e){for(;Array.isArray(e);)e=e[bn];return e}function Dy(e,t){return Qt(t[e])}function It(e,t){return Qt(t[e.index])}function Ty(e,t){return e.data[t]}function Qn(e,t){let n=t[e];return Er(n)?n:n[bn]}function Uh(e){return(e[P]&128)===128}function qS(e){return Cn(e[ze])}function Oi(e,t){return t==null?null:e[t]}function Sy(e){e[Ei]=0}function YS(e){e[P]&1024||(e[P]|=1024,Uh(e)&&$o(e))}function KS(e,t){for(;e>0;)t=t[Vi],e--;return t}function Bh(e){return!!(e[P]&9216||e[Sr]?.dirty)}function eh(e){e[Vt].changeDetectionScheduler?.notify(1),Bh(e)?$o(e):e[P]&64&&(GS()?(e[P]|=1024,$o(e)):e[Vt].changeDetectionScheduler?.notify())}function $o(e){e[Vt].changeDetectionScheduler?.notify();let t=Ho(e);for(;t!==null&&!(t[P]&8192||(t[P]|=8192,!Uh(t)));)t=Ho(t)}function My(e,t){if((e[P]&256)===256)throw new A(911,!1);e[zn]===null&&(e[zn]=[]),e[zn].push(t)}function QS(e,t){if(e[zn]===null)return;let n=e[zn].indexOf(t);n!==-1&&e[zn].splice(n,1)}function Ho(e){let t=e[ze];return Cn(t)?t[ze]:t}var G={lFrame:ky(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ZS(){return G.lFrame.elementDepthCount}function JS(){G.lFrame.elementDepthCount++}function XS(){G.lFrame.elementDepthCount--}function Ay(){return G.bindingsEnabled}function xy(){return G.skipHydrationRootTNode!==null}function eM(e){return G.skipHydrationRootTNode===e}function tM(){G.skipHydrationRootTNode=null}function te(){return G.lFrame.lView}function Ge(){return G.lFrame.tView}function ne(e){return G.lFrame.contextLView=e,e[Lt]}function re(e){return G.lFrame.contextLView=null,e}function ot(){let e=Ny();for(;e!==null&&e.type===64;)e=e.parent;return e}function Ny(){return G.lFrame.currentTNode}function nM(){let e=G.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Rr(e,t){let n=G.lFrame;n.currentTNode=e,n.isParent=t}function $h(){return G.lFrame.isParent}function Hh(){G.lFrame.isParent=!1}function rM(e){return G.lFrame.bindingIndex=e}function Rc(){return G.lFrame.bindingIndex++}function iM(e){let t=G.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function oM(){return G.lFrame.inI18n}function sM(e,t){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=e,th(t)}function aM(){return G.lFrame.currentDirectiveIndex}function th(e){G.lFrame.currentDirectiveIndex=e}function cM(e){let t=G.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Py(e){G.lFrame.currentQueryIndex=e}function lM(e){let t=e[Y];return t.type===2?t.declTNode:t.type===1?e[pt]:null}function Ry(e,t,n){if(n&U.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&U.Host);)if(i=lM(o),i===null||(o=o[Vi],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=G.lFrame=Oy();return r.currentTNode=t,r.lView=e,!0}function Wh(e){let t=Oy(),n=e[Y];G.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Oy(){let e=G.lFrame,t=e===null?null:e.child;return t===null?ky(e):t}function ky(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Fy(){let e=G.lFrame;return G.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ly=Fy;function zh(){let e=Fy();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function uM(e){return(G.lFrame.contextLView=KS(e,G.lFrame.contextLView))[Lt]}function ji(){return G.lFrame.selectedIndex}function Ar(e){G.lFrame.selectedIndex=e}function Gh(){let e=G.lFrame;return Ty(e.tView,e.selectedIndex)}function dM(){return G.lFrame.currentNamespace}var Vy=!0;function Oc(){return Vy}function kc(e){Vy=e}function hM(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Cy(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Fc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function tc(e,t,n){jy(e,t,3,n)}function nc(e,t,n,r){(e[P]&3)===n&&jy(e,t,n,r)}function Od(e,t){let n=e[P];(n&3)===t&&(n&=16383,n+=1,e[P]=n)}function jy(e,t,n,r){let i=r!==void 0?e[Ei]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Ei]+=65536),(a<o||o==-1)&&(fM(e,n,t,c),e[Ei]=(e[Ei]&4294901760)+c+2),c++}function bv(e,t){Gt(4,e,t);let n=Z(null);try{t.call(e)}finally{Z(n),Gt(5,e,t)}}function fM(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[P]>>14<e[Ei]>>16&&(e[P]&3)===t&&(e[P]+=16384,bv(a,o)):bv(a,o)}var Si=-1,xr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function pM(e){return e instanceof xr}function mM(e){return(e.flags&8)!==0}function gM(e){return(e.flags&16)!==0}function Uy(e){return e!==Si}function dc(e){return e&32767}function _M(e){return e>>16}function hc(e,t){let n=_M(e),r=t;for(;n>0;)r=r[Vi],n--;return r}var nh=!0;function Cv(e){let t=nh;return nh=e,t}var vM=256,By=vM-1,$y=5,yM=0,qt={};function wM(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ko)&&(r=n[ko]),r==null&&(r=n[ko]=yM++);let i=r&By,o=1<<i;t.data[e+(i>>$y)]|=o}function fc(e,t){let n=Hy(e,t);if(n!==-1)return n;let r=t[Y];r.firstCreatePass&&(e.injectorIndex=t.length,kd(r.data,e),kd(t,null),kd(r.blueprint,null));let i=qh(e,t),o=e.injectorIndex;if(Uy(i)){let s=dc(i),a=hc(i,t),c=a[Y].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function kd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Hy(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function qh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Yy(i),r===null)return Si;if(n++,i=i[Vi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Si}function rh(e,t,n){wM(e,t,n)}function Wy(e,t,n){if(n&U.Optional||e!==void 0)return e;Nh(t,"NodeInjector")}function zy(e,t,n,r){if(n&U.Optional&&r===void 0&&(r=null),!(n&(U.Self|U.Host))){let i=e[Pi],o=wt(void 0);try{return i?i.get(t,r,n&U.Optional):ey(t,r,n&U.Optional)}finally{wt(o)}}return Wy(r,t,n)}function Gy(e,t,n,r=U.Default,i){if(e!==null){if(t[P]&2048&&!(r&U.Self)){let s=DM(e,t,n,r,qt);if(s!==qt)return s}let o=qy(e,t,n,r,qt);if(o!==qt)return o}return zy(t,n,r,i)}function qy(e,t,n,r,i){let o=IM(n);if(typeof o=="function"){if(!Ry(t,e,r))return r&U.Host?Wy(i,n,r):zy(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&U.Optional))Nh(n);else return s}finally{Ly()}}else if(typeof o=="number"){let s=null,a=Hy(e,t),c=Si,l=r&U.Host?t[jt][pt]:null;for((a===-1||r&U.SkipSelf)&&(c=a===-1?qh(e,t):t[a+8],c===Si||!Ev(r,!1)?a=-1:(s=t[Y],a=dc(c),t=hc(c,t)));a!==-1;){let u=t[Y];if(Iv(o,a,u.data)){let d=bM(a,t,n,s,r,l);if(d!==qt)return d}c=t[a+8],c!==Si&&Ev(r,t[Y].data[a+8]===l)&&Iv(o,a,t)?(s=u,a=dc(c),t=hc(c,t)):a=-1}}return i}function bM(e,t,n,r,i,o){let s=t[Y],a=s.data[e+8],c=r==null?Nc(a)&&nh:r!=s&&(a.type&3)!==0,l=i&U.Host&&o===a,u=CM(a,s,n,c,l);return u!==null?ki(t,s,u,a):qt}function CM(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let p=d;p<h;p++){let m=s[p];if(p<c&&n===m||p>=c&&m.type===n)return p}if(i){let p=s[c];if(p&&Gn(p)&&p.type===n)return c}return null}function ki(e,t,n,r){let i=e[n],o=t.data;if(pM(i)){let s=i;s.resolving&&QT(KT(o[n]));let a=Cv(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?wt(s.injectImpl):null,u=Ry(e,r,U.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&hM(n,o[n],t)}finally{l!==null&&wt(l),Cv(a),s.resolving=!1,Ly()}}return i}function IM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ko)?e[ko]:void 0;return typeof t=="number"?t>=0?t&By:EM:t}function Iv(e,t,n){let r=1<<e;return!!(n[t+(e>>$y)]&r)}function Ev(e,t){return!(e&U.Self)&&!(e&U.Host&&t)}var Dr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Gy(this._tNode,this._lView,t,Sc(r),n)}};function EM(){return new Dr(ot(),te())}function Zn(e){return Yo(()=>{let t=e.prototype.constructor,n=t[oc]||ih(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[oc]||ih(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ih(e){return Yv(e)?()=>{let t=ih(Ke(e));return t&&t()}:Mi(e)}function DM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[P]&2048&&!(s[P]&512);){let a=qy(o,s,n,r|U.Self,qt);if(a!==qt)return a;let c=o.parent;if(!c){let l=s[yy];if(l){let u=l.get(n,qt,r);if(u!==qt)return u}c=Yy(s),s=s[Vi]}o=c}return i}function Yy(e){let t=e[Y],n=t.type;return n===2?t.declTNode:n===1?e[pt]:null}function Dv(e,t=null,n=null,r){let i=Ky(e,t,n,r);return i.resolveInjectorInitializers(),i}function Ky(e,t=null,n=null,r,i=new Set){let o=[n||bt,kh(e)];return r=r||(typeof e=="object"?void 0:Qe(e)),new Vo(o,t||Lh(),r||null,i)}var Ui=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Fo}static{this.NULL=new cc}static create(n,r){if(Array.isArray(n))return Dv({name:""},r,n,"");{let i=n.name??"";return Dv({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=E({token:e,providedIn:"any",factory:()=>C(iy)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var TM="ngOriginalError";function Fd(e){return e[TM]}var _n=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Fd(t);for(;n&&Fd(n);)n=Fd(n);return n||null}},Qy=new M("",{providedIn:"root",factory:()=>b(_n).handleError.bind(void 0)}),Zy=(()=>{class e{static{this.__NG_ELEMENT_ID__=SM}static{this.__NG_ENV_ID__=n=>n}}return e})(),oh=class extends Zy{constructor(t){super(),this._lView=t}onDestroy(t){return My(this._lView,t),()=>QS(this._lView,t)}};function SM(){return new oh(te())}function MM(){return Lc(ot(),te())}function Lc(e,t){return new Ze(It(e,t))}var Ze=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=MM}}return e})();var sh=class extends Ve{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,LS()&&(this.destroyRef=b(Zy,{optional:!0})??void 0)}emit(t){let n=Z(null);try{super.next(t)}finally{Z(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Ld(o),i&&(i=Ld(i)),s&&(s=Ld(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof _e&&t.add(a),a}};function Ld(e){return t=>{setTimeout(e,void 0,t)}}var Pe=sh;function Jy(e){return(e.flags&128)===128}var Xy=new Map,AM=0;function xM(){return AM++}function NM(e){Xy.set(e[xc],e)}function PM(e){Xy.delete(e[xc])}var Tv="__ngContext__";function qn(e,t){Er(t)?(e[Tv]=t[xc],NM(t)):e[Tv]=t}function ew(e){return nw(e[Bo])}function tw(e){return nw(e[Ft])}function nw(e){for(;e!==null&&!Cn(e);)e=e[Ft];return e}var ah;function rw(e){ah=e}function RM(){if(ah!==void 0)return ah;if(typeof document<"u")return document;throw new A(210,!1)}var Vc=new M("",{providedIn:"root",factory:()=>OM}),OM="ng",Yh=new M(""),Zt=new M("",{providedIn:"platform",factory:()=>"unknown"});var Qo=new M("",{providedIn:"root",factory:()=>RM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kM="h",FM="b";var LM=()=>null;function Kh(e,t,n=!1){return LM(e,t,n)}var iw=!1,VM=new M("",{providedIn:"root",factory:()=>iw});var pc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gv})`}};function jc(e){return e instanceof pc?e.changingThisBreaksApplicationSecurity:e}function ow(e,t){let n=jM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Gv})`)}return n===t}function jM(e){return e instanceof pc&&e.getTypeName()||null}var UM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sw(e){return e=String(e),e.match(UM)?e:"unsafe:"+e}var Qh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Qh||{});function Zh(e){let t=BM();return t?t.sanitize(Qh.URL,e)||"":ow(e,"URL")?jc(e):sw(Tc(e))}function BM(){let e=te();return e&&e[Vt].sanitizer}var $M=/^>|^->|<!--|-->|--!>|<!-$/g,HM=/(<|>)/g,WM="\u200B$1\u200B";function zM(e){return e.replace($M,t=>t.replace(HM,WM))}function aw(e){return e instanceof Function?e():e}var vn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(vn||{}),GM;function Jh(e,t){return GM(e,t)}function Di(e,t,n,r,i){if(r!=null){let o,s=!1;Cn(r)?o=r:Er(r)&&(s=!0,r=r[bn]);let a=Qt(r);e===0&&n!==null?i==null?fw(t,n,a):mc(t,n,a,i||null,!0):e===1&&n!==null?mc(t,n,a,i||null,!0):e===2?cA(t,a,s):e===3&&t.destroyNode(a),o!=null&&uA(t,e,o,n,i)}}function qM(e,t){return e.createText(t)}function YM(e,t,n){e.setValue(t,n)}function KM(e,t){return e.createComment(zM(t))}function cw(e,t,n){return e.createElement(t,n)}function QM(e,t){lw(e,t),t[bn]=null,t[pt]=null}function ZM(e,t,n,r,i,o){r[bn]=i,r[pt]=t,Bc(e,r,n,1,i,o)}function lw(e,t){t[Vt].changeDetectionScheduler?.notify(1),Bc(e,t,t[ve],2,null,null)}function JM(e){let t=e[Bo];if(!t)return Vd(e[Y],e);for(;t;){let n=null;if(Er(t))n=t[Bo];else{let r=t[Ct];r&&(n=r)}if(!n){for(;t&&!t[Ft]&&t!==e;)Er(t)&&Vd(t[Y],t),t=t[ze];t===null&&(t=e),Er(t)&&Vd(t[Y],t),n=t&&t[Ft]}t=n}}function XM(e,t,n,r){let i=Ct+r,o=n.length;r>0&&(n[i-1][Ft]=t),r<o-Ct?(t[Ft]=n[i],ry(n,Ct+r,t)):(n.push(t),t[Ft]=null),t[ze]=n;let s=t[Ac];s!==null&&n!==s&&eA(s,t);let a=t[Ri];a!==null&&a.insertView(e),eh(t),t[P]|=128}function eA(e,t){let n=e[uc],i=t[ze][ze][jt];t[jt]!==i&&(e[P]|=Vh.HasTransplantedViews),n===null?e[uc]=[t]:n.push(t)}function uw(e,t){let n=e[uc],r=n.indexOf(t);n.splice(r,1)}function ch(e,t){if(e.length<=Ct)return;let n=Ct+t,r=e[n];if(r){let i=r[Ac];i!==null&&i!==e&&uw(i,r),t>0&&(e[n-1][Ft]=r[Ft]);let o=ac(e,Ct+t);QM(r[Y],r);let s=o[Ri];s!==null&&s.detachView(o[Y]),r[ze]=null,r[Ft]=null,r[P]&=-129}return r}function dw(e,t){if(!(t[P]&256)){let n=t[ve];n.destroyNode&&Bc(e,t,n,3,null,null),JM(t)}}function Vd(e,t){if(t[P]&256)return;let n=Z(null);try{t[P]&=-129,t[P]|=256,t[Sr]&&F_(t[Sr]),nA(e,t),tA(e,t),t[Y].type===1&&t[ve].destroy();let r=t[Ac];if(r!==null&&Cn(t[ze])){r!==t[ze]&&uw(r,t);let i=t[Ri];i!==null&&i.detachView(e)}PM(t)}finally{Z(n)}}function tA(e,t){let n=e.cleanup,r=t[Uo];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Uo]=null);let i=t[zn];if(i!==null){t[zn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function nA(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof xr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Gt(4,a,c);try{c.call(a)}finally{Gt(5,a,c)}}else{Gt(4,i,o);try{o.call(i)}finally{Gt(5,i,o)}}}}}function hw(e,t,n){return rA(e,t.parent,n)}function rA(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[bn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Yt.None||o===Yt.Emulated)return null}return It(r,n)}}function mc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function fw(e,t,n){e.appendChild(t,n)}function Sv(e,t,n,r,i){r!==null?mc(e,t,n,r,i):fw(e,t,n)}function iA(e,t,n,r){e.removeChild(t,n,r)}function Xh(e,t){return e.parentNode(t)}function oA(e,t){return e.nextSibling(t)}function pw(e,t,n){return aA(e,t,n)}function sA(e,t,n){return e.type&40?It(e,n):null}var aA=sA,Mv;function Uc(e,t,n,r){let i=hw(e,r,t),o=t[ve],s=r.parent||t[pt],a=pw(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Sv(o,i,n[c],a,!1);else Sv(o,i,n,a,!1);Mv!==void 0&&Mv(o,r,t,n,i)}function rc(e,t){if(t!==null){let n=t.type;if(n&3)return It(t,e);if(n&4)return lh(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return rc(e,r);{let i=e[t.index];return Cn(i)?lh(-1,i):Qt(i)}}else{if(n&32)return Jh(t,e)()||Qt(e[t.index]);{let r=mw(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Ho(e[jt]);return rc(i,r)}else return rc(e,t.next)}}}return null}function mw(e,t){if(t!==null){let r=e[jt][pt],i=t.projection;return r.projection[i]}return null}function lh(e,t){let n=Ct+e+1;if(n<t.length){let r=t[n],i=r[Y].firstChild;if(i!==null)return rc(r,i)}return t[Mr]}function cA(e,t,n){let r=Xh(e,t);r&&iA(e,r,t,n)}function ef(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&qn(Qt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ef(e,t,n.child,r,i,o,!1),Di(t,e,i,a,o);else if(c&32){let l=Jh(n,r),u;for(;u=l();)Di(t,e,i,u,o);Di(t,e,i,a,o)}else c&16?gw(e,t,r,n,i,o):Di(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Bc(e,t,n,r,i,o){ef(n,r,e.firstChild,t,i,o,!1)}function lA(e,t,n){let r=t[ve],i=hw(e,n,t),o=n.parent||t[pt],s=pw(o,n,t);gw(r,0,t,n,i,s)}function gw(e,t,n,r,i,o){let s=n[jt],c=s[pt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Di(t,e,i,u,o)}else{let l=c,u=s[ze];Jy(r)&&(l.flags|=128),ef(e,t,l,u,i,o,!0)}}function uA(e,t,n,r,i){let o=n[Mr],s=Qt(n);o!==s&&Di(t,e,r,o,i);for(let a=Ct;a<n.length;a++){let c=n[a];Bc(c[Y],c,e,t,r,o)}}function dA(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:vn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vn.Important),e.setStyle(n,r,i,o))}}function hA(e,t,n){e.setAttribute(t,"style",n)}function _w(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function vw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Kd(e,t,r),i!==null&&_w(e,t,i),o!==null&&hA(e,t,o)}var Bi={};function x(e=1){yw(Ge(),te(),ji()+e,!1)}function yw(e,t,n,r){if(!r)if((t[P]&3)===3){let o=e.preOrderCheckHooks;o!==null&&tc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&nc(t,o,0,n)}Ar(n)}function D(e,t=U.Default){let n=te();if(n===null)return C(e,t);let r=ot();return Gy(r,n,Ke(e),t)}function ww(e,t,n,r,i,o){let s=Z(null);try{let a=null;i&We.SignalBased&&(a=t[r][cd]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&We.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):by(t,a,r,o)}finally{Z(s)}}function fA(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],a=n[++r];sM(s,o);let c=t[o];a(2,c)}}}finally{Ar(-1)}}function $c(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[bn]=i,d[P]=r|4|128|8|64,(l!==null||e&&e[P]&2048)&&(d[P]|=2048),Sy(d),d[ze]=d[Vi]=e,d[Lt]=n,d[Vt]=s||e&&e[Vt],d[ve]=a||e&&e[ve],d[Pi]=c||e&&e[Pi]||null,d[pt]=o,d[xc]=xM(),d[jo]=u,d[yy]=l,d[jt]=t.type==2?e[jt]:d,d}function $i(e,t,n,r,i){let o=e.data[t];if(o===null)o=pA(e,t,n,r,i),oM()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=nM();o.injectorIndex=s===null?-1:s.injectorIndex}return Rr(o,!0),o}function pA(e,t,n,r,i){let o=Ny(),s=$h(),a=s?o:o&&o.parent,c=e.data[t]=yA(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function bw(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Cw(e,t,n,r,i){let o=ji(),s=r&2;try{Ar(-1),s&&t.length>Kt&&yw(e,t,Kt,!1),Gt(s?2:0,i),n(r,i)}finally{Ar(o),Gt(s?3:1,i)}}function tf(e,t,n){if(jh(t)){let r=Z(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Z(r)}}}function nf(e,t,n){Ay()&&(DA(e,t,n,It(n,t)),(n.flags&64)===64&&Tw(e,t,n))}function rf(e,t,n=It){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Iw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=of(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function of(e,t,n,r,i,o,s,a,c,l,u){let d=Kt+r,h=d+i,p=mA(d,h),m=typeof l=="function"?l():l;return p[Y]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function mA(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Bi);return n}function gA(e,t,n,r){let o=r.get(VM,iw)||n===Yt.ShadowDom,s=e.selectRootElement(t,o);return _A(s),s}function _A(e){vA(e)}var vA=()=>null;function yA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return xy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Av(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=We.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?xv(r,n,l,a,c):xv(r,n,l,a)}return r}function xv(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function wA(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,m=h?h.outputs:null;c=Av(0,d.inputs,u,c,p),l=Av(1,d.outputs,u,l,m);let _=c!==null&&s!==null&&!Oh(t)?FA(c,u,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function bA(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Ew(e,t,n,r,i,o,s,a){let c=It(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(af(e,n,u,r,i),Nc(t)&&CA(n,t.index)):t.type&3?(r=bA(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function CA(e,t){let n=Qn(t,e);n[P]&16||(n[P]|=64)}function sf(e,t,n,r){if(Ay()){let i=r===null?null:{"":-1},o=SA(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Dw(e,t,n,s,i,a),i&&MA(n,r,i)}n.mergedAttrs=Lo(n.mergedAttrs,n.attrs)}function Dw(e,t,n,r,i,o){for(let l=0;l<r.length;l++)rh(fc(n,t),e,r[l].type);xA(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=bw(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Lo(n.mergedAttrs,u.hostAttrs),NA(e,n,t,c,u),AA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}wA(e,n,o)}function IA(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;EA(s)!=a&&s.push(a),s.push(n,r,o)}}function EA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function DA(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Nc(n)&&PA(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||fc(n,t),qn(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=ki(t,e,a,n);if(qn(l,t),s!==null&&kA(t,a-i,l,c,n,s),Gn(c)){let u=Qn(n.index,t);u[Lt]=ki(t,e,a,n)}}}function Tw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=aM();try{Ar(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];th(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TA(c,l)}}finally{Ar(-1),th(s)}}function TA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function SA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(cy(t,s.selectors,!1))if(r||(r=[]),Gn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;uh(e,t,c)}else r.unshift(s),uh(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function uh(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function MA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new A(-301,!1);r.push(t[i],o)}}}function AA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Gn(t)&&(n[""]=e)}}function xA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function NA(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Mi(i.type,!0)),s=new xr(o,Gn(i),D);e.blueprint[r]=s,n[r]=s,IA(e,t,r,bw(e,n,i.hostVars,Bi),i)}function PA(e,t,n){let r=It(t,e),i=Iw(n),o=e[Vt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Hc(e,$c(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function RA(e,t,n,r,i,o){let s=It(e,t);OA(t[ve],s,o,e.value,n,r,i)}function OA(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Tc(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function kA(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];ww(r,n,c,l,u,d)}}function FA(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Sw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Mw(e,t){let n=e.contentQueries;if(n!==null){let r=Z(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Py(o),a.contentQueries(2,t[s],s)}}}finally{Z(r)}}}function Hc(e,t){return e[Bo]?e[yv][Ft]=t:e[Bo]=t,e[yv]=t,t}function dh(e,t,n){Py(0);let r=Z(null);try{t(e,n)}finally{Z(r)}}function LA(e){return e[Uo]||(e[Uo]=[])}function VA(e){return e.cleanup||(e.cleanup=[])}function Aw(e,t){let n=e[Pi],r=n?n.get(_n,null):null;r&&r.handleError(t)}function af(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];ww(u,l,r,a,c,i)}}function jA(e,t,n){let r=Dy(t,e);YM(e[ve],r,n)}function UA(e,t){let n=Qn(t,e),r=n[Y];BA(r,n);let i=n[bn];i!==null&&n[jo]===null&&(n[jo]=Kh(i,n[Pi])),cf(r,n,n[Lt])}function BA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function cf(e,t,n){Wh(t);try{let r=e.viewQuery;r!==null&&dh(1,r,n);let i=e.template;i!==null&&Cw(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ri]?.finishViewCreation(e),e.staticContentQueries&&Mw(e,t),e.staticViewQueries&&dh(2,e.viewQuery,n);let o=e.components;o!==null&&$A(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[P]&=-5,zh()}}function $A(e,t){for(let n=0;n<t.length;n++)UA(e,t[n])}function HA(e,t,n,r){let i=Z(null);try{let o=t.tView,a=e[P]&4096?4096:16,c=$c(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Ac]=l;let u=e[Ri];return u!==null&&(c[Ri]=u.createEmbeddedView(o)),cf(o,c,n),c}finally{Z(i)}}function Nv(e,t){return!t||t.firstChild===null||Jy(e)}function WA(e,t,n,r=!0){let i=t[Y];if(XM(i,t,e,n),r){let s=lh(n,e),a=t[ve],c=Xh(a,e[Mr]);c!==null&&ZM(i,e[pt],a,t,c,s)}let o=t[jo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gc(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Qt(o)),Cn(o)&&zA(o,r);let s=n.type;if(s&8)gc(e,t,n.child,r);else if(s&32){let a=Jh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=mw(t,n);if(Array.isArray(a))r.push(...a);else{let c=Ho(t[jt]);gc(c[Y],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function zA(e,t){for(let n=Ct;n<e.length;n++){let r=e[n],i=r[Y].firstChild;i!==null&&gc(r[Y],r,i,t)}e[Mr]!==e[bn]&&t.push(e[Mr])}var xw=[];function GA(e){return e[Sr]??qA(e)}function qA(e){let t=xw.pop()??Object.create(KA);return t.lView=e,t}function YA(e){e.lView[Sr]!==e&&(e.lView=null,xw.push(e))}var KA=O(g({},R_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{$o(e.lView)},consumerOnSignalRead(){this.lView[Sr]=this}}),Nw=100;function Pw(e,t=!0,n=0){let r=e[Vt],i=r.rendererFactory,o=!1;o||i.begin?.();try{QA(e,n)}catch(s){throw t&&Aw(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function QA(e,t){hh(e,t);let n=0;for(;Bh(e);){if(n===Nw)throw new A(103,!1);n++,hh(e,1)}}function ZA(e,t,n,r){let i=t[P];if((i&256)===256)return;let o=!1;!o&&t[Vt].inlineEffectRunner?.flush(),Wh(t);let s=null,a=null;!o&&JA(e)&&(a=GA(t),s=O_(a));try{Sy(t),rM(e.bindingStartIndex),n!==null&&Cw(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=e.preOrderCheckHooks;d!==null&&tc(t,d,null)}else{let d=e.preOrderHooks;d!==null&&nc(t,d,0,null),Od(t,0)}if(XA(t),Rw(t,0),e.contentQueries!==null&&Mw(e,t),!o)if(c){let d=e.contentCheckHooks;d!==null&&tc(t,d)}else{let d=e.contentHooks;d!==null&&nc(t,d,1),Od(t,1)}fA(e,t);let l=e.components;l!==null&&kw(t,l,0);let u=e.viewQuery;if(u!==null&&dh(2,u,r),!o)if(c){let d=e.viewCheckHooks;d!==null&&tc(t,d)}else{let d=e.viewHooks;d!==null&&nc(t,d,2),Od(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Rd]){for(let d of t[Rd])d();t[Rd]=null}o||(t[P]&=-73)}catch(c){throw $o(t),c}finally{a!==null&&(k_(a,s),YA(a)),zh()}}function JA(e){return e.type!==2}function Rw(e,t){for(let n=ew(e);n!==null;n=tw(n))for(let r=Ct;r<n.length;r++){let i=n[r];Ow(i,t)}}function XA(e){for(let t=ew(e);t!==null;t=tw(t)){if(!(t[P]&Vh.HasTransplantedViews))continue;let n=t[uc];for(let r=0;r<n.length;r++){let i=n[r],o=i[ze];YS(i)}}}function ex(e,t,n){let r=Qn(t,e);Ow(r,n)}function Ow(e,t){Uh(e)&&hh(e,t)}function hh(e,t){let r=e[Y],i=e[P],o=e[Sr],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ld(o)),o&&(o.dirty=!1),e[P]&=-9217,s)ZA(r,e,r.template,e[Lt]);else if(i&8192){Rw(e,1);let a=r.components;a!==null&&kw(e,a,1)}}function kw(e,t,n){for(let r=0;r<t.length;r++)ex(e,t[r],n)}function lf(e){for(e[Vt].changeDetectionScheduler?.notify();e;){e[P]|=64;let t=Ho(e);if(jS(e)&&!t)return e;e=t}return null}var Nr=class{get rootNodes(){let t=this._lView,n=t[Y];return gc(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Lt]}set context(t){this._lView[Lt]=t}get destroyed(){return(this._lView[P]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ze];if(Cn(t)){let n=t[lc],r=n?n.indexOf(this):-1;r>-1&&(ch(t,r),ac(n,r))}this._attachedToViewContainer=!1}dw(this._lView[Y],this._lView)}onDestroy(t){My(this._lView,t)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[P]&=-129}reattach(){eh(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,Pw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,lw(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=t,eh(this._lView)}},Wc=(()=>{class e{static{this.__NG_ELEMENT_ID__=rx}}return e})(),tx=Wc,nx=class extends tx{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=HA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Nr(i)}};function rx(){return ix(ot(),te())}function ix(e,t){return e.type&4?new nx(t,e,Lc(e,t)):null}var u4=new RegExp(`^(\\d+)*(${FM}|${kM})*(.*)`);var ox=()=>null;function Pv(e,t){return ox(e,t)}var fh=class{},ph=class{},_c=class{};function sx(e){let t=Error(`No component factory found for ${Qe(e)}.`);return t[ax]=e,t}var ax="ngComponent";var mh=class{resolveComponentFactory(t){throw sx(t)}},zc=(()=>{class e{static{this.NULL=new mh}}return e})(),Wo=class{},Jn=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>cx()}}return e})();function cx(){let e=te(),t=ot(),n=Qn(t.index,e);return(Er(n)?n:e)[ve]}var lx=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>null})}}return e})(),jd={};var Rv=new Set;function uf(e){Rv.has(e)||(Rv.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Ov(...e){}function ux(){let e=typeof Oo.requestAnimationFrame=="function",t=Oo[e?"requestAnimationFrame":"setTimeout"],n=Oo[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var se=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=ux().nativeRequestAnimationFrame,fx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new A(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,dx,Ov,Ov);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},dx={};function df(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function hx(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Oo,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gh(e),e.isCheckStableRunning=!0,df(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gh(e))}function fx(e){let t=()=>{hx(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(px(a))return n.invokeTask(i,o,s,a);try{return kv(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Fv(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return kv(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),Fv(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,gh(e),df(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function gh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function kv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Fv(e){e._nesting--,df(e)}function px(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var Fw=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})();function vc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=lv(i,a);else if(o==2){let c=a,l=t[++s];r=lv(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var yc=class extends zc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Tr(t);return new zo(n,this.ngModule)}};function Lv(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function mx(e){let t=e.toLowerCase();return t==="svg"?HS:t==="math"?WS:null}var _h=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Sc(r);let i=this.injector.get(t,jd,r);return i!==jd||n===jd?i:this.parentInjector.get(t,n,r)}},zo=class extends _c{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Lv(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Lv(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=CS(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Z(null);try{i=i||this.ngModule;let s=i instanceof it?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new _h(t,s):t,c=a.get(Wo,null);if(c===null)throw new A(407,!1);let l=a.get(lx,null),u=a.get(Fw,null),d=a.get(fh,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?gA(p,r,this.componentDef.encapsulation,a):cw(p,m,mx(m)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let S=null;_!==null&&(S=Kh(_,a,!0));let ue=of(0,null,null,1,0,null,null,null,null,null,null),H=$c(null,ue,null,I,null,null,h,p,a,null,S);Wh(H);let Le,Ln;try{let ut=this.componentDef,di,sd=null;ut.findHostDirectiveDefs?(di=[],sd=new Map,ut.findHostDirectiveDefs(ut,di,sd),di.push(ut)):di=[ut];let cT=gx(H,_),lT=_x(cT,_,ut,di,H,h,p);Ln=Ty(ue,Kt),_&&wx(p,ut,_,r),n!==void 0&&bx(Ln,this.ngContentSelectors,n),Le=yx(lT,ut,di,sd,H,[Cx]),cf(ue,H,null)}finally{zh()}return new vh(this.componentType,Le,Lc(Ln,H),H,Ln)}finally{Z(o)}}},vh=class extends ph{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Nr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;af(o[Y],o,i,t,n),this.previousInputValues.set(t,n);let s=Qn(this._tNode.index,o);lf(s)}}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function gx(e,t){let n=e[Y],r=Kt;return e[r]=t,$i(n,r,2,"#host",null)}function _x(e,t,n,r,i,o,s){let a=i[Y];vx(r,e,t,s);let c=null;t!==null&&(c=Kh(t,i[Pi]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=$c(i,Iw(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&uh(a,e,r.length-1),Hc(i,d),i[e.index]=d}function vx(e,t,n,r){for(let i of e)t.mergedAttrs=Lo(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(vc(t,t.mergedAttrs,!0),n!==null&&vw(r,n,t))}function yx(e,t,n,r,i,o){let s=ot(),a=i[Y],c=It(s,i);Dw(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=ki(i,a,d,s);qn(h,i)}Tw(a,i,s),c&&qn(c,i);let l=ki(i,a,s.directiveStart+s.componentOffset,s);if(e[Lt]=i[Lt]=l,o!==null)for(let u of o)u(l,t);return tf(a,s,i),l}function wx(e,t,n,r){if(r)Kd(e,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=IS(t.selectors[0]);i&&Kd(e,n,i),o&&o.length>0&&_w(e,n,o.join(" "))}}function bx(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Cx(){let e=ot();Fc(te()[Y],e)}var Hi=(()=>{class e{static{this.__NG_ELEMENT_ID__=Ix}}return e})();function Ix(){let e=ot();return Dx(e,te())}var Ex=Hi,Lw=class extends Ex{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Lc(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){let t=qh(this._hostTNode,this._hostLView);if(Uy(t)){let n=hc(t,this._hostLView),r=dc(t),i=n[Y].data[r+8];return new Dr(i,n)}else return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Vv(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Pv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Nv(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!VS(t),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?t:new zo(Tr(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?l:this.parentInjector).get(it,null);_&&(o=_)}let u=Tr(c.componentType??{}),d=Pv(this._lContainer,u?.id??null),h=d?.firstChild??null,p=c.create(l,i,h,o);return this.insertImpl(p.hostView,a,Nv(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(qS(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[ze],l=new Lw(c,c[pt],c[ze]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return WA(s,i,o,r),t.attachToViewContainerRef(),ry(Ud(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Vv(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);r&&(ac(Ud(this._lContainer),n),dw(r[Y],r))}detach(t){let n=this._adjustIndex(t,-1),r=ch(this._lContainer,n);return r&&ac(Ud(this._lContainer),n)!=null?new Nr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Vv(e){return e[lc]}function Ud(e){return e[lc]||(e[lc]=[])}function Dx(e,t){let n,r=t[e.index];return Cn(r)?n=r:(n=Sw(r,t,null,e),t[e.index]=n,Hc(t,n)),Sx(n,t,e,r),new Lw(n,e,t)}function Tx(e,t){let n=e[ve],r=n.createComment(""),i=It(t,e),o=Xh(n,i);return mc(n,o,r,oA(n,i),!1),r}var Sx=xx,Mx=()=>!1;function Ax(e,t,n){return Mx(e,t,n)}function xx(e,t,n,r){if(e[Mr])return;let i;n.type&8?i=Qt(r):i=Tx(t,n),e[Mr]=i}function Vw(e){return typeof e=="function"&&e[cd]!==void 0}function jw(e){return Vw(e)&&typeof e.set=="function"}function Nx(e){return Object.getPrototypeOf(e.prototype).constructor}function Ut(e){let t=Nx(e.type),n=!0,r=[e];for(;t;){let i;if(Gn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new A(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Ja(e.inputs),s.inputTransforms=Ja(e.inputTransforms),s.declaredInputs=Ja(e.declaredInputs),s.outputs=Ja(e.outputs);let a=i.hostBindings;a&&Fx(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Ox(e,c),l&&kx(e,l),Px(e,i),BT(e.outputs,i.outputs),Gn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Ut&&(n=!1)}}t=Object.getPrototypeOf(t)}Rx(r)}function Px(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function Rx(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Lo(i.hostAttrs,n=Lo(n,i.hostAttrs))}}function Ja(e){return e===Ai?{}:e===bt?[]:e}function Ox(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function kx(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function Fx(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var Yn=class{},Go=class{};var yh=class extends Yn{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yc(this);let i=hy(t);this._bootstrapComponents=aw(i.bootstrap),this._r3Injector=Ky(t,n,[{provide:Yn,useValue:this},{provide:zc,useValue:this.componentFactoryResolver},...r],Qe(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},wh=class extends Go{constructor(t){super(),this.moduleType=t}create(t){return new yh(this.moduleType,t,[])}};var wc=class extends Yn{constructor(t){super(),this.componentFactoryResolver=new yc(this),this.instance=null;let n=new Vo([...t.providers,{provide:Yn,useValue:this},{provide:zc,useValue:this.componentFactoryResolver}],t.parent||Lh(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function hf(e,t,n=null){return new wc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Or=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Uw(e){return Vx(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Lx(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Vx(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Zo(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function jx(e){return(e.flags&32)===32}function Ux(e,t,n,r,i,o,s,a,c){let l=t.consts,u=$i(t,e,4,s||null,Oi(l,a));sf(t,n,u,Oi(l,c)),Fc(t,u);let d=u.tView=of(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function ye(e,t,n,r,i,o,s,a){let c=te(),l=Ge(),u=e+Kt,d=l.firstCreatePass?Ux(u,l,c,t,n,r,i,o,s):l.data[u];Rr(d,!1);let h=Bx(l,c,d,e);Oc()&&Uc(l,c,h,d),qn(h,c);let p=Sw(h,c,h,d);return c[u]=p,Hc(c,p),Ax(p,d,c),Pc(d)&&nf(l,c,d),s!=null&&rf(c,d,a),ye}var Bx=$x;function $x(e,t,n,r){return kc(!0),t[ve].createComment("")}function kr(e,t,n,r){let i=te(),o=Rc();if(Zo(i,o,t)){let s=Ge(),a=Gh();RA(a,i,e,t,n,r)}return kr}function Hx(e,t,n,r){return Zo(e,Rc(),n)?t+Tc(n)+r:Bi}function Xa(e,t){return e<<17|t<<2}function Pr(e){return e>>17&32767}function Wx(e){return(e&2)==2}function zx(e,t){return e&131071|t<<17}function bh(e){return e|2}function Fi(e){return(e&131068)>>2}function Bd(e,t){return e&-131069|t<<2}function Gx(e){return(e&1)===1}function Ch(e){return e|1}function qx(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Pr(s),c=Fi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ko(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Pr(e[a+1]);e[r+1]=Xa(h,a),h!==0&&(e[h+1]=Bd(e[h+1],r)),e[a+1]=zx(e[a+1],r)}else e[r+1]=Xa(a,0),a!==0&&(e[a+1]=Bd(e[a+1],r)),a=r;else e[r+1]=Xa(c,0),a===0?a=r:e[c+1]=Bd(e[c+1],r),c=r;l&&(e[r+1]=bh(e[r+1])),jv(e,u,r,!0),jv(e,u,r,!1),Yx(t,u,e,r,o),s=Xa(a,c),o?t.classBindings=s:t.styleBindings=s}function Yx(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Ko(o,t)>=0&&(n[r+1]=Ch(n[r+1]))}function jv(e,t,n,r){let i=e[n+1],o=t===null,s=r?Pr(i):Fi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];Kx(c,t)&&(a=!0,e[s+1]=r?Ch(l):bh(l)),s=r?Pr(l):Fi(l)}a&&(e[n+1]=r?bh(i):Ch(i))}function Kx(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Ko(e,t)>=0:!1}function ie(e,t,n){let r=te(),i=Rc();if(Zo(r,i,t)){let o=Ge(),s=Gh();Ew(o,s,r,e,t,r[ve],n,!1)}return ie}function Uv(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";af(e,n,o[s],s,r)}function Wi(e,t,n){return Bw(e,t,n,!1),Wi}function Jt(e,t){return Bw(e,t,null,!0),Jt}function Bw(e,t,n,r){let i=te(),o=Ge(),s=iM(2);if(o.firstUpdatePass&&Zx(o,e,s,r),t!==Bi&&Zo(i,s,t)){let a=o.data[ji()];nN(o,a,i,i[ve],e,i[s+1]=rN(t,n),r,s)}}function Qx(e,t){return t>=e.expandoStartIndex}function Zx(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[ji()],s=Qx(e,n);iN(o,r)&&t===null&&!s&&(t=!1),t=Jx(i,o,t,r),qx(i,o,t,n,s,r)}}function Jx(e,t,n,r){let i=cM(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=$d(null,e,t,n,r),n=qo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=$d(i,e,t,n,r),o===null){let c=Xx(e,t,r);c!==void 0&&Array.isArray(c)&&(c=$d(null,e,t,c[1],r),c=qo(c,t.attrs,r),eN(e,t,r,c))}else o=tN(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function Xx(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Fi(r)!==0)return e[Pr(r)]}function eN(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Pr(i)]=r}function tN(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=qo(r,s,n)}return qo(r,t.attrs,n)}function $d(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=qo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function qo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),cS(e,s,n?!0:t[++o]))}return e===void 0?null:e}function nN(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=Gx(l)?Bv(c,t,n,i,Fi(l),s):void 0;if(!bc(u)){bc(o)||Wx(l)&&(o=Bv(c,null,n,i,a,s));let d=Dy(ji(),n);dA(r,s,d,i,o)}}function Bv(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Bi&&(h=d?bt:void 0);let p=d?Nd(h,r):u===r?h:void 0;if(l&&!bc(p)&&(p=Nd(c,r)),bc(p)&&(a=p,s))return a;let m=e[i+1];i=s?Pr(m):Fi(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Nd(c,r))}return a}function bc(e){return e!==void 0}function rN(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Qe(jc(e)))),e}function iN(e,t){return(e.flags&(t?8:16))!==0}function oN(e,t,n,r,i,o){let s=t.consts,a=Oi(s,i),c=$i(t,e,2,r,a);return sf(t,n,c,Oi(s,o)),c.attrs!==null&&vc(c,c.attrs,!1),c.mergedAttrs!==null&&vc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function v(e,t,n,r){let i=te(),o=Ge(),s=Kt+e,a=i[ve],c=o.firstCreatePass?oN(s,o,i,t,n,r):o.data[s],l=sN(o,i,c,a,t,e);i[s]=l;let u=Pc(c);return Rr(c,!0),vw(a,l,c),!jx(c)&&Oc()&&Uc(o,i,l,c),ZS()===0&&qn(l,i),JS(),u&&(nf(o,i,c),tf(o,c,i)),r!==null&&rf(i,c),v}function y(){let e=ot();$h()?Hh():(e=e.parent,Rr(e,!1));let t=e;eM(t)&&tM(),XS();let n=Ge();return n.firstCreatePass&&(Fc(n,e),jh(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&mM(t)&&Uv(n,t,te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&gM(t)&&Uv(n,t,te(),t.stylesWithoutHost,!1),y}function Je(e,t,n,r){return v(e,t,n,r),y(),Je}var sN=(e,t,n,r,i,o)=>(kc(!0),cw(r,i,dM()));function aN(e,t,n,r,i){let o=t.consts,s=Oi(o,r),a=$i(t,e,8,"ng-container",s);s!==null&&vc(a,s,!0);let c=Oi(o,i);return sf(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function ff(e,t,n){let r=te(),i=Ge(),o=e+Kt,s=i.firstCreatePass?aN(o,i,r,t,n):i.data[o];Rr(s,!0);let a=cN(i,r,s,e);return r[o]=a,Oc()&&Uc(i,r,a,s),qn(a,r),Pc(s)&&(nf(i,r,s),tf(i,s,r)),n!=null&&rf(r,s),ff}function pf(){let e=ot(),t=Ge();return $h()?Hh():(e=e.parent,Rr(e,!1)),t.firstCreatePass&&(Fc(t,e),jh(e)&&t.queries.elementEnd(e)),pf}var cN=(e,t,n,r)=>(kc(!0),KM(t[ve],""));function Et(){return te()}var Cc="en-US";var lN=Cc;function uN(e){typeof e=="string"&&(lN=e.toLowerCase().replace(/_/g,"-"))}function K(e,t,n,r){let i=te(),o=Ge(),s=ot();return $w(o,i,i[ve],s,e,t,r),K}function dN(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Uo],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function $w(e,t,n,r,i,o,s){let a=Pc(r),l=e.firstCreatePass&&VA(e),u=t[Lt],d=LA(t),h=!0;if(r.type&3||s){let _=It(r,t),I=s?s(_):_,S=d.length,ue=s?Le=>s(Qt(Le[r.index])):r.index,H=null;if(!s&&a&&(H=dN(e,t,i,r.index)),H!==null){let Le=H.__ngLastListenerFn__||H;Le.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,h=!1}else{o=Hv(r,t,u,o,!1);let Le=n.listen(I,i,o);d.push(o,Le),l&&l.push(i,ue,S,S+1)}}else o=Hv(r,t,u,o,!1);let p=r.outputs,m;if(h&&p!==null&&(m=p[i])){let _=m.length;if(_)for(let I=0;I<_;I+=2){let S=m[I],ue=m[I+1],Ln=t[S][ue].subscribe(o),ut=d.length;d.push(o,Ln),l&&l.push(i,r.index,ut,-(ut+1))}}}function $v(e,t,n,r){let i=Z(null);try{return Gt(6,t,n),n(r)!==!1}catch(o){return Aw(e,o),!1}finally{Gt(7,t,n),Z(i)}}function Hv(e,t,n,r,i){return function o(s){if(s===Function)return r;let a=e.componentOffset>-1?Qn(e.index,t):t;lf(a);let c=$v(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=$v(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ce(e=1){return uM(e)}function hN(e,t){let n=null,r=_S(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?cy(e,o,!0):wS(r,o))return i}return n}function mf(e){let t=te()[jt][pt];if(!t.projection){let n=e?e.length:1,r=t.projection=sS(n,null),i=r.slice(),o=t.child;for(;o!==null;){let s=e?hN(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function gf(e,t=0,n){let r=te(),i=Ge(),o=$i(i,Kt+e,16,null,n||null);o.projection===null&&(o.projection=t),Hh(),(!r[jo]||xy())&&(o.flags&32)!==32&&lA(i,r,o)}function T(e,t=""){let n=te(),r=Ge(),i=e+Kt,o=r.firstCreatePass?$i(r,i,1,t,null):r.data[i],s=fN(r,n,o,t,e);n[i]=s,Oc()&&Uc(r,n,s,o),Rr(o,!1)}var fN=(e,t,n,r,i)=>(kc(!0),qM(t[ve],r));function mt(e){return Xt("",e,""),mt}function Xt(e,t,n){let r=te(),i=Hx(r,e,t,n);return i!==Bi&&jA(r,ji(),i),Xt}function Te(e,t,n){jw(t)&&(t=t());let r=te(),i=Rc();if(Zo(r,i,t)){let o=Ge(),s=Gh();Ew(o,s,r,e,t,r[ve],n,!1)}return Te}function Re(e,t){let n=jw(e);return n&&e.set(t),n}function Se(e,t){let n=te(),r=Ge(),i=ot();return $w(r,n,n[ve],i,e,t),Se}function pN(e,t,n){let r=Ge();if(r.firstCreatePass){let i=Gn(e);Ih(n,r.data,r.blueprint,i,!0),Ih(t,r.data,r.blueprint,i,!1)}}function Ih(e,t,n,r,i){if(e=Ke(e),Array.isArray(e))for(let o=0;o<e.length;o++)Ih(e[o],t,n,r,i);else{let o=Ge(),s=te(),a=ot(),c=Ni(e)?e:Ke(e.provide),l=vy(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ni(e)||!e.multi){let p=new xr(l,i,D),m=Wd(c,t,i?u:u+h,d);m===-1?(rh(fc(a,s),o,c),Hd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{let p=Wd(c,t,u+h,d),m=Wd(c,t,u,u+h),_=p>=0&&n[p],I=m>=0&&n[m];if(i&&!I||!i&&!_){rh(fc(a,s),o,c);let S=_N(i?gN:mN,n.length,i,r,l);!i&&I&&(n[m].providerFactory=S),Hd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(S),s.push(S)}else{let S=Hw(n[i?m:p],l,!i&&r);Hd(o,e,p>-1?p:m,S)}!i&&r&&I&&n[m].componentProviders++}}}function Hd(e,t,n,r){let i=Ni(t),o=xS(t);if(i||o){let c=(o?Ke(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Hw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Wd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function mN(e,t,n,r){return Eh(this.multi,[])}function gN(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ki(n,n[Y],this.providerFactory.index,r);o=a.slice(0,s),Eh(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Eh(i,o);return o}function Eh(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function _N(e,t,n,r,i){let o=new xr(e,n,D);return o.multi=[],o.index=t,o.componentProviders=0,Hw(o,i,r&&!n),o}function In(e,t=[]){return n=>{n.providersResolver=(r,i)=>pN(r,i?i(e):e,t)}}var vN=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=my(!1,n.type),i=r.length>0?hf([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(C(it))})}}return e})();function pe(e){uf("NgStandalone"),e.getStandaloneInjector=t=>t.get(vN).getOrCreateStandaloneInjector(e)}var Gc=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Ww=new M("");function Fr(e){return!!e&&typeof e.then=="function"}function zw(e){return!!e&&typeof e.subscribe=="function"}var Gw=new M(""),qw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=b(Gw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Fr(o))n.push(o);else if(zw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),qc=new M("");function yN(){L_(()=>{throw new A(600,!1)})}function wN(e){return e.isBoundToModule}function bN(e,t,n){try{let r=n();return Fr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var zi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(Qy),this.afterRenderEffectManager=b(Fw),this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=b(Or).hasPendingTasks.pipe(k(n=>!n)),this._injector=b(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof _c;if(!this._injector.get(qw).done){let h=!i&&dy(n),p=!1;throw new A(405,p)}let s;i?s=n:s=this._injector.get(zc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=wN(s)?void 0:this._injector.get(Yn),c=r||s.selector,l=s.create(Ui.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Ww,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),zd(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new A(101,!1);let r=Z(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Z(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===Nw)throw new A(103,!1);if(n){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)CN(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dh(o))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;zd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(qc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>zd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new A(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function zd(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function CN(e,t,n){!t&&!Dh(e)||IN(e,n,t)}function Dh(e){return Bh(e)}function IN(e,t,n){let r;n?(r=0,e[P]|=1024):e[P]&64?r=0:r=1,Pw(e,t,r)}var Th=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},_f=(()=>{class e{compileModuleSync(n){return new wh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hy(n),o=aw(i.declarations).reduce((s,a)=>{let c=Tr(a);return c&&s.push(new zo(c)),s},[]);return new Th(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var EN=(()=>{class e{constructor(){this.zone=b(se),this.applicationRef=b(zi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function DN(e){return[{provide:se,useFactory:e},{provide:xi,multi:!0,useFactory:()=>{let t=b(EN,{optional:!0});return()=>t.initialize()}},{provide:xi,multi:!0,useFactory:()=>{let t=b(AN);return()=>{t.initialize()}}},{provide:Qy,useFactory:TN}]}function TN(){let e=b(se),t=b(_n);return n=>e.runOutsideAngular(()=>t.handleError(n))}function SN(e){let t=DN(()=>new se(MN(e)));return Li([[],t])}function MN(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var AN=(()=>{class e{constructor(){this.subscription=new _e,this.initialized=!1,this.zone=b(se),this.pendingTasks=b(Or)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xN(){return typeof $localize<"u"&&$localize.locale||Cc}var Yc=new M("",{providedIn:"root",factory:()=>b(Yc,U.Optional|U.SkipSelf)||xN()});var Yw=new M("");var ic=null;function NN(e=[],t){return Ui.create({name:t,providers:[{provide:Mc,useValue:"platform"},{provide:Yw,useValue:new Set([()=>ic=null])},...e]})}function PN(e=[]){if(ic)return ic;let t=NN(e);return ic=t,yN(),RN(t),t}function RN(e){e.get(Yh,null)?.forEach(n=>n())}var en=(()=>{class e{static{this.__NG_ELEMENT_ID__=ON}}return e})();function ON(e){return kN(ot(),te(),(e&16)===16)}function kN(e,t,n){if(Nc(e)&&!n){let r=Qn(e.index,t);return new Nr(r,r)}else if(e.type&47){let r=t[jt];return new Nr(r,t)}return null}var Sh=class{constructor(){}supports(t){return Uw(t)}create(t){return new Mh(t)}},FN=(e,t)=>t,Mh=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||FN}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Wv(r,i,o)?n:r,a=Wv(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;u<=m&&m<l&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Uw(t))throw new A(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Lx(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Ah(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ic),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ic),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ah=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xh=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ic=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new xh,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Wv(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function zv(){return new vf([new Sh])}var vf=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:zv})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||zv()),deps:[[e,new ny,new Ph]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new A(901,!1)}}return e})();function Kw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=PN(r),o=[SN(),...n||[]],a=new wc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(se);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(_n,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let d=()=>a.destroy(),h=i.get(Yw);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),bN(l,c,()=>{let p=a.get(qw);return p.runInitializers(),p.donePromise.then(()=>{let m=a.get(Yc,Cc);uN(m||Cc);let _=a.get(zi);return t!==void 0&&_.bootstrap(t),_})})})}catch(t){return Promise.reject(t)}}function Lr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var eb=null;function Dn(){return eb}function tb(e){eb??=e}var Kc=class{};var Oe=new M(""),bf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(VN),providedIn:"platform"})}}return e})();var VN=(()=>{class e extends bf{constructor(){super(),this._doc=b(Oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dn().getBaseHref(this._doc)}onPopState(n){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function Cf(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Qw(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function En(e){return e&&e[0]!=="?"?"?"+e:e}var qi=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(rb),providedIn:"root"})}}return e})(),nb=new M(""),rb=(()=>{class e extends qi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Cf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+En(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+En(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+En(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(bf),C(nb,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ib=(()=>{class e extends qi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Cf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+En(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+En(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(bf),C(nb,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Jo=(()=>{class e{constructor(n){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=BN(Qw(Zw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+En(r))}normalize(n){return e.stripTrailingSlash(UN(this._basePath,Zw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+En(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+En(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=En}static{this.joinWithSlash=Cf}static{this.stripTrailingSlash=Qw}static{this.\u0275fac=function(r){return new(r||e)(C(qi))}}static{this.\u0275prov=E({token:e,factory:()=>jN(),providedIn:"root"})}}return e})();function jN(){return new Jo(C(qi))}function UN(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Zw(e){return e.replace(/\/index.html$/,"")}function BN(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Jc(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var yf=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new yf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Jw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Jw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(D(Hi),D(Wc),D(vf))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Jw(e,t){e.context.$implicit=t.item}var tn=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new wf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Xw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Xw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(D(Hi),D(Wc))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),wf=class{constructor(){this.$implicit=null,this.ngIf=null}};function Xw(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Qe(t)}'.`)}var Me=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({})}}return e})(),If="browser",$N="server";function ob(e){return e===If}function el(e){return e===$N}var Gi=class{};var es=class{},nl=class{},Vr=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Df=class{encodeKey(t){return sb(t)}encodeValue(t){return sb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function zN(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var GN=/%(\d[a-f0-9])/gi,qN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sb(e){return encodeURIComponent(e).replace(GN,(t,n)=>qN[n]??t)}function tl(e){return`${e}`}var Xn=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Df,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(tl):[tl(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(tl(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(tl(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Tf=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function YN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ab(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function cb(e){return typeof Blob<"u"&&e instanceof Blob}function lb(e){return typeof FormData<"u"&&e instanceof FormData}function KN(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Xo=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(YN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Vr,this.context??=new Tf,!this.params)this.params=new Xn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ab(this.body)||cb(this.body)||lb(this.body)||KN(this.body)?this.body:this.body instanceof Xn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lb(this.body)?null:cb(this.body)?this.body.type||null:ab(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Xn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new e(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ki=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Ki||{}),ts=class{constructor(t,n=ol.Ok,r="OK"){this.headers=t.headers||new Vr,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Sf=class e extends ts{constructor(t={}){super(t),this.type=Ki.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},rl=class e extends ts{constructor(t={}){super(t),this.type=Ki.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},il=class extends ts{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},ol=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(ol||{});function Ef(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var jr=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Xo)o=n;else{let c;i.headers instanceof Vr?c=i.headers:c=new Vr(i.headers);let l;i.params&&(i.params instanceof Xn?l=i.params:l=new Xn({fromObject:i.params})),o=new Xo(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=R(o).pipe(Bn(c=>this.handler.handle(c)));if(n instanceof Xo||i.observe==="events")return s;let a=s.pipe(Ye(c=>c instanceof rl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(k(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(k(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(k(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(k(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Xn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Ef(i,r))}post(n,r,i={}){return this.request("POST",n,Ef(i,r))}put(n,r,i={}){return this.request("PUT",n,Ef(i,r))}static{this.\u0275fac=function(r){return new(r||e)(C(es))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function fb(e,t){return t(e)}function QN(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function ZN(e,t,n){return(r,i)=>wn(n,()=>t(r,o=>e(o,i)))}var JN=new M(""),Mf=new M(""),XN=new M(""),eP=new M("");function tP(){let e=null;return(t,n)=>{e===null&&(e=(b(JN,{optional:!0})??[]).reduceRight(QN,fb));let r=b(Or),i=r.add();return e(t,n).pipe(Hn(()=>r.remove(i)))}}var ub=(()=>{class e extends es{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=b(Or);let i=b(eP,{optional:!0});this.backend=i??n}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Mf),...this.injector.get(XN,[])]));this.chain=i.reduceRight((o,s)=>ZN(o,s,this.injector),fb)}let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Hn(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||e)(C(nl),C(it))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();var nP=/^\)\]\}',?\n/;function rP(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var db=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new A(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?he(r.\u0275loadImpl()):R(null)).pipe(ft(()=>new q(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((_,I)=>s.setRequestHeader(_,I.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let _=n.detectContentTypeHeader();_!==null&&s.setRequestHeader("Content-Type",_)}if(n.responseType){let _=n.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=s.statusText||"OK",I=new Vr(s.getAllResponseHeaders()),S=rP(s)||n.url;return c=new Sf({headers:I,status:s.status,statusText:_,url:S}),c},u=()=>{let{headers:_,status:I,statusText:S,url:ue}=l(),H=null;I!==ol.NoContent&&(H=typeof s.response>"u"?s.responseText:s.response),I===0&&(I=H?ol.Ok:0);let Le=I>=200&&I<300;if(n.responseType==="json"&&typeof H=="string"){let Ln=H;H=H.replace(nP,"");try{H=H!==""?JSON.parse(H):null}catch(ut){H=Ln,Le&&(Le=!1,H={error:ut,text:H})}}Le?(o.next(new rl({body:H,headers:_,status:I,statusText:S,url:ue||void 0})),o.complete()):o.error(new il({error:H,headers:_,status:I,statusText:S,url:ue||void 0}))},d=_=>{let{url:I}=l(),S=new il({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(S)},h=!1,p=_=>{h||(o.next(l()),h=!0);let I={type:Ki.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(I.total=_.total),n.responseType==="text"&&s.responseText&&(I.partialText=s.responseText),o.next(I)},m=_=>{let I={type:Ki.UploadProgress,loaded:_.loaded};_.lengthComputable&&(I.total=_.total),o.next(I)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Ki.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||e)(C(Gi))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),pb=new M(""),iP="XSRF-TOKEN",oP=new M("",{providedIn:"root",factory:()=>iP}),sP="X-XSRF-TOKEN",aP=new M("",{providedIn:"root",factory:()=>sP}),sl=class{},cP=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||e)(C(Oe),C(Zt),C(oP))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function lP(e,t){let n=e.url.toLowerCase();if(!b(pb)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=b(sl).getToken(),i=b(aP);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var mb=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(mb||{});function uP(e,t){return{\u0275kind:e,\u0275providers:t}}function dP(...e){let t=[jr,db,ub,{provide:es,useExisting:ub},{provide:nl,useExisting:db},{provide:Mf,useValue:lP,multi:!0},{provide:pb,useValue:!0},{provide:sl,useClass:cP}];for(let n of e)t.push(...n.\u0275providers);return Li(t)}var hb=new M("");function hP(){return uP(mb.LegacyInterceptors,[{provide:hb,useFactory:tP},{provide:Mf,useExisting:hb,multi:!0}])}var al=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({providers:[dP(hP())]})}}return e})();var Pf=class extends Kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Rf=class e extends Pf{static makeCurrent(){tb(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=fP();return n==null?null:pP(n)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Jc(document.cookie,t)}},ns=null;function fP(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}function pP(e){return new URL(e,document.baseURI).pathname}var mP=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Of=new M(""),yb=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(C(Of),C(se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),cl=class{constructor(t){this._doc=t}},xf="ng-app-id",wb=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=el(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${xf}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(xf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(xf,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(C(Oe),C(Vc),C(Qo,8),C(Zt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Nf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ff=/%COMP%/g,bb="%COMP%",gP=`_nghost-${bb}`,_P=`_ngcontent-${bb}`,vP=!0,yP=new M("",{providedIn:"root",factory:()=>vP});function wP(e){return _P.replace(Ff,e)}function bP(e){return gP.replace(Ff,e)}function Cb(e,t){return t.map(n=>n.replace(Ff,e))}var gb=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=el(a),this.defaultRenderer=new rs(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yt.ShadowDom&&(r=O(g({},r),{encapsulation:Yt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ll?i.applyToHost(n):i instanceof is&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Yt.Emulated:o=new ll(c,l,r,this.appId,u,s,a,d);break;case Yt.ShadowDom:return new kf(c,l,n,r,s,a,this.nonce,d);default:o=new is(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(C(yb),C(wb),C(Vc),C(yP),C(Oe),C(Zt),C(se),C(Qo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),rs=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Nf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(_b(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(_b(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Nf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Nf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(vn.DashCase|vn.Important)?t.style.setProperty(n,r,i&vn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&vn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Dn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function _b(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var kf=class extends rs{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Cb(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},is=class extends rs{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Cb(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ll=class extends is{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=wP(l),this.hostAttr=bP(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},CP=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(C(Oe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),vb=["alt","control","meta","shift"],IP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},DP=(()=>{class e extends cl{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=IP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vb.forEach(s=>{if(s!==i){let a=EP[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(C(Oe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function Ib(e,t){return Kw(g({rootComponent:e},TP(t)))}function TP(e){return{appProviders:[...NP,...e?.providers??[]],platformProviders:xP}}function SP(){Rf.makeCurrent()}function MP(){return new _n}function AP(){return rw(document),document}var xP=[{provide:Zt,useValue:If},{provide:Yh,useValue:SP,multi:!0},{provide:Oe,useFactory:AP,deps:[]}];var NP=[{provide:Mc,useValue:"root"},{provide:_n,useFactory:MP,deps:[]},{provide:Of,useClass:CP,multi:!0,deps:[Oe,se,Zt]},{provide:Of,useClass:DP,multi:!0,deps:[Oe]},gb,wb,yb,{provide:Wo,useExisting:gb},{provide:Gi,useClass:mP,deps:[]},[]];var Eb=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(C(Oe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var V="primary",ys=Symbol("RouteTitle"),Bf=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function eo(e){return new Bf(e)}function RP(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function OP(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!nn(e[n],t[n]))return!1;return!0}function nn(e,t){let n=e?$f(e):void 0,r=t?$f(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Pb(e[i],t[i]))return!1;return!0}function $f(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Pb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Rb(e){return e.length>0?e[e.length-1]:null}function nr(e){return Cd(e)?e:Fr(e)?he(Promise.resolve(e)):R(e)}var kP={exact:kb,subset:Fb},Ob={exact:FP,subset:LP,ignored:()=>!0};function Db(e,t,n){return kP[n.paths](e.root,t.root,n.matrixParams)&&Ob[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function FP(e,t){return nn(e,t)}function kb(e,t,n){if(!Br(e.segments,t.segments)||!hl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!kb(e.children[r],t.children[r],n))return!1;return!0}function LP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Pb(e[n],t[n]))}function Fb(e,t,n){return Lb(e,t,t.segments,n)}function Lb(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Br(i,n)||t.hasChildren()||!hl(i,n,r))}else if(e.segments.length===n.length){if(!Br(e.segments,n)||!hl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Fb(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Br(e.segments,i)||!hl(e.segments,i,r)||!e.children[V]?!1:Lb(e.children[V],t,o,r)}}function hl(e,t,n){return t.every((r,i)=>Ob[n](e[i].parameters,r.parameters))}var er=class{constructor(t=new J([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=eo(this.queryParams),this._queryParamMap}toString(){return UP.serialize(this)}},J=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fl(this)}},Ur=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=eo(this.parameters),this._parameterMap}toString(){return jb(this)}};function VP(e,t){return Br(e,t)&&e.every((n,r)=>nn(n.parameters,t[r].parameters))}function Br(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function jP(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var pp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new ml,providedIn:"root"})}}return e})(),ml=class{parse(t){let n=new Wf(t);return new er(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${os(t.root,!0)}`,r=HP(t.queryParams),i=typeof t.fragment=="string"?`#${BP(t.fragment)}`:"";return`${n}${r}${i}`}},UP=new ml;function fl(e){return e.segments.map(t=>jb(t)).join("/")}function os(e,t){if(!e.hasChildren())return fl(e);if(t){let n=e.children[V]?os(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${os(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=jP(e,(r,i)=>i===V?[os(e.children[V],!1)]:[`${i}:${os(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${fl(e)}/${n[0]}`:`${fl(e)}/(${n.join("//")})`}}function Vb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ul(e){return Vb(e).replace(/%3B/gi,";")}function BP(e){return encodeURI(e)}function Hf(e){return Vb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pl(e){return decodeURIComponent(e)}function Tb(e){return pl(e.replace(/\+/g,"%20"))}function jb(e){return`${Hf(e.path)}${$P(e.parameters)}`}function $P(e){return Object.entries(e).map(([t,n])=>`;${Hf(t)}=${Hf(n)}`).join("")}function HP(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ul(n)}=${ul(i)}`).join("&"):`${ul(n)}=${ul(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var WP=/^[^\/()?;#]+/;function Lf(e){let t=e.match(WP);return t?t[0]:""}var zP=/^[^\/()?;=#]+/;function GP(e){let t=e.match(zP);return t?t[0]:""}var qP=/^[^=?&#]+/;function YP(e){let t=e.match(qP);return t?t[0]:""}var KP=/^[^&#]+/;function QP(e){let t=e.match(KP);return t?t[0]:""}var Wf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new J(t,n)),r}parseSegment(){let t=Lf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new Ur(pl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=GP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Lf(this.remaining);i&&(r=i,this.capture(r))}t[pl(n)]=pl(r)}parseQueryParam(t){let n=YP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=QP(this.remaining);s&&(r=s,this.capture(r))}let i=Tb(n),o=Tb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[V]:new J([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function Ub(e){return e.segments.length>0?new J([],{[V]:e}):e}function Bb(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=Bb(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new J(e.segments,t);return ZP(n)}function ZP(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new J(e.segments.concat(t.segments),t.children)}return e}function to(e){return e instanceof er}function JP(e,t,n=null,r=null){let i=$b(e);return Hb(i,t,n,r)}function $b(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new J(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=Ub(r);return t??i}function Hb(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return Vf(i,i,i,n,r);let o=XP(t);if(o.toRoot())return Vf(i,i,new J([],{}),n,r);let s=eR(o,i,e),a=s.processChildren?cs(s.segmentGroup,s.index,o.commands):zb(s.segmentGroup,s.index,o.commands);return Vf(i,s.segmentGroup,a,n,r)}function gl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ds(e){return typeof e=="object"&&e!=null&&e.outlets}function Vf(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=Wb(e,t,n);let a=Ub(Bb(s));return new er(a,o,i)}function Wb(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Wb(o,t,n)}),new J(e.segments,r)}var _l=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&gl(r[0]))throw new A(4003,!1);let i=r.find(ds);if(i&&i!==Rb(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XP(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new _l(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _l(n,t,r)}var Ji=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function eR(e,t,n){if(e.isAbsolute)return new Ji(t,!0,0);if(!n)return new Ji(t,!1,NaN);if(n.parent===null)return new Ji(n,!0,0);let r=gl(e.commands[0])?0:1,i=n.segments.length-1+r;return tR(n,i,e.numberOfDoubleDots)}function tR(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Ji(r,!1,i-o)}function nR(e){return ds(e[0])?e[0].outlets:{[V]:e}}function zb(e,t,n){if(e??=new J([],{}),e.segments.length===0&&e.hasChildren())return cs(e,t,n);let r=rR(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new J(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new J(e.segments.slice(r.pathIndex),e.children),cs(o,0,i)}else return r.match&&i.length===0?new J(e.segments,{}):r.match&&!e.hasChildren()?zf(e,t,n):r.match?cs(e,0,i):zf(e,t,n)}function cs(e,t,n){if(n.length===0)return new J(e.segments,{});{let r=nR(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=cs(e.children[V],t,n);return new J(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zb(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new J(e.segments,i)}}function rR(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ds(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Mb(c,l,s))return o;r+=2}else{if(!Mb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zf(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ds(o)){let c=iR(o.outlets);return new J(r,c)}if(i===0&&gl(n[0])){let c=e.segments[t];r.push(new Ur(c.path,Sb(n[0]))),i++;continue}let s=ds(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&gl(a)?(r.push(new Ur(s,Sb(a))),i+=2):(r.push(new Ur(s,{})),i++)}return new J(r,{})}function iR(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=zf(new J([],{}),0,r))}),t}function Sb(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Mb(e,t,n){return e==n.path&&nn(t,n.parameters)}var ls="imperative",Ue=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ue||{}),Dt=class{constructor(t,n){this.id=t,this.url=n}},hs=class extends Dt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Ue.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$r=class extends Dt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Ue.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(_t||{}),Gf=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Gf||{}),tr=class extends Dt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ue.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hr=class extends Dt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ue.NavigationSkipped}},fs=class extends Dt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Ue.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vl=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class extends Dt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ue.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qf=class extends Dt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zf=class{constructor(t){this.route=t,this.type=Ue.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jf=class{constructor(t){this.route=t,this.type=Ue.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xf=class{constructor(t){this.snapshot=t,this.type=Ue.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ep=class{constructor(t){this.snapshot=t,this.type=Ue.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tp=class{constructor(t){this.snapshot=t,this.type=Ue.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},np=class{constructor(t){this.snapshot=t,this.type=Ue.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ps=class{},ms=class{constructor(t){this.url=t}};var rp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new El,this.attachRef=null}},El=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new rp,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ip(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=ip(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=op(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return op(t,this._root).map(n=>n.value)}};function ip(e,t){if(e===t.value)return t;for(let n of t.children){let r=ip(e,n);if(r)return r}return null}function op(e,t){if(e===t.value)return[t];for(let n of t.children){let r=op(e,n);if(r.length)return r.unshift(t),r}return[]}var gt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Zi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var wl=class extends yl{constructor(t,n){super(t),this.snapshot=n,gp(this,t)}toString(){return this.snapshot.toString()}};function Gb(e){let t=oR(e),n=new je([new Ur("",{})]),r=new je({}),i=new je({}),o=new je({}),s=new je(""),a=new rn(n,r,o,s,i,V,e,t.root);return a.snapshot=t.root,new wl(new gt(a,[]),t)}function oR(e){let t={},n={},r={},i="",o=new gs([],t,r,i,n,V,e,null,{});return new bl("",new gt(o,[]))}var rn=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(k(l=>l[ys]))??R(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(k(t=>eo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(k(t=>eo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mp(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:g(g({},t.params),e.params),data:g(g({},t.data),e.data),resolve:g(g(g(g({},e.data),t.data),i?.data),e._resolvedData)}:r={params:g({},e.params),data:g({},e.data),resolve:g(g({},e.data),e._resolvedData??{})},i&&Yb(i)&&(r.resolve[ys]=i.title),r}var gs=class{get title(){return this.data?.[ys]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=eo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=eo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},bl=class extends yl{constructor(t,n){super(n),this.url=t,gp(this,n)}toString(){return qb(this._root)}};function gp(e,t){t.value._routerState=e,t.children.forEach(n=>gp(e,n))}function qb(e){let t=e.children.length>0?` { ${e.children.map(qb).join(", ")} } `:"";return`${e.value}${t}`}function jf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,nn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),nn(t.params,n.params)||e.paramsSubject.next(n.params),OP(t.url,n.url)||e.urlSubject.next(n.url),nn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function sp(e,t){let n=nn(e.params,t.params)&&VP(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||sp(e.parent,t.parent))}function Yb(e){return typeof e.title=="string"||e.title===null}var _p=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=V,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=b(El),this.location=b(Hi),this.changeDetector=b(en),this.environmentInjector=b(it),this.inputBinder=b(vp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ap(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Kn]})}}return e})(),ap=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===rn?this.route:t===El?this.childContexts:this.parent.get(t,n)}},vp=new M("");function sR(e,t,n){let r=_s(e,t._root,n?n._root:void 0);return new wl(r,t)}function _s(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=aR(e,t,n);return new gt(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>_s(e,a)),s}}let r=cR(t.value),i=t.children.map(o=>_s(e,o));return new gt(r,i)}}function aR(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return _s(e,r,i);return _s(e,r)})}function cR(e){return new rn(new je(e.url),new je(e.params),new je(e.queryParams),new je(e.fragment),new je(e.data),e.outlet,e.component,e)}var Kb="ngNavigationCancelingError";function Qb(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=to(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Zb(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Zb(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Kb]=!0,n.cancellationCode=t,n}function lR(e){return Jb(e)&&to(e.url)}function Jb(e){return!!e&&e[Kb]}var uR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fe({type:e,selectors:[["ng-component"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,i){r&1&&Je(0,"router-outlet")},dependencies:[_p],encapsulation:2})}}return e})();function dR(e,t){return e.providers&&!e._injector&&(e._injector=hf(e.providers,t,`Route: ${e.path}`)),e._injector??t}function yp(e){let t=e.children&&e.children.map(yp),n=t?O(g({},e),{children:t}):g({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=uR),n}function on(e){return e.outlet||V}function hR(e,t){let n=e.filter(r=>on(r)===t);return n.push(...e.filter(r=>on(r)!==t)),n}function ws(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var fR=(e,t,n,r)=>k(i=>(new cp(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),cp=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),jf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Zi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Zi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Zi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Zi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new np(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ep(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(jf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),jf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=ws(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},Cl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Xi=class{constructor(t,n){this.component=t,this.route=n}};function pR(e,t,n){let r=e._root,i=t?t._root:null;return ss(r,i,n,[r.value])}function mR(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ro(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Kv(e)?e:t.get(e):r}function ss(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Zi(t);return e.children.forEach(s=>{gR(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>us(a,n.getContext(s),i)),i}function gR(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_R(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Cl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ss(e,t,a?a.children:null,r,i):ss(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xi(a.outlet.component,s))}else s&&us(t,a,i),i.canActivateChecks.push(new Cl(r)),o.component?ss(e,null,a?a.children:null,r,i):ss(e,null,n,r,i);return i}function _R(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Br(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Br(e.url,t.url)||!nn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sp(e,t)||!nn(e.queryParams,t.queryParams);case"paramsChange":default:return!sp(e,t)}}function us(e,t,n){let r=Zi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?us(s,t.children.getContext(o),n):us(s,null,n):us(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Xi(t.outlet.component,i)):n.canDeactivateChecks.push(new Xi(null,i)):n.canDeactivateChecks.push(new Xi(null,i))}function bs(e){return typeof e=="function"}function vR(e){return typeof e=="boolean"}function yR(e){return e&&bs(e.canLoad)}function wR(e){return e&&bs(e.canActivate)}function bR(e){return e&&bs(e.canActivateChild)}function CR(e){return e&&bs(e.canDeactivate)}function IR(e){return e&&bs(e.canMatch)}function Xb(e){return e instanceof Rt||e?.name==="EmptyError"}var dl=Symbol("INITIAL_VALUE");function no(){return ft(e=>bi(e.map(t=>t.pipe(Ot(1),Po(dl)))).pipe(k(t=>{for(let n of t)if(n!==!0){if(n===dl)return dl;if(n===!1||n instanceof er)return n}return!0}),Ye(t=>t!==dl),Ot(1)))}function ER(e,t){return De(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?R(O(g({},n),{guardsResult:!0})):DR(s,r,i,e).pipe(De(a=>a&&vR(a)?TR(r,o,e,t):R(a)),k(a=>O(g({},n),{guardsResult:a})))})}function DR(e,t,n,r){return he(e).pipe(De(i=>NR(i.component,i.route,n,t,r)),zt(i=>i!==!0,!0))}function TR(e,t,n,r){return he(t).pipe(Bn(i=>jn(MR(i.route.parent,r),SR(i.route,r),xR(e,i.path,n),AR(e,i.route,n))),zt(i=>i!==!0,!0))}function SR(e,t){return e!==null&&t&&t(new tp(e)),R(!0)}function MR(e,t){return e!==null&&t&&t(new Xf(e)),R(!0)}function AR(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return R(!0);let i=r.map(o=>Ka(()=>{let s=ws(t)??n,a=ro(o,s),c=wR(a)?a.canActivate(t,e):wn(s,()=>a(t,e));return nr(c).pipe(zt())}));return R(i).pipe(no())}function xR(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>mR(s)).filter(s=>s!==null).map(s=>Ka(()=>{let a=s.guards.map(c=>{let l=ws(s.node)??n,u=ro(c,l),d=bR(u)?u.canActivateChild(r,e):wn(l,()=>u(r,e));return nr(d).pipe(zt())});return R(a).pipe(no())}));return R(o).pipe(no())}function NR(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return R(!0);let s=o.map(a=>{let c=ws(t)??i,l=ro(a,c),u=CR(l)?l.canDeactivate(e,t,n,r):wn(c,()=>l(e,t,n,r));return nr(u).pipe(zt())});return R(s).pipe(no())}function PR(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return R(!0);let o=i.map(s=>{let a=ro(s,e),c=yR(a)?a.canLoad(t,n):wn(e,()=>a(t,n));return nr(c)});return R(o).pipe(no(),eC(r))}function eC(e){return _d(Ne(t=>{if(to(t))throw Qb(e,t)}),k(t=>t===!0))}function RR(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return R(!0);let o=i.map(s=>{let a=ro(s,e),c=IR(a)?a.canMatch(t,n):wn(e,()=>a(t,n));return nr(c)});return R(o).pipe(no(),eC(r))}var vs=class{constructor(t){this.segmentGroup=t||null}},Il=class extends Error{constructor(t){super(),this.urlTree=t}};function Qi(e){return wi(new vs(e))}function OR(e){return wi(new A(4e3,!1))}function kR(e){return wi(Zb(!1,_t.GuardRejected))}var lp=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return R(r);if(i.numberOfChildren>1||!i.children[V])return OR(t.redirectTo);i=i.children[V]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new Il(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new er(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new J(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FR(e,t,n,r,i){let o=wp(e,t,n);return o.matched?(r=dR(t,r),RR(r,t,n,i).pipe(k(s=>s===!0?o:g({},up)))):R(o)}function wp(e,t,n){if(t.path==="**")return LR(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?g({},up):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||RP)(n,e,t);if(!i)return g({},up);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?g(g({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function LR(e){return{matched:!0,parameters:e.length>0?Rb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ab(e,t,n,r){return n.length>0&&UR(e,n,r)?{segmentGroup:new J(t,jR(r,new J(n,e.children))),slicedSegments:[]}:n.length===0&&BR(e,n,r)?{segmentGroup:new J(e.segments,VR(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new J(e.segments,e.children),slicedSegments:n}}function VR(e,t,n,r){let i={};for(let o of n)if(Dl(e,t,o)&&!r[on(o)]){let s=new J([],{});i[on(o)]=s}return g(g({},r),i)}function jR(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&on(r)!==V){let i=new J([],{});n[on(r)]=i}return n}function UR(e,t,n){return n.some(r=>Dl(e,t,r)&&on(r)!==V)}function BR(e,t,n){return n.some(r=>Dl(e,t,r))}function Dl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function $R(e,t,n,r){return on(e)!==r&&(r===V||!Dl(t,n,e))?!1:wp(t,e,n).matched}function HR(e,t,n){return t.length===0&&!e.children[n]}var dp=class{};function WR(e,t,n,r,i,o,s="emptyOnly"){return new hp(e,t,n,r,i,s,o).recognize()}var zR=31,hp=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new lp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ab(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(k(n=>{let r=new gs([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,{},V,this.rootComponentType,null,{}),i=new gt(r,n),o=new bl("",i),s=JP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,V).pipe(Un(r=>{if(r instanceof Il)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vs?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=mp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(k(o=>o instanceof gt?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return he(i).pipe(Bn(o=>{let s=r.children[o],a=hR(n,o);return this.processSegmentGroup(t,a,s,o)}),Ad((o,s)=>(o.push(...s),o)),$n(null),Md(),De(o=>{if(o===null)return Qi(r);let s=tC(o);return GR(s),R(s)}))}processSegment(t,n,r,i,o,s){return he(n).pipe(Bn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(Un(c=>{if(c instanceof vs)return R(null);throw c}))),zt(a=>!!a),Un(a=>{if(Xb(a))return HR(r,i,o)?R(new dp):Qi(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return $R(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Qi(i):Qi(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=wp(n,i,o);if(!a)return Qi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zR&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(De(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=FR(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ft(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ft(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new gs(u,h,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,YR(r),on(r),r.component??r._loadedComponent??null,r,KR(r)),{segmentGroup:m,slicedSegments:_}=Ab(n,u,d,c);if(_.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(k(S=>S===null?null:new gt(p,S)));if(c.length===0&&_.length===0)return R(new gt(p,[]));let I=on(r)===o;return this.processSegment(l,c,m,_,I?V:o,!0).pipe(k(S=>new gt(p,S instanceof gt?[S]:[])))}))):Qi(n)))}getChildConfig(t,n,r){return n.children?R({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?R({routes:n._loadedRoutes,injector:n._loadedInjector}):PR(t,n,r,this.urlSerializer).pipe(De(i=>i?this.configLoader.loadChildren(t,n).pipe(Ne(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):kR(n))):R({routes:[],injector:t})}};function GR(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function qR(e){let t=e.value.routeConfig;return t&&t.path===""}function tC(e){let t=[],n=new Set;for(let r of e){if(!qR(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=tC(r.children);t.push(new gt(r.value,i))}return t.filter(r=>!n.has(r))}function YR(e){return e.data||{}}function KR(e){return e.resolve||{}}function QR(e,t,n,r,i,o){return De(s=>WR(e,t,n,r,s.extractedUrl,i,o).pipe(k(({state:a,tree:c})=>O(g({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function ZR(e,t){return De(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return R(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of nC(c))s.add(l);let a=0;return he(s).pipe(Bn(c=>o.has(c)?JR(c,r,e,t):(c.data=mp(c,c.parent,e).resolve,R(void 0))),Ne(()=>a++),Ci(1),De(c=>a===s.size?R(n):ht))})}function nC(e){let t=e.children.map(n=>nC(n)).flat();return[e,...t]}function JR(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Yb(i)&&(o[ys]=i.title),XR(o,e,t,r).pipe(k(s=>(e._resolvedData=s,e.data=mp(e,e.parent,n).resolve,null)))}function XR(e,t,n,r){let i=$f(e);if(i.length===0)return R({});let o={};return he(i).pipe(De(s=>eO(e[s],t,n,r).pipe(zt(),Ne(a=>{o[s]=a}))),Ci(1),Sd(o),Un(s=>Xb(s)?ht:wi(s)))}function eO(e,t,n,r){let i=ws(t)??r,o=ro(e,i),s=o.resolve?o.resolve(t,n):wn(i,()=>o(t,n));return nr(s)}function Uf(e){return ft(t=>{let n=e(t);return n?he(n).pipe(k(()=>t)):R(t)})}var rC=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[ys]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(tO),providedIn:"root"})}}return e})(),tO=(()=>{class e extends rC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(C(Eb))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),bp=new M("",{providedIn:"root",factory:()=>({})}),Cp=new M(""),nO=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(_f)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return R(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=nr(n.loadComponent()).pipe(k(iC),Ne(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Hn(()=>{this.componentLoaders.delete(n)})),i=new vi(r,()=>new Ve).pipe(_i());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return R({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=rO(r,this.compiler,n,this.onLoadEndListener).pipe(Hn(()=>{this.childrenLoaders.delete(r)})),s=new vi(o,()=>new Ve).pipe(_i());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function rO(e,t,n,r){return nr(e.loadChildren()).pipe(k(iC),De(i=>i instanceof Go||Array.isArray(i)?R(i):he(t.compileModuleAsync(i))),k(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Cp,[],{optional:!0,self:!0}).flat()),{routes:s.map(yp),injector:o}}))}function iO(e){return e&&typeof e=="object"&&"default"in e}function iC(e){return iO(e)?e.default:e}var Ip=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(oO),providedIn:"root"})}}return e})(),oO=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),sO=new M("");var aO=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=b(nO),this.environmentInjector=b(it),this.urlSerializer=b(pp),this.rootContexts=b(El),this.location=b(Jo),this.inputBindingEnabled=b(vp,{optional:!0})!==null,this.titleStrategy=b(rC),this.options=b(bp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(Ip),this.createViewTransition=b(sO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Zf(i)),r=i=>this.events.next(new Jf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(O(g(g({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ls,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(o=>o.id!==0),k(o=>O(g({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ft(o=>{let s=!1,a=!1;return R(o).pipe(ft(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",_t.SupersededByNewNavigation),ht;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?O(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Hr(c.id,this.urlSerializer.serialize(c.rawUrl),d,Gf.IgnoredSameUrlNavigation)),c.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(ft(d=>{let h=this.transitions?.getValue();return this.events.next(new hs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ht:Promise.resolve(d)}),QR(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=O(g({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new vl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:m,extras:_}=c,I=new hs(d,this.urlSerializer.serialize(h),p,m);this.events.next(I);let S=Gb(this.rootComponentType).snapshot;return this.currentTransition=o=O(g({},c),{targetSnapshot:S,urlAfterRedirects:h,extras:O(g({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,R(o)}else{let d="";return this.events.next(new Hr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Gf.IgnoredByUrlHandlingStrategy)),c.resolve(null),ht}}),Ne(c=>{let l=new qf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),k(c=>(this.currentTransition=o=O(g({},c),{guards:pR(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),ER(this.environmentInjector,c=>this.events.next(c)),Ne(c=>{if(o.guardsResult=c.guardsResult,to(c.guardsResult))throw Qb(this.urlSerializer,c.guardsResult);let l=new Yf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ye(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",_t.GuardRejected),!1)),Uf(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(Ne(l=>{let u=new Kf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ft(l=>{let u=!1;return R(l).pipe(ZR(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",_t.NoDataFromResolver)}}))}),Ne(l=>{let u=new Qf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Uf(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ne(h=>{u.component=h}),k(()=>{})));for(let h of u.children)d.push(...l(h));return d};return bi(l(c.targetSnapshot.root)).pipe($n(null),Ot(1))}),Uf(()=>this.afterPreactivation()),ft(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?he(u).pipe(k(()=>o)):R(o)}),k(c=>{let l=sR(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=O(g({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ne(()=>{this.events.next(new ps)}),fR(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ot(1),Ne({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $r(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Ro(this.transitionAbortSubject.pipe(Ne(c=>{throw c}))),Hn(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",_t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Un(c=>{if(a=!0,Jb(c))this.events.next(new tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),lR(c)?this.events.next(new ms(c.url)):o.resolve(!1);else{this.events.next(new fs(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return ht}))}))}cancelNavigationTransition(n,r,i){let o=new tr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function cO(e){return e!==ls}var lO=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(uO),providedIn:"root"})}}return e})(),fp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},uO=(()=>{class e extends fp{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),oC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>b(dO),providedIn:"root"})}}return e})(),dO=(()=>{class e extends oC{constructor(){super(...arguments),this.location=b(Jo),this.urlSerializer=b(pp),this.options=b(bp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(Ip),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Gb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof hs)this.stateMemento=this.createStateMemento();else if(n instanceof Hr)this.rawUrlTree=r.initialUrl;else if(n instanceof vl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof ps?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof tr&&(n.code===_t.GuardRejected||n.code===_t.NoDataFromResolver)?this.restoreHistory(r):n instanceof fs?this.restoreHistory(r,!0):n instanceof $r&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=g(g({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=g(g({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),as=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(as||{});function hO(e,t){e.events.pipe(Ye(n=>n instanceof $r||n instanceof tr||n instanceof fs||n instanceof Hr),k(n=>n instanceof $r||n instanceof Hr?as.COMPLETE:(n instanceof tr?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?as.REDIRECTING:as.FAILED),Ye(n=>n!==as.REDIRECTING),Ot(1)).subscribe(()=>{t()})}function fO(e){throw e}var pO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},st=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(Gc),this.stateManager=b(oC),this.options=b(bp,{optional:!0})||{},this.pendingTasks=b(Or),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(aO),this.urlSerializer=b(pp),this.location=b(Jo),this.urlHandlingStrategy=b(Ip),this._events=new Ve,this.errorHandler=this.options.errorHandler||fO,this.navigated=!1,this.routeReuseStrategy=b(lO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(Cp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(vp,{optional:!0}),this.eventsSubscription=new _e,this.isNgZoneEnabled=b(se)instanceof se&&se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof tr&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $r)this.navigated=!0;else if(r instanceof ms){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||cO(i.source)};this.scheduleNavigation(s,ls,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_O(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=g({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(yp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=g(g({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=$b(h)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return Hb(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=to(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ls,null,r)}navigate(n,r={skipLocationChange:!1}){return gO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=g({},pO):r===!1?i=g({},mO):i=r,to(n))return Db(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Db(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return hO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gO(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new A(4008,!1)}function _O(e){return!(e instanceof ps)&&!(e instanceof ms)}var vO=new M("");function sC(e,...t){return Li([{provide:Cp,multi:!0,useValue:e},[],{provide:rn,useFactory:yO,deps:[st]},{provide:qc,multi:!0,useFactory:bO},t.map(n=>n.\u0275providers)])}function yO(e){return e.routerState.root}function wO(e,t){return{\u0275kind:e,\u0275providers:t}}function bO(){let e=b(Ui);return t=>{let n=e.get(zi);if(t!==n.components[0])return;let r=e.get(st),i=e.get(CO);e.get(IO)===1&&r.initialNavigation(),e.get(EO,null,U.Optional)?.setUpPreloading(),e.get(vO,null,U.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var CO=new M("",{factory:()=>new Ve}),IO=new M("",{providedIn:"root",factory:()=>1});var EO=new M("");function aC(){return wO(6,[{provide:qi,useClass:ib}])}var Ep;try{Ep=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ep=!1}var Is=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?ob(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ep)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||e)(C(Zt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Cs;function DO(){if(Cs==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Cs=!0}))}finally{Cs=Cs||!1}return Cs}function Dp(e){return DO()?e:!!e.capture}function cC(e){return e.composedPath?e.composedPath()[0]:e.target}function lC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Tp(e){return Array.isArray(e)?e:[e]}function Sp(e){return e instanceof Ze?e.nativeElement:e}var dC=new Set,Wr,TO=(()=>{class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):MO}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&SO(n,this._nonce),this._matchMedia(n)}static{this.\u0275fac=function(r){return new(r||e)(C(Is),C(Qo,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function SO(e,t){if(!dC.has(e))try{Wr||(Wr=document.createElement("style"),t&&Wr.setAttribute("nonce",t),Wr.setAttribute("type","text/css"),document.head.appendChild(Wr)),Wr.sheet&&(Wr.sheet.insertRule(`@media ${e} {body{ }}`,0),dC.add(e))}catch(n){console.error(n)}}function MO(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var fC=(()=>{class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new Ve}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return hC(Tp(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let i=hC(Tp(n)).map(s=>this._registerQuery(s).observable),o=bi(i);return o=jn(o.pipe(Ot(1)),o.pipe(xd(1),Td(0))),o.pipe(k(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new q(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Po(r),k(({matches:s})=>({query:n,matches:s})),Ro(this._destroySubject)),mql:r};return this._queries.set(n,o),o}static{this.\u0275fac=function(r){return new(r||e)(C(TO),C(se))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function hC(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function gC(e){return e.buttons===0||e.detail===0}function _C(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var zr=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(zr||{}),pC="cdk-high-contrast-black-on-white",mC="cdk-high-contrast-white-on-black",Mp="cdk-high-contrast-active",vC=(()=>{class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=b(fC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return zr.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return zr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return zr.BLACK_ON_WHITE}return zr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(Mp,pC,mC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===zr.BLACK_ON_WHITE?n.add(Mp,pC):r===zr.WHITE_ON_BLACK&&n.add(Mp,mC)}}static{this.\u0275fac=function(r){return new(r||e)(C(Is),C(Oe))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ap=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({})}}return e})();function NO(){return!0}var PO=new M("mat-sanity-checks",{providedIn:"root",factory:NO}),Es=(()=>{class e{constructor(n,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return lC()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}static{this.\u0275fac=function(r){return new(r||e)(C(vC),C(PO,8),C(Oe))}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({imports:[Ap,Ap]})}}return e})();var Tt=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Tt||{}),xp=class{constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Tt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},yC=Dp({passive:!0,capture:!0}),Np=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=cC(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,yC)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,yC)))}},wC={enterDuration:225,exitDuration:150},RO=800,bC=Dp({passive:!0,capture:!0}),CC=["mousedown","touchstart"],IC=["mouseup","mouseleave","touchend","touchcancel"],EC=class e{static{this._eventManager=new Np}constructor(t,n,r,i){this._target=t,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Sp(r))}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=g(g({},wC),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||OO(t,n,i),a=t-i.left,c=n-i.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||i.width===0&&i.height===0,_=new xp(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",_.state=Tt.FADING_IN,r.persistent||(this._mostRecentTransientRipple=_);let I=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let S=()=>this._finishRippleTransition(_),ue=()=>this._destroyRipple(_);u.addEventListener("transitionend",S),u.addEventListener("transitioncancel",ue),I={onTransitionEnd:S,onTransitionCancel:ue}}),this._activeRipples.set(_,I),(m||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===Tt.FADING_OUT||t.state===Tt.HIDDEN)return;let n=t.element,r=g(g({},wC),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=Tt.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=Sp(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,CC.forEach(r=>{e._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{IC.forEach(n=>{this._triggerElement.addEventListener(n,this,bC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Tt.FADING_IN?this._startFadeOutTransition(t):t.state===Tt.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=Tt.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Tt.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=gC(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+RO;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!_C(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===Tt.VISIBLE||t.config.terminateOnPointerUp&&t.state===Tt.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(CC.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(IC.forEach(n=>t.removeEventListener(n,this,bC)),this._pointerUpEventsRegistered=!1))}};function OO(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var kO=["*"];var FO=new M("MAT_CARD_CONFIG"),DC=(()=>{class e{constructor(n){this.appearance=n?.appearance||"raised"}static{this.\u0275fac=function(r){return new(r||e)(D(FO,8))}}static{this.\u0275cmp=fe({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){r&2&&Jt("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[pe],ngContentSelectors:kO,decls:1,vars:0,template:function(r,i){r&1&&(mf(),gf(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return e})();var TC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return e})();var SC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}}return e})();var MC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({imports:[Es,Me,Es]})}}return e})();var Sl=class{constructor(){this.id="",this.link="",this.name="",this.description="",this.tags=[]}};var AC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({imports:[Me,Es]})}}return e})();var xC=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fe({type:e,selectors:[["app-loader"]],standalone:!0,features:[pe],decls:2,vars:0,consts:[[1,"loader-overlay"],[1,"custom-spinner"]],template:function(r,i){r&1&&(v(0,"div",0),Je(1,"div",1),y())},dependencies:[Me,AC],styles:[".loader-overlay[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#00000040}.custom-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:6px solid #e0e7ef;border-top:6px solid #2193b0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return e})();var ke=(()=>{class e{constructor(n){this.http_service=n}getUserSession(){let n=localStorage.getItem("lastLoggedUser");if(n)try{this.lastLoggedUser=JSON.parse(n)}catch{this.lastLoggedUser=void 0}if(this.lastLoggedUser)return this.lastLoggedUser;throw new Error("No user session found")}saveUserSession(){try{if(this.lastLoggedUser){let n=O(g({},this.lastLoggedUser),{loginTime:Date.now()});localStorage.setItem("lastLoggedUser",JSON.stringify(n))}else localStorage.removeItem("lastLoggedUser");return!0}catch(n){return console.error("Errore nel salvataggio della sessione utente:",n),!1}}static{this.\u0275fac=function(r){return new(r||e)(C(jr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var NC=()=>{};var Rp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var w=function(e,t){if(!e)throw Gr(t)},Gr=function(e){return new Error("Firebase Database ("+Rp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var OC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},VO=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Al={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(h=64)),r.push(n[u],n[d],n[h],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(OC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):VO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Op;let h=o<<2|a>>4;if(r.push(h),l!==64){let p=a<<4&240|l>>2;if(r.push(p),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Op=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Fp=function(e){let t=OC(e);return Al.encodeByteArray(t,!0)},Ts=function(e){return Fp(e).replace(/\./g,"")},io=function(e){try{return Al.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function kC(e){return FC(void 0,e)}function FC(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!jO(n)||(e[n]=FC(e[n],t[n]));return e}function jO(e){return e!=="__proto__"}function UO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var BO=()=>UO().__FIREBASE_DEFAULTS__,$O=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},HO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&io(e[1]);return t&&JSON.parse(t)},Lp=()=>{try{return NC()||BO()||$O()||HO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Vp=e=>Lp()?.emulatorHosts?.[e],LC=e=>{let t=Vp(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},jp=()=>Lp()?.config,Up=e=>Lp()?.[`_${e}`];var Sn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function rr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function xl(e){return f(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function VC(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=g({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ts(JSON.stringify(n)),Ts(JSON.stringify(s)),""].join(".")}var Ds={};function WO(){let e={prod:[],emulator:[]};for(let t of Object.keys(Ds))Ds[t]?e.emulator.push(t):e.prod.push(t);return e}function zO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var PC=!1;function Nl(e,t){if(typeof window>"u"||typeof document>"u"||!rr(window.location.host)||Ds[e]===t||Ds[e]||PC)return;Ds[e]=t;function n(h){return`__firebase__banner__${h}`}let r="__firebase__banner",o=WO().prod.length>0;function s(){let h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{PC=!0,s()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=zO(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),_=n("learnmore"),I=document.getElementById(_)||document.createElement("a"),S=n("preprendIcon"),ue=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let H=h.element;a(H),u(I,_);let Le=l();c(ue,S),H.append(ue,m,I,Le),document.body.appendChild(H)}o?(m.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ss(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function jC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pl(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Rl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UC(){let e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function sn(){return Rp.NODE_CLIENT===!0||Rp.NODE_ADMIN===!0}function Ol(){try{return typeof indexedDB=="object"}catch{return!1}}function kl(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function BC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var GO="FirebaseError",Xe=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=GO,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}},vt=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?qO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xe(i,a,r)}};function qO(e,t){return e.replace(YO,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var YO=/\{\$([^}]+)}/g;function oo(e){return JSON.parse(e)}function Ie(e){return JSON.stringify(e)}var $C=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=oo(io(o[0])||""),n=oo(io(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var HC=function(e){let t=$C(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WC=function(e){let t=$C(e).claims;return typeof t=="object"&&t.admin===!0};function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Ms(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function As(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function St(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(RC(o)&&RC(s)){if(!St(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function RC(e){return e!==null&&typeof e=="object"}function Yr(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function so(e){let t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function ao(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ml=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function zC(e,t){let n=new kp(e,t);return n.subscribe.bind(n)}var kp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KO(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Pp),i.error===void 0&&(i.error=Pp),i.complete===void 0&&(i.complete=Pp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KO(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Pp(){}function xs(e,t){return`${e} failed: ${t} argument `}var GC=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,w(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ns=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var QO=1e3,ZO=2,JO=4*60*60*1e3,XO=.5;function Bp(e,t=QO,n=ZO){let r=t*Math.pow(n,e),i=Math.round(XO*r*(Math.random()-.5)*2);return Math.min(JO,r+i)}function Ae(e){return e&&e._delegate?e._delegate:e}var Fe=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Kr="[DEFAULT]";var Fl=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Sn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tk(t))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Kr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return f(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Kr){return this.instances.has(t)}getOptions(t=Kr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ek(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Kr){return this.component?this.component.multipleInstances?t:Kr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ek(e){return e===Kr?void 0:e}function tk(e){return e.instantiationMode==="EAGER"}var Ps=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Fl(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var nk=[],ee=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(ee||{}),rk={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ik=ee.INFO,ok={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},sk=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=ok[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},an=class{constructor(t){this.name=t,this._logLevel=ik,this._logHandler=sk,this._userLogHandler=null,nk.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ee))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?rk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...t),this._logHandler(this,ee.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...t),this._logHandler(this,ee.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...t),this._logHandler(this,ee.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...t),this._logHandler(this,ee.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...t),this._logHandler(this,ee.ERROR,...t)}};var ak=(e,t)=>t.some(n=>e instanceof n),qC,YC;function ck(){return qC||(qC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lk(){return YC||(YC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var KC=new WeakMap,Hp=new WeakMap,QC=new WeakMap,$p=new WeakMap,zp=new WeakMap;function uk(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(cn(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&KC.set(n,e)}).catch(()=>{}),zp.set(t,e),t}function dk(e){if(Hp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Hp.set(e,t)}var Wp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||QC.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ZC(e){Wp=e(Wp)}function hk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Ll(this),t,...n);return QC.set(r,t.sort?t.sort():[t]),cn(r)}:lk().includes(e)?function(...t){return e.apply(Ll(this),t),cn(KC.get(this))}:function(...t){return cn(e.apply(Ll(this),t))}}function fk(e){return typeof e=="function"?hk(e):(e instanceof IDBTransaction&&dk(e),ak(e,ck())?new Proxy(e,Wp):e)}function cn(e){if(e instanceof IDBRequest)return uk(e);if($p.has(e))return $p.get(e);let t=fk(e);return t!==e&&($p.set(e,t),zp.set(t,e)),t}var Ll=e=>zp.get(e);function Vl(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=cn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(cn(s.result),c.oldVersion,c.newVersion,cn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var pk=["get","getKey","getAll","getAllKeys","count"],mk=["put","add","delete","clear"],Gp=new Map;function JC(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gp.get(t))return Gp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=mk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pk.includes(n)))return;let o=function(s,...a){return f(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Gp.set(t,o),o}ZC(e=>O(g({},e),{get:(t,n,r)=>JC(t,n)||e.get(t,n,r),has:(t,n)=>!!JC(t,n)||e.has(t,n)}));var Yp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gk(e){return e.getComponent()?.type==="VERSION"}var Kp="@firebase/app",XC="0.14.1";var Mn=new an("@firebase/app"),_k="@firebase/app-compat",vk="@firebase/analytics-compat",yk="@firebase/analytics",wk="@firebase/app-check-compat",bk="@firebase/app-check",Ck="@firebase/auth",Ik="@firebase/auth-compat",Ek="@firebase/database",Dk="@firebase/data-connect",Tk="@firebase/database-compat",Sk="@firebase/functions",Mk="@firebase/functions-compat",Ak="@firebase/installations",xk="@firebase/installations-compat",Nk="@firebase/messaging",Pk="@firebase/messaging-compat",Rk="@firebase/performance",Ok="@firebase/performance-compat",kk="@firebase/remote-config",Fk="@firebase/remote-config-compat",Lk="@firebase/storage",Vk="@firebase/storage-compat",jk="@firebase/firestore",Uk="@firebase/ai",Bk="@firebase/firestore-compat",$k="firebase",Hk="12.1.0";var Qp="[DEFAULT]",Wk={[Kp]:"fire-core",[_k]:"fire-core-compat",[yk]:"fire-analytics",[vk]:"fire-analytics-compat",[bk]:"fire-app-check",[wk]:"fire-app-check-compat",[Ck]:"fire-auth",[Ik]:"fire-auth-compat",[Ek]:"fire-rtdb",[Dk]:"fire-data-connect",[Tk]:"fire-rtdb-compat",[Sk]:"fire-fn",[Mk]:"fire-fn-compat",[Ak]:"fire-iid",[xk]:"fire-iid-compat",[Nk]:"fire-fcm",[Pk]:"fire-fcm-compat",[Rk]:"fire-perf",[Ok]:"fire-perf-compat",[kk]:"fire-rc",[Fk]:"fire-rc-compat",[Lk]:"fire-gcs",[Vk]:"fire-gcs-compat",[jk]:"fire-fst",[Bk]:"fire-fst-compat",[Uk]:"fire-vertex","fire-js":"fire-js",[$k]:"fire-js-all"};var jl=new Map,zk=new Map,Zp=new Map;function eI(e,t){try{e.container.addComponent(t)}catch(n){Mn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function at(e){let t=e.name;if(Zp.has(t))return Mn.debug(`There were multiple attempts to register component ${t}.`),!1;Zp.set(t,e);for(let n of jl.values())eI(n,e);for(let n of zk.values())eI(n,e);return!0}function $t(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ct(e){return e==null?!1:e.settings!==void 0}var Gk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new vt("app","Firebase",Gk);var Jp=class{constructor(t,n,r){this._isDeleted=!1,this._options=g({},t),this._config=g({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}};var or=Hk;function Os(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=g({name:Qp,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw ir.create("bad-app-name",{appName:String(i)});if(n||(n=jp()),!n)throw ir.create("no-options");let o=jl.get(i);if(o){if(St(n,o.options)&&St(r,o.config))return o;throw ir.create("duplicate-app",{appName:i})}let s=new Ps(i);for(let c of Zp.values())s.addComponent(c);let a=new Jp(n,r,s);return jl.set(i,a),a}function Qr(e=Qp){let t=jl.get(e);if(!t&&e===Qp&&jp())return Os();if(!t)throw ir.create("no-app",{appName:e});return t}function Be(e,t,n){let r=Wk[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Mn.warn(s.join(" "));return}at(new Fe(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var qk="firebase-heartbeat-database",Yk=1,Rs="firebase-heartbeat-store",qp=null;function iI(){return qp||(qp=Vl(qk,Yk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Rs)}catch(n){console.warn(n)}}}}).catch(e=>{throw ir.create("idb-open",{originalErrorMessage:e.message})})),qp}function Kk(e){return f(this,null,function*(){try{let n=(yield iI()).transaction(Rs),r=yield n.objectStore(Rs).get(oI(e));return yield n.done,r}catch(t){if(t instanceof Xe)Mn.warn(t.message);else{let n=ir.create("idb-get",{originalErrorMessage:t?.message});Mn.warn(n.message)}}})}function tI(e,t){return f(this,null,function*(){try{let r=(yield iI()).transaction(Rs,"readwrite");yield r.objectStore(Rs).put(t,oI(e)),yield r.done}catch(n){if(n instanceof Xe)Mn.warn(n.message);else{let r=ir.create("idb-set",{originalErrorMessage:n?.message});Mn.warn(r.message)}}})}function oI(e){return`${e.name}!${e.options.appId}`}var Qk=1024,Zk=30,Xp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new em(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Zk){let i=Xk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Mn.warn(t)}})}getHeartbeatsHeader(){return f(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=nI(),{heartbeatsToSend:n,unsentEntries:r}=Jk(this._heartbeatsCache.heartbeats),i=Ts(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Mn.warn(t),""}})}};function nI(){return new Date().toISOString().substring(0,10)}function Jk(e,t=Qk){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),rI(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rI(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var em=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return Ol()?kl().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Kk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tI(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function rI(e){return Ts(JSON.stringify({version:2,heartbeats:e})).length}function Xk(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function e1(e){at(new Fe("platform-logger",t=>new Yp(t),"PRIVATE")),at(new Fe("heartbeat",t=>new Xp(t),"PRIVATE")),Be(Kp,XC,e),Be(Kp,XC,"esm2020"),Be("fire-js","")}e1("");var t1="firebase",n1="12.1.0";Be(t1,n1,"app");var cI="@firebase/installations",im="0.6.19";var lI=1e4,uI=`w:${im}`,dI="FIS_v2",r1="https://firebaseinstallations.googleapis.com/v1",i1=60*60*1e3,o1="installations",s1="Installations";var a1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Jr=new vt(o1,s1,a1);function hI(e){return e instanceof Xe&&e.code.includes("request-failed")}function fI({projectId:e}){return`${r1}/projects/${e}/installations`}function pI(e){return{token:e.token,requestStatus:2,expiresIn:l1(e.expiresIn),creationTime:Date.now()}}function mI(e,t){return f(this,null,function*(){let r=(yield t.json()).error;return Jr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function gI({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function c1(e,{refreshToken:t}){let n=gI(e);return n.append("Authorization",u1(t)),n}function _I(e){return f(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function l1(e){return Number(e.replace("s","000"))}function u1(e){return`${dI} ${e}`}function d1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=fI(e),s=gI(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:dI,appId:e.appId,sdkVersion:uI},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield _I(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:pI(d.authToken)}}else throw yield mI("Create Installation",u)})}function vI(e){return new Promise(t=>{setTimeout(t,e)})}function h1(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var f1=/^[cdef][\w-]{21}$/,rm="";function p1(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=m1(e);return f1.test(n)?n:rm}catch{return rm}}function m1(e){return h1(e).substr(0,22)}function Bl(e){return`${e.appName}!${e.appId}`}var yI=new Map;function wI(e,t){let n=Bl(e);bI(n,t),g1(n,t)}function bI(e,t){let n=yI.get(e);if(n)for(let r of n)r(t)}function g1(e,t){let n=_1();n&&n.postMessage({key:e,fid:t}),v1()}var Zr=null;function _1(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=e=>{bI(e.data.key,e.data.fid)}),Zr}function v1(){yI.size===0&&Zr&&(Zr.close(),Zr=null)}var y1="firebase-installations-database",w1=1,Xr="firebase-installations-store",tm=null;function om(){return tm||(tm=Vl(y1,w1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Xr)}}})),tm}function Ul(e,t){return f(this,null,function*(){let n=Bl(e),i=(yield om()).transaction(Xr,"readwrite"),o=i.objectStore(Xr),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&wI(e,t.fid),t})}function CI(e){return f(this,null,function*(){let t=Bl(e),r=(yield om()).transaction(Xr,"readwrite");yield r.objectStore(Xr).delete(t),yield r.done})}function $l(e,t){return f(this,null,function*(){let n=Bl(e),i=(yield om()).transaction(Xr,"readwrite"),o=i.objectStore(Xr),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&wI(e,a.fid),a})}function sm(e){return f(this,null,function*(){let t,n=yield $l(e.appConfig,r=>{let i=b1(r),o=C1(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===rm?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function b1(e){let t=e||{fid:p1(),registrationStatus:0};return II(t)}function C1(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Jr.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=I1(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:E1(e)}:{installationEntry:t}}function I1(e,t){return f(this,null,function*(){try{let n=yield d1(e,t);return Ul(e.appConfig,n)}catch(n){throw hI(n)&&n.customData.serverCode===409?yield CI(e.appConfig):yield Ul(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function E1(e){return f(this,null,function*(){let t=yield sI(e.appConfig);for(;t.registrationStatus===1;)yield vI(100),t=yield sI(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield sm(e);return r||n}return t})}function sI(e){return $l(e,t=>{if(!t)throw Jr.create("installation-not-found");return II(t)})}function II(e){return D1(e)?{fid:e.fid,registrationStatus:0}:e}function D1(e){return e.registrationStatus===1&&e.registrationTime+lI<Date.now()}function T1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=S1(e,n),s=c1(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:uI,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield _I(()=>fetch(o,l));if(u.ok){let d=yield u.json();return pI(d)}else throw yield mI("Generate Auth Token",u)})}function S1(e,{fid:t}){return`${fI(e)}/${t}/authTokens:generate`}function am(e,t=!1){return f(this,null,function*(){let n,r=yield $l(e.appConfig,o=>{if(!EI(o))throw Jr.create("not-registered");let s=o.authToken;if(!t&&x1(s))return o;if(s.requestStatus===1)return n=M1(e,t),o;{if(!navigator.onLine)throw Jr.create("app-offline");let a=P1(o);return n=A1(e,a),a}});return n?yield n:r.authToken})}function M1(e,t){return f(this,null,function*(){let n=yield aI(e.appConfig);for(;n.authToken.requestStatus===1;)yield vI(100),n=yield aI(e.appConfig);let r=n.authToken;return r.requestStatus===0?am(e,t):r})}function aI(e){return $l(e,t=>{if(!EI(t))throw Jr.create("not-registered");let n=t.authToken;return R1(n)?O(g({},t),{authToken:{requestStatus:0}}):t})}function A1(e,t){return f(this,null,function*(){try{let n=yield T1(e,t),r=O(g({},t),{authToken:n});return yield Ul(e.appConfig,r),n}catch(n){if(hI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield CI(e.appConfig);else{let r=O(g({},t),{authToken:{requestStatus:0}});yield Ul(e.appConfig,r)}throw n}})}function EI(e){return e!==void 0&&e.registrationStatus===2}function x1(e){return e.requestStatus===2&&!N1(e)}function N1(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+i1}function P1(e){let t={requestStatus:1,requestTime:Date.now()};return O(g({},e),{authToken:t})}function R1(e){return e.requestStatus===1&&e.requestTime+lI<Date.now()}function O1(e){return f(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield sm(t);return r?r.catch(console.error):am(t).catch(console.error),n.fid})}function k1(e,t=!1){return f(this,null,function*(){let n=e;return yield F1(n),(yield am(n,t)).token})}function F1(e){return f(this,null,function*(){let{registrationPromise:t}=yield sm(e);t&&(yield t)})}function L1(e){if(!e||!e.options)throw nm("App Configuration");if(!e.name)throw nm("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw nm(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function nm(e){return Jr.create("missing-app-config-values",{valueName:e})}var DI="installations",V1="installations-internal",j1=e=>{let t=e.getProvider("app").getImmediate(),n=L1(t),r=$t(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},U1=e=>{let t=e.getProvider("app").getImmediate(),n=$t(t,DI).getImmediate();return{getId:()=>O1(n),getToken:i=>k1(n,i)}};function B1(){at(new Fe(DI,j1,"PUBLIC")),at(new Fe(V1,U1,"PRIVATE"))}B1();Be(cI,im);Be(cI,im,"esm2020");var Hl="analytics",$1="firebase_id",H1="origin",W1=60*1e3,z1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pm="https://www.googletagmanager.com/gtag/js";var lt=new an("@firebase/analytics");var G1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yt=new vt("analytics","Analytics",G1);function q1(e){if(!e.startsWith(pm)){let t=yt.create("invalid-gtag-resource",{gtagURL:e});return lt.warn(t.message),""}return e}function PI(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Y1(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function K1(e,t){let n=Y1("firebase-js-sdk-policy",{createScriptURL:q1}),r=document.createElement("script"),i=`${pm}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Q1(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function Z1(e,t,n,r,i,o){return f(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield PI(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){lt.error(a)}e("config",i,o)})}function J1(e,t,n,r,i){return f(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield PI(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){lt.error(o)}})}function X1(e,t,n,r){function i(o,...s){return f(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield J1(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield Z1(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){lt.error(a)}})}return i}function eF(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=X1(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function tF(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(pm)&&n.src.includes(e))return n;return null}var nF=30,rF=1e3,lm=class{constructor(t={},n=rF){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},RI=new lm;function iF(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function oF(e){return f(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:iF(n)},i=z1.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw yt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function sF(r){return f(this,arguments,function*(e,t=RI,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw yt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw yt.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new um;return setTimeout(()=>f(this,null,function*(){c.abort()}),n!==void 0?n:W1),OI({appId:i,apiKey:o,measurementId:s},a,c,t)})}function OI(o,s,a){return f(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=RI){let{appId:c,measurementId:l}=e;try{yield aF(r,t)}catch(u){if(l)return lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield oF(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!cF(d)){if(i.deleteThrottleMetadata(c),l)return lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let h=Number(d?.customData?.httpStatus)===503?Bp(n,i.intervalMillis,nF):Bp(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(c,p),lt.debug(`Calling attemptFetch again in ${h} millis`),OI(e,p,r,i)}})}function aF(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(yt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function cF(e){if(!(e instanceof Xe)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var um=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var dm;function lF(e,t,n,r,i){return f(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=O(g({},r),{send_to:o});e("event",n,s)}})}var hm;function uF(e){hm=e}function dF(e){dm=e}function hF(){return f(this,null,function*(){if(Ol())try{yield kl()}catch(e){return lt.warn(yt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return lt.warn(yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function fF(e,t,n,r,i,o,s){return f(this,null,function*(){let a=sF(e);a.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&lt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>lt.error(h)),t.push(a);let c=hF().then(h=>{if(h)return r.getId()}),[l,u]=yield Promise.all([a,c]);tF(o)||K1(o,l.measurementId),hm&&(i("consent","default",hm),uF(void 0)),i("js",new Date);let d=s?.config??{};return d[H1]="firebase",d.update=!0,u!=null&&(d[$1]=u),i("config",l.measurementId,d),dm&&(i("set",dm),dF(void 0)),l.measurementId})}var fm=class{constructor(t){this.app=t}_delete(){return delete ks[this.app.options.appId],Promise.resolve()}},ks={},TI=[],SI={},cm="dataLayer",pF="gtag",MI,kI,AI=!1;function mF(){let e=[];if(Pl()&&e.push("This is a browser extension environment."),BC()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yt.create("invalid-analytics-context",{errorInfo:t});lt.warn(n.message)}}function gF(e,t,n){mF();let r=e.options.appId;if(!r)throw yt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yt.create("no-api-key");if(ks[r]!=null)throw yt.create("already-exists",{id:r});if(!AI){Q1(cm);let{wrappedGtag:o,gtagCore:s}=eF(ks,TI,SI,cm,pF);kI=o,MI=s,AI=!0}return ks[r]=fF(e,TI,SI,t,MI,cm,n),new fm(e)}function FI(e=Qr()){e=Ae(e);let t=$t(e,Hl);return t.isInitialized()?t.getImmediate():_F(e)}function _F(e,t={}){let n=$t(e,Hl);if(n.isInitialized()){let i=n.getImmediate();if(St(t,n.getOptions()))return i;throw yt.create("already-initialized")}return n.initialize({options:t})}function vF(e,t,n,r){e=Ae(e),lF(kI,ks[e.app.options.appId],t,n,r).catch(i=>lt.error(i))}var xI="@firebase/analytics",NI="0.10.18";function yF(){at(new Fe(Hl,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return gF(r,i,n)},"PUBLIC")),at(new Fe("analytics-internal",e,"PRIVATE")),Be(xI,NI),Be(xI,NI,"esm2020");function e(t){try{let n=t.getProvider(Hl).getImmediate();return{logEvent:(r,i,o)=>vF(n,r,i,o)}}catch(n){throw yt.create("interop-component-reg-failed",{reason:n})}}}yF();function JI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XI=JI,eE=new vt("auth","Firebase",JI());var Kl=new an("@firebase/auth");function wF(e,...t){Kl.logLevel<=ee.WARN&&Kl.warn(`Auth (${or}): ${e}`,...t)}function zl(e,...t){Kl.logLevel<=ee.ERROR&&Kl.error(`Auth (${or}): ${e}`,...t)}function un(e,...t){throw jm(e,...t)}function ei(e,...t){return jm(e,...t)}function tE(e,t,n){let r=O(g({},XI()),{[t]:n});return new vt("auth","Firebase",r).create(t,{appName:e.name})}function Nn(e){return tE(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return eE.create(e,...t)}function N(e,t,...n){if(!e)throw jm(t,...n)}function An(e){let t="INTERNAL ASSERTION FAILED: "+e;throw zl(t),new Error(t)}function cr(e,t){e||An(t)}function vm(){return typeof self<"u"&&self.location?.href||""}function bF(){return LI()==="http:"||LI()==="https:"}function LI(){return typeof self<"u"&&self.location?.protocol||null}function CF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bF()||Pl()||"connection"in navigator)?navigator.onLine:!0}function IF(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var ti=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,cr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ss()||Rl()}get(){return CF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Um(e,t){cr(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Ql=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var EF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TF=new ti(3e4,6e4);function lr(e,t){return e.tenantId&&!t.tenantId?O(g({},t),{tenantId:e.tenantId}):t}function ur(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){return nE(e,i,()=>f(this,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Yr(g({key:e.config.apiKey},u)).slice(1),h=yield e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);let p=g({method:t,headers:h},l);return jC()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&rr(e.emulatorConfig.host)&&(p.credentials="include"),Ql.fetch()(yield rE(e,e.config.apiHost,n,d),p)}))})}function nE(e,t,n){return f(this,null,function*(){e._canInitEmulator=!1;let r=g(g({},EF),t);try{let i=new ym(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Wl(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Wl(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Wl(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tE(e,u,l);un(e,u)}}catch(i){if(i instanceof Xe)throw i;un(e,"network-request-failed",{message:String(i)})}})}function Ws(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){let l=yield ur(e,t,n,r,i);return"mfaPendingCredential"in l&&un(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function rE(e,t,n,r){return f(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Um(e.config,i):`${e.config.apiScheme}://${i}`;return DF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function SF(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ym=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),TF.get())})}};function Wl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ei(e,t,r);return i.customData._tokenResponse=n,i}function VI(e){return e!==void 0&&e.enterprise!==void 0}var wm=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return SF(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function MF(e,t){return f(this,null,function*(){return ur(e,"GET","/v2/recaptchaConfig",lr(e,t))})}function AF(e,t){return f(this,null,function*(){return ur(e,"POST","/v1/accounts:delete",t)})}function Zl(e,t){return f(this,null,function*(){return ur(e,"POST","/v1/accounts:lookup",t)})}function Ls(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function iE(e,t=!1){return f(this,null,function*(){let n=Ae(e),r=yield n.getIdToken(t),i=Bm(r);N(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ls(mm(i.auth_time)),issuedAtTime:Ls(mm(i.iat)),expirationTime:Ls(mm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function mm(e){return Number(e)*1e3}function Bm(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return zl("JWT malformed, contained fewer than 3 sections"),null;try{let i=io(n);return i?JSON.parse(i):(zl("Failed to decode base64 JWT payload"),null)}catch(i){return zl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jI(e){let t=Bm(e);return N(t,"internal-error"),N(typeof t.exp<"u","internal-error"),N(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function js(e,t,n=!1){return f(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof Xe&&xF(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function xF({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var bm=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Us=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ls(this.lastLoginAt),this.creationTime=Ls(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jl(e){return f(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield js(e,Zl(t,{idToken:n}));N(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?sE(i.providerUserInfo):[],s=NF(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Us(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function oE(e){return f(this,null,function*(){let t=Ae(e);yield Jl(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function NF(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function sE(e){return e.map(r=>{var i=r,{providerId:t}=i,n=Ia(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function PF(e,t){return f(this,null,function*(){let n=yield nE(e,{},()=>f(this,null,function*(){let r=Yr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield rE(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&rr(e.emulatorConfig.host)&&(c.credentials="include"),Ql.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function RF(e,t){return f(this,null,function*(){return ur(e,"POST","/v2/accounts:revokeToken",lr(e,t))})}var Vs=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){N(t.idToken,"internal-error"),N(typeof t.idToken<"u","internal-error"),N(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):jI(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){N(t.length!==0,"internal-error");let n=jI(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(N(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield PF(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(N(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(N(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(N(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return An("not implemented")}};function sr(e,t){N(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var ar=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=Ia(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Us(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return f(this,null,function*(){let n=yield js(this,this.stsTokenManager.getToken(this.auth,t));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return iE(this,t)}reload(){return oE(this)}_assign(t){this!==t&&(N(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>g({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(O(g({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return f(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Jl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(ct(this.auth.app))return Promise.reject(Nn(this.auth));let t=yield this.getIdToken();return yield js(this,AF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return O(g({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>g({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:m,stsTokenManager:_}=n;N(d&&_,t,"internal-error");let I=Vs.fromJSON(this.name,_);N(typeof d=="string",t,"internal-error"),sr(r,t.name),sr(i,t.name),N(typeof h=="boolean",t,"internal-error"),N(typeof p=="boolean",t,"internal-error"),sr(o,t.name),sr(s,t.name),sr(a,t.name),sr(c,t.name),sr(l,t.name),sr(u,t.name);let S=new e({uid:d,auth:t,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:I,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(S.providerData=m.map(ue=>g({},ue))),c&&(S._redirectEventId=c),S}static _fromIdTokenResponse(t,n,r=!1){return f(this,null,function*(){let i=new Vs;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Jl(o),o})}static _fromGetAccountInfoResponse(t,n,r){return f(this,null,function*(){let i=n.users[0];N(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?sE(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Vs;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Us(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var UI=new Map;function xn(e){cr(e instanceof Function,"Expected a class definition");let t=UI.get(e);return t?(cr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,UI.set(e,t),t)}var OF=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),Cm=OF;function Gl(e,t,n){return`firebase:${e}:${t}:${n}`}var Xl=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Gl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return f(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Zl(this.auth,{idToken:t}).catch(()=>{});return n?ar._fromGetAccountInfoResponse(this.auth,n,t):null}return ar._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return f(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new e(xn(Cm),t,r);let i=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||xn(Cm),s=Gl(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let h=yield Zl(t,{idToken:u}).catch(()=>{});if(!h)break;d=yield ar._fromGetAccountInfoResponse(t,h,u)}else d=ar._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function BI(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hE(t))return"Blackberry";if(fE(t))return"Webos";if(cE(t))return"Safari";if((t.includes("chrome/")||lE(t))&&!t.includes("edge/"))return"Chrome";if(dE(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function aE(e=qe()){return/firefox\//i.test(e)}function cE(e=qe()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lE(e=qe()){return/crios\//i.test(e)}function uE(e=qe()){return/iemobile/i.test(e)}function dE(e=qe()){return/android/i.test(e)}function hE(e=qe()){return/blackberry/i.test(e)}function fE(e=qe()){return/webos/i.test(e)}function $m(e=qe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function kF(e=qe()){return $m(e)&&!!window.navigator?.standalone}function FF(){return UC()&&document.documentMode===10}function pE(e=qe()){return $m(e)||dE(e)||fE(e)||hE(e)||/windows phone/i.test(e)||uE(e)}function mE(e,t=[]){let n;switch(e){case"Browser":n=BI(qe());break;case"Worker":n=`${BI(qe())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${or}/${r}`}var Im=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return f(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function LF(n){return f(this,arguments,function*(e,t={}){return ur(e,"GET","/v2/passwordPolicy",lr(e,t))})}var VF=6,Em=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??VF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var Dm=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eu(this),this.idTokenSubscription=new eu(this),this.beforeStateQueue=new Im(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=xn(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Xl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return f(this,null,function*(){try{let n=yield Zl(this,{idToken:t}),r=yield ar._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return f(this,null,function*(){if(ct(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return f(this,null,function*(){try{yield Jl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=IF()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return f(this,null,function*(){if(ct(this.app))return Promise.reject(Nn(this));let n=t?Ae(t):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return f(this,null,function*(){if(!this._deleted)return t&&N(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return ct(this.app)?Promise.reject(Nn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return ct(this.app)?Promise.reject(Nn(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(xn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let t=yield LF(this),n=new Em(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new vt("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield RF(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&xn(t)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=yield Xl.create(this,[xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return f(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return f(this,null,function*(){if(t===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(N(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return f(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return f(this,null,function*(){if(ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&wF(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ri(e){return Ae(e)}var eu=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=zC(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var au={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jF(e){au=e}function gE(e){return au.loadJS(e)}function UF(){return au.recaptchaEnterpriseScript}function BF(){return au.gapiScript}function _E(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Tm=class{constructor(){this.enterprise=new Sm}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}},Sm=class{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}};var $F="recaptcha-enterprise",vE="NO_RECAPTCHA",Mm=class{constructor(t){this.type=$F,this.auth=ri(t)}verify(t="verify",n=!1){return f(this,null,function*(){function r(o){return f(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>f(this,null,function*(){MF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new wm(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;VI(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:t}).then(l=>{s(l)}).catch(()=>{s(vE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&VI(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=UF();c.length!==0&&(c+=a),gE(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Fs(e,t,n,r=!1,i=!1){return f(this,null,function*(){let o=new Mm(e),s;if(i)s=vE;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=g({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Am(e,t,n,r,i){return f(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Fs(e,t,n,n==="getOobCode");return r(e,o)}else return r(e,t).catch(o=>f(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Fs(e,t,n,n==="getOobCode");return r(e,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Fs(e,t,n);return r(e,o).catch(s=>f(this,null,function*(){if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield Fs(e,t,n,!1,!0);return r(e,a)}return Promise.reject(s)}))}else{let o=yield Fs(e,t,n,!1,!0);return r(e,o)}else return Promise.reject(i+" provider is not supported.")})}function yE(e,t){let n=$t(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(St(o,t??{}))return i;un(i,"already-initialized")}return n.initialize({options:t})}function HF(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(xn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function wE(e,t,n){let r=ri(e);N(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=bE(t),{host:s,port:a}=WF(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){N(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),N(St(l,r.config.emulator)&&St(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,rr(s)?(xl(`${o}//${s}${c}`),Nl("Auth",!0)):i||zF()}function bE(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function WF(e){let t=bE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:$I(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:$I(s)}}}function $I(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function zF(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var Bs=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return An("not implemented")}_getIdTokenResponse(t){return An("not implemented")}_linkToIdToken(t,n){return An("not implemented")}_getReauthenticationResolver(t){return An("not implemented")}};function GF(e,t){return f(this,null,function*(){return ur(e,"POST","/v1/accounts:signUp",t)})}function qF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithPassword",lr(e,t))})}function YF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithEmailLink",lr(e,t))})}function KF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithEmailLink",lr(e,t))})}var $s=class e extends Bs{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new e(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(t,n,"signInWithPassword",qF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return YF(t,{email:this._email,oobCode:this._password});default:un(t,"internal-error")}})}_linkToIdToken(t,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(t,r,"signUpPassword",GF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KF(t,{idToken:n,email:this._email,oobCode:this._password});default:un(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function gm(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signInWithIdp",lr(e,t))})}function QF(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZF(e){let t=so(ao(e)).link,n=t?so(ao(t)).deep_link_id:null,r=so(ao(e)).deep_link_id;return(r?so(ao(r)).link:null)||r||n||t||e}var tu=class e{constructor(t){let n=so(ao(t)),r=n.apiKey??null,i=n.oobCode??null,o=QF(n.mode??null);N(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){let n=ZF(t);try{return new e(n)}catch{return null}}};var CE=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return $s._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=tu.parseLink(r);return N(i,"argument-error"),$s._fromEmailAndCode(n,i.code,i.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),nu=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var xm=class extends nu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function JF(e,t){return f(this,null,function*(){return Ws(e,"POST","/v1/accounts:signUp",lr(e,t))})}var co=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return f(this,null,function*(){let o=yield ar._fromIdTokenResponse(t,r,i),s=HI(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return f(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=HI(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function HI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Nm=class e extends Xe{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function IE(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nm._fromErrorAndOperation(e,o,t,r):o})}function XF(e,t,n=!1){return f(this,null,function*(){let r=yield js(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return co._forOperation(e,"link",r)})}function eL(e,t,n=!1){return f(this,null,function*(){let{auth:r}=e;if(ct(r.app))return Promise.reject(Nn(r));let i="reauthenticate";try{let o=yield js(e,IE(r,i,t,e),n);N(o.idToken,r,"internal-error");let s=Bm(o.idToken);N(s,r,"internal-error");let{sub:a}=s;return N(e.uid===a,r,"user-mismatch"),co._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&un(r,"user-mismatch"),o}})}function EE(e,t,n=!1){return f(this,null,function*(){if(ct(e.app))return Promise.reject(Nn(e));let r="signIn",i=yield IE(e,r,t),o=yield co._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function DE(e,t){return f(this,null,function*(){return EE(ri(e),t)})}function TE(e){return f(this,null,function*(){let t=ri(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Hm(e,t,n){return f(this,null,function*(){if(ct(e.app))return Promise.reject(Nn(e));let r=ri(e),s=yield Am(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JF,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&TE(e),c}),a=yield co._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Wm(e,t,n){return ct(e.app)?Promise.reject(Nn(e)):DE(Ae(e),CE.credential(t,n)).catch(r=>f(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&TE(e),r}))}function SE(e,t,n,r){return Ae(e).onIdTokenChanged(t,n,r)}function ME(e,t,n){return Ae(e).beforeAuthStateChanged(t,n)}var ru="__sak";var iu=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var tL=1e3,nL=10,rL=(()=>{class e extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pE(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);FF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,nL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},tL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield yr(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield yr(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield yr(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),AE=rL;var iL=(()=>{class e extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),zm=iL;function oL(e){return Promise.all(e.map(t=>f(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var sL=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>f(this,null,function*(){return u(r.origin,s)})),l=yield oL(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function xE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var Pm=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=xE("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ln(){return window}function aL(e){ln().location.href=e}function NE(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}function cL(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lL(){return navigator?.serviceWorker?.controller||null}function uL(){return NE()?self:null}var PE="firebaseLocalStorageDb",dL=1,ou="firebaseLocalStorage",RE="fbase_key",ni=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function cu(e,t){return e.transaction([ou],t?"readwrite":"readonly").objectStore(ou)}function hL(){let e=indexedDB.deleteDatabase(PE);return new ni(e).toPromise()}function Rm(){let e=indexedDB.open(PE,dL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(ou,{keyPath:RE})}catch(i){n(i)}}),e.addEventListener("success",()=>f(this,null,function*(){let r=e.result;r.objectStoreNames.contains(ou)?t(r):(r.close(),yield hL(),t(yield Rm()))}))})}function WI(e,t,n){return f(this,null,function*(){let r=cu(e,!0).put({[RE]:t,value:n});return new ni(r).toPromise()})}function fL(e,t){return f(this,null,function*(){let n=cu(e,!1).get(t),r=yield new ni(n).toPromise();return r===void 0?null:r.value})}function zI(e,t){let n=cu(e,!0).delete(t);return new ni(n).toPromise()}var pL=800,mL=3,gL=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield Rm(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>mL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return NE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=sL._getInstance(uL()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){if(this.activeServiceWorker=yield cL(),!this.activeServiceWorker)return;this.sender=new Pm(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Rm();return yield WI(n,ru,"1"),yield zI(n,ru),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>WI(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>fL(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>zI(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(o=>{let s=cu(o,!1).getAll();return new ni(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),pL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),OE=gL;var i5=_E("rcb"),o5=new ti(3e4,6e4);function _L(e,t){return t?xn(t):(N(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Hs=class extends Bs{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gm(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gm(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gm(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function vL(e){return EE(e.auth,new Hs(e),e.bypassAuthState)}function yL(e){let{auth:t,user:n}=e;return N(n,t,"internal-error"),eL(n,new Hs(e),e.bypassAuthState)}function wL(e){return f(this,null,function*(){let{auth:t,user:n}=e;return N(n,t,"internal-error"),XF(n,new Hs(e),e.bypassAuthState)})}var Om=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>f(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vL;case"linkViaPopup":case"linkViaRedirect":return wL;case"reauthViaPopup":case"reauthViaRedirect":return yL;default:un(this.auth,"internal-error")}}resolve(t){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var s5=new ti(2e3,1e4);var bL="pendingRedirect",ql=new Map,km=class e extends Om{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let t=ql.get(this.auth._key());if(!t){try{let r=(yield CL(this.resolver,this.auth))?yield yr(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}ql.set(this.auth._key(),t)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return f(this,null,function*(){if(t.type==="signInViaRedirect")return yr(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,yr(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function CL(e,t){return f(this,null,function*(){let n=DL(t),r=EL(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function IL(e,t){ql.set(e._key(),t)}function EL(e){return xn(e._redirectPersistence)}function DL(e){return Gl(bL,e.config.apiKey,e.name)}function TL(e,t,n=!1){return f(this,null,function*(){if(ct(e.app))return Promise.reject(Nn(e));let r=ri(e),i=_L(r,t),s=yield new km(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var SL=10*60*1e3,Fm=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ML(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!kE(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ei(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=SL&&this.cachedEventUids.clear(),this.cachedEventUids.has(GI(t))}saveEventToCache(t){this.cachedEventUids.add(GI(t)),this.lastProcessedEventTime=Date.now()}};function GI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function kE({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function ML(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(e);default:return!1}}function AL(n){return f(this,arguments,function*(e,t={}){return ur(e,"GET","/v1/projects",t)})}var xL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NL=/^https?/;function PL(e){return f(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield AL(e);for(let n of t)try{if(RL(n))return}catch{}un(e,"unauthorized-domain")})}function RL(e){let t=vm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!NL.test(n))return!1;if(xL.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var OL=new ti(3e4,6e4);function qI(){let e=ln().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function kL(e){return new Promise((t,n)=>{function r(){qI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qI(),n(ei(e,"network-request-failed"))},timeout:OL.get()})}if(ln().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ln().gapi?.load)r();else{let i=_E("iframefcb");return ln()[i]=()=>{gapi.load?r():n(ei(e,"network-request-failed"))},gE(`${BF()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Yl=null,t})}var Yl=null;function FL(e){return Yl=Yl||kL(e),Yl}var LL=new ti(5e3,15e3),VL="__/auth/iframe",jL="emulator/auth/iframe",UL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $L(e){let t=e.config;N(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?Um(t,jL):`https://${e.config.authDomain}/${VL}`,r={apiKey:t.apiKey,appName:e.name,v:or},i=BL.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Yr(r).slice(1)}`}function HL(e){return f(this,null,function*(){let t=yield FL(e),n=ln().gapi;return N(n,e,"internal-error"),t.open({where:document.body,url:$L(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UL,dontclear:!0},r=>new Promise((i,o)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ei(e,"network-request-failed"),a=ln().setTimeout(()=>{o(s)},LL.get());function c(){ln().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var WL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zL=500,GL=600,qL="_blank",YL="http://localhost",su=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function KL(e,t,n,r=zL,i=GL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=O(g({},WL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=qe().toLowerCase();n&&(a=lE(l)?qL:n),aE(l)&&(t=t||YL,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(kF(l)&&a!=="_self")return QL(t||"",a),new su(null);let d=window.open(t||"",a,u);N(d,e,"popup-blocked");try{d.focus()}catch{}return new su(d)}function QL(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ZL="__/auth/handler",JL="emulator/auth/handler",XL=encodeURIComponent("fac");function YI(e,t,n,r,i,o){return f(this,null,function*(){N(e.config.authDomain,e,"auth-domain-config-required"),N(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:or,eventId:i};if(t instanceof nu){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Ms(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof xm){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${XL}=${encodeURIComponent(c)}`:"";return`${eV(e)}?${Yr(a).slice(1)}${l}`})}function eV({config:e}){return e.emulator?Um(e,JL):`https://${e.authDomain}/${ZL}`}var _m="webStorageSupport",Lm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zm,this._completeRedirectFn=TL,this._overrideRedirectResult=IL}_openPopup(t,n,r,i){return f(this,null,function*(){cr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield YI(t,n,r,vm(),i);return KL(t,o,xE())})}_openRedirect(t,n,r,i){return f(this,null,function*(){yield this._originValidation(t);let o=yield YI(t,n,r,vm(),i);return aL(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(cr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return f(this,null,function*(){let n=yield HL(t),r=new Fm(t);return n.register("authEvent",i=>(N(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_m,{type:_m},i=>{let o=i?.[0]?.[_m];o!==void 0&&n(!!o),un(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return pE()||cE()||$m()}},FE=Lm;var KI="@firebase/auth",QI="1.11.0";var Vm=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tV(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nV(e){at(new Fe("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;N(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mE(e)},l=new Dm(r,i,o,c);return HF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),at(new Fe("auth-internal",t=>{let n=ri(t.getProvider("auth").getImmediate());return(r=>new Vm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(KI,QI,tV(e)),Be(KI,QI,"esm2020")}var rV=5*60,iV=Up("authIdTokenMaxAge")||rV,ZI=null,oV=e=>t=>f(void 0,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iV)return;let i=n?.token;ZI!==i&&(ZI=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function zs(e=Qr()){let t=$t(e,"auth");if(t.isInitialized())return t.getImmediate();let n=yE(e,{popupRedirectResolver:FE,persistence:[OE,AE,zm]}),r=Up("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=oV(o.toString());ME(n,s,()=>s(n.currentUser)),SE(n,a=>s(a))}}let i=Vp("auth");return i&&wE(n,`http://${i}`),n}function sV(){return document.getElementsByTagName("head")?.[0]??document}jF({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=ei("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",sV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nV("Browser");var LE="@firebase/database",VE="1.1.0";var Yg="";function aV(e){Yg=e}var Xm=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ie(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:oo(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var eg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Bt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var gD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Xm(t)}}catch{}return new eg},oi=gD("localStorage"),tg=gD("sessionStorage");var ho=new an("@firebase/database"),cV=function(){let e=1;return function(){return e++}}(),_D=function(e){let t=GC(e),n=new Ml;n.update(t);let r=n.digest();return Al.encodeByteArray(r)},da=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=da.apply(null,r):typeof r=="object"?t+=Ie(r):t+=r,t+=" "}return t},si=null,jE=!0,lV=function(e,t){w(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(ho.logLevel=ee.VERBOSE,si=ho.log.bind(ho),t&&tg.set("logging_enabled",!0)):typeof e=="function"?si=e:(si=null,tg.remove("logging_enabled"))},$e=function(...e){if(jE===!0&&(jE=!1,si===null&&tg.get("logging_enabled")===!0&&lV(!0)),si){let t=da.apply(null,e);si(t)}},ha=function(e){return function(...t){$e(e,...t)}},ng=function(...e){let t="FIREBASE INTERNAL ERROR: "+da(...e);ho.error(t)},Pn=function(...e){let t=`FIREBASE FATAL ERROR: ${da(...e)}`;throw ho.error(t),new Error(t)},tt=function(...e){let t="FIREBASE WARNING: "+da(...e);ho.warn(t)},uV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kg=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},dV=function(e){if(sn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},po="[MIN_NAME]",ai="[MAX_NAME]",li=function(e,t){if(e===t)return 0;if(e===po||t===ai)return-1;if(t===po||e===ai)return 1;{let n=UE(e),r=UE(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},hV=function(e,t){return e===t?0:e<t?-1:1},Gs=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ie(t))},Qg=function(e){if(typeof e!="object"||e===null)return Ie(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Ie(t[r]),n+=":",n+=Qg(e[t[r]]);return n+="}",n},vD=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function He(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var yD=function(e){w(!Kg(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},fV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},pV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function mV(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var gV=new RegExp("^-?(0*)\\d{1,10}$"),_V=-2147483648,vV=2147483647,UE=function(e){if(gV.test(e)){let t=Number(e);if(t>=_V&&t<=vV)return t}return null},Io=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw tt("Exception was thrown by user callback.",n),t},Math.floor(0))}},yV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zs=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var rg=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,ct(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){tt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ig=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?($e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tt(t)}},Js=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),uu="5",wD="v",bD="s",CD="r",ID="f",ED=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DD="ls",TD="p",og="ac",SD="websocket",MD="long_polling";var du=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=oi.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&oi.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function wV(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function AD(e,t,n){w(typeof t=="string","typeof type must == string"),w(typeof n=="object","typeof params must == object");let r;if(t===SD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===MD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);wV(e)&&(n.ns=e.namespace);let i=[];return He(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var sg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Bt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return kC(this.counters_)}};var Gm={},qm={};function Zg(e){let t=e.toString();return Gm[t]||(Gm[t]=new sg),Gm[t]}function bV(e,t){let n=e.toString();return qm[n]||(qm[n]=t()),qm[n]}var ag=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Io(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var BE="start",CV="close",IV="pLPCommand",EV="pRTLPCB",xD="id",ND="pw",PD="ser",DV="cb",TV="seg",SV="ts",MV="d",AV="dframe",RD=1870,OD=30,xV=RD-OD,NV=25e3,PV=3e4,cg=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ha(t),this.stats_=Zg(n),this.urlFn=c=>(this.appCheckToken&&(c[og]=this.appCheckToken),AD(n,MD,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ag(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PV)),dV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lg((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===BE)this.id=a,this.password=c;else if(s===CV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[BE]="t",r[PD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[DV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wD]=uu,this.transportSessionId&&(r[bD]=this.transportSessionId),this.lastSessionId&&(r[DD]=this.lastSessionId),this.applicationId&&(r[TD]=this.applicationId),this.appCheckToken&&(r[og]=this.appCheckToken),typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(r[CD]=ID);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return sn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fV()&&!pV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Ie(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Fp(n),i=vD(r,xV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(sn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[AV]="t",r[xD]=t,r[ND]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Ie(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},lg=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,sn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=cV(),window[IV+this.uniqueCallbackIdentifier]=t,window[EV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){$e("frame writing exception"),a.stack&&$e(a.stack),$e(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||$e("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[xD]=this.myID,t[ND]=this.myPW,t[PD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+OD+r.length<=RD;){let s=this.pendingSegs.shift();r=r+"&"+TV+i+"="+s.seg+"&"+SV+i+"="+s.ts+"&"+MV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(NV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){sn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{$e("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var RV=16384,OV=45e3,hu=null;typeof MozWebSocket<"u"?hu=MozWebSocket:typeof WebSocket<"u"&&(hu=WebSocket);var qs=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ha(this.connId),this.stats_=Zg(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[wD]=uu,!sn()&&typeof location<"u"&&location.hostname&&ED.test(location.hostname)&&(a[CD]=ID),r&&(a[bD]=r),i&&(a[DD]=i),o&&(a[og]=o),s&&(a[TD]=s),AD(n,SD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,oi.set("previous_websocket_failure",!0);try{let i;if(sn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${uu}/${Yg}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new hu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&hu!==null&&!e.forceDisallow_}static previouslyFailed(){return oi.isInMemoryStorage||oi.get("previous_websocket_failure")===!0}markConnectionHealthy(){oi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=oo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(w(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Ie(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=vD(r,RV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(OV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),kV=(()=>{class e{static get ALL_TRANSPORTS(){return[cg,qs]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=qs&&qs.isAvailable(),i=r&&!qs.previouslyFailed();if(n.webSocketOnly&&(r||tt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qs];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),FV=6e4,LV=5e3,VV=10*1024,jV=100*1024,Ym="t",$E="d",UV="s",HE="r",BV="e",WE="o",zE="a",GE="n",qE="p",$V="h",ug=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ha("c:"+this.id+":"),this.transportManager_=new kV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ym in t){let n=t[Ym];n===zE?this.upgradeIfSecondaryHealthy_():n===HE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Gs("t",t),r=Gs("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:qE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:GE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Gs("t",t),r=Gs("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Gs(Ym,t);if($E in t){let r=t[$E];if(n===$V){let i=g({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===GE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===UV?this.onConnectionShutdown_(r):n===HE?this.onReset_(r):n===BV?ng("Server Error: "+r):n===WE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ng("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),uu!==r&&tt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(LV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:qE,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(oi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var fu=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var pu=class{constructor(t){this.allowedEvents_=t,this.listeners_={},w(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){w(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var mu=class e extends pu{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ss()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return w(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var YE=32,KE=768,X=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function Q(){return new X("")}function B(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pr(e){return e.pieces_.length-e.pieceNum_}function le(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new X(e.pieces_,t)}function Jg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function HV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function na(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function kD(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new X(t,0)}function me(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof X)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new X(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function et(e,t){let n=B(e),r=B(t);if(n===null)return t;if(n===r)return et(le(e),le(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function WV(e,t){let n=na(e,0),r=na(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=li(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Xg(e,t){if(pr(e)!==pr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Mt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(pr(e)>pr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var dg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=na(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ns(this.parts_[r]);FD(this)}};function zV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ns(t),FD(e)}function GV(e){let t=e.parts_.pop();e.byteLength_-=Ns(t),e.parts_.length>0&&(e.byteLength_-=1)}function FD(e){if(e.byteLength_>KE)throw new Error(e.errorPrefix_+"has a key path longer than "+KE+" bytes ("+e.byteLength_+").");if(e.parts_.length>YE)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YE+") or object contains a cycle "+ii(e))}function ii(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var hg=class e extends pu{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return w(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ys=1e3,qV=60*5*1e3,QE=30*1e3,YV=1.3,KV=3e4,QV="server_kill",ZE=3,e_=(()=>{class e extends fu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=ha("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ys,this.maxReconnectDelay_=qV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!sn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&mu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Ie(s)),w(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Sn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),w(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Bt(n,"w")){let i=qr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=QE)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=HC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),w(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ie(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ng("Unrecognized action received from server: "+Ie(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){w(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KV&&(this.reconnectDelay_=Ys),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*YV)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){w(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?$e("getToken() completed but was canceled"):($e("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,c=new ug(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{tt(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(QV)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&tt(h),l())}}})}interrupt(n){$e("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){$e("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ms(this.interruptReasons_)&&(this.reconnectDelay_=Ys,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Qg(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new X(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){$e("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZE&&(this.reconnectDelay_=QE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){$e("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";sn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Yg.replace(/\./g,"-")]=1,Ss()?n["framework.cordova"]=1:Rl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=mu.getInstance().currentlyOnline();return Ms(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),$=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var mo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new $(po,t),i=new $(po,n);return this.compare(r,i)!==0}minPost(){return $.MIN}};var lu,gu=class extends mo{static get __EMPTY_NODE(){return lu}static set __EMPTY_NODE(t){lu=t}compare(t,n){return li(t.name,n.name)}isDefinedOn(t){throw Gr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return $.MIN}maxPost(){return new $(ai,lu)}makePost(t,n){return w(typeof t=="string","KeyIndex indexValue must always be a string."),new $(t,lu)}toString(){return".key"}},fo=new gu;var uo=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ht=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??At.EMPTY_NODE,this.right=s??At.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return At.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),fg=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Ht(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},At=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ht.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ht.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new uo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new uo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new uo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new uo(this.root_,null,this.comparator_,!0,t)}};At.EMPTY_NODE=new fg;function ZV(e,t){return li(e.name,t.name)}function t_(e,t){return li(e,t)}var pg;function JV(e){pg=e}var LD=function(e){return typeof e=="number"?"number:"+yD(e):"string:"+e},VD=function(e){if(e.isLeafNode()){let t=e.val();w(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Bt(t,".sv"),"Priority must be a string or number.")}else w(e===pg||e.isEmpty(),"priority of unexpected type.");w(e===pg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var JE,go=(()=>{class e{static set __childrenNodeConstructor(n){JE=n}static get __childrenNodeConstructor(){return JE}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,w(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),VD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:B(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=B(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(w(i!==".priority"||pr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+LD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=yD(this.value_):n+=this.value_,this.lazyHash_=_D(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(w(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return w(o>=0,"Unknown leaf type: "+r),w(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),jD,UD;function XV(e){jD=e}function ej(e){UD=e}var mg=class extends mo{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?li(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return $.MIN}maxPost(){return new $(ai,new go("[PRIORITY-POST]",UD))}makePost(t,n){let r=jD(t);return new $(n,new go("[PRIORITY-POST]",r))}toString(){return".priority"}},ge=new mg;var tj=Math.log(2),gg=class{constructor(t){let n=o=>parseInt(Math.log(o)/tj,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},_u=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=e[c],h=n?n(d):d,new Ht(h,d.node,Ht.BLACK,null,null);{let p=parseInt(u/2,10)+c,m=i(c,p),_=i(p+1,l);return d=e[p],h=n?n(d):d,new Ht(h,d.node,Ht.BLACK,m,_)}},o=function(c){let l=null,u=null,d=e.length,h=function(m,_){let I=d-m,S=d;d-=m;let ue=i(I+1,S),H=e[I],Le=n?n(H):H;p(new Ht(Le,H.node,_,null,ue))},p=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let _=c.nextBitIsOne(),I=Math.pow(2,c.count-(m+1));_?h(I,Ht.BLACK):(h(I,Ht.BLACK),h(I,Ht.RED))}return u},s=new gg(e.length),a=o(s);return new At(r||t,a)};var Km,lo={},_o=class e{static get Default(){return w(lo&&ge,"ChildrenNode.ts has not been loaded"),Km=Km||new e({".priority":lo},{".priority":ge}),Km}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=qr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof At?n:null}hasIndex(t){return Bt(this.indexSet_,t.toString())}addIndex(t,n){w(t!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator($.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=_u(r,t.getCompare()):a=lo;let c=t.toString(),l=g({},this.indexSet_);l[c]=t;let u=g({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=As(this.indexes_,(i,o)=>{let s=qr(this.indexSet_,o);if(w(s,"Missing index implementation for "+o),i===lo)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator($.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),_u(a,s.getCompare())}else return lo;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new $(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=As(this.indexes_,i=>{if(i===lo)return i;{let o=n.get(t.name);return o?i.remove(new $(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ks,L=(()=>{class e{static get EMPTY_NODE(){return Ks||(Ks=new e(new At(t_),null,_o.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&VD(this.priorityNode_),this.children_.isEmpty()&&w(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ks}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ks:r}}getChild(n){let r=B(n);return r===null?this:this.getImmediateChild(r).getChild(le(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(w(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new $(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ks:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=B(n);if(i===null)return r;{w(B(n)!==".priority"||pr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(le(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ge,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+LD(this.getPriority().val())+":"),this.forEachChild(ge,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":_D(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new $(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new $(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new $(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,$.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===fa?-1:0}withIndex(n){if(n===fo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===fo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ge),o=r.getIterator(ge),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===fo?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),_g=class extends L{constructor(){super(new At(t_),L.EMPTY_NODE,_o.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return L.EMPTY_NODE}isEmpty(){return!1}},fa=new _g;Object.defineProperties($,{MIN:{value:new $(po,L.EMPTY_NODE)},MAX:{value:new $(ai,fa)}});gu.__EMPTY_NODE=L.EMPTY_NODE;go.__childrenNodeConstructor=L;JV(fa);ej(fa);var nj=!0;function xe(e,t=null){if(e===null)return L.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),w(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new go(n,xe(t))}if(!(e instanceof Array)&&nj){let n=[],r=!1;if(He(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=xe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new $(s,c)))}}),n.length===0)return L.EMPTY_NODE;let o=_u(n,ZV,s=>s.name,t_);if(r){let s=_u(n,ge.getCompare());return new L(o,xe(t),new _o({".priority":s},{".priority":ge}))}else return new L(o,xe(t),_o.Default)}else{let n=L.EMPTY_NODE;return He(e,(r,i)=>{if(Bt(e,r)&&r.substring(0,1)!=="."){let o=xe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(xe(t))}}XV(xe);var vg=class extends mo{constructor(t){super(),this.indexPath_=t,w(!W(t)&&B(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?li(t.name,n.name):o}makePost(t,n){let r=xe(t),i=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new $(n,i)}maxPost(){let t=L.EMPTY_NODE.updateChild(this.indexPath_,fa);return new $(ai,t)}toString(){return na(this.indexPath_,0).join("/")}};var yg=class extends mo{compare(t,n){let r=t.node.compareTo(n.node);return r===0?li(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return $.MIN}maxPost(){return $.MAX}makePost(t,n){let r=xe(t);return new $(n,r)}toString(){return".value"}},rj=new yg;function BD(e){return{type:"value",snapshotNode:e}}function vo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ra(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ia(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function ij(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var oa=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){w(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(ra(n,a)):w(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(vo(n,r)):s.trackChildChange(ia(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ge,(i,o)=>{n.hasChild(i)||r.trackChildChange(ra(i,o))}),n.isLeafNode()||n.forEachChild(ge,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(ia(i,o,s))}else r.trackChildChange(vo(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?L.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var vu=class e{constructor(t){this.indexedFilter_=new oa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new $(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(L.EMPTY_NODE);let o=this;return n.forEachChild(ge,(s,a)=>{o.matches(new $(s,a))||(i=i.updateImmediateChild(s,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var wg=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new $(n,r))||(r=L.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=L.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(L.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();let a=t;w(a.numChildren()===this.limit_,"");let c=new $(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let p=h==null?1:s(h,c);if(u&&!r.isEmpty()&&p>=0)return o?.trackChildChange(ia(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(ra(n,d));let _=a.updateImmediateChild(n,L.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(vo(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(ra(l.name,l.node)),o.trackChildChange(vo(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,L.EMPTY_NODE)):t}};var bg=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return w(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return w(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:po}hasEnd(){return this.endSet_}getIndexEndValue(){return w(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return w(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return w(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function oj(e){return e.loadsAllData()?new oa(e.getIndex()):e.hasLimit()?new wg(e):new vu(e)}function XE(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ge?n="$priority":e.index_===rj?n="$value":e.index_===fo?n="$key":(w(e.index_ instanceof vg,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ie(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Ie(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Ie(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Ie(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Ie(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function eD(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ge&&(t.i=e.index_.toString()),t}var Cg=class e extends fu{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(w(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ha("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=XE(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),qr(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=XE(t._queryParams),r=t._path.toString(),i=new Sn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Yr(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=oo(a.responseText)}catch{tt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Ig=class{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function yu(){return{value:null,children:new Map}}function $D(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=B(t);e.children.has(r)||e.children.set(r,yu());let i=e.children.get(r);t=le(t),$D(i,t,n)}}function Eg(e,t,n){e.value!==null?n(t,e.value):sj(e,(r,i)=>{let o=new X(t.toString()+"/"+r);Eg(i,o,n)})}function sj(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Dg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=g({},t);return this.last_&&He(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var tD=10*1e3,aj=30*1e3,cj=5*60*1e3,Tg=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Dg(t);let r=tD+(aj-tD)*Math.random();Zs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;He(t,(i,o)=>{o>0&&Bt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*cj))}};var dn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(dn||{});function n_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function r_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function i_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Sg=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=dn.ACK_USER_WRITE,this.source=n_()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return w(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new X(t));return new e(Q(),n,this.revert)}}else return w(B(this.path)===t,"operationForChild called for unrelated child."),new e(le(this.path),this.affectedTree,this.revert)}};var wu=class e{constructor(t,n){this.source=t,this.path=n,this.type=dn.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,Q()):new e(this.source,le(this.path))}};var yo=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=dn.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,Q(),this.snap.getImmediateChild(t)):new e(this.source,le(this.path),this.snap)}};var sa=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=dn.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new X(t));return n.isEmpty()?null:n.value?new yo(this.source,Q(),n.value):new e(this.source,Q(),n)}else return w(B(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var hn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=B(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var Mg=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function lj(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(ij(s.childName,s.snapshotNode))}),Qs(e,i,"child_removed",t,r,n),Qs(e,i,"child_added",t,r,n),Qs(e,i,"child_moved",o,r,n),Qs(e,i,"child_changed",t,r,n),Qs(e,i,"value",t,r,n),i}function Qs(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>dj(e,a,c)),s.forEach(a=>{let c=uj(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function uj(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function dj(e,t,n){if(t.childName==null||n.childName==null)throw Gr("Should only compare child_ events.");let r=new $(t.childName,t.snapshotNode),i=new $(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Ou(e,t){return{eventCache:e,serverCache:t}}function Xs(e,t,n,r){return Ou(new hn(t,n,r),e.serverCache)}function HD(e,t,n,r){return Ou(e.eventCache,new hn(t,n,r))}function bu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ci(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Qm,hj=()=>(Qm||(Qm=new At(hV)),Qm),nt=class e{static fromObject(t){let n=new e(null);return He(t,(r,i)=>{n=n.set(new X(r),i)}),n}constructor(t,n=hj()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(W(t))return null;{let r=B(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(le(t),n);return o!=null?{path:me(new X(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=B(t),r=this.children.get(n);return r!==null?r.subtree(le(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=B(t),o=(this.children.get(r)||new e(null)).set(le(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=B(t),r=this.children.get(n);if(r){let i=r.remove(le(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=B(t),r=this.children.get(n);return r?r.get(le(t)):null}}setTree(t,n){if(W(t))return n;{let r=B(t),o=(this.children.get(r)||new e(null)).setTree(le(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(Q(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(me(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Q(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=B(t),s=this.children.get(o);return s?s.findOnPath_(le(t),me(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Q(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=B(t),o=this.children.get(i);return o?o.foreachOnPath_(le(t),me(n,i),r):new e(null)}}foreach(t){this.foreach_(Q(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(me(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Wt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new nt(null))}};function ea(e,t,n){if(W(t))return new Wt(new nt(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=et(i,t);return o=o.updateChild(s,n),new Wt(e.writeTree_.set(i,o))}else{let i=new nt(n),o=e.writeTree_.setTree(t,i);return new Wt(o)}}}function Ag(e,t,n){let r=e;return He(n,(i,o)=>{r=ea(r,me(t,i),o)}),r}function nD(e,t){if(W(t))return Wt.empty();{let n=e.writeTree_.setTree(t,new nt(null));return new Wt(n)}}function xg(e,t){return ui(e,t)!=null}function ui(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(et(n.path,t)):null}function rD(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ge,(r,i)=>{t.push(new $(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new $(r,i.value))}),t}function hr(e,t){if(W(t))return e;{let n=ui(e,t);return n!=null?new Wt(new nt(n)):new Wt(e.writeTree_.subtree(t))}}function Ng(e){return e.writeTree_.isEmpty()}function wo(e,t){return WD(Q(),e.writeTree_,t)}function WD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(w(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=WD(me(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(me(e,".priority"),r)),n}}function ku(e,t){return YD(t,e)}function fj(e,t,n,r,i){w(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ea(e.visibleWrites,t,n)),e.lastWriteId=r}function pj(e,t,n,r){w(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Ag(e.visibleWrites,t,n),e.lastWriteId=r}function mj(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function gj(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);w(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&_j(a,r.path)?i=!1:Mt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return vj(e),!0;if(r.snap)e.visibleWrites=nD(e.visibleWrites,r.path);else{let a=r.children;He(a,c=>{e.visibleWrites=nD(e.visibleWrites,me(r.path,c))})}return!0}else return!1}function _j(e,t){if(e.snap)return Mt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Mt(me(e.path,n),t))return!0;return!1}function vj(e){e.visibleWrites=zD(e.allWrites,yj,Q()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function yj(e){return e.visible}function zD(e,t,n){let r=Wt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Mt(n,s)?(a=et(n,s),r=ea(r,a,o.snap)):Mt(s,n)&&(a=et(s,n),r=ea(r,Q(),o.snap.getChild(a)));else if(o.children){if(Mt(n,s))a=et(n,s),r=Ag(r,a,o.children);else if(Mt(s,n))if(a=et(s,n),W(a))r=Ag(r,Q(),o.children);else{let c=qr(o.children,B(a));if(c){let l=c.getChild(le(a));r=ea(r,Q(),l)}}}else throw Gr("WriteRecord should have .snap or .children")}}return r}function GD(e,t,n,r,i){if(!r&&!i){let o=ui(e.visibleWrites,t);if(o!=null)return o;{let s=hr(e.visibleWrites,t);if(Ng(s))return n;if(n==null&&!xg(s,Q()))return null;{let a=n||L.EMPTY_NODE;return wo(s,a)}}}else{let o=hr(e.visibleWrites,t);if(!i&&Ng(o))return n;if(!i&&n==null&&!xg(o,Q()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Mt(l.path,t)||Mt(t,l.path))},a=zD(e.allWrites,s,t),c=n||L.EMPTY_NODE;return wo(a,c)}}}function wj(e,t,n){let r=L.EMPTY_NODE,i=ui(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ge,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=hr(e.visibleWrites,t);return n.forEachChild(ge,(s,a)=>{let c=wo(hr(o,new X(s)),a);r=r.updateImmediateChild(s,c)}),rD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=hr(e.visibleWrites,t);return rD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function bj(e,t,n,r,i){w(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=me(t,n);if(xg(e.visibleWrites,o))return null;{let s=hr(e.visibleWrites,o);return Ng(s)?i.getChild(n):wo(s,i.getChild(n))}}function Cj(e,t,n,r){let i=me(t,n),o=ui(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=hr(e.visibleWrites,i);return wo(s,r.getNode().getImmediateChild(n))}else return null}function Ij(e,t){return ui(e.visibleWrites,t)}function Ej(e,t,n,r,i,o,s){let a,c=hr(e.visibleWrites,t),l=ui(c,Q());if(l!=null)a=l;else if(n!=null)a=wo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=h.getNext();for(;p&&u.length<i;)d(p,r)!==0&&u.push(p),p=h.getNext();return u}else return[]}function Dj(){return{visibleWrites:Wt.empty(),allWrites:[],lastWriteId:-1}}function Cu(e,t,n,r){return GD(e.writeTree,e.treePath,t,n,r)}function o_(e,t){return wj(e.writeTree,e.treePath,t)}function iD(e,t,n,r){return bj(e.writeTree,e.treePath,t,n,r)}function Iu(e,t){return Ij(e.writeTree,me(e.treePath,t))}function Tj(e,t,n,r,i,o){return Ej(e.writeTree,e.treePath,t,n,r,i,o)}function s_(e,t,n){return Cj(e.writeTree,e.treePath,t,n)}function qD(e,t){return YD(me(e.treePath,t),e.writeTree)}function YD(e,t){return{treePath:e,writeTree:t}}var Pg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;w(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),w(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ia(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,ra(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,vo(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ia(r,t.snapshotNode,i.oldSnap));else throw Gr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Rg=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},KD=new Rg,aa=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new hn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return s_(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ci(this.viewCache_),o=Tj(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function Sj(e){return{filter:e}}function Mj(e,t){w(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),w(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Aj(e,t,n,r,i){let o=new Pg,s,a;if(n.type===dn.OVERWRITE){let l=n;l.source.fromUser?s=Og(e,t,l.path,l.snap,r,i,o):(w(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=Eu(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===dn.MERGE){let l=n;l.source.fromUser?s=Nj(e,t,l.path,l.children,r,i,o):(w(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=kg(e,t,l.path,l.children,r,i,a,o))}else if(n.type===dn.ACK_USER_WRITE){let l=n;l.revert?s=Oj(e,t,l.path,r,i,o):s=Pj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===dn.LISTEN_COMPLETE)s=Rj(e,t,n.path,r,o);else throw Gr("Unknown operation type: "+n.type);let c=o.getChanges();return xj(t,s,c),{viewCache:s,changes:c}}function xj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(BD(bu(t)))}}function QD(e,t,n,r,i,o){let s=t.eventCache;if(Iu(r,n)!=null)return t;{let a,c;if(W(n))if(w(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=ci(t),u=l instanceof L?l:L.EMPTY_NODE,d=o_(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=Cu(r,ci(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=B(n);if(l===".priority"){w(pr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=iD(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=le(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let h=iD(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=s_(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Xs(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function Eu(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=B(n);if(!c.isCompleteForPath(n)&&pr(n)>1)return t;let m=le(n),I=c.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?l=u.updatePriority(c.getNode(),I):l=u.updateChild(c.getNode(),p,I,m,KD,null)}let d=HD(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),h=new aa(i,d,o);return QD(e,d,n,i,h,a)}function Og(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new aa(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Xs(t,l,!0,e.filter.filtersNodes());else{let d=B(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Xs(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=le(n),p=a.getNode().getImmediateChild(d),m;if(W(h))m=r;else{let _=u.getCompleteChild(d);_!=null?Jg(h)===".priority"&&_.getChild(kD(h)).isEmpty()?m=_:m=_.updateChild(h,r):m=L.EMPTY_NODE}if(p.equals(m))c=t;else{let _=e.filter.updateChild(a.getNode(),d,m,h,u,s);c=Xs(t,_,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function oD(e,t){return e.eventCache.isCompleteForChild(t)}function Nj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=me(n,c);oD(t,B(u))&&(a=Og(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=me(n,c);oD(t,B(u))||(a=Og(e,a,u,l,i,o,s))}),a}function sD(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function kg(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new nt(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=t.serverCache.getNode().getImmediateChild(d),m=sD(e,p,h);c=Eu(e,c,new X(d),m,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let m=t.serverCache.getNode().getImmediateChild(d),_=sD(e,m,h);c=Eu(e,c,new X(d),_,i,o,s,a)}}),c}function Pj(e,t,n,r,i,o,s){if(Iu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Eu(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new nt(null);return c.getNode().forEachChild(fo,(u,d)=>{l=l.set(new X(u),d)}),kg(e,t,n,l,i,o,a,s)}else return t}else{let l=new nt(null);return r.foreach((u,d)=>{let h=me(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),kg(e,t,n,l,i,o,a,s)}}function Rj(e,t,n,r,i){let o=t.serverCache,s=HD(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return QD(e,s,n,r,KD,i)}function Oj(e,t,n,r,i,o){let s;if(Iu(r,n)!=null)return t;{let a=new aa(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||B(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Cu(r,ci(t));else{let d=t.serverCache.getNode();w(d instanceof L,"serverChildren would be complete if leaf node"),u=o_(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=B(n),d=s_(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,le(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,L.EMPTY_NODE,le(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Cu(r,ci(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||Iu(r,Q())!=null,Xs(t,l,s,e.filter.filtersNodes())}}var Fg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new oa(r.getIndex()),o=oj(r);this.processor_=Sj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(L.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=new hn(c,s.isFullyInitialized(),i.filtersNodes()),d=new hn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ou(d,u),this.eventGenerator_=new Mg(this.query_)}get query(){return this.query_}};function kj(e){return e.viewCache_.serverCache.getNode()}function Fj(e){return bu(e.viewCache_)}function Lj(e,t){let n=ci(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild(B(t)).isEmpty())?n.getChild(t):null}function aD(e){return e.eventRegistrations_.length===0}function Vj(e,t){e.eventRegistrations_.push(t)}function cD(e,t,n){let r=[];if(n){w(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function lD(e,t,n,r){t.type===dn.MERGE&&t.source.queryId!==null&&(w(ci(e.viewCache_),"We should always have a full cache before handling merges"),w(bu(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=Aj(e.processor_,i,t,n,r);return Mj(e.processor_,o.viewCache),w(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,ZD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function jj(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ge,(o,s)=>{r.push(vo(o,s))}),n.isFullyInitialized()&&r.push(BD(n.getNode())),ZD(e,r,n.getNode(),t)}function ZD(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return lj(e.eventGenerator_,t,n,i)}var Du,Tu=class{constructor(){this.views=new Map}};function Uj(e){w(!Du,"__referenceConstructor has already been defined"),Du=e}function Bj(){return w(Du,"Reference.ts has not been loaded"),Du}function $j(e){return e.views.size===0}function a_(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return w(o!=null,"SyncTree gave us an op for an invalid query."),lD(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(lD(s,t,n,r));return o}}function JD(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Cu(n,i?r:null),c=!1;a?c=!0:r instanceof L?(a=o_(n,r),c=!1):(a=L.EMPTY_NODE,c=!1);let l=Ou(new hn(a,c,!1),new hn(r,i,!1));return new Fg(t,l)}return s}function Hj(e,t,n,r,i,o){let s=JD(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),Vj(s,n),jj(s,n)}function Wj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=mr(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(cD(l,n,r)),aD(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(cD(c,n,r)),aD(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!mr(e)&&o.push(new(Bj())(t._repo,t._path)),{removed:o,events:s}}function XD(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function fr(e,t){let n=null;for(let r of e.views.values())n=n||Lj(r,t);return n}function e0(e,t){if(t._queryParams.loadsAllData())return Fu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function t0(e,t){return e0(e,t)!=null}function mr(e){return Fu(e)!=null}function Fu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Su;function zj(e){w(!Su,"__referenceConstructor has already been defined"),Su=e}function Gj(){return w(Su,"Reference.ts has not been loaded"),Su}var qj=1,Mu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nt(null),this.pendingWriteTree_=Dj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function n0(e,t,n,r,i){return fj(e.pendingWriteTree_,t,n,r,i),i?Eo(e,new yo(n_(),t,n)):[]}function Yj(e,t,n,r){pj(e.pendingWriteTree_,t,n,r);let i=nt.fromObject(n);return Eo(e,new sa(n_(),t,i))}function dr(e,t,n=!1){let r=mj(e.pendingWriteTree_,t);if(gj(e.pendingWriteTree_,t)){let o=new nt(null);return r.snap!=null?o=o.set(Q(),!0):He(r.children,s=>{o=o.set(new X(s),!0)}),Eo(e,new Sg(r.path,o,n))}else return[]}function pa(e,t,n){return Eo(e,new yo(r_(),t,n))}function Kj(e,t,n){let r=nt.fromObject(n);return Eo(e,new sa(r_(),t,r))}function Qj(e,t){return Eo(e,new wu(r_(),t))}function Zj(e,t,n){let r=l_(e,n);if(r){let i=u_(r),o=i.path,s=i.queryId,a=et(o,t),c=new wu(i_(s),a);return d_(e,o,c)}else return[]}function Au(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||t0(s,t))){let c=Wj(s,t,n,r);$j(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(h,p)=>mr(p));if(u&&!d){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let p=eU(h);for(let m=0;m<p.length;++m){let _=p[m],I=_.query,S=s0(e,_);e.listenProvider_.startListening(ta(I),ca(e,I),S.hashFn,S.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(ta(t),null):l.forEach(h=>{let p=e.queryToTagMap.get(Lu(h));e.listenProvider_.stopListening(ta(h),p)}))}tU(e,l)}return a}function r0(e,t,n,r){let i=l_(e,r);if(i!=null){let o=u_(i),s=o.path,a=o.queryId,c=et(s,t),l=new yo(i_(a),c,n);return d_(e,s,l)}else return[]}function Jj(e,t,n,r){let i=l_(e,r);if(i){let o=u_(i),s=o.path,a=o.queryId,c=et(s,t),l=nt.fromObject(n),u=new sa(i_(a),c,l);return d_(e,s,u)}else return[]}function Lg(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(h,p)=>{let m=et(h,i);o=o||fr(p,m),s=s||mr(p)});let a=e.syncPointTree_.get(i);a?(s=s||mr(a),o=o||fr(a,Q())):(a=new Tu,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=L.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((p,m)=>{let _=fr(m,Q());_&&(o=o.updateImmediateChild(p,_))}));let l=t0(a,t);if(!l&&!t._queryParams.loadsAllData()){let h=Lu(t);w(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let p=nU();e.queryToTagMap.set(h,p),e.tagToQueryMap.set(p,h)}let u=ku(e.pendingWriteTree_,i),d=Hj(a,t,n,u,o,c);if(!l&&!s&&!r){let h=e0(a,t);d=d.concat(rU(e,t,h))}return d}function c_(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=et(s,t),l=fr(a,c);if(l)return l});return GD(i,t,o,n,!0)}function Xj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=et(l,n);r=r||fr(u,d)});let i=e.syncPointTree_.get(n);i?r=r||fr(i,Q()):(i=new Tu,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new hn(r,!0,!1):null,a=ku(e.pendingWriteTree_,t._path),c=JD(i,t,a,o?s.getNode():L.EMPTY_NODE,o);return Fj(c)}function Eo(e,t){return i0(t,e.syncPointTree_,null,ku(e.pendingWriteTree_,Q()))}function i0(e,t,n,r){if(W(e.path))return o0(e,t,n,r);{let i=t.get(Q());n==null&&i!=null&&(n=fr(i,Q()));let o=[],s=B(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=qD(r,s);o=o.concat(i0(a,c,l,u))}return i&&(o=o.concat(a_(i,e,r,n))),o}}function o0(e,t,n,r){let i=t.get(Q());n==null&&i!=null&&(n=fr(i,Q()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=qD(r,s),u=e.operationForChild(s);u&&(o=o.concat(o0(u,a,c,l)))}),i&&(o=o.concat(a_(i,e,r,n))),o}function s0(e,t){let n=t.query,r=ca(e,n);return{hashFn:()=>(kj(t)||L.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Zj(e,n._path,r):Qj(e,n._path);{let o=mV(i,n);return Au(e,n,null,o)}}}}function ca(e,t){let n=Lu(t);return e.queryToTagMap.get(n)}function Lu(e){return e._path.toString()+"$"+e._queryIdentifier}function l_(e,t){return e.tagToQueryMap.get(t)}function u_(e){let t=e.indexOf("$");return w(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new X(e.substr(0,t))}}function d_(e,t,n){let r=e.syncPointTree_.get(t);w(r,"Missing sync point for query tag that we're tracking");let i=ku(e.pendingWriteTree_,t);return a_(r,n,i,null)}function eU(e){return e.fold((t,n,r)=>{if(n&&mr(n))return[Fu(n)];{let i=[];return n&&(i=XD(n)),He(r,(o,s)=>{i=i.concat(s)}),i}})}function ta(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Gj())(e._repo,e._path):e}function tU(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Lu(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function nU(){return qj++}function rU(e,t,n){let r=t._path,i=ca(e,t),o=s0(e,n),s=e.listenProvider_.startListening(ta(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)w(!mr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&mr(u))return[Fu(u).query];{let h=[];return u&&(h=h.concat(XD(u).map(p=>p.query))),He(d,(p,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(ta(u),ca(e,u))}}return s}var Vg=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},jg=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=me(this.path_,t);return new e(this.syncTree_,n)}node(){return c_(this.syncTree_,this.path_)}},iU=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},uD=function(e,t,n){if(!e||typeof e!="object")return e;if(w(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return oU(e[".sv"],t,n);if(typeof e[".sv"]=="object")return sU(e[".sv"],t);w(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},oU=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:w(!1,"Unexpected server value: "+e)}},sU=function(e,t,n){e.hasOwnProperty("increment")||w(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&w(!1,"Unexpected increment value: "+r);let i=t.node();if(w(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},a0=function(e,t,n,r){return h_(t,new jg(n,e),r)},c0=function(e,t,n){return h_(e,new Vg(t),n)};function h_(e,t,n){let r=e.getPriority().val(),i=uD(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=uD(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new go(a,xe(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new go(i))),s.forEachChild(ge,(a,c)=>{let l=h_(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var la=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function f_(e,t){let n=t instanceof X?t:new X(t),r=e,i=B(n);for(;i!==null;){let o=qr(r.node.children,i)||{children:{},childCount:0};r=new la(i,r,o),n=le(n),i=B(n)}return r}function Do(e){return e.node.value}function l0(e,t){e.node.value=t,Ug(e)}function u0(e){return e.node.childCount>0}function aU(e){return Do(e)===void 0&&!u0(e)}function Vu(e,t){He(e.node.children,(n,r)=>{t(new la(n,e,r))})}function d0(e,t,n,r){n&&!r&&t(e),Vu(e,i=>{d0(i,t,!0,r)}),n&&r&&t(e)}function cU(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ma(e){return new X(e.parent===null?e.name:ma(e.parent)+"/"+e.name)}function Ug(e){e.parent!==null&&lU(e.parent,e.name,e)}function lU(e,t,n){let r=aU(n),i=Bt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ug(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Ug(e))}var uU=/[\[\].#$\/\u0000-\u001F\u007F]/,dU=/[\[\].#$\u0000-\u001F\u007F]/,Zm=10*1024*1024,p_=function(e){return typeof e=="string"&&e.length!==0&&!uU.test(e)},h0=function(e){return typeof e=="string"&&e.length!==0&&!dU.test(e)},hU=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),h0(e)},fU=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Kg(e)||e&&typeof e=="object"&&Bt(e,".sv")},f0=function(e,t,n,r){r&&t===void 0||ju(xs(e,"value"),t,n)},ju=function(e,t,n){let r=n instanceof X?new dg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ii(r));if(typeof t=="function")throw new Error(e+"contains a function "+ii(r)+" with contents = "+t.toString());if(Kg(t))throw new Error(e+"contains "+t.toString()+" "+ii(r));if(typeof t=="string"&&t.length>Zm/3&&Ns(t)>Zm)throw new Error(e+"contains a string greater than "+Zm+" utf8 bytes "+ii(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(He(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!p_(s)))throw new Error(e+" contains an invalid key ("+s+") "+ii(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zV(r,s),ju(e,a,r),GV(r)}),i&&o)throw new Error(e+' contains ".value" child '+ii(r)+" in addition to actual children.")}},pU=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=na(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!p_(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(WV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Mt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},mU=function(e,t,n,r){if(r&&t===void 0)return;let i=xs(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];He(t,(s,a)=>{let c=new X(s);if(ju(i,a,me(n,c)),Jg(c)===".priority"&&!fU(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),pU(i,o)};var p0=function(e,t,n,r){if(!(r&&n===void 0)&&!h0(n))throw new Error(xs(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gU=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p0(e,t,n,r)},m_=function(e,t){if(B(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},_U=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!p_(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hU(n))throw new Error(xs(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Bg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Uu(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Xg(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function m0(e,t,n){Uu(e,n),g0(e,r=>Xg(r,t))}function xt(e,t,n){Uu(e,n),g0(e,r=>Mt(r,t)||Mt(t,r))}function g0(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(vU(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function vU(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();si&&$e("event: "+n.toString()),Io(r)}}}var yU="repo_interrupt",wU=25,$g=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yu(),this.transactionQueueTree_=new la,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function bU(e,t,n){if(e.stats_=Zg(e.repoInfo_),e.forceRestClient_||yV())e.server_=new Cg(e.repoInfo_,(r,i,o,s)=>{dD(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ie(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new e_(e.repoInfo_,t,(r,i,o,s)=>{dD(e,r,i,o,s)},r=>{hD(e,r)},r=>{CU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=bV(e.repoInfo_,()=>new Tg(e.stats_,e.server_)),e.infoData_=new Ig,e.infoSyncTree_=new Mu({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=pa(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),g_(e,"connected",!1),e.serverSyncTree_=new Mu({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);xt(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function _0(e){let n=e.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bu(e){return iU({timestamp:_0(e)})}function dD(e,t,n,r,i){e.dataUpdateCount++;let o=new X(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=As(n,l=>xe(l));s=Jj(e.serverSyncTree_,o,c,i)}else{let c=xe(n);s=r0(e.serverSyncTree_,o,c,i)}else if(r){let c=As(n,l=>xe(l));s=Kj(e.serverSyncTree_,o,c)}else{let c=xe(n);s=pa(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=bo(e,o)),xt(e.eventQueue_,a,s)}function hD(e,t){g_(e,"connected",t),t===!1&&TU(e)}function CU(e,t){He(t,(n,r)=>{g_(e,n,r)})}function g_(e,t,n){let r=new X("/.info/"+t),i=xe(n);e.infoData_.updateSnapshot(r,i);let o=pa(e.infoSyncTree_,r,i);xt(e.eventQueue_,r,o)}function __(e){return e.nextWriteId_++}function IU(e,t,n){let r=Xj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=xe(i).withIndex(t._queryParams.getIndex());Lg(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=pa(e.serverSyncTree_,t._path,o);else{let a=ca(e.serverSyncTree_,t);s=r0(e.serverSyncTree_,t._path,o,a)}return xt(e.eventQueue_,t._path,s),Au(e.serverSyncTree_,t,n,null,!0),o},i=>(ga(e,"get for query "+Ie(t)+" failed: "+i),Promise.reject(new Error(i))))}function EU(e,t,n,r,i){ga(e,"set",{path:t.toString(),value:n,priority:r});let o=Bu(e),s=xe(n,r),a=c_(e.serverSyncTree_,t),c=c0(s,a,o),l=__(e),u=n0(e.serverSyncTree_,t,c,l,!0);Uu(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,p)=>{let m=h==="ok";m||tt("set at "+t+" failed: "+h);let _=dr(e.serverSyncTree_,l,!m);xt(e.eventQueue_,t,_),Hg(e,i,h,p)});let d=y_(e,t);bo(e,d),xt(e.eventQueue_,d,[])}function DU(e,t,n,r){ga(e,"update",{path:t.toString(),value:n});let i=!0,o=Bu(e),s={};if(He(n,(a,c)=>{i=!1,s[a]=a0(me(t,a),xe(c),e.serverSyncTree_,o)}),i)$e("update() called with empty data.  Don't do anything."),Hg(e,r,"ok",void 0);else{let a=__(e),c=Yj(e.serverSyncTree_,t,s,a);Uu(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||tt("update at "+t+" failed: "+l);let h=dr(e.serverSyncTree_,a,!d),p=h.length>0?bo(e,t):t;xt(e.eventQueue_,p,h),Hg(e,r,l,u)}),He(n,l=>{let u=y_(e,me(t,l));bo(e,u)}),xt(e.eventQueue_,t,[])}}function TU(e){ga(e,"onDisconnectEvents");let t=Bu(e),n=yu();Eg(e.onDisconnect_,Q(),(i,o)=>{let s=a0(i,o,e.serverSyncTree_,t);$D(n,i,s)});let r=[];Eg(n,Q(),(i,o)=>{r=r.concat(pa(e.serverSyncTree_,i,o));let s=y_(e,i);bo(e,s)}),e.onDisconnect_=yu(),xt(e.eventQueue_,Q(),r)}function SU(e,t,n){let r;B(t._path)===".info"?r=Lg(e.infoSyncTree_,t,n):r=Lg(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function fD(e,t,n){let r;B(t._path)===".info"?r=Au(e.infoSyncTree_,t,n):r=Au(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function MU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(yU)}function ga(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),$e(n,...t)}function Hg(e,t,n,r){t&&Io(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function v0(e,t,n){return c_(e.serverSyncTree_,t,n)||L.EMPTY_NODE}function v_(e,t=e.transactionQueueTree_){if(t||$u(e,t),Do(t)){let n=w0(e,t);w(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&AU(e,ma(t),n)}else u0(t)&&Vu(t,n=>{v_(e,n)})}function AU(e,t,n){let r=n.map(l=>l.currentWriteId),i=v0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];w(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=et(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{ga(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(dr(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();$u(e,f_(e.transactionQueueTree_,t)),v_(e,e.transactionQueueTree_),xt(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)Io(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}bo(e,t)}},s)}function bo(e,t){let n=y0(e,t),r=ma(n),i=w0(e,n);return xU(e,i,r),r}function xU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=et(n,c.path),u=!1,d;if(w(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(dr(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=wU)u=!0,d="maxretry",i=i.concat(dr(e.serverSyncTree_,c.currentWriteId,!0));else{let h=v0(e,c.path,s);c.currentInputSnapshot=h;let p=t[a].update(h.val());if(p!==void 0){ju("transaction failed: Data returned ",p,c.path);let m=xe(p);typeof p=="object"&&p!=null&&Bt(p,".priority")||(m=m.updatePriority(h.getPriority()));let I=c.currentWriteId,S=Bu(e),ue=c0(m,h,S);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=ue,c.currentWriteId=__(e),s.splice(s.indexOf(I),1),i=i.concat(n0(e.serverSyncTree_,c.path,ue,c.currentWriteId,c.applyLocally)),i=i.concat(dr(e.serverSyncTree_,I,!0))}else u=!0,d="nodata",i=i.concat(dr(e.serverSyncTree_,c.currentWriteId,!0))}xt(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}$u(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Io(r[a]);v_(e,e.transactionQueueTree_)}function y0(e,t){let n,r=e.transactionQueueTree_;for(n=B(t);n!==null&&Do(r)===void 0;)r=f_(r,n),t=le(t),n=B(t);return r}function w0(e,t){let n=[];return b0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function b0(e,t,n){let r=Do(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vu(t,i=>{b0(e,i,n)})}function $u(e,t){let n=Do(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,l0(t,n.length>0?n:void 0)}Vu(t,r=>{$u(e,r)})}function y_(e,t){let n=ma(y0(e,t)),r=f_(e.transactionQueueTree_,t);return cU(r,i=>{Jm(e,i)}),Jm(e,r),d0(r,i=>{Jm(e,i)}),n}function Jm(e,t){let n=Do(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(w(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(w(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(dr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?l0(t,void 0):n.length=o+1,xt(e.eventQueue_,ma(t),i);for(let s=0;s<r.length;s++)Io(r[s])}}function NU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function PU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tt(`Invalid query segment '${n}' in query '${e}'`)}return t}var pD=function(e,t){let n=RU(e),r=n.namespace;n.domain==="firebase.com"&&Pn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uV();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new du(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new X(n.pathString)}},RU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=NU(e.substring(u,d)));let h=PU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var mD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OU=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=mD.charAt(n%64),n=Math.floor(n/64);w(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=mD.charAt(t[i]);return w(s.length===20,"nextPushId: Length should be 20."),s}}();var xu=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ie(this.snapshot.exportVal())}},Nu=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pu=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return w(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Wg=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:Jg(this._path)}get ref(){return new fn(this._repo,this._path)}get _queryIdentifier(){let t=eD(this._queryParams),n=Qg(t);return n==="{}"?"default":n}get _queryObject(){return eD(this._queryParams)}isEqual(t){if(t=Ae(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Xg(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+HV(this._path)}};var fn=class e extends Wg{constructor(t,n){super(t,n,new bg,!1)}get parent(){let t=kD(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},ua=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new X(t),r=Co(this.ref,t);return new e(this._node.getChild(n),r,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Co(this.ref,r),ge)))}hasChild(t){let n=new X(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Rn(e,t){return e=Ae(e),e._checkNotDeleted("ref"),t!==void 0?Co(e._root,t):e._root}function Co(e,t){return e=Ae(e),B(e._path)===null?gU("child","path",t,!1):p0("child","path",t,!1),new fn(e._repo,me(e._path,t))}function C0(e,t){e=Ae(e),m_("push",e._path),f0("push",t,e._path,!0);let n=_0(e._repo),r=OU(n),i=Co(e,r),o=Co(e,r),s;return t!=null?s=Hu(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function I0(e){return m_("remove",e._path),Hu(e,null)}function Hu(e,t){e=Ae(e),m_("set",e._path),f0("set",t,e._path,!1);let n=new Sn;return EU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Wu(e,t){mU("update",t,e._path,!1);let n=new Sn;return DU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function E0(e){e=Ae(e);let t=new Pu(()=>{}),n=new Ru(t);return IU(e._repo,e,n).then(r=>new ua(r,new fn(e._repo,e._path),e._queryParams.getIndex()))}var Ru=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new xu("value",this,new ua(t.snapshotNode,new fn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Nu(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},zg=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Nu(this,t,n):null}createEvent(t,n){w(t.childName!=null,"Child events should have a childName.");let r=Co(new fn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new xu(t.type,this,new ua(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function kU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{fD(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Pu(n,o||void 0),a=t==="value"?new Ru(s):new zg(t,s);return SU(e._repo,e,a),()=>fD(e._repo,e,a)}function D0(e,t,n,r){return kU(e,"value",t,n,r)}Uj(fn);zj(fn);var FU="FIREBASE_DATABASE_EMULATOR_HOST",Gg={},LU=!1;function VU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=rr(o);e.repoInfo_=new du(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function jU(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$e("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=pD(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[FU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=pD(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Js(Js.OWNER):new ig(e.name,e.options,t);_U("Invalid Firebase Database URL",s),W(s.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=BU(a,e,u,new rg(e,n));return new qg(d,e)}function UU(e,t){let n=Gg[t];(!n||n[e.key]!==e)&&Pn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),MU(e),delete n[e.key]}function BU(e,t,n,r){let i=Gg[t.name];i||(i={},Gg[t.name]=i);let o=i[e.toURLString()];return o&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $g(e,LU,n,r),i[e.toURLString()]=o,o}var qg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fn(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Pn("Cannot call "+t+" on a deleted database.")}};function Nt(e=Qr(),t){let n=$t(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=LC("database");r&&$U(n,...r)}return n}function $U(e,t,n,r={}){e=Ae(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&St(r,o.repoInfo_.emulatorOptions))return;Pn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Js(Js.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:VC(r.mockUserToken,e.app.options.projectId);s=new Js(a)}rr(t)&&(xl(t),Nl("Database",!0)),VU(o,i,r,s)}function HU(e){aV(or),at(new Fe("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return jU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Be(LE,VE,e),Be(LE,VE,"esm2020")}e_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};e_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};HU();var Ee=class e{static{this.apps=new Map}static getData(t,n,r){return f(this,null,function*(){try{let i=r?Nt(t,r):Nt(t);return yield e.getDbData(i,n)}catch(i){return console.error("Errore nel recupero dei dati Firebase:",i),null}})}static getDbData(t,n){return f(this,null,function*(){let r=Rn(t,n);return new Promise((o,s)=>{D0(r,a=>{let c=a.val();o(c)},a=>{s(a)})})})}static writeUserData(t,n,r,i){return f(this,null,function*(){let o=i?Nt(n,i):Nt(n);yield Hu(Rn(o,r),t)})}static addOrUpdateProperties(t,n,r,i){return f(this,null,function*(){try{let o=i?Nt(t,i):Nt(t),s={};for(let[a,c]of Object.entries(r))s[`${n}/${a}`]=c;yield Wu(Rn(o),s),console.log(`Aggiornato nodo "${n}" con:`,r)}catch(o){throw console.error(`Errore nell'aggiornamento di "${n}":`,o),o}})}static deleteProperties(t,n,r,i){return f(this,null,function*(){try{let o=i?Nt(t,i):Nt(t),s=Array.isArray(r)?r:[r],a={};for(let c of s)a[`${n}/${c}`]=null;yield Wu(Rn(o),a),console.log(`Eliminate le propriet\xE0 [${s.join(", ")}] da "${n}"`)}catch(o){throw console.error(`Errore nell'eliminazione di propriet\xE0 da "${n}":`,o),o}})}static deleteData(t,n,r){return f(this,null,function*(){try{let i=r?Nt(t,r):Nt(t);yield I0(Rn(i,n)),console.log(`Nodo eliminato con successo da "${n}"`)}catch(i){throw console.error(`Errore nell'eliminazione di "${n}":`,i),i}})}static pushToChild(t,n,r,i="RANDOM"){return f(this,null,function*(){try{let o=Os(n),s=Nt(o),a=null;if(i==="RANDOM")a=C0(Rn(s,r)).key;else if(i==="NUMBER"){let l=yield E0(Rn(s,r)),u=l.exists()?l.val():{},d=Object.keys(u).length+1;a=String(d)}if(!a)throw new Error("Impossibile generare una nuova chiave.");let c={[`${r}/${a}`]:t};yield Wu(Rn(s),c),console.log(`Elemento aggiunto a "${r}" con chiave "${a}"`)}catch(o){throw console.error(`Errore in pushToChild(${r}):`,o),o}})}static createFirebaseUser(t,n,r){try{let i=zs(t);return Hm(i,n,r)}catch(i){throw console.error("Errore nella creazione dell'utente Firebase:",i),i}}};var zu=class{},Gu=class{},qu=class{constructor(t,n,r){this.icon=t,this.sex=n,this.username=r}};var T0=(()=>{class e{constructor(n){this.http=n}getFile(n){return f(this,null,function*(){return yield this.http.get(n).toPromise()})}static{this.\u0275fac=function(r){return new(r||e)(C(jr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pn=(()=>{class e{constructor(n,r){this.common_service=n,this.assets_service=r}startFbApi(n){try{return this.common_service.fbApp=Os(n),this.common_service.fbApiAnalytics=FI(this.common_service.fbApp),console.log("API Firebase inizializzata con successo."),!0}catch(r){return console.error("Errore nell'inizializzazione dell'API Firebase:",r),!1}}tryLogin(n){return f(this,null,function*(){try{let r=zs(this.common_service.fbApp);return yield Wm(r,n.email,n.password)}catch(r){console.error("Errore durante il tentativo di login:",r);return}})}getFirebaseConfig(n){return f(this,null,function*(){try{let r=yield this.assets_service.getFile("assets/firebase/fb-proj-configs.json");if(!r){console.error("Impossibile caricare la configurazione Firebase.");return}let i=r.users[n];if(!i){console.error(`Configurazione Firebase non trovata per l'utente: ${n}`);return}return this.common_service.fbUserConfig=i,i}catch(r){console.error("Errore nel recupero della configurazione Firebase:",r);return}})}getUserExtras(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}return yield Ee.getData(this.common_service.fbApp,`users/list/${n}/info`,this.common_service.appConfig.firebase.dbUrl||"")}catch(r){console.error("Errore nel recupero delle info dell'utente:",r);return}})}getUserAllowedProducts(n){return f(this,null,function*(){try{if(console.log(`Recupero prodotti per l'utente: ${n}`),!n)return console.error("Nessun nome utente fornito per il recupero dei prodotti."),null;if(this.common_service.fbApp==null)return console.error("API Firebase non inizializzata."),null;let r=yield Ee.getData(this.common_service.fbApp,`users/list/${n}/auth/allowedProds`,this.common_service.appConfig.firebase.dbUrl||"");return console.info(`Prodotti recuperati per l'utente ${n}:`,r),r?Object.entries(r).filter(([o,s])=>s===!0).map(([o])=>o):[]}catch(r){return console.error(`Errore nel recupero dei prodotti per l'utente ${n}:`,r),null}})}disableUserProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;let r=this.common_service.lastLoggedUser?.uId;if(!r)return console.error("Utente non trovato."),!1;let i=this.common_service.appConfig.firebase.dbUrl||"";return yield Ee.addOrUpdateProperties(this.common_service.fbApp,`users/list/${r}/auth/allowedProds`,{[n.id]:!1},i),!0}catch{return!1}})}deleteProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;if(!this.common_service.lastLoggedUser?.uId)return console.error("Utente non trovato."),!1;let i=this.common_service.appConfig.firebase.dbUrl||"";yield Ee.deleteData(this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,i),yield Ee.deleteProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",[`${n.id}`],i);let o=yield this.getAllUsersId();for(let s of o)Ee.deleteProperties(this.common_service.fbApp,`users/list/${s}/auth/allowedProds`,[`${n.id}`],i);return!0}catch(r){return console.error("Errore nell'eliminazione del prodotto:",r),!1}})}getUserProducts(n,r){return f(this,null,function*(){try{if(console.info("Recupero prodotti utente..."),!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let i={},o=this.common_service.appConfig.firebase.dbUrl||"";for(let s of r){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let a=yield Ee.getData(this.common_service.fbApp,`sharedLogin/products/list/${s}`,this.common_service.appConfig.firebase.dbUrl||"");i[s]=a}return console.info("Prodotti recuperati",i),i}catch(i){return console.error("Errore nel recupero dei prodotti dell'utente:",i),[]}})}createProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),!1;let r=this.common_service.appConfig.firebase.dbUrl||"";n.id=yield this.createProductId(n),yield Ee.writeUserData(n,this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,r),yield Ee.addOrUpdateProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",{[n.id]:!0},r),yield Ee.addOrUpdateProperties(this.common_service.fbApp,"sharedLogin/products/all_ids",{[n.id]:!0},r);let i=yield this.getAllUsersId();for(let o of i){let s=o===this.common_service.lastLoggedUser?.uId;Ee.addOrUpdateProperties(this.common_service.fbApp,`users/list/${o}/auth/allowedProds`,{[n.id]:s},r)}return console.info("Prodotto creato",n),!0}catch(r){return console.error("Errore nella creazione del prodotto:",r),!1}})}getAllProdsId(){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),[];let n=yield Ee.getData(this.common_service.fbApp,"sharedLogin/products/all_ids",this.common_service.appConfig.firebase.dbUrl||"");return Object.keys(n)??[]}catch{return console.error("could not get the list of all the products"),[]}})}createProductId(n){return f(this,null,function*(){try{if(n==null)return"";let r=yield this.getAllProdsId();console.log("Tutti gli ID dei prodotti esistenti:",r);let i=n.name.toLowerCase().replace(" ","_");if(r.includes(i)){let s=r.filter(a=>a.includes(i)).length+1;i=`${i}_${s}`}return i}catch{return console.error("Cannot make product id"),""}})}editProduct(n){return f(this,null,function*(){try{if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let r=this.common_service.appConfig.firebase.dbUrl||"";yield Ee.addOrUpdateProperties(this.common_service.fbApp,`sharedLogin/products/list/${n.id}`,n,r),console.info("Prodotto modificato",n)}catch(r){console.error("Errore nella modifica del prodotto:",r)}})}getAllUsersId(){return f(this,null,function*(){try{if(!this.common_service.fbApp)return console.error("API Firebase non inizializzata."),[];let n=yield Ee.getData(this.common_service.fbApp,"users/all_ids",this.common_service.appConfig.firebase.dbUrl||"");return Object.keys(n)??[]}catch{return console.error("could not get the list of all the users"),[]}})}addUser(n){return f(this,null,function*(){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let r=this.common_service.appConfig.firebase.dbUrl||"",i=yield Ee.createFirebaseUser(this.common_service.fbApp,n.email,n.password);n.uId=i.user.uid,console.log("Utente creato in Firebase Authentication:",i);let o=new zu;o.auth=new Gu,o.auth.role=n.role;let s=yield this.getAllProdsId(),a={};s.forEach(c=>{a[c]=!1}),o.auth.allowedProds=a??{},o.info=new qu(n.icon,n.sex??"male",n.username),yield Ee.writeUserData(o,this.common_service.fbApp,`users/list/${n.uId}`,r),yield Ee.addOrUpdateProperties(this.common_service.fbApp,"users/all_ids",{[n.uId]:!0},r)})}static{this.\u0275fac=function(r){return new(r||e)(C(ke),C(T0))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Yu=(()=>{class e{constructor(n,r){this.common=n,this.fb_service=r,this.user={username:"",email:"",password:"",uId:"",sex:"male",icon:"",role:"user"},this.error="",this.showPassword=!1}onSubmit(){return f(this,null,function*(){try{if(!this.user.email||!this.user.password){this.error="Inserisci nome utente e password.";return}this.common.lastLoggedUser=this.user,this.error="";let n=yield this.fb_service.tryLogin(this.user);if(console.info("Credenziali Firebase:",n),!n){this.error="Credenziali non valide. Riprova.";return}this.common.lastLoggedUser.uId=n.user.uid,this.common.lastLoggedUser.username=this.user.username,this.common.lastLoggedUser.email=n.user.email||"",yield this.includeUserExtra(n),console.log("this.common.lastLoggedUser",this.common.lastLoggedUser),this.common.saveUserSession()}catch(n){console.error("Errore durante il login:",n)}})}includeUserExtra(n){return f(this,null,function*(){if(!n)return;let r=yield this.fb_service.getUserExtras(n.user.uid);r&&this.common.lastLoggedUser&&(this.common.lastLoggedUser.sex=r?.sex??"male",this.common.lastLoggedUser.icon=r?.icon??(r?.sex==="male"?"man-default":"woman-default"),this.common.lastLoggedUser.username=r?.username??this.user.username)})}static{this.\u0275fac=function(r){return new(r||e)(C(ke),C(pn))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ku=(()=>{class e{constructor(n,r,i,o){this.common=n,this.login_service=r,this.fb_service=i,this.http_service=o,this.hasAppInitialized=!1}initApp(){return f(this,null,function*(){try{yield this.getFirebaseInit(),this.common.lastLoggedUser=this.common.getUserSession(),this.common.appConfig=yield this.loadAppConfig();let n=yield this.fb_service.tryLogin(this.common.lastLoggedUser);if(!n){console.error("Login fallito.");return}yield this.login_service.includeUserExtra(n),this.hasAppInitialized=!0}catch(n){console.error("Errore durante l'inizializzazione dell'app:",n);return}})}getFirebaseInit(){return f(this,null,function*(){try{let n=yield this.fb_service.getFirebaseConfig("ame.dev.apps");if(!n){console.error("Errore nel recupero della configurazione Firebase.");return}if(!this.fb_service.startFbApi(n)){console.error("Errore nell'inizializzazione dell'API Firebase.");return}}catch(n){console.error("Errore durante l'inizializzazione di Firebase:",n)}})}loadAppConfig(){return f(this,null,function*(){return yield Id(this.http_service.get("assets/config/default-config.json"))})}static{this.\u0275fac=function(r){return new(r||e)(C(ke),C(Yu),C(pn),C(jr))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function zU(e,t){e&1&&Je(0,"app-loader")}function GU(e,t){if(e&1){let n=Et();ff(0),v(1,"button",25),K("click",function(){let i=ne(n).$implicit,o=ce(2);return re(o.toggleTag(i))}),T(2),y(),pf()}if(e&2){let n=t.$implicit,r=ce(2);x(),Jt("selected",r.selectedTags.includes(n)),x(),Xt(" ",n," ")}}function qU(e,t){if(e&1&&(v(0,"span",34),T(1),y()),e&2){let n=t.$implicit;x(),mt(n)}}function YU(e,t){if(e&1){let n=Et();v(0,"mat-card",26),K("click",function(){let i=ne(n).$implicit,o=ce(2);return re(o.openProductLink(i))}),Je(1,"img",27),v(2,"mat-card-content")(3,"h3"),T(4),y(),v(5,"p"),T(6),y(),v(7,"div",28)(8,"div",29),ye(9,qU,2,1,"span",30),y(),v(10,"div",31)(11,"button",32),K("click",function(i){let o=ne(n).$implicit,s=ce(2);return re(s.editProduct(i,o))}),T(12," Edit "),y(),v(13,"button",33),K("click",function(i){let o=ne(n).$implicit,s=ce(2);return re(s.deleteProduct(i,o))}),T(14," Delete "),y()()()()()}if(e&2){let n=t.$implicit;x(),ie("src",n.image,Zh)("alt",n.name),x(3),mt(n.name),x(2),mt(n.description),x(3),ie("ngForOf",n.tags)}}function KU(e,t){if(e&1){let n=Et();v(0,"div",13)(1,"div",14)(2,"h2",15),T(3,"Prodotti disponibili"),y(),v(4,"div",16)(5,"span",17),T(6,"Filtra per tag:"),y(),ye(7,GU,3,3,"ng-container",18),y(),v(8,"div",19)(9,"mat-card",20),K("click",function(){ne(n);let i=ce();return re(i.addProduct())}),v(10,"div",21)(11,"span",22),T(12,"+"),y(),v(13,"mat-card-content")(14,"h3",23),T(15,"Aggiungi nuovo prodotto"),y()()()(),ye(16,YU,15,5,"mat-card",24),y()()()}if(e&2){let n=ce();x(),Wi("width",n.filteredProducts.length===0?"auto":"100%"),x(6),ie("ngForOf",n.allTags),x(9),ie("ngForOf",n.filteredProducts)}}var A0=(()=>{class e{constructor(n,r,i,o,s){this.common=n,this.app_service=r,this.router=i,this.fb_service=o,this.cdRef=s,this.products=[],this.allTags=[],this.selectedTags=[],this.filteredProducts=[],this.canShowLoader=!1}ngOnInit(){return f(this,null,function*(){this.app_service.hasAppInitialized||(yield this.app_service.initApp()),this.canShowLoader=!0,yield this.getUserProduct(),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),this.canShowLoader=!1,console.log("Prodotti utente:",this.products)})}getUserProduct(){return f(this,null,function*(){try{let n=yield this.fb_service.getUserAllowedProducts(this.common.lastLoggedUser?.uId??""),r=yield this.fb_service.getUserProducts(this.common.lastLoggedUser?.uId??"",n??[]);this.products=Object.values(r||{})}catch(n){console.error("error getting products",n)}})}updateTags(){let n=new Set;this.products.forEach(r=>r.tags?.forEach(i=>n.add(i))),this.allTags=Array.from(n)}toggleTag(n){this.selectedTags.includes(n)?this.selectedTags=this.selectedTags.filter(r=>r!==n):this.selectedTags.push(n),this.filterProducts()}filterProducts(){this.selectedTags.length===0?this.filteredProducts=this.products.map(n=>g({},n)):this.filteredProducts=this.products.filter(n=>n.tags?.some(r=>this.selectedTags.includes(r)))}openProductLink(n){if(n?.link===null){console.warn("No selected project");return}window.open(n.link,"_blank")}addProduct(){this.common.selectedProduct=new Sl,console.log("adding product"),this.router.navigate(["/products/add"])}editProduct(n,r){n.stopPropagation(),this.common.selectedProduct=g({},r),this.router.navigate(["/products/edit"])}deleteProduct(n,r){return f(this,null,function*(){if(n.stopPropagation(),!confirm(`Sei sicuro di voler eliminare il prodotto "${r.name}"?`))return;let o=!1;!0?o=yield this.fb_service.deleteProduct(r):o=yield this.fb_service.disableUserProduct(r),o&&(this.canShowLoader=!0,setTimeout(()=>f(this,null,function*(){yield this.getUserProduct(),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),this.canShowLoader=!1}),100))})}editProfile(){this.router.navigate(["/user/edit"])}addProfile(){this.router.navigate(["/user/add"])}deleteProfile(){confirm("Sei sicuro di voler eliminare il profilo?")&&alert("Funzione elimina profilo non ancora implementata.")}logout(){confirm("Sei sicuro di voler effettuare il logout?")&&(this.common.lastLoggedUser=void 0,localStorage.removeItem("lastLoggedUser"),this.router.navigate(["/"]))}static{this.\u0275fac=function(r){return new(r||e)(D(ke),D(Ku),D(st),D(pn),D(en))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-products"]],standalone:!0,features:[pe],decls:19,vars:8,consts:[[1,"container"],[4,"ngIf"],["class","products-layout",4,"ngIf"],[1,"profile-menu-container"],[1,"profile-menu"],[1,"profile-pic"],["alt","Foto profilo",3,"src"],[1,"profile-name"],[1,"row"],["title","Edit profile",1,"profile-btn",3,"click"],["title","Delete profile",1,"profile-btn","delete",3,"click"],["title","Add profile",1,"profile-btn",3,"click"],["title","Logout",1,"profile-btn","warning",3,"click"],[1,"products-layout"],[1,"products-container"],[1,"products-title"],[1,"tag-filter"],[1,"filter-label"],[4,"ngFor","ngForOf"],[1,"products-grid"],[1,"product-card","add-card",3,"click"],[2,"display","flex","flex-direction","column","align-items","center","justify-content","center","height","100%","min-height","180px"],[2,"font-size","3rem","color","var(--primary)"],[2,"text-align","center","color","var(--primary-dark)"],["class","product-card",3,"click",4,"ngFor","ngForOf"],["type","button",1,"tag-chip",3,"click"],[1,"product-card",3,"click"],["mat-card-image","",3,"src","alt"],[1,"products"],[1,"product-tags"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"crud-container"],["title","Edit product",1,"product-crud","profile-btn",3,"click"],["title","Delete product",1,"product-crud","profile-btn","delete",2,"margin-left","0.5rem",3,"click"],[1,"tag-chip"]],template:function(r,i){r&1&&(v(0,"div",0),ye(1,zU,1,0,"app-loader",1)(2,KU,17,4,"div",2),v(3,"div",3)(4,"div",4)(5,"div",5),Je(6,"img",6),y(),v(7,"div",7),T(8),y(),v(9,"div",8)(10,"button",9),K("click",function(){return i.editProfile()}),T(11,"Edit"),y(),v(12,"button",10),K("click",function(){return i.deleteProfile()}),T(13,"Delete"),y(),v(14,"button",11),K("click",function(){return i.addProfile()}),T(15,"Add"),y()(),v(16,"div",8)(17,"button",12),K("click",function(){return i.logout()}),T(18,"Logout"),y()()()()()),r&2&&(x(),ie("ngIf",i.canShowLoader),x(),ie("ngIf",!i.canShowLoader),x(2),Wi("width",i.filteredProducts.length===0?"auto":"100%")("left",i.filteredProducts.length===0?"0.25em":"1em"),x(2),ie("src","assets/images/users/"+(i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.icon)+".svg",Zh),x(2),mt((i.common.lastLoggedUser==null?null:i.common.lastLoggedUser.username)||"Utente"))},dependencies:[Me,Xc,tn,MC,DC,TC,SC,xC],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;top:0;left:0}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100%;flex-direction:column}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px;padding:1rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.5rem;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-weight:500;color:var(--primary-dark);margin-right:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:1rem;cursor:pointer;transition:background .2s,color .2s;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip.selected[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-title[_ngcontent-%COMP%]{color:var(--primary);text-align:center;margin-bottom:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;border-radius:16px;box-shadow:0 8px 32px #2193b026;overflow:hidden;transition:box-shadow .2s}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #2193b040}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:contain;border-top-left-radius:16px;border-top-right-radius:16px;background:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:var(--primary-dark);font-size:1.2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:4px}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]   .product-crud[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:.3rem 1rem;background:var(--primary);color:#fff;font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .crud-container[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{position:relative;top:-2em;left:.25em;background:var(--card-bg);border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.1);max-width:900px;min-width:220px;flex-direction:column;align-items:center;display:flex;justify-content:center;padding:2rem 1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid var(--primary);margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:var(--primary-dark);margin-bottom:1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1em}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.7rem;border:none;border-radius:8px;background:var(--primary);color:#fff;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.warning[_ngcontent-%COMP%]{background-color:var(--warning)!important}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]:hover{background:#b71c1c}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{flex:1}"]})}}return e})();var j0=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(D(Jn),D(Ze))}}static{this.\u0275dir=ae({type:e})}}return e})(),b_=(()=>{class e extends j0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,features:[Ut]})}}return e})(),nd=new M("");var QU={provide:nd,useExisting:yn(()=>mn),multi:!0};function ZU(){let e=Dn()?Dn().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var JU=new M(""),mn=(()=>{class e extends j0{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ZU())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(D(Jn),D(Ze),D(JU,8))}}static{this.\u0275dir=ae({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&K("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[In([QU]),Ut]})}}return e})();function XU(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var C_=new M(""),U0=new M("");function e2(e){return XU(e.value)?{required:!0}:null}function x0(e){return null}function B0(e){return e!=null}function $0(e){return Fr(e)?he(e):e}function H0(e){let t={};return e.forEach(n=>{t=n!=null?g(g({},t),n):t}),Object.keys(t).length===0?null:t}function W0(e,t){return t.map(n=>n(e))}function t2(e){return!e.validate}function z0(e){return e.map(t=>t2(t)?t:n=>t.validate(n))}function n2(e){if(!e)return null;let t=e.filter(B0);return t.length==0?null:function(n){return H0(W0(n,t))}}function I_(e){return e!=null?n2(z0(e)):null}function r2(e){if(!e)return null;let t=e.filter(B0);return t.length==0?null:function(n){let r=W0(n,t).map($0);return Dd(r).pipe(k(H0))}}function E_(e){return e!=null?r2(z0(e)):null}function N0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function i2(e){return e._rawValidators}function o2(e){return e._rawAsyncValidators}function w_(e){return e?Array.isArray(e)?e:[e]:[]}function Zu(e,t){return Array.isArray(e)?e.includes(t):e===t}function P0(e,t){let n=w_(t);return w_(e).forEach(i=>{Zu(n,i)||n.push(i)}),n}function R0(e,t){return w_(t).filter(n=>!Zu(e,n))}var Ju=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=I_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=E_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},So=class extends Ju{get formDirective(){return null}get path(){return null}},ba=class extends Ju{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xu=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},s2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},y9=O(g({},s2),{"[class.ng-submitted]":"isSubmitted"}),gr=(()=>{class e extends Xu{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(ba,2))}}static{this.\u0275dir=ae({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ut]})}}return e})(),_r=(()=>{class e extends Xu{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(D(So,10))}}static{this.\u0275dir=ae({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ut]})}}return e})();var va="VALID",Qu="INVALID",To="PENDING",ya="DISABLED";function G0(e){return(rd(e)?e.validators:e)||null}function a2(e){return Array.isArray(e)?I_(e):e||null}function q0(e,t){return(rd(t)?t.asyncValidators:e)||null}function c2(e){return Array.isArray(e)?E_(e):e||null}function rd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function l2(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new A(1e3,"");if(!r[n])throw new A(1001,"")}function u2(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new A(1002,"")})}var ed=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===va}get invalid(){return this.status===Qu}get pending(){return this.status==To}get disabled(){return this.status===ya}get enabled(){return this.status!==ya}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(P0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(P0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(R0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(R0(t,this._rawAsyncValidators))}hasValidator(t){return Zu(this._rawValidators,t)}hasAsyncValidator(t){return Zu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=To,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ya,this.errors=null,this._forEachChild(r=>{r.disable(O(g({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(O(g({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=va,this._forEachChild(r=>{r.enable(O(g({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(O(g({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===va||this.status===To)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ya:va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=To,this._hasOwnPendingAsyncValidator=!0;let n=$0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?ya:this.errors?Qu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(To)?To:this._anyControlsHaveStatus(Qu)?Qu:va}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){rd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=a2(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=c2(this._rawAsyncValidators)}},td=class extends ed{constructor(t,n,r){super(G0(n),q0(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){u2(this,!0,t),Object.keys(t).forEach(r=>{l2(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var D_=new M("CallSetDisabledState",{providedIn:"root",factory:()=>T_}),T_="always";function d2(e,t){return[...t.path,e]}function Y0(e,t,n=T_){K0(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),f2(e,t),m2(e,t),p2(e,t),h2(e,t)}function O0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function h2(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function K0(e,t){let n=i2(e);t.validator!==null?e.setValidators(N0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=o2(e);t.asyncValidator!==null?e.setAsyncValidators(N0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();O0(t._rawValidators,i),O0(t._rawAsyncValidators,i)}function f2(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Q0(e,t)})}function p2(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Q0(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Q0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function m2(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function g2(e,t){e==null,K0(e,t)}function _2(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function v2(e){return Object.getPrototypeOf(e.constructor)===b_}function y2(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function w2(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===mn?n=o:v2(o)?r=o:i=o}),i||r||n||null}var b2={provide:So,useExisting:yn(()=>On)},wa=Promise.resolve(),On=(()=>{class e extends So{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Pe,this.form=new td({},I_(n),E_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){wa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Y0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){wa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){wa.then(()=>{let r=this._findContainer(n.path),i=new td({});g2(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){wa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){wa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,y2(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(D(C_,10),D(U0,10),D(D_,8))}}static{this.\u0275dir=ae({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&K("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[We.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[In([b2]),Ut]})}}return e})();function k0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function F0(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var C2=class extends ed{constructor(t=null,n,r){super(G0(n),q0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(F0(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){k0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){k0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){F0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var I2={provide:ba,useExisting:yn(()=>kn)},L0=Promise.resolve(),kn=(()=>{class e extends ba{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new C2,this._registered=!1,this.name="",this.update=new Pe,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=w2(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),_2(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Y0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){L0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Lr(r);L0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?d2(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(D(So,9),D(C_,10),D(U0,10),D(nd,10),D(en,8),D(D_,8))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[We.None,"disabled","isDisabled"],model:[We.None,"ngModel","model"],options:[We.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[In([I2]),Ut,Kn]})}}return e})(),vr=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var E2={provide:nd,useExisting:yn(()=>id),multi:!0};function Z0(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function D2(e){return e.split(":")[0]}var id=(()=>{class e extends b_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=Z0(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=D2(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[In([E2]),Ut]})}}return e})(),J0=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Z0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(D(Ze),D(Jn),D(id,9))}}static{this.\u0275dir=ae({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),T2={provide:nd,useExisting:yn(()=>X0),multi:!0};function V0(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function S2(e){return e.split(":")[0]}var X0=(()=>{class e extends b_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=S2(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&K("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[In([T2]),Ut]})}}return e})(),eT=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(V0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(V0(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(D(Ze),D(Jn),D(X0,9))}}static{this.\u0275dir=ae({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var M2=(()=>{class e{constructor(){this._validator=x0}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):x0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,features:[Kn]})}}return e})();var A2={provide:C_,useExisting:yn(()=>Fn),multi:!0};var Fn=(()=>{class e extends M2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Lr,this.createValidator=n=>e2}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Zn(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&kr("required",i._enabled?"":null)},inputs:{required:"required"},features:[In([A2]),Ut]})}}return e})();var x2=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({})}}return e})();var gn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:D_,useValue:n.callSetDisabledState??T_}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ce({type:e})}static{this.\u0275inj=be({imports:[x2]})}}return e})();function N2(e,t){e&1&&(v(0,"span",19),T(1,"\u{1F441}\uFE0F"),y())}function P2(e,t){e&1&&(v(0,"span",20),T(1,"\u{1F648}"),y())}function R2(e,t){if(e&1&&(v(0,"div",21),T(1),y()),e&2){let n=ce();x(),mt(n.login_service.error)}}var tT=(()=>{class e{constructor(n,r){this.login_service=n,this.router=r}togglePasswordVisibility(){this.login_service.showPassword=!this.login_service.showPassword}onSubmit(){return f(this,null,function*(){yield this.login_service.onSubmit(),this.router.navigate(["/products"])})}forgotPassword(){this.router.navigate(["/forgot"])}register(){this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||e)(D(Yu),D(st))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-login"]],standalone:!0,features:[pe],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"container"],[1,"login-card"],[3,"ngSubmit"],[1,"input-group"],["for","email"],["type","text","id","email","name","email","placeholder","Inserisci l'email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Inserisci la password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit"],["class","error-message",4,"ngIf"],[1,"forgot-password"],[3,"click"],[1,"register-user"],["type","button",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"],[1,"error-message"]],template:function(r,i){if(r&1){let o=Et();v(0,"div",1)(1,"div",2)(2,"h2"),T(3,"Accedi"),y(),v(4,"form",3,0),K("ngSubmit",function(){return ne(o),re(i.onSubmit())}),v(6,"div",4)(7,"label",5),T(8,"Email"),y(),v(9,"input",6),Se("ngModelChange",function(a){return ne(o),Re(i.login_service.user.email,a)||(i.login_service.user.email=a),re(a)}),y()(),v(10,"div",7)(11,"label",8),T(12,"Password"),y(),v(13,"input",9),Se("ngModelChange",function(a){return ne(o),Re(i.login_service.user.password,a)||(i.login_service.user.password=a),re(a)}),y(),v(14,"button",10),K("click",function(){return ne(o),re(i.togglePasswordVisibility())}),ye(15,N2,2,0,"span",11)(16,P2,2,0,"span",12),y()(),v(17,"button",13),T(18,"Login"),y(),ye(19,R2,2,1,"div",14),y(),v(20,"div",15)(21,"span",16),K("click",function(){return ne(o),re(i.forgotPassword())}),T(22,"Hai dimenticato la password?"),y()(),v(23,"div",17)(24,"button",18),K("click",function(){return ne(o),re(i.register())}),T(25,"Registrati"),y()()()()}r&2&&(x(9),Te("ngModel",i.login_service.user.email),x(4),ie("type",i.login_service.showPassword?"text":"password"),Te("ngModel",i.login_service.user.password),x(2),ie("ngIf",!i.login_service.showPassword),x(),ie("ngIf",i.login_service.showPassword),x(3),ie("ngIf",i.login_service.error))},dependencies:[Me,tn,gn,vr,mn,gr,_r,Fn,kn,On],styles:[".register-user[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;padding:.6rem 1.5rem;cursor:pointer;transition:background .2s}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-password[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:underline;font-size:.98rem;cursor:pointer;transition:color .2s}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#2193b0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error);margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();var nT=(()=>{class e{constructor(n){this.common=n}sendResetLink(){let n=document.getElementById("email").value;if(!n){alert("Inserisci un'email valida.");return}this.common.lastforgotPswRequest={email:n,username:"",password:"",uId:"",sex:"male",icon:"",role:"user"},alert(`Link di reset inviato a ${n}`)}static{this.\u0275fac=function(r){return new(r||e)(D(ke))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-forgot"]],standalone:!0,features:[pe],decls:13,vars:0,consts:[[1,"forgot-container"],[1,"forgot-card"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required",""],["type","submit",3,"click"],[1,"info-message"]],template:function(r,i){r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),T(3,"Recupera la password"),y(),v(4,"form")(5,"div",2)(6,"label",3),T(7,"Email"),y(),Je(8,"input",4),y(),v(9,"button",5),K("click",function(){return i.sendResetLink()}),T(10,"Invia richiesta"),y()(),v(11,"div",6),T(12,"Riceverai una mail con le istruzioni per il reset."),y()()())},styles:[".forgot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.forgot-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.forgot-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-card[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var Mo=class{constructor(){this.username="",this.email="",this.password="",this.uId="",this.sex="male",this.icon="",this.role="user"}};function O2(e,t){e&1&&(v(0,"span",14),T(1,"\u{1F441}\uFE0F"),y())}function k2(e,t){e&1&&(v(0,"span",15),T(1,"\u{1F648}"),y())}var rT=(()=>{class e{constructor(n){this.common=n,this.showPassword=!1,this.user=new Mo}togglePasswordVisibility(){this.showPassword=!this.showPassword}register(){return f(this,null,function*(){try{this.common.lastRegisteredUser=this.user,alert("Registrazione completata con successo!")}catch(n){console.error("Errore durante la registrazione:",n),alert("Si \xE8 verificato un errore durante la registrazione. Riprova pi\xF9 tardi.")}})}static{this.\u0275fac=function(r){return new(r||e)(D(ke))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-register"]],standalone:!0,features:[pe],decls:22,vars:6,consts:[[1,"register-container"],[1,"register-card"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Inserisci il nome utente","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Crea una password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"]],template:function(r,i){r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),T(3,"Crea un nuovo utente"),y(),v(4,"form")(5,"div",2)(6,"label",3),T(7,"Nome utente"),y(),v(8,"input",4),Se("ngModelChange",function(s){return Re(i.user.username,s)||(i.user.username=s),s}),y()(),v(9,"div",2)(10,"label",5),T(11,"Email"),y(),v(12,"input",6),Se("ngModelChange",function(s){return Re(i.user.email,s)||(i.user.email=s),s}),y()(),v(13,"div",7)(14,"label",8),T(15,"Password"),y(),v(16,"input",9),Se("ngModelChange",function(s){return Re(i.user.password,s)||(i.user.password=s),s}),y(),v(17,"button",10),K("click",function(){return i.togglePasswordVisibility()}),ye(18,O2,2,0,"span",11)(19,k2,2,0,"span",12),y()(),v(20,"button",13),K("click",function(){return i.register()}),T(21,"Registrati"),y()()()()),r&2&&(x(8),Te("ngModel",i.user.username),x(4),Te("ngModel",i.user.email),x(4),ie("type",i.showPassword?"text":"password"),Te("ngModel",i.user.password),x(2),ie("ngIf",!i.showPassword),x(),ie("ngIf",i.showPassword))},dependencies:[Me,tn,gn,vr,mn,gr,_r,Fn,kn,On],styles:[".register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;z-index:100;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}"]})}}return e})();var Ao=(e,t)=>{let n=b(st),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return console.log("time passed",s-o),!i||!o||!c?(localStorage.removeItem("lastLoggedUser"),n.navigate(["/"]),!1):!0};var iT=(e,t)=>{let n=b(st),r=localStorage.getItem("lastLoggedUser"),i=!1,o=0;if(r)try{let l=JSON.parse(r);i=!!l.uId,o=l.loginTime||0}catch{i=!1,o=0}let s=Date.now(),a=60*60*1e3,c=s-o<a;return i&&c?(console.info("utente gi\xE0 loggato!"),!1):!0};function F2(e,t){if(e&1){let n=Et();v(0,"span",21),T(1),v(2,"button",22),K("click",function(){let i=ne(n).$implicit,o=ce(3);return re(o.removeTag(i))}),T(3," \xD7 "),y()()}if(e&2){let n=t.$implicit;x(),Xt(" ",n," ")}}function L2(e,t){if(e&1&&(v(0,"div",5)(1,"label"),T(2,"Tag selezionati"),y(),v(3,"div",19),ye(4,F2,4,1,"span",20),y()()),e&2){let n=ce(2);x(4),ie("ngForOf",n.selectedTags)}}function V2(e,t){e&1&&(v(0,"div",23),T(1," Prodotto aggiunto con successo! "),y())}function j2(e,t){if(e&1){let n=Et();v(0,"div",2)(1,"div",3)(2,"h2"),T(3),y(),v(4,"form",4,0),K("ngSubmit",function(){ne(n);let i=ce();return re(i.onSubmit())}),v(6,"div",5)(7,"label",6),T(8,"Nome prodotto"),y(),v(9,"input",7),Se("ngModelChange",function(i){ne(n);let o=ce();return Re(o.common.selectedProduct.name,i)||(o.common.selectedProduct.name=i),re(i)}),y()(),v(10,"div",5)(11,"label",8),T(12,"Descrizione"),y(),v(13,"input",9),Se("ngModelChange",function(i){ne(n);let o=ce();return Re(o.common.selectedProduct.description,i)||(o.common.selectedProduct.description=i),re(i)}),y()(),v(14,"div",5)(15,"label",10),T(16,"Immagine (URL)"),y(),v(17,"input",11),Se("ngModelChange",function(i){ne(n);let o=ce();return Re(o.common.selectedProduct.image,i)||(o.common.selectedProduct.image=i),re(i)}),y()(),v(18,"div",5)(19,"label",12),T(20,"Aggiungi tag"),y(),v(21,"div",13)(22,"input",14),Se("ngModelChange",function(i){ne(n);let o=ce();return Re(o.customTag,i)||(o.customTag=i),re(i)}),y(),v(23,"button",15),K("click",function(){ne(n);let i=ce();return re(i.addCustomTag())}),T(24,"Aggiungi"),y()()(),ye(25,L2,5,1,"div",16),v(26,"button",17),T(27),y()(),ye(28,V2,2,0,"div",18),y()()}if(e&2){let n=ce();x(3),mt(n.pageTitle),x(6),Te("ngModel",n.common.selectedProduct.name),x(4),Te("ngModel",n.common.selectedProduct.description),x(4),Te("ngModel",n.common.selectedProduct.image),x(5),Te("ngModel",n.customTag),x(3),ie("ngIf",n.selectedTags.length),x(2),mt(n.isEdit?"Modifica prodotto":"Aggiungi prodotto"),x(),ie("ngIf",n.success)}}var S_=(()=>{class e{get isEdit(){return this.router.url.includes("edit")}constructor(n,r,i,o){this.route=n,this.router=r,this.common=i,this.fb_service=o,this.success=!1,this.selectedTags=this.common.selectedProduct?.tags??[],this.customTag="",this.pageTitle="Aggiungi nuovo prodotto"}ngOnInit(){this.isEdit&&(this.pageTitle="Modifica prodotto"),console.log("prodotto selezionato",this.common.selectedProduct)}toggleDefaultTag(n,r){r.target.checked?this.selectedTags.includes(n)||this.selectedTags.push(n):this.selectedTags=this.selectedTags.filter(i=>i!==n)}addCustomTag(){let n=this.customTag.trim();n&&!this.selectedTags.includes(n)&&(this.selectedTags.push(n),this.customTag="")}removeTag(n){this.selectedTags=this.selectedTags.filter(r=>r!==n)}onSubmit(){return f(this,null,function*(){this.common.selectedProduct&&(this.common.selectedProduct.tags=[...this.selectedTags]),this.success=!0,setTimeout(()=>this.success=!1,2e3),this.selectedTags=[],this.common.selectedProduct!=null&&(this.isEdit?yield this.fb_service.editProduct(this.common.selectedProduct):yield this.fb_service.createProduct(this.common.selectedProduct))})}static{this.\u0275fac=function(r){return new(r||e)(D(rn),D(st),D(ke),D(pn))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-crud-product"]],standalone:!0,features:[pe],decls:1,vars:1,consts:[["addProductForm","ngForm"],["class","add-product-container",4,"ngIf"],[1,"add-product-container"],[1,"add-product-card"],[3,"ngSubmit"],[1,"input-group"],["for","name"],["type","text","id","name","name","name","placeholder","Nome prodotto","required","",3,"ngModelChange","ngModel"],["for","description"],["type","text","id","description","name","description","placeholder","Descrizione","required","",3,"ngModelChange","ngModel"],["for","image"],["type","url","id","image","name","image","placeholder","URL immagine",3,"ngModelChange","ngModel"],["for","customTag"],[2,"display","flex","gap","0.5rem"],["type","text","id","customTag","name","customTag","placeholder","Scrivi un tag",3,"ngModelChange","ngModel"],["type","button",3,"click"],["class","input-group",4,"ngIf"],["type","submit"],["class","success-message",4,"ngIf"],[2,"display","flex","flex-wrap","wrap","gap","0.5rem"],["style",`
              background: #e0e7ef;
              border-radius: 12px;
              padding: 0.3rem 0.8rem;
              display: flex;
              align-items: center;
            `,4,"ngFor","ngForOf"],[2,"background","#e0e7ef","border-radius","12px","padding","0.3rem 0.8rem","display","flex","align-items","center"],["type","button",2,"margin-left","0.5rem","background","none","border","none","color","#c00","cursor","pointer","font-size","1rem",3,"click"],[1,"success-message"]],template:function(r,i){r&1&&ye(0,j2,29,8,"div",1),r&2&&ie("ngIf",i.common.selectedProduct)},dependencies:[Me,Xc,tn,gn,vr,mn,gr,_r,Fn,kn,On],styles:[".add-product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();function U2(e,t){if(e&1){let n=Et();v(0,"div",4)(1,"label",18),T(2,"Password"),y(),v(3,"input",19),Se("ngModelChange",function(i){ne(n);let o=ce();return Re(o.user.password,i)||(o.user.password=i),re(i)}),y()()}if(e&2){let n=ce();x(3),Te("ngModel",n.user.password)}}function B2(e,t){if(e&1&&(v(0,"div",20),T(1),y()),e&2){let n=ce();x(),Xt(" ",n.pageTitle==="Aggiungi nuovo utente"?"Utente aggiunto!":"Utente modificato!"," ")}}var M_=(()=>{class e{constructor(n,r,i,o){this.common=n,this.route=r,this.router=i,this.firebase_service=o,this.user=new Mo,this.pageTitle="Aggiungi nuovo utente",this.success=!1}ngOnInit(){this.router.url.includes("/user/edit")&&(this.pageTitle="Modifica utente",this.common.lastLoggedUser&&(this.user=g({},this.common.lastLoggedUser)))}onSubmit(){this.pageTitle==="Aggiungi nuovo utente"?(console.log("Nuovo utente:",this.user),this.firebase_service.addUser(this.user)):(this.common.lastLoggedUser=g({},this.user),this.common.saveUserSession(),console.log("Utente modificato:",this.user)),this.success=!0,setTimeout(()=>this.success=!1,2e3)}static{this.\u0275fac=function(r){return new(r||e)(D(ke),D(rn),D(st),D(pn))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-crud-user"]],standalone:!0,features:[pe],decls:30,vars:8,consts:[["userForm","ngForm"],[1,"add-user-container"],[1,"add-user-card"],[3,"ngSubmit"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Username","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["class","input-group",4,"ngIf"],["for","sex"],["id","sex","name","sex",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["for","icon"],["type","text","id","icon","name","icon","placeholder","Nome icona (es: man-default)",3,"ngModelChange","ngModel"],["type","submit"],["class","success-message",4,"ngIf"],["for","password"],["type","password","id","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],[1,"success-message"]],template:function(r,i){if(r&1){let o=Et();v(0,"div",1)(1,"div",2)(2,"h2"),T(3),y(),v(4,"form",3,0),K("ngSubmit",function(){return ne(o),re(i.onSubmit())}),v(6,"div",4)(7,"label",5),T(8,"Username"),y(),v(9,"input",6),Se("ngModelChange",function(a){return ne(o),Re(i.user.username,a)||(i.user.username=a),re(a)}),y()(),v(10,"div",4)(11,"label",7),T(12,"Email"),y(),v(13,"input",8),Se("ngModelChange",function(a){return ne(o),Re(i.user.email,a)||(i.user.email=a),re(a)}),y()(),ye(14,U2,4,1,"div",9),v(15,"div",4)(16,"label",10),T(17,"Sesso"),y(),v(18,"select",11),Se("ngModelChange",function(a){return ne(o),Re(i.user.sex,a)||(i.user.sex=a),re(a)}),v(19,"option",12),T(20,"Maschio"),y(),v(21,"option",13),T(22,"Femmina"),y()()(),v(23,"div",4)(24,"label",14),T(25,"Icona profilo"),y(),v(26,"input",15),Se("ngModelChange",function(a){return ne(o),Re(i.user.icon,a)||(i.user.icon=a),re(a)}),y()(),v(27,"button",16),T(28),y()(),ye(29,B2,2,1,"div",17),y()()}r&2&&(x(3),mt(i.pageTitle),x(6),Te("ngModel",i.user.username),x(4),Te("ngModel",i.user.email),x(),ie("ngIf",i.pageTitle==="Aggiungi nuovo utente"),x(4),Te("ngModel",i.user.sex),x(8),Te("ngModel",i.user.icon),x(2),Xt(" ",i.pageTitle==="Aggiungi nuovo utente"?"Aggiungi utente":"Salva modifiche"," "),x(),ie("ngIf",i.success))},dependencies:[Me,tn,gn,vr,J0,eT,mn,id,gr,_r,Fn,kn,On],styles:[".add-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:60vh;padding:2rem 0;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-user-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 2px 16px #2193b014,0 1.5px 4px #2193b01a;padding:2.5rem 2rem 2rem;min-width:320px;max-width:400px;width:100%}h2[_ngcontent-%COMP%]{text-align:center;color:var(--primary, #2193b0);margin-bottom:2rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.2rem}label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.3rem;color:#444}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.6rem .8rem;border:1px solid #b5d0e0;border-radius:6px;font-size:1rem;outline:none;transition:border-color .2s;background:#f7fafc}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:var(--primary, #2193b0);background:#fff}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary, #2193b0);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:600;cursor:pointer;margin-top:1.2rem;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#17607e}.success-message[_ngcontent-%COMP%]{margin-top:1.5rem;color:#2193b0;text-align:center;font-weight:600;font-size:1.1rem}"]})}}return e})();var oT=[{path:"",component:tT,canActivate:[iT]},{path:"forgot",component:nT},{path:"register",component:rT},{path:"products",component:A0,canActivate:[Ao]},{path:"products/add",component:S_,canActivate:[Ao]},{path:"products/edit",component:S_,canActivate:[Ao]},{path:"user/add",component:M_,canActivate:[Ao]},{path:"user/edit",component:M_,canActivate:[Ao]}];var sT={providers:[sC(oT,aC()),kh(al)]};var aT=(()=>{class e{constructor(n,r){this.common_service=n,this.app_service=r,this.title="shared-login",this.username="",this.password="",this.error="",this.showPassword=!1}ngOnInit(){return f(this,null,function*(){yield this.app_service.initApp()})}static{this.\u0275fac=function(r){return new(r||e)(D(ke),D(Ku))}}static{this.\u0275cmp=fe({type:e,selectors:[["app-root"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,i){r&1&&Je(0,"router-outlet")},dependencies:[_p,Me,gn,al],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#6dd5ed,#2193b0)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px #2193b026;display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2193b0}.input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2193b0}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#2193b0;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#176b87}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();Ib(aT,sT).catch(e=>console.error(e));
