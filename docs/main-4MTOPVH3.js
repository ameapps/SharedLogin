var B0=Object.defineProperty,$0=Object.defineProperties;var H0=Object.getOwnPropertyDescriptors;var _a=Object.getOwnPropertySymbols,W0=Object.getPrototypeOf,p_=Object.prototype.hasOwnProperty,m_=Object.prototype.propertyIsEnumerable,z0=Reflect.get;var f_=(e,t,n)=>t in e?B0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})p_.call(t,n)&&f_(e,n,t[n]);if(_a)for(var n of _a(t))m_.call(t,n)&&f_(e,n,t[n]);return e},k=(e,t)=>$0(e,H0(t));var ya=(e,t)=>{var n={};for(var r in e)p_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_a)for(var r of _a(e))t.indexOf(r)<0&&m_.call(e,r)&&(n[r]=e[r]);return n};var er=(e,t,n)=>z0(W0(e),n,t);var f=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});var g_=null;var zu=1,Gu=Symbol("SIGNAL");function Q(e){let t=g_;return g_=e,t}var __={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function G0(e){if(!(Ku(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===zu)){if(!e.producerMustRecompute(e)&&!qu(e)){e.dirty=!1,e.lastCleanEpoch=zu;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=zu}}function y_(e){return e&&(e.nextProducerIndex=0),Q(e)}function v_(e,t){if(Q(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Ku(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Yu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function qu(e){va(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(G0(n),r!==n.version))return!0}return!1}function w_(e){if(va(e),Ku(e))for(let t=0;t<e.producerNode.length;t++)Yu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Yu(e,t){if(q0(e),va(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Yu(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];va(i),i.producerIndexOfThis[r]=t}}function Ku(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function va(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function q0(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Y0(){throw new Error}var K0=Y0;function I_(e){K0=e}function O(e){return typeof e=="function"}function Zr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wa=Zr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function tr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ue=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(O(r))try{r()}catch(o){t=o instanceof wa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{b_(o)}catch(s){t=t??[],s instanceof wa?t=[...t,...s.errors]:t.push(s)}}if(t)throw new wa(t)}}add(t){var n;if(t&&t!==this)if(this.closed)b_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&tr(n,t)}remove(t){let{_finalizers:n}=this;n&&tr(n,t),t instanceof e&&t._removeParent(this)}};ue.EMPTY=(()=>{let e=new ue;return e.closed=!0,e})();var Qu=ue.EMPTY;function Ia(e){return e instanceof ue||e&&"closed"in e&&O(e.remove)&&O(e.add)&&O(e.unsubscribe)}function b_(e){O(e)?e():e.unsubscribe()}var Dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jr={setTimeout(e,t,...n){let{delegate:r}=Jr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Jr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ba(e){Jr.setTimeout(()=>{let{onUnhandledError:t}=Dt;if(t)t(e);else throw e})}function bo(){}var C_=Zu("C",void 0,void 0);function E_(e){return Zu("E",void 0,e)}function D_(e){return Zu("N",e,void 0)}function Zu(e,t,n){return{kind:e,value:t,error:n}}var nr=null;function Xr(e){if(Dt.useDeprecatedSynchronousErrorHandling){let t=!nr;if(t&&(nr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=nr;if(nr=null,n)throw r}}else e()}function T_(e){Dt.useDeprecatedSynchronousErrorHandling&&nr&&(nr.errorThrown=!0,nr.error=e)}var rr=class extends ue{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ia(t)&&t.add(this)):this.destination=J0}static create(t,n,r){return new ei(t,n,r)}next(t){this.isStopped?Xu(D_(t),this):this._next(t)}error(t){this.isStopped?Xu(E_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Xu(C_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Q0=Function.prototype.bind;function Ju(e,t){return Q0.call(e,t)}var ed=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ca(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ca(r)}else Ca(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ca(n)}}},ei=class extends rr{constructor(t,n,r){super();let i;if(O(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Dt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ju(t.next,o),error:t.error&&Ju(t.error,o),complete:t.complete&&Ju(t.complete,o)}):i=t}this.destination=new ed(i)}};function Ca(e){Dt.useDeprecatedSynchronousErrorHandling?T_(e):ba(e)}function Z0(e){throw e}function Xu(e,t){let{onStoppedNotification:n}=Dt;n&&Jr.setTimeout(()=>n(e,t))}var J0={closed:!0,next:bo,error:Z0,complete:bo};var ti=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tt(e){return e}function td(...e){return nd(e)}function nd(e){return e.length===0?tt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=eT(n)?n:new ei(n,r,i);return Xr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=S_(r),new r((i,o)=>{let s=new ei({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ti](){return this}pipe(...n){return nd(n)(this)}toPromise(n){return n=S_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function S_(e){var t;return(t=e??Dt.Promise)!==null&&t!==void 0?t:Promise}function X0(e){return e&&O(e.next)&&O(e.error)&&O(e.complete)}function eT(e){return e&&e instanceof rr||X0(e)&&Ia(e)}function rd(e){return O(e?.lift)}function z(e){return t=>{if(rd(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(e,t,n,r,i){return new id(e,t,n,r,i)}var id=class extends rr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ni(){return z((e,t)=>{let n=null;e._refCount++;let r=V(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var ri=class extends q{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rd(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ue;let n=this.getSubject();t.add(this.source.subscribe(V(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ue.EMPTY)}return t}refCount(){return ni()(this)}};var M_=Zr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ea(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new M_}next(n){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qu:(this.currentObservers=null,o.push(n),new ue(()=>{this.currentObservers=null,tr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new Ea(t,n),e})(),Ea=class extends Me{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Qu}};var Ae=class extends Me{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var od={now(){return(od.delegate||Date).now()},delegate:void 0};var Da=class extends ue{constructor(t,n){super()}schedule(t,n=0){return this}};var Co={setInterval(e,t,...n){let{delegate:r}=Co;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Co;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Ta=class extends Da{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return Co.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Co.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,tr(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var ii=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};ii.now=od.now;var Sa=class extends ii{constructor(t,n=ii.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var A_=new Sa(Ta);var nt=new q(e=>e.complete());function N_(e){return e&&O(e.schedule)}function x_(e){return e[e.length-1]}function Ma(e){return O(x_(e))?e.pop():void 0}function vn(e){return N_(x_(e))?e.pop():void 0}function P_(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function R_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ir(e){return this instanceof ir?(this.v=e,this):new ir(e)}function O_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){r[p]&&(i[p]=function(g){return new Promise(function(w,D){o.push([p,g,w,D])>1||c(p,g)})},m&&(i[p]=m(i[p])))}function c(p,m){try{l(r[p](m))}catch(g){h(o[0][3],g)}}function l(p){p.value instanceof ir?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function k_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof R_=="function"?R_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Aa=e=>e&&typeof e.length=="number"&&typeof e!="function";function Na(e){return O(e?.then)}function xa(e){return O(e[ti])}function Ra(e){return Symbol.asyncIterator&&O(e?.[Symbol.asyncIterator])}function Pa(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Oa=tT();function ka(e){return O(e?.[Oa])}function Fa(e){return O_(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield ir(n.read());if(i)return yield ir(void 0);yield yield ir(r)}}finally{n.releaseLock()}})}function La(e){return O(e?.getReader)}function fe(e){if(e instanceof q)return e;if(e!=null){if(xa(e))return nT(e);if(Aa(e))return rT(e);if(Na(e))return iT(e);if(Ra(e))return F_(e);if(ka(e))return oT(e);if(La(e))return sT(e)}throw Pa(e)}function nT(e){return new q(t=>{let n=e[ti]();if(O(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rT(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function iT(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,ba)})}function oT(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function F_(e){return new q(t=>{aT(e,t).catch(n=>t.error(n))})}function sT(e){return F_(Fa(e))}function aT(e,t){var n,r,i,o;return P_(this,void 0,void 0,function*(){try{for(n=k_(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Ye(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Va(e,t=0){return z((n,r)=>{n.subscribe(V(r,i=>Ye(r,e,()=>r.next(i),t),()=>Ye(r,e,()=>r.complete(),t),i=>Ye(r,e,()=>r.error(i),t)))})}function ja(e,t=0){return z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function L_(e,t){return fe(e).pipe(ja(t),Va(t))}function V_(e,t){return fe(e).pipe(ja(t),Va(t))}function j_(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function U_(e,t){return new q(n=>{let r;return Ye(n,t,()=>{r=e[Oa](),Ye(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>O(r?.return)&&r.return()})}function Ua(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{Ye(n,t,()=>{let r=e[Symbol.asyncIterator]();Ye(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function B_(e,t){return Ua(Fa(e),t)}function $_(e,t){if(e!=null){if(xa(e))return L_(e,t);if(Aa(e))return j_(e,t);if(Na(e))return V_(e,t);if(Ra(e))return Ua(e,t);if(ka(e))return U_(e,t);if(La(e))return B_(e,t)}throw Pa(e)}function se(e,t){return t?$_(e,t):fe(e)}function R(...e){let t=vn(e);return se(e,t)}function oi(e,t){let n=O(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function sd(e){return!!e&&(e instanceof q||O(e.lift)&&O(e.subscribe))}var Tt=Zr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ad(e,t){let n=typeof t=="object";return new Promise((r,i)=>{let o=!1,s;e.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(t.defaultValue):i(new Tt)}})})}function P(e,t){return z((n,r)=>{let i=0;n.subscribe(V(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:cT}=Array;function lT(e,t){return cT(t)?e(...t):e(t)}function Ba(e){return P(t=>lT(e,t))}var{isArray:uT}=Array,{getPrototypeOf:dT,prototype:hT,keys:fT}=Object;function $a(e){if(e.length===1){let t=e[0];if(uT(t))return{args:t,keys:null};if(pT(t)){let n=fT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function pT(e){return e&&typeof e=="object"&&dT(e)===hT}function Ha(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function si(...e){let t=vn(e),n=Ma(e),{args:r,keys:i}=$a(e);if(r.length===0)return se([],t);let o=new q(mT(r,t,i?s=>Ha(i,s):tt));return n?o.pipe(Ba(n)):o}function mT(e,t,n=tt){return r=>{H_(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)H_(t,()=>{let l=se(e[c],t),u=!1;l.subscribe(V(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function H_(e,t,n){e?Ye(n,e,t):t()}function W_(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},p=g=>l<r?m(g):c.push(g),m=g=>{o&&t.next(g),l++;let w=!1;fe(n(g,u++)).subscribe(V(t,D=>{i?.(D),o?p(D):t.next(D)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let D=c.shift();s?Ye(t,s,()=>m(D)):m(D)}h()}catch(D){t.error(D)}}))};return e.subscribe(V(t,p,()=>{d=!0,h()})),()=>{a?.()}}function ge(e,t,n=1/0){return O(t)?ge((r,i)=>P((o,s)=>t(r,o,i,s))(fe(e(r,i))),n):(typeof t=="number"&&(n=t),z((r,i)=>W_(r,i,e,n)))}function cd(e=1/0){return ge(tt,e)}function z_(){return cd(1)}function wn(...e){return z_()(se(e,vn(e)))}function Wa(e){return new q(t=>{fe(e()).subscribe(t)})}function ld(...e){let t=Ma(e),{args:n,keys:r}=$a(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;fe(n[u]).subscribe(V(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ha(r,a):a),o.complete())}))}});return t?i.pipe(Ba(t)):i}function je(e,t){return z((n,r)=>{let i=0;n.subscribe(V(r,o=>e.call(t,o,i++)&&r.next(o)))})}function In(e){return z((t,n)=>{let r=null,i=!1,o;r=t.subscribe(V(n,void 0,void 0,s=>{o=fe(e(s,In(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function G_(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(V(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function bn(e,t){return O(t)?ge(e,t,1):ge(e,1)}function ud(e,t=A_){return z((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+e,u=t.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(V(r,l=>{o=l,s=t.now(),i||(i=t.schedule(c,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Cn(e){return z((t,n)=>{let r=!1;t.subscribe(V(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function St(e){return e<=0?()=>nt:z((t,n)=>{let r=0;t.subscribe(V(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function dd(e){return P(()=>e)}function za(e=gT){return z((t,n)=>{let r=!1;t.subscribe(V(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function gT(){return new Tt}function En(e){return z((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Vt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?je((i,o)=>e(i,o,r)):tt,St(1),n?Cn(t):za(()=>new Tt))}function ai(e){return e<=0?()=>nt:z((t,n)=>{let r=[];t.subscribe(V(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function hd(e,t){let n=arguments.length>=2;return r=>r.pipe(e?je((i,o)=>e(i,o,r)):tt,ai(1),n?Cn(t):za(()=>new Tt))}function fd(e,t){return z(G_(e,t,arguments.length>=2,!0))}function pd(e){return je((t,n)=>e<=n)}function Eo(...e){let t=vn(e);return z((n,r)=>{(t?wn(e,n,t):wn(e,n)).subscribe(r)})}function rt(e,t){return z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(V(r,c=>{i?.unsubscribe();let l=0,u=o++;fe(e(c,u)).subscribe(i=V(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Do(e){return z((t,n)=>{fe(e).subscribe(V(n,()=>n.complete(),bo)),!n.closed&&t.subscribe(n)})}function ve(e,t,n){let r=O(e)||t||n?{next:e,error:t,complete:n}:e;return r?z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(V(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):tt}var Ny="https://g.co/ng/security#xss",S=class extends Error{constructor(t,n){super(vc(t,n)),this.code=t}};function vc(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Uo(e){return{toString:e}.toString()}var Ga="__parameters__";function _T(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function xy(e,t,n){return Uo(()=>{let r=_T(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ga)?c[Ga]:Object.defineProperty(c,Ga,{value:[]})[Ga];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var To=globalThis;function te(e){for(let t in e)if(e[t]===te)return t;throw Error("Could not find renamed property on target object.")}function yT(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Be(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Be).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function q_(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var vT=te({__forward_ref__:te});function pr(e){return e.__forward_ref__=pr,e.toString=function(){return Be(this())},e}function Ue(e){return Ry(e)?e():e}function Ry(e){return typeof e=="function"&&e.hasOwnProperty(vT)&&e.__forward_ref__===pr}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ie(e){return{providers:e.providers||[],imports:e.imports||[]}}function wc(e){return Y_(e,Oy)||Y_(e,ky)}function Py(e){return wc(e)!==null}function Y_(e,t){return e.hasOwnProperty(t)?e[t]:null}function wT(e){let t=e&&(e[Oy]||e[ky]);return t||null}function K_(e){return e&&(e.hasOwnProperty(Q_)||e.hasOwnProperty(IT))?e[Q_]:null}var Oy=te({\u0275prov:te}),Q_=te({\u0275inj:te}),ky=te({ngInjectableDef:te}),IT=te({ngInjectorDef:te}),T=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fy(e){return e&&!!e.\u0275providers}var bT=te({\u0275cmp:te}),CT=te({\u0275dir:te}),ET=te({\u0275pipe:te}),DT=te({\u0275mod:te}),ec=te({\u0275fac:te}),So=te({__NG_ELEMENT_ID__:te}),Z_=te({__NG_ENV_ID__:te});function Ic(e){return typeof e=="string"?e:e==null?"":String(e)}function TT(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ic(e)}function ST(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new S(-200,e)}function mh(e,t){throw new S(-201,!1)}var j=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(j||{}),Nd;function Ly(){return Nd}function ft(e){let t=Nd;return Nd=e,t}function Vy(e,t,n){let r=wc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&j.Optional)return null;if(t!==void 0)return t;mh(e,"Injector")}var MT={},Mo=MT,xd="__NG_DI_FLAG__",tc="ngTempTokenPath",AT="ngTokenPath",NT=/\n/gm,xT="\u0275",J_="__source",di;function RT(){return di}function Dn(e){let t=di;return di=e,t}function PT(e,t=j.Default){if(di===void 0)throw new S(-203,!1);return di===null?Vy(e,void 0,t):di.get(e,t&j.Optional?null:void 0,t)}function C(e,t=j.Default){return(Ly()||PT)(Ue(e),t)}function v(e,t=j.Default){return C(e,bc(t))}function bc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Rd(e){let t=[];for(let n=0;n<e.length;n++){let r=Ue(e[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,o=j.Default;for(let s=0;s<r.length;s++){let a=r[s],c=OT(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(C(i,o))}else t.push(C(r))}return t}function jy(e,t){return e[xd]=t,e.prototype[xd]=t,e}function OT(e){return e[xd]}function kT(e,t,n,r){let i=e[tc];throw t[J_]&&i.unshift(t[J_]),e.message=FT(`
`+e.message,i,n,r),e[AT]=i,e[tc]=null,e}function FT(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==xT?e.slice(2):e;let i=Be(t);if(Array.isArray(t))i=t.map(Be).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Be(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(NT,`
  `)}`}var gh=jy(xy("Optional"),8);var Uy=jy(xy("SkipSelf"),4);function fi(e,t){let n=e.hasOwnProperty(ec);return n?e[ec]:null}function _h(e,t){e.forEach(n=>Array.isArray(n)?_h(n,t):t(n))}function By(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function nc(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function LT(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function VT(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function jT(e,t,n){let r=Bo(e,t);return r>=0?e[r|1]=n:(r=~r,VT(e,r,t,n)),r}function md(e,t){let n=Bo(e,t);if(n>=0)return e[n|1]}function Bo(e,t){return UT(e,t,1)}function UT(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var pi={},pt=[],mi=new T(""),$y=new T("",-1),Hy=new T(""),rc=class{get(t,n=Mo){if(n===Mo){let r=new Error(`NullInjectorError: No provider for ${Be(t)}!`);throw r.name="NullInjectorError",r}return n}},Wy=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Wy||{}),Bt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Bt||{}),$e=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}($e||{});function BT(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Pd(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];HT(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function $T(e){return e===3||e===4||e===6}function HT(e){return e.charCodeAt(0)===64}function Ao(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?X_(e,n,i,null,t[++r]):X_(e,n,i,null,null))}}return e}function X_(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var zy="ng-template";function WT(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&BT(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(yh(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function yh(e){return e.type===4&&e.value!==zy}function zT(e,t,n){let r=e.type===4&&!n?zy:e.value;return t===r}function GT(e,t,n){let r=4,i=e.attrs,o=i!==null?KT(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Mt(r)&&!Mt(c))return!1;if(s&&Mt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!zT(e,c,n)||c===""&&t.length===1){if(Mt(r))return!1;s=!0}}else if(r&8){if(i===null||!WT(e,i,c,n)){if(Mt(r))return!1;s=!0}}else{let l=t[++a],u=qT(c,i,yh(e),n);if(u===-1){if(Mt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Mt(r))return!1;s=!0}}}}return Mt(r)||s}function Mt(e){return(e&1)===0}function qT(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QT(t,e)}function Gy(e,t,n=!1){for(let r=0;r<t.length;r++)if(GT(e,t[r],n))return!0;return!1}function YT(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function KT(e){for(let t=0;t<e.length;t++){let n=e[t];if($T(n))return t}return e.length}function QT(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function ZT(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function ey(e,t){return e?":not("+t.trim()+")":t}function JT(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mt(s)&&(t+=ey(o,i),i=""),r=s,o=o||!Mt(r);n++}return i!==""&&(t+=ey(o,i)),t}function XT(e){return e.map(JT).join(",")}function eS(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Mt(i))break;i=o}r++}return{attrs:t,classes:n}}function Ne(e){return Uo(()=>{let t=Zy(e),n=k(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Wy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Bt.Emulated,styles:e.styles||pt,_:null,schemas:e.schemas||null,tView:null,id:""});Jy(n);let r=e.dependencies;return n.directiveDefs=ny(r,!1),n.pipeDefs=ny(r,!0),n.id=rS(n),n})}function tS(e){return ar(e)||qy(e)}function nS(e){return e!==null}function be(e){return Uo(()=>({type:e.type,bootstrap:e.bootstrap||pt,declarations:e.declarations||pt,imports:e.imports||pt,exports:e.exports||pt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ty(e,t){if(e==null)return pi;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=$e.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==$e.None?[r,a]:r,t[o]=s):n[o]=r}return n}function ae(e){return Uo(()=>{let t=Zy(e);return Jy(t),t})}function ar(e){return e[bT]||null}function qy(e){return e[CT]||null}function Yy(e){return e[ET]||null}function Ky(e){let t=ar(e)||qy(e)||Yy(e);return t!==null?t.standalone:!1}function Qy(e,t){let n=e[DT]||null;if(!n&&t===!0)throw new Error(`Type ${Be(e)} does not have '\u0275mod' property.`);return n}function Zy(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||pi,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||pt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ty(e.inputs,t),outputs:ty(e.outputs),debugInfo:null}}function Jy(e){e.features?.forEach(t=>t(e))}function ny(e,t){if(!e)return null;let n=t?Yy:tS;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(nS)}function rS(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function bi(e){return{\u0275providers:e}}function vh(...e){return{\u0275providers:Xy(!0,e),\u0275fromNgModule:!0}}function Xy(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return _h(t,s=>{let a=s;Od(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ev(i,o),n}function ev(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];wh(i,o=>{t(o,r)})}}function Od(e,t,n,r){if(e=Ue(e),!e)return!1;let i=null,o=K_(e),s=!o&&ar(e);if(!o&&!s){let c=e.ngModule;if(o=K_(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Od(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{_h(o.imports,u=>{Od(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&ev(l,t)}if(!a){let l=fi(i)||(()=>new i);t({provide:i,useFactory:l,deps:pt},i),t({provide:Hy,useValue:i,multi:!0},i),t({provide:mi,useValue:()=>C(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;wh(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function wh(e,t){for(let n of e)Fy(n)&&(n=n.\u0275providers),Array.isArray(n)?wh(n,t):t(n)}var iS=te({provide:String,useValue:te});function tv(e){return e!==null&&typeof e=="object"&&iS in e}function oS(e){return!!(e&&e.useExisting)}function sS(e){return!!(e&&e.useFactory)}function gi(e){return typeof e=="function"}function aS(e){return!!e.useClass}var Cc=new T(""),Ka={},cS={},gd;function Ih(){return gd===void 0&&(gd=new rc),gd}var Ke=class{},No=class extends Ke{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fd(t,s=>this.processProvider(s)),this.records.set($y,ci(void 0,this)),i.has("environment")&&this.records.set(Ke,ci(void 0,this));let o=this.records.get(Cc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hy,pt,j.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Dn(this),r=ft(void 0),i;try{return t()}finally{Dn(n),ft(r)}}get(t,n=Mo,r=j.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Z_))return t[Z_](this);r=bc(r);let i,o=Dn(this),s=ft(void 0);try{if(!(r&j.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=fS(t)&&wc(t);l&&this.injectableDefInScope(l)?c=ci(kd(t),Ka):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&j.Self?Ih():this.parent;return n=r&j.Optional&&n===Mo?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[tc]=a[tc]||[]).unshift(Be(t)),o)throw a;return kT(a,t,"R3InjectorError",this.source)}else throw a}finally{ft(s),Dn(o)}}resolveInjectorInitializers(){let t=Q(null),n=Dn(this),r=ft(void 0),i;try{let o=this.get(mi,pt,j.Self);for(let s of o)s()}finally{Dn(n),ft(r),Q(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Be(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(t){t=Ue(t);let n=gi(t)?t:Ue(t&&t.provide),r=uS(t);if(!gi(t)&&t.multi===!0){let i=this.records.get(n);i||(i=ci(void 0,Ka,!0),i.factory=()=>Rd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Q(null);try{return n.value===Ka&&(n.value=cS,n.value=n.factory()),typeof n.value=="object"&&n.value&&hS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ue(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kd(e){let t=wc(e),n=t!==null?t.factory:fi(e);if(n!==null)return n;if(e instanceof T)throw new S(204,!1);if(e instanceof Function)return lS(e);throw new S(204,!1)}function lS(e){if(e.length>0)throw new S(204,!1);let n=wT(e);return n!==null?()=>n.factory(e):()=>new e}function uS(e){if(tv(e))return ci(void 0,e.useValue);{let t=nv(e);return ci(t,Ka)}}function nv(e,t,n){let r;if(gi(e)){let i=Ue(e);return fi(i)||kd(i)}else if(tv(e))r=()=>Ue(e.useValue);else if(sS(e))r=()=>e.useFactory(...Rd(e.deps||[]));else if(oS(e))r=()=>C(Ue(e.useExisting));else{let i=Ue(e&&(e.useClass||e.provide));if(dS(e))r=()=>new i(...Rd(e.deps));else return fi(i)||kd(i)}return r}function ci(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function dS(e){return!!e.deps}function hS(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function fS(e){return typeof e=="function"||typeof e=="object"&&e instanceof T}function Fd(e,t){for(let n of e)Array.isArray(n)?Fd(n,t):n&&Fy(n)?Fd(n.\u0275providers,t):t(n)}function sn(e,t){e instanceof No&&e.assertNotDestroyed();let n,r=Dn(e),i=ft(void 0);try{return t()}finally{Dn(r),ft(i)}}function pS(){return Ly()!==void 0||RT()!=null}function mS(e){return typeof e=="function"}var an=0,Y=1,x=2,Fe=3,At=4,it=5,xo=6,Ro=7,Nt=8,_i=9,xt=10,de=11,Po=12,ry=13,Ci=14,Rt=15,Ec=16,li=17,yi=18,Dc=19,rv=20,Tn=21,_d=22,cr=23,$t=25,iv=1;var lr=7,ic=8,oc=9,mt=10,bh=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(bh||{});function or(e){return Array.isArray(e)&&typeof e[iv]=="object"}function cn(e){return Array.isArray(e)&&e[iv]===!0}function Ch(e){return(e.flags&4)!==0}function Tc(e){return e.componentOffset>-1}function Sc(e){return(e.flags&1)===1}function Sn(e){return!!e.template}function gS(e){return(e[x]&512)!==0}var Ld=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ov(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Nn(){return sv}function sv(e){return e.type.prototype.ngOnChanges&&(e.setInput=yS),_S}Nn.ngInherit=!0;function _S(){let e=cv(this),t=e?.current;if(t){let n=e.previous;if(n===pi)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function yS(e,t,n,r,i){let o=this.declaredInputs[r],s=cv(e)||vS(e,{previous:pi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ld(l&&l.currentValue,n,c===pi),ov(e,t,i,n)}var av="__ngSimpleChanges__";function cv(e){return e[av]||null}function vS(e,t){return e[av]=t}var iy=null;var jt=function(e,t,n){iy?.(e,t,n)},wS="svg",IS="math",bS=!1;function CS(){return bS}function Ht(e){for(;Array.isArray(e);)e=e[an];return e}function lv(e,t){return Ht(t[e])}function gt(e,t){return Ht(t[e.index])}function uv(e,t){return e.data[t]}function xn(e,t){let n=t[e];return or(n)?n:n[an]}function Eh(e){return(e[x]&128)===128}function ES(e){return cn(e[Fe])}function vi(e,t){return t==null?null:e[t]}function dv(e){e[li]=0}function DS(e){e[x]&1024||(e[x]|=1024,Eh(e)&&Oo(e))}function TS(e,t){for(;e>0;)t=t[Ci],e--;return t}function Dh(e){return!!(e[x]&9216||e[cr]?.dirty)}function Vd(e){e[xt].changeDetectionScheduler?.notify(1),Dh(e)?Oo(e):e[x]&64&&(CS()?(e[x]|=1024,Oo(e)):e[xt].changeDetectionScheduler?.notify())}function Oo(e){e[xt].changeDetectionScheduler?.notify();let t=ko(e);for(;t!==null&&!(t[x]&8192||(t[x]|=8192,!Eh(t)));)t=ko(t)}function hv(e,t){if((e[x]&256)===256)throw new S(911,!1);e[Tn]===null&&(e[Tn]=[]),e[Tn].push(t)}function SS(e,t){if(e[Tn]===null)return;let n=e[Tn].indexOf(t);n!==-1&&e[Tn].splice(n,1)}function ko(e){let t=e[Fe];return cn(t)?t[Fe]:t}var G={lFrame:vv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MS(){return G.lFrame.elementDepthCount}function AS(){G.lFrame.elementDepthCount++}function NS(){G.lFrame.elementDepthCount--}function fv(){return G.bindingsEnabled}function pv(){return G.skipHydrationRootTNode!==null}function xS(e){return G.skipHydrationRootTNode===e}function RS(){G.skipHydrationRootTNode=null}function ee(){return G.lFrame.lView}function Le(){return G.lFrame.tView}function Ce(e){return G.lFrame.contextLView=e,e[Nt]}function Ee(e){return G.lFrame.contextLView=null,e}function Qe(){let e=mv();for(;e!==null&&e.type===64;)e=e.parent;return e}function mv(){return G.lFrame.currentTNode}function PS(){let e=G.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function mr(e,t){let n=G.lFrame;n.currentTNode=e,n.isParent=t}function Th(){return G.lFrame.isParent}function Sh(){G.lFrame.isParent=!1}function OS(e){return G.lFrame.bindingIndex=e}function Mc(){return G.lFrame.bindingIndex++}function kS(e){let t=G.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function FS(){return G.lFrame.inI18n}function LS(e,t){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=e,jd(t)}function VS(){return G.lFrame.currentDirectiveIndex}function jd(e){G.lFrame.currentDirectiveIndex=e}function jS(e){let t=G.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function gv(e){G.lFrame.currentQueryIndex=e}function US(e){let t=e[Y];return t.type===2?t.declTNode:t.type===1?e[it]:null}function _v(e,t,n){if(n&j.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&j.Host);)if(i=US(o),i===null||(o=o[Ci],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=G.lFrame=yv();return r.currentTNode=t,r.lView=e,!0}function Mh(e){let t=yv(),n=e[Y];G.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function yv(){let e=G.lFrame,t=e===null?null:e.child;return t===null?vv(e):t}function vv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function wv(){let e=G.lFrame;return G.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Iv=wv;function Ah(){let e=wv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function BS(e){return(G.lFrame.contextLView=TS(e,G.lFrame.contextLView))[Nt]}function Ei(){return G.lFrame.selectedIndex}function ur(e){G.lFrame.selectedIndex=e}function Nh(){let e=G.lFrame;return uv(e.tView,e.selectedIndex)}function $S(){return G.lFrame.currentNamespace}var bv=!0;function Ac(){return bv}function Nc(e){bv=e}function HS(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=sv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function xc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Qa(e,t,n){Cv(e,t,3,n)}function Za(e,t,n,r){(e[x]&3)===n&&Cv(e,t,n,r)}function yd(e,t){let n=e[x];(n&3)===t&&(n&=16383,n+=1,e[x]=n)}function Cv(e,t,n,r){let i=r!==void 0?e[li]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[li]+=65536),(a<o||o==-1)&&(WS(e,n,t,c),e[li]=(e[li]&4294901760)+c+2),c++}function oy(e,t){jt(4,e,t);let n=Q(null);try{t.call(e)}finally{Q(n),jt(5,e,t)}}function WS(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[x]>>14<e[li]>>16&&(e[x]&3)===t&&(e[x]+=16384,oy(a,o)):oy(a,o)}var hi=-1,dr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function zS(e){return e instanceof dr}function GS(e){return(e.flags&8)!==0}function qS(e){return(e.flags&16)!==0}function Ev(e){return e!==hi}function sc(e){return e&32767}function YS(e){return e>>16}function ac(e,t){let n=YS(e),r=t;for(;n>0;)r=r[Ci],n--;return r}var Ud=!0;function sy(e){let t=Ud;return Ud=e,t}var KS=256,Dv=KS-1,Tv=5,QS=0,Ut={};function ZS(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(So)&&(r=n[So]),r==null&&(r=n[So]=QS++);let i=r&Dv,o=1<<i;t.data[e+(i>>Tv)]|=o}function cc(e,t){let n=Sv(e,t);if(n!==-1)return n;let r=t[Y];r.firstCreatePass&&(e.injectorIndex=t.length,vd(r.data,e),vd(t,null),vd(r.blueprint,null));let i=xh(e,t),o=e.injectorIndex;if(Ev(i)){let s=sc(i),a=ac(i,t),c=a[Y].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function vd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Sv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function xh(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Rv(i),r===null)return hi;if(n++,i=i[Ci],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return hi}function Bd(e,t,n){ZS(e,t,n)}function Mv(e,t,n){if(n&j.Optional||e!==void 0)return e;mh(t,"NodeInjector")}function Av(e,t,n,r){if(n&j.Optional&&r===void 0&&(r=null),!(n&(j.Self|j.Host))){let i=e[_i],o=ft(void 0);try{return i?i.get(t,r,n&j.Optional):Vy(t,r,n&j.Optional)}finally{ft(o)}}return Mv(r,t,n)}function Nv(e,t,n,r=j.Default,i){if(e!==null){if(t[x]&2048&&!(r&j.Self)){let s=nM(e,t,n,r,Ut);if(s!==Ut)return s}let o=xv(e,t,n,r,Ut);if(o!==Ut)return o}return Av(t,n,r,i)}function xv(e,t,n,r,i){let o=eM(n);if(typeof o=="function"){if(!_v(t,e,r))return r&j.Host?Mv(i,n,r):Av(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&j.Optional))mh(n);else return s}finally{Iv()}}else if(typeof o=="number"){let s=null,a=Sv(e,t),c=hi,l=r&j.Host?t[Rt][it]:null;for((a===-1||r&j.SkipSelf)&&(c=a===-1?xh(e,t):t[a+8],c===hi||!cy(r,!1)?a=-1:(s=t[Y],a=sc(c),t=ac(c,t)));a!==-1;){let u=t[Y];if(ay(o,a,u.data)){let d=JS(a,t,n,s,r,l);if(d!==Ut)return d}c=t[a+8],c!==hi&&cy(r,t[Y].data[a+8]===l)&&ay(o,a,t)?(s=u,a=sc(c),t=ac(c,t)):a=-1}}return i}function JS(e,t,n,r,i,o){let s=t[Y],a=s.data[e+8],c=r==null?Tc(a)&&Ud:r!=s&&(a.type&3)!==0,l=i&j.Host&&o===a,u=XS(a,s,n,c,l);return u!==null?wi(t,s,u,a):Ut}function XS(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let p=d;p<h;p++){let m=s[p];if(p<c&&n===m||p>=c&&m.type===n)return p}if(i){let p=s[c];if(p&&Sn(p)&&p.type===n)return c}return null}function wi(e,t,n,r){let i=e[n],o=t.data;if(zS(i)){let s=i;s.resolving&&ST(TT(o[n]));let a=sy(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?ft(s.injectImpl):null,u=_v(e,r,j.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&HS(n,o[n],t)}finally{l!==null&&ft(l),sy(a),s.resolving=!1,Iv()}}return i}function eM(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(So)?e[So]:void 0;return typeof t=="number"?t>=0?t&Dv:tM:t}function ay(e,t,n){let r=1<<e;return!!(n[t+(e>>Tv)]&r)}function cy(e,t){return!(e&j.Self)&&!(e&j.Host&&t)}var sr=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Nv(this._tNode,this._lView,t,bc(r),n)}};function tM(){return new sr(Qe(),ee())}function Di(e){return Uo(()=>{let t=e.prototype.constructor,n=t[ec]||$d(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[ec]||$d(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $d(e){return Ry(e)?()=>{let t=$d(Ue(e));return t&&t()}:fi(e)}function nM(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[x]&2048&&!(s[x]&512);){let a=xv(o,s,n,r|j.Self,Ut);if(a!==Ut)return a;let c=o.parent;if(!c){let l=s[rv];if(l){let u=l.get(n,Ut,r);if(u!==Ut)return u}c=Rv(s),s=s[Ci]}o=c}return i}function Rv(e){let t=e[Y],n=t.type;return n===2?t.declTNode:n===1?e[it]:null}function ly(e,t=null,n=null,r){let i=Pv(e,t,n,r);return i.resolveInjectorInitializers(),i}function Pv(e,t=null,n=null,r,i=new Set){let o=[n||pt,vh(e)];return r=r||(typeof e=="object"?void 0:Be(e)),new No(o,t||Ih(),r||null,i)}var Ti=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Mo}static{this.NULL=new rc}static create(n,r){if(Array.isArray(n))return ly({name:""},r,n,"");{let i=n.name??"";return ly({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=E({token:e,providedIn:"any",factory:()=>C($y)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var rM="ngOriginalError";function wd(e){return e[rM]}var rn=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&wd(t);for(;n&&wd(n);)n=wd(n);return n||null}},Ov=new T("",{providedIn:"root",factory:()=>v(rn).handleError.bind(void 0)}),kv=(()=>{class e{static{this.__NG_ELEMENT_ID__=iM}static{this.__NG_ENV_ID__=n=>n}}return e})(),Hd=class extends kv{constructor(t){super(),this._lView=t}onDestroy(t){return hv(this._lView,t),()=>SS(this._lView,t)}};function iM(){return new Hd(ee())}function oM(){return Rc(Qe(),ee())}function Rc(e,t){return new _t(gt(e,t))}var _t=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=oM}}return e})();var Wd=class extends Me{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,pS()&&(this.destroyRef=v(kv,{optional:!0})??void 0)}emit(t){let n=Q(null);try{super.next(t)}finally{Q(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Id(o),i&&(i=Id(i)),s&&(s=Id(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ue&&t.add(a),a}};function Id(e){return t=>{setTimeout(e,void 0,t)}}var we=Wd;function Fv(e){return(e.flags&128)===128}var Lv=new Map,sM=0;function aM(){return sM++}function cM(e){Lv.set(e[Dc],e)}function lM(e){Lv.delete(e[Dc])}var uy="__ngContext__";function Mn(e,t){or(t)?(e[uy]=t[Dc],cM(t)):e[uy]=t}function Vv(e){return Uv(e[Po])}function jv(e){return Uv(e[At])}function Uv(e){for(;e!==null&&!cn(e);)e=e[At];return e}var zd;function Bv(e){zd=e}function uM(){if(zd!==void 0)return zd;if(typeof document<"u")return document;throw new S(210,!1)}var Pc=new T("",{providedIn:"root",factory:()=>dM}),dM="ng",Rh=new T(""),Wt=new T("",{providedIn:"platform",factory:()=>"unknown"});var $o=new T("",{providedIn:"root",factory:()=>uM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hM="h",fM="b";var pM=()=>null;function Ph(e,t,n=!1){return pM(e,t,n)}var $v=!1,mM=new T("",{providedIn:"root",factory:()=>$v});var lc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ny})`}};function Oc(e){return e instanceof lc?e.changingThisBreaksApplicationSecurity:e}function Hv(e,t){let n=gM(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ny})`)}return n===t}function gM(e){return e instanceof lc&&e.getTypeName()||null}var _M=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wv(e){return e=String(e),e.match(_M)?e:"unsafe:"+e}var Oh=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Oh||{});function kh(e){let t=yM();return t?t.sanitize(Oh.URL,e)||"":Hv(e,"URL")?Oc(e):Wv(Ic(e))}function yM(){let e=ee();return e&&e[xt].sanitizer}var vM=/^>|^->|<!--|-->|--!>|<!-$/g,wM=/(<|>)/g,IM="\u200B$1\u200B";function bM(e){return e.replace(vM,t=>t.replace(wM,IM))}function zv(e){return e instanceof Function?e():e}var on=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(on||{}),CM;function Fh(e,t){return CM(e,t)}function ui(e,t,n,r,i){if(r!=null){let o,s=!1;cn(r)?o=r:or(r)&&(s=!0,r=r[an]);let a=Ht(r);e===0&&n!==null?i==null?Zv(t,n,a):uc(t,n,a,i||null,!0):e===1&&n!==null?uc(t,n,a,i||null,!0):e===2?jM(t,a,s):e===3&&t.destroyNode(a),o!=null&&BM(t,e,o,n,i)}}function EM(e,t){return e.createText(t)}function DM(e,t,n){e.setValue(t,n)}function TM(e,t){return e.createComment(bM(t))}function Gv(e,t,n){return e.createElement(t,n)}function SM(e,t){qv(e,t),t[an]=null,t[it]=null}function MM(e,t,n,r,i,o){r[an]=i,r[it]=t,Fc(e,r,n,1,i,o)}function qv(e,t){t[xt].changeDetectionScheduler?.notify(1),Fc(e,t,t[de],2,null,null)}function AM(e){let t=e[Po];if(!t)return bd(e[Y],e);for(;t;){let n=null;if(or(t))n=t[Po];else{let r=t[mt];r&&(n=r)}if(!n){for(;t&&!t[At]&&t!==e;)or(t)&&bd(t[Y],t),t=t[Fe];t===null&&(t=e),or(t)&&bd(t[Y],t),n=t&&t[At]}t=n}}function NM(e,t,n,r){let i=mt+r,o=n.length;r>0&&(n[i-1][At]=t),r<o-mt?(t[At]=n[i],By(n,mt+r,t)):(n.push(t),t[At]=null),t[Fe]=n;let s=t[Ec];s!==null&&n!==s&&xM(s,t);let a=t[yi];a!==null&&a.insertView(e),Vd(t),t[x]|=128}function xM(e,t){let n=e[oc],i=t[Fe][Fe][Rt];t[Rt]!==i&&(e[x]|=bh.HasTransplantedViews),n===null?e[oc]=[t]:n.push(t)}function Yv(e,t){let n=e[oc],r=n.indexOf(t);n.splice(r,1)}function Gd(e,t){if(e.length<=mt)return;let n=mt+t,r=e[n];if(r){let i=r[Ec];i!==null&&i!==e&&Yv(i,r),t>0&&(e[n-1][At]=r[At]);let o=nc(e,mt+t);SM(r[Y],r);let s=o[yi];s!==null&&s.detachView(o[Y]),r[Fe]=null,r[At]=null,r[x]&=-129}return r}function Kv(e,t){if(!(t[x]&256)){let n=t[de];n.destroyNode&&Fc(e,t,n,3,null,null),AM(t)}}function bd(e,t){if(t[x]&256)return;let n=Q(null);try{t[x]&=-129,t[x]|=256,t[cr]&&w_(t[cr]),PM(e,t),RM(e,t),t[Y].type===1&&t[de].destroy();let r=t[Ec];if(r!==null&&cn(t[Fe])){r!==t[Fe]&&Yv(r,t);let i=t[yi];i!==null&&i.detachView(e)}lM(t)}finally{Q(n)}}function RM(e,t){let n=e.cleanup,r=t[Ro];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[Ro]=null);let i=t[Tn];if(i!==null){t[Tn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function PM(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof dr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];jt(4,a,c);try{c.call(a)}finally{jt(5,a,c)}}else{jt(4,i,o);try{o.call(i)}finally{jt(5,i,o)}}}}}function Qv(e,t,n){return OM(e,t.parent,n)}function OM(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[an];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Bt.None||o===Bt.Emulated)return null}return gt(r,n)}}function uc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Zv(e,t,n){e.appendChild(t,n)}function dy(e,t,n,r,i){r!==null?uc(e,t,n,r,i):Zv(e,t,n)}function kM(e,t,n,r){e.removeChild(t,n,r)}function Lh(e,t){return e.parentNode(t)}function FM(e,t){return e.nextSibling(t)}function Jv(e,t,n){return VM(e,t,n)}function LM(e,t,n){return e.type&40?gt(e,n):null}var VM=LM,hy;function kc(e,t,n,r){let i=Qv(e,r,t),o=t[de],s=r.parent||t[it],a=Jv(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)dy(o,i,n[c],a,!1);else dy(o,i,n,a,!1);hy!==void 0&&hy(o,r,t,n,i)}function Ja(e,t){if(t!==null){let n=t.type;if(n&3)return gt(t,e);if(n&4)return qd(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ja(e,r);{let i=e[t.index];return cn(i)?qd(-1,i):Ht(i)}}else{if(n&32)return Fh(t,e)()||Ht(e[t.index]);{let r=Xv(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=ko(e[Rt]);return Ja(i,r)}else return Ja(e,t.next)}}}return null}function Xv(e,t){if(t!==null){let r=e[Rt][it],i=t.projection;return r.projection[i]}return null}function qd(e,t){let n=mt+e+1;if(n<t.length){let r=t[n],i=r[Y].firstChild;if(i!==null)return Ja(r,i)}return t[lr]}function jM(e,t,n){let r=Lh(e,t);r&&kM(e,r,t,n)}function Vh(e,t,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Mn(Ht(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Vh(e,t,n.child,r,i,o,!1),ui(t,e,i,a,o);else if(c&32){let l=Fh(n,r),u;for(;u=l();)ui(t,e,i,u,o);ui(t,e,i,a,o)}else c&16?ew(e,t,r,n,i,o):ui(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Fc(e,t,n,r,i,o){Vh(n,r,e.firstChild,t,i,o,!1)}function UM(e,t,n){let r=t[de],i=Qv(e,n,t),o=n.parent||t[it],s=Jv(o,n,t);ew(r,0,t,n,i,s)}function ew(e,t,n,r,i,o){let s=n[Rt],c=s[it].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ui(t,e,i,u,o)}else{let l=c,u=s[Fe];Fv(r)&&(l.flags|=128),Vh(e,t,l,u,i,o,!0)}}function BM(e,t,n,r,i){let o=n[lr],s=Ht(n);o!==s&&ui(t,e,r,o,i);for(let a=mt;a<n.length;a++){let c=n[a];Fc(c[Y],c,e,t,r,o)}}function $M(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:on.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=on.Important),e.setStyle(n,r,i,o))}}function HM(e,t,n){e.setAttribute(t,"style",n)}function tw(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function nw(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Pd(e,t,r),i!==null&&tw(e,t,i),o!==null&&HM(e,t,o)}var Si={};function H(e=1){rw(Le(),ee(),Ei()+e,!1)}function rw(e,t,n,r){if(!r)if((t[x]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Qa(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Za(t,o,0,n)}ur(n)}function A(e,t=j.Default){let n=ee();if(n===null)return C(e,t);let r=Qe();return Nv(r,n,Ue(e),t)}function iw(e,t,n,r,i,o){let s=Q(null);try{let a=null;i&$e.SignalBased&&(a=t[r][Gu]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&$e.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):ov(t,a,r,o)}finally{Q(s)}}function WM(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ur(~i);else{let o=i,s=n[++r],a=n[++r];LS(s,o);let c=t[o];a(2,c)}}}finally{ur(-1)}}function Lc(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[an]=i,d[x]=r|4|128|8|64,(l!==null||e&&e[x]&2048)&&(d[x]|=2048),dv(d),d[Fe]=d[Ci]=e,d[Nt]=n,d[xt]=s||e&&e[xt],d[de]=a||e&&e[de],d[_i]=c||e&&e[_i]||null,d[it]=o,d[Dc]=aM(),d[xo]=u,d[rv]=l,d[Rt]=t.type==2?e[Rt]:d,d}function Mi(e,t,n,r,i){let o=e.data[t];if(o===null)o=zM(e,t,n,r,i),FS()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=PS();o.injectorIndex=s===null?-1:s.injectorIndex}return mr(o,!0),o}function zM(e,t,n,r,i){let o=mv(),s=Th(),a=s?o:o&&o.parent,c=e.data[t]=QM(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function ow(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function sw(e,t,n,r,i){let o=Ei(),s=r&2;try{ur(-1),s&&t.length>$t&&rw(e,t,$t,!1),jt(s?2:0,i),n(r,i)}finally{ur(o),jt(s?3:1,i)}}function jh(e,t,n){if(Ch(t)){let r=Q(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Q(r)}}}function Uh(e,t,n){fv()&&(nA(e,t,n,gt(n,t)),(n.flags&64)===64&&uw(e,t,n))}function Bh(e,t,n=gt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function aw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=$h(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function $h(e,t,n,r,i,o,s,a,c,l,u){let d=$t+r,h=d+i,p=GM(d,h),m=typeof l=="function"?l():l;return p[Y]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function GM(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Si);return n}function qM(e,t,n,r){let o=r.get(mM,$v)||n===Bt.ShadowDom,s=e.selectRootElement(t,o);return YM(s),s}function YM(e){KM(e)}var KM=()=>null;function QM(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return pv()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function fy(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=$e.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?py(r,n,l,a,c):py(r,n,l,a)}return r}function py(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function ZM(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,m=h?h.outputs:null;c=fy(0,d.inputs,u,c,p),l=fy(1,d.outputs,u,l,m);let g=c!==null&&s!==null&&!yh(t)?fA(c,u,s):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function JM(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function cw(e,t,n,r,i,o,s,a){let c=gt(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(Wh(e,n,u,r,i),Tc(t)&&XM(n,t.index)):t.type&3?(r=JM(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function XM(e,t){let n=xn(t,e);n[x]&16||(n[x]|=64)}function Hh(e,t,n,r){if(fv()){let i=r===null?null:{"":-1},o=iA(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&lw(e,t,n,s,i,a),i&&oA(n,r,i)}n.mergedAttrs=Ao(n.mergedAttrs,n.attrs)}function lw(e,t,n,r,i,o){for(let l=0;l<r.length;l++)Bd(cc(n,t),e,r[l].type);aA(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=ow(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ao(n.mergedAttrs,u.hostAttrs),cA(e,n,t,c,u),sA(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ZM(e,n,o)}function eA(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;tA(s)!=a&&s.push(a),s.push(n,r,o)}}function tA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function nA(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Tc(n)&&lA(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||cc(n,t),Mn(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=wi(t,e,a,n);if(Mn(l,t),s!==null&&hA(t,a-i,l,c,n,s),Sn(c)){let u=xn(n.index,t);u[Nt]=wi(t,e,a,n)}}}function uw(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=VS();try{ur(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];jd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&rA(c,l)}}finally{ur(-1),jd(s)}}function rA(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function iA(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Gy(t,s.selectors,!1))if(r||(r=[]),Sn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Yd(e,t,c)}else r.unshift(s),Yd(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Yd(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function oA(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new S(-301,!1);r.push(t[i],o)}}}function sA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Sn(t)&&(n[""]=e)}}function aA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function cA(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new dr(o,Sn(i),A);e.blueprint[r]=s,n[r]=s,eA(e,t,r,ow(e,n,i.hostVars,Si),i)}function lA(e,t,n){let r=gt(t,e),i=aw(n),o=e[xt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vc(e,Lc(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function uA(e,t,n,r,i,o){let s=gt(e,t);dA(t[de],s,o,e.value,n,r,i)}function dA(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Ic(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function hA(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];iw(r,n,c,l,u,d)}}function fA(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function dw(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function hw(e,t){let n=e.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];gv(o),a.contentQueries(2,t[s],s)}}}finally{Q(r)}}}function Vc(e,t){return e[Po]?e[ry][At]=t:e[Po]=t,e[ry]=t,t}function Kd(e,t,n){gv(0);let r=Q(null);try{t(e,n)}finally{Q(r)}}function pA(e){return e[Ro]||(e[Ro]=[])}function mA(e){return e.cleanup||(e.cleanup=[])}function fw(e,t){let n=e[_i],r=n?n.get(rn,null):null;r&&r.handleError(t)}function Wh(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];iw(u,l,r,a,c,i)}}function gA(e,t,n){let r=lv(t,e);DM(e[de],r,n)}function _A(e,t){let n=xn(t,e),r=n[Y];yA(r,n);let i=n[an];i!==null&&n[xo]===null&&(n[xo]=Ph(i,n[_i])),zh(r,n,n[Nt])}function yA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function zh(e,t,n){Mh(t);try{let r=e.viewQuery;r!==null&&Kd(1,r,n);let i=e.template;i!==null&&sw(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[yi]?.finishViewCreation(e),e.staticContentQueries&&hw(e,t),e.staticViewQueries&&Kd(2,e.viewQuery,n);let o=e.components;o!==null&&vA(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[x]&=-5,Ah()}}function vA(e,t){for(let n=0;n<t.length;n++)_A(e,t[n])}function wA(e,t,n,r){let i=Q(null);try{let o=t.tView,a=e[x]&4096?4096:16,c=Lc(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Ec]=l;let u=e[yi];return u!==null&&(c[yi]=u.createEmbeddedView(o)),zh(o,c,n),c}finally{Q(i)}}function my(e,t){return!t||t.firstChild===null||Fv(e)}function IA(e,t,n,r=!0){let i=t[Y];if(NM(i,t,e,n),r){let s=qd(n,e),a=t[de],c=Lh(a,e[lr]);c!==null&&MM(i,e[it],a,t,c,s)}let o=t[xo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dc(e,t,n,r,i=!1){for(;n!==null;){let o=t[n.index];o!==null&&r.push(Ht(o)),cn(o)&&bA(o,r);let s=n.type;if(s&8)dc(e,t,n.child,r);else if(s&32){let a=Fh(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Xv(t,n);if(Array.isArray(a))r.push(...a);else{let c=ko(t[Rt]);dc(c[Y],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function bA(e,t){for(let n=mt;n<e.length;n++){let r=e[n],i=r[Y].firstChild;i!==null&&dc(r[Y],r,i,t)}e[lr]!==e[an]&&t.push(e[lr])}var pw=[];function CA(e){return e[cr]??EA(e)}function EA(e){let t=pw.pop()??Object.create(TA);return t.lView=e,t}function DA(e){e.lView[cr]!==e&&(e.lView=null,pw.push(e))}var TA=k(_({},__),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Oo(e.lView)},consumerOnSignalRead(){this.lView[cr]=this}}),mw=100;function gw(e,t=!0,n=0){let r=e[xt],i=r.rendererFactory,o=!1;o||i.begin?.();try{SA(e,n)}catch(s){throw t&&fw(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function SA(e,t){Qd(e,t);let n=0;for(;Dh(e);){if(n===mw)throw new S(103,!1);n++,Qd(e,1)}}function MA(e,t,n,r){let i=t[x];if((i&256)===256)return;let o=!1;!o&&t[xt].inlineEffectRunner?.flush(),Mh(t);let s=null,a=null;!o&&AA(e)&&(a=CA(t),s=y_(a));try{dv(t),OS(e.bindingStartIndex),n!==null&&sw(e,t,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=e.preOrderCheckHooks;d!==null&&Qa(t,d,null)}else{let d=e.preOrderHooks;d!==null&&Za(t,d,0,null),yd(t,0)}if(NA(t),_w(t,0),e.contentQueries!==null&&hw(e,t),!o)if(c){let d=e.contentCheckHooks;d!==null&&Qa(t,d)}else{let d=e.contentHooks;d!==null&&Za(t,d,1),yd(t,1)}WM(e,t);let l=e.components;l!==null&&vw(t,l,0);let u=e.viewQuery;if(u!==null&&Kd(2,u,r),!o)if(c){let d=e.viewCheckHooks;d!==null&&Qa(t,d)}else{let d=e.viewHooks;d!==null&&Za(t,d,2),yd(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[_d]){for(let d of t[_d])d();t[_d]=null}o||(t[x]&=-73)}catch(c){throw Oo(t),c}finally{a!==null&&(v_(a,s),DA(a)),Ah()}}function AA(e){return e.type!==2}function _w(e,t){for(let n=Vv(e);n!==null;n=jv(n))for(let r=mt;r<n.length;r++){let i=n[r];yw(i,t)}}function NA(e){for(let t=Vv(e);t!==null;t=jv(t)){if(!(t[x]&bh.HasTransplantedViews))continue;let n=t[oc];for(let r=0;r<n.length;r++){let i=n[r],o=i[Fe];DS(i)}}}function xA(e,t,n){let r=xn(t,e);yw(r,n)}function yw(e,t){Eh(e)&&Qd(e,t)}function Qd(e,t){let r=e[Y],i=e[x],o=e[cr],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&qu(o)),o&&(o.dirty=!1),e[x]&=-9217,s)MA(r,e,r.template,e[Nt]);else if(i&8192){_w(e,1);let a=r.components;a!==null&&vw(e,a,1)}}function vw(e,t,n){for(let r=0;r<t.length;r++)xA(e,t[r],n)}function Gh(e){for(e[xt].changeDetectionScheduler?.notify();e;){e[x]|=64;let t=ko(e);if(gS(e)&&!t)return e;e=t}return null}var hr=class{get rootNodes(){let t=this._lView,n=t[Y];return dc(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nt]}set context(t){this._lView[Nt]=t}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Fe];if(cn(t)){let n=t[ic],r=n?n.indexOf(this):-1;r>-1&&(Gd(t,r),nc(n,r))}this._attachedToViewContainer=!1}Kv(this._lView[Y],this._lView)}onDestroy(t){hv(this._lView,t)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[x]&=-129}reattach(){Vd(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,gw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,qv(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=t,Vd(this._lView)}},jc=(()=>{class e{static{this.__NG_ELEMENT_ID__=OA}}return e})(),RA=jc,PA=class extends RA{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=wA(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new hr(i)}};function OA(){return kA(Qe(),ee())}function kA(e,t){return e.type&4?new PA(t,e,Rc(e,t)):null}var Oz=new RegExp(`^(\\d+)*(${fM}|${hM})*(.*)`);var FA=()=>null;function gy(e,t){return FA(e,t)}var Zd=class{},Jd=class{},hc=class{};function LA(e){let t=Error(`No component factory found for ${Be(e)}.`);return t[VA]=e,t}var VA="ngComponent";var Xd=class{resolveComponentFactory(t){throw LA(t)}},Uc=(()=>{class e{static{this.NULL=new Xd}}return e})(),Fo=class{},Ai=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>jA()}}return e})();function jA(){let e=ee(),t=Qe(),n=xn(t.index,e);return(or(n)?n:e)[de]}var UA=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>null})}}return e})(),Cd={};var _y=new Set;function qh(e){_y.has(e)||(_y.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function yy(...e){}function BA(){let e=typeof To.requestAnimationFrame=="function",t=To[e?"requestAnimationFrame":"setTimeout"],n=To[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var re=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BA().nativeRequestAnimationFrame,WA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new S(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,$A,yy,yy);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},$A={};function Yh(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function HA(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(To,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,eh(e),e.isCheckStableRunning=!0,Yh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),eh(e))}function WA(e){let t=()=>{HA(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(zA(a))return n.invokeTask(i,o,s,a);try{return vy(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),wy(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return vy(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),wy(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,eh(e),Yh(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function eh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function vy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function wy(e){e._nesting--,Yh(e)}function zA(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var ww=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})();function fc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=q_(i,a);else if(o==2){let c=a,l=t[++s];r=q_(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var pc=class extends Uc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=ar(t);return new Lo(n,this.ngModule)}};function Iy(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function GA(e){let t=e.toLowerCase();return t==="svg"?wS:t==="math"?IS:null}var th=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=bc(r);let i=this.injector.get(t,Cd,r);return i!==Cd||n===Cd?i:this.parentInjector.get(t,n,r)}},Lo=class extends hc{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Iy(t.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Iy(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=XT(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=Q(null);try{i=i||this.ngModule;let s=i instanceof Ke?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new th(t,s):t,c=a.get(Fo,null);if(c===null)throw new S(407,!1);let l=a.get(UA,null),u=a.get(ww,null),d=a.get(Zd,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=r?qM(p,r,this.componentDef.encapsulation,a):Gv(p,m,GA(m)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let D=null;g!==null&&(D=Ph(g,a,!0));let oe=$h(0,null,null,1,0,null,null,null,null,null,null),$=Lc(null,oe,null,w,null,null,h,p,a,null,D);Mh($);let Se,yn;try{let et=this.componentDef,Qr,Wu=null;et.findHostDirectiveDefs?(Qr=[],Wu=new Map,et.findHostDirectiveDefs(et,Qr,Wu),Qr.push(et)):Qr=[et];let j0=qA($,g),U0=YA(j0,g,et,Qr,$,h,p);yn=uv(oe,$t),g&&ZA(p,et,g,r),n!==void 0&&JA(yn,this.ngContentSelectors,n),Se=QA(U0,et,Qr,Wu,$,[XA]),zh(oe,$,null)}finally{Ah()}return new nh(this.componentType,Se,Rc(yn,$),$,yn)}finally{Q(o)}}},nh=class extends Jd{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new hr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Wh(o[Y],o,i,t,n),this.previousInputValues.set(t,n);let s=xn(this._tNode.index,o);Gh(s)}}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function qA(e,t){let n=e[Y],r=$t;return e[r]=t,Mi(n,r,2,"#host",null)}function YA(e,t,n,r,i,o,s){let a=i[Y];KA(r,e,t,s);let c=null;t!==null&&(c=Ph(t,i[_i]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Lc(i,aw(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&Yd(a,e,r.length-1),Vc(i,d),i[e.index]=d}function KA(e,t,n,r){for(let i of e)t.mergedAttrs=Ao(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(fc(t,t.mergedAttrs,!0),n!==null&&nw(r,n,t))}function QA(e,t,n,r,i,o){let s=Qe(),a=i[Y],c=gt(s,i);lw(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=wi(i,a,d,s);Mn(h,i)}uw(a,i,s),c&&Mn(c,i);let l=wi(i,a,s.directiveStart+s.componentOffset,s);if(e[Nt]=i[Nt]=l,o!==null)for(let u of o)u(l,t);return jh(a,s,i),l}function ZA(e,t,n,r){if(r)Pd(e,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=eS(t.selectors[0]);i&&Pd(e,n,i),o&&o.length>0&&tw(e,n,o.join(" "))}}function JA(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function XA(){let e=Qe();xc(ee()[Y],e)}var Ni=(()=>{class e{static{this.__NG_ELEMENT_ID__=eN}}return e})();function eN(){let e=Qe();return nN(e,ee())}var tN=Ni,Iw=class extends tN{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Rc(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){let t=xh(this._hostTNode,this._hostLView);if(Ev(t)){let n=ac(t,this._hostLView),r=sc(t),i=n[Y].data[r+8];return new sr(i,n)}else return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=by(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=gy(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,my(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!mS(t),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?t:new Lo(ar(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let g=(s?l:this.parentInjector).get(Ke,null);g&&(o=g)}let u=ar(c.componentType??{}),d=gy(this._lContainer,u?.id??null),h=d?.firstChild??null,p=c.create(l,i,h,o);return this.insertImpl(p.hostView,a,my(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(ES(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Fe],l=new Iw(c,c[it],c[Fe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return IA(s,i,o,r),t.attachToViewContainerRef(),By(Ed(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=by(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Gd(this._lContainer,n);r&&(nc(Ed(this._lContainer),n),Kv(r[Y],r))}detach(t){let n=this._adjustIndex(t,-1),r=Gd(this._lContainer,n);return r&&nc(Ed(this._lContainer),n)!=null?new hr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function by(e){return e[ic]}function Ed(e){return e[ic]||(e[ic]=[])}function nN(e,t){let n,r=t[e.index];return cn(r)?n=r:(n=dw(r,t,null,e),t[e.index]=n,Vc(t,n)),iN(n,t,e,r),new Iw(n,e,t)}function rN(e,t){let n=e[de],r=n.createComment(""),i=gt(t,e),o=Lh(n,i);return uc(n,o,r,FM(n,i),!1),r}var iN=aN,oN=()=>!1;function sN(e,t,n){return oN(e,t,n)}function aN(e,t,n,r){if(e[lr])return;let i;n.type&8?i=Ht(r):i=rN(t,n),e[lr]=i}function bw(e){return typeof e=="function"&&e[Gu]!==void 0}function Cw(e){return bw(e)&&typeof e.set=="function"}function cN(e){return Object.getPrototypeOf(e.prototype).constructor}function ln(e){let t=cN(e.type),n=!0,r=[e];for(;t;){let i;if(Sn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new S(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=qa(e.inputs),s.inputTransforms=qa(e.inputTransforms),s.declaredInputs=qa(e.declaredInputs),s.outputs=qa(e.outputs);let a=i.hostBindings;a&&fN(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&dN(e,c),l&&hN(e,l),lN(e,i),yT(e.outputs,i.outputs),Sn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===ln&&(n=!1)}}t=Object.getPrototypeOf(t)}uN(r)}function lN(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function uN(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ao(i.hostAttrs,n=Ao(n,i.hostAttrs))}}function qa(e){return e===pi?{}:e===pt?[]:e}function dN(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function hN(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function fN(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var An=class{},Vo=class{};var rh=class extends An{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pc(this);let i=Qy(t);this._bootstrapComponents=zv(i.bootstrap),this._r3Injector=Pv(t,n,[{provide:An,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver},...r],Be(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ih=class extends Vo{constructor(t){super(),this.moduleType=t}create(t){return new rh(this.moduleType,t,[])}};var mc=class extends An{constructor(t){super(),this.componentFactoryResolver=new pc(this),this.instance=null;let n=new No([...t.providers,{provide:An,useValue:this},{provide:Uc,useValue:this.componentFactoryResolver}],t.parent||Ih(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Kh(e,t,n=null){return new mc({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var gr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ae(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ew(e){return mN(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function pN(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function mN(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ho(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function gN(e){return(e.flags&32)===32}function _N(e,t,n,r,i,o,s,a,c){let l=t.consts,u=Mi(t,e,4,s||null,vi(l,a));Hh(t,n,u,vi(l,c)),xc(t,u);let d=u.tView=$h(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function He(e,t,n,r,i,o,s,a){let c=ee(),l=Le(),u=e+$t,d=l.firstCreatePass?_N(u,l,c,t,n,r,i,o,s):l.data[u];mr(d,!1);let h=yN(l,c,d,e);Ac()&&kc(l,c,h,d),Mn(h,c);let p=dw(h,c,h,d);return c[u]=p,Vc(c,p),sN(p,d,c),Sc(d)&&Uh(l,c,d),s!=null&&Bh(c,d,a),He}var yN=vN;function vN(e,t,n,r){return Nc(!0),t[de].createComment("")}function xi(e,t,n,r){let i=ee(),o=Mc();if(Ho(i,o,t)){let s=Le(),a=Nh();uA(a,i,e,t,n,r)}return xi}function wN(e,t,n,r){return Ho(e,Mc(),n)?t+Ic(n)+r:Si}function Ya(e,t){return e<<17|t<<2}function fr(e){return e>>17&32767}function IN(e){return(e&2)==2}function bN(e,t){return e&131071|t<<17}function oh(e){return e|2}function Ii(e){return(e&131068)>>2}function Dd(e,t){return e&-131069|t<<2}function CN(e){return(e&1)===1}function sh(e){return e|1}function EN(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=fr(s),c=Ii(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Bo(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=fr(e[a+1]);e[r+1]=Ya(h,a),h!==0&&(e[h+1]=Dd(e[h+1],r)),e[a+1]=bN(e[a+1],r)}else e[r+1]=Ya(a,0),a!==0&&(e[a+1]=Dd(e[a+1],r)),a=r;else e[r+1]=Ya(c,0),a===0?a=r:e[c+1]=Dd(e[c+1],r),c=r;l&&(e[r+1]=oh(e[r+1])),Cy(e,u,r,!0),Cy(e,u,r,!1),DN(t,u,e,r,o),s=Ya(a,c),o?t.classBindings=s:t.styleBindings=s}function DN(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Bo(o,t)>=0&&(n[r+1]=sh(n[r+1]))}function Cy(e,t,n,r){let i=e[n+1],o=t===null,s=r?fr(i):Ii(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];TN(c,t)&&(a=!0,e[s+1]=r?sh(l):oh(l)),s=r?fr(l):Ii(l)}a&&(e[n+1]=r?oh(i):sh(i))}function TN(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Bo(e,t)>=0:!1}function he(e,t,n){let r=ee(),i=Mc();if(Ho(r,i,t)){let o=Le(),s=Nh();cw(o,s,r,e,t,r[de],n,!1)}return he}function Ey(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";Wh(e,n,o[s],s,r)}function Wo(e,t,n){return Dw(e,t,n,!1),Wo}function un(e,t){return Dw(e,t,null,!0),un}function Dw(e,t,n,r){let i=ee(),o=Le(),s=kS(2);if(o.firstUpdatePass&&MN(o,e,s,r),t!==Si&&Ho(i,s,t)){let a=o.data[Ei()];PN(o,a,i,i[de],e,i[s+1]=ON(t,n),r,s)}}function SN(e,t){return t>=e.expandoStartIndex}function MN(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Ei()],s=SN(e,n);kN(o,r)&&t===null&&!s&&(t=!1),t=AN(i,o,t,r),EN(i,o,t,n,s,r)}}function AN(e,t,n,r){let i=jS(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Td(null,e,t,n,r),n=jo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Td(i,e,t,n,r),o===null){let c=NN(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Td(null,e,t,c[1],r),c=jo(c,t.attrs,r),xN(e,t,r,c))}else o=RN(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function NN(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Ii(r)!==0)return e[fr(r)]}function xN(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[fr(i)]=r}function RN(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=jo(r,s,n)}return jo(r,t.attrs,n)}function Td(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=jo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function jo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),jT(e,s,n?!0:t[++o]))}return e===void 0?null:e}function PN(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=CN(l)?Dy(c,t,n,i,Ii(l),s):void 0;if(!gc(u)){gc(o)||IN(l)&&(o=Dy(c,null,n,i,a,s));let d=lv(Ei(),n);$M(r,s,d,i,o)}}function Dy(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Si&&(h=d?pt:void 0);let p=d?md(h,r):u===r?h:void 0;if(l&&!gc(p)&&(p=md(c,r)),gc(p)&&(a=p,s))return a;let m=e[i+1];i=s?fr(m):Ii(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=md(c,r))}return a}function gc(e){return e!==void 0}function ON(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Be(Oc(e)))),e}function kN(e,t){return(e.flags&(t?8:16))!==0}function FN(e,t,n,r,i,o){let s=t.consts,a=vi(s,i),c=Mi(t,e,2,r,a);return Hh(t,n,c,vi(s,o)),c.attrs!==null&&fc(c,c.attrs,!1),c.mergedAttrs!==null&&fc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function I(e,t,n,r){let i=ee(),o=Le(),s=$t+e,a=i[de],c=o.firstCreatePass?FN(s,o,i,t,n,r):o.data[s],l=LN(o,i,c,a,t,e);i[s]=l;let u=Sc(c);return mr(c,!0),nw(a,l,c),!gN(c)&&Ac()&&kc(o,i,l,c),MS()===0&&Mn(l,i),AS(),u&&(Uh(o,i,c),jh(o,c,i)),r!==null&&Bh(i,c),I}function b(){let e=Qe();Th()?Sh():(e=e.parent,mr(e,!1));let t=e;xS(t)&&RS(),NS();let n=Le();return n.firstCreatePass&&(xc(n,e),Ch(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&GS(t)&&Ey(n,t,ee(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&qS(t)&&Ey(n,t,ee(),t.stylesWithoutHost,!1),b}function Pt(e,t,n,r){return I(e,t,n,r),b(),Pt}var LN=(e,t,n,r,i,o)=>(Nc(!0),Gv(r,i,$S()));function VN(e,t,n,r,i){let o=t.consts,s=vi(o,r),a=Mi(t,e,8,"ng-container",s);s!==null&&fc(a,s,!0);let c=vi(o,i);return Hh(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function Qh(e,t,n){let r=ee(),i=Le(),o=e+$t,s=i.firstCreatePass?VN(o,i,r,t,n):i.data[o];mr(s,!0);let a=jN(i,r,s,e);return r[o]=a,Ac()&&kc(i,r,a,s),Mn(a,r),Sc(s)&&(Uh(i,r,s),jh(i,s,r)),n!=null&&Bh(r,s),Qh}function Zh(){let e=Qe(),t=Le();return Th()?Sh():(e=e.parent,mr(e,!1)),t.firstCreatePass&&(xc(t,e),Ch(e)&&t.queries.elementEnd(e)),Zh}var jN=(e,t,n,r)=>(Nc(!0),TM(t[de],""));function Rn(){return ee()}var _c="en-US";var UN=_c;function BN(e){typeof e=="string"&&(UN=e.toLowerCase().replace(/_/g,"-"))}function ne(e,t,n,r){let i=ee(),o=Le(),s=Qe();return Tw(o,i,i[de],s,e,t,r),ne}function $N(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Ro],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Tw(e,t,n,r,i,o,s){let a=Sc(r),l=e.firstCreatePass&&mA(e),u=t[Nt],d=pA(t),h=!0;if(r.type&3||s){let g=gt(r,t),w=s?s(g):g,D=d.length,oe=s?Se=>s(Ht(Se[r.index])):r.index,$=null;if(!s&&a&&($=$N(e,t,i,r.index)),$!==null){let Se=$.__ngLastListenerFn__||$;Se.__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,h=!1}else{o=Sy(r,t,u,o,!1);let Se=n.listen(w,i,o);d.push(o,Se),l&&l.push(i,oe,D,D+1)}}else o=Sy(r,t,u,o,!1);let p=r.outputs,m;if(h&&p!==null&&(m=p[i])){let g=m.length;if(g)for(let w=0;w<g;w+=2){let D=m[w],oe=m[w+1],yn=t[D][oe].subscribe(o),et=d.length;d.push(o,yn),l&&l.push(i,r.index,et,-(et+1))}}}function Ty(e,t,n,r){let i=Q(null);try{return jt(6,t,n),n(r)!==!1}catch(o){return fw(e,o),!1}finally{jt(7,t,n),Q(i)}}function Sy(e,t,n,r,i){return function o(s){if(s===Function)return r;let a=e.componentOffset>-1?xn(e.index,t):t;Gh(a);let c=Ty(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=Ty(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function zt(e=1){return BS(e)}function HN(e,t){let n=null,r=YT(e);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){n=i;continue}if(r===null?Gy(e,o,!0):ZT(r,o))return i}return n}function Jh(e){let t=ee()[Rt][it];if(!t.projection){let n=e?e.length:1,r=t.projection=LT(n,null),i=r.slice(),o=t.child;for(;o!==null;){let s=e?HN(o,e):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Xh(e,t=0,n){let r=ee(),i=Le(),o=Mi(i,$t+e,16,null,n||null);o.projection===null&&(o.projection=t),Sh(),(!r[xo]||pv())&&(o.flags&32)!==32&&UM(i,r,o)}function M(e,t=""){let n=ee(),r=Le(),i=e+$t,o=r.firstCreatePass?Mi(r,i,1,t,null):r.data[i],s=WN(r,n,o,t,e);n[i]=s,Ac()&&kc(r,n,s,o),mr(o,!1)}var WN=(e,t,n,r,i)=>(Nc(!0),EM(t[de],r));function Pn(e){return _r("",e,""),Pn}function _r(e,t,n){let r=ee(),i=wN(r,e,t,n);return i!==Si&&gA(r,Ei(),i),_r}function ot(e,t,n){Cw(t)&&(t=t());let r=ee(),i=Mc();if(Ho(r,i,t)){let o=Le(),s=Nh();cw(o,s,r,e,t,r[de],n,!1)}return ot}function yt(e,t){let n=Cw(e);return n&&e.set(t),n}function st(e,t){let n=ee(),r=Le(),i=Qe();return Tw(r,n,n[de],i,e,t),st}function zN(e,t,n){let r=Le();if(r.firstCreatePass){let i=Sn(e);ah(n,r.data,r.blueprint,i,!0),ah(t,r.data,r.blueprint,i,!1)}}function ah(e,t,n,r,i){if(e=Ue(e),Array.isArray(e))for(let o=0;o<e.length;o++)ah(e[o],t,n,r,i);else{let o=Le(),s=ee(),a=Qe(),c=gi(e)?e:Ue(e.provide),l=nv(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(gi(e)||!e.multi){let p=new dr(l,i,A),m=Md(c,t,i?u:u+h,d);m===-1?(Bd(cc(a,s),o,c),Sd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{let p=Md(c,t,u+h,d),m=Md(c,t,u,u+h),g=p>=0&&n[p],w=m>=0&&n[m];if(i&&!w||!i&&!g){Bd(cc(a,s),o,c);let D=YN(i?qN:GN,n.length,i,r,l);!i&&w&&(n[m].providerFactory=D),Sd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(D),s.push(D)}else{let D=Sw(n[i?m:p],l,!i&&r);Sd(o,e,p>-1?p:m,D)}!i&&r&&w&&n[m].componentProviders++}}}function Sd(e,t,n,r){let i=gi(t),o=aS(t);if(i||o){let c=(o?Ue(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Sw(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Md(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function GN(e,t,n,r){return ch(this.multi,[])}function qN(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=wi(n,n[Y],this.providerFactory.index,r);o=a.slice(0,s),ch(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],ch(i,o);return o}function ch(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function YN(e,t,n,r,i){let o=new dr(e,n,A);return o.multi=[],o.index=t,o.componentProviders=0,Sw(o,i,r&&!n),o}function yr(e,t=[]){return n=>{n.providersResolver=(r,i)=>zN(r,i?i(e):e,t)}}var KN=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Xy(!1,n.type),i=r.length>0?Kh([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(C(Ke))})}}return e})();function xe(e){qh("NgStandalone"),e.getStandaloneInjector=t=>t.get(KN).getOrCreateStandaloneInjector(e)}var Bc=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Mw=new T("");function vr(e){return!!e&&typeof e.then=="function"}function Aw(e){return!!e&&typeof e.subscribe=="function"}var Nw=new T(""),xw=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=v(Nw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(vr(o))n.push(o);else if(Aw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$c=new T("");function QN(){I_(()=>{throw new S(600,!1)})}function ZN(e){return e.isBoundToModule}function JN(e,t,n){try{let r=n();return vr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Ri=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=v(Ov),this.afterRenderEffectManager=v(ww),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=v(gr).hasPendingTasks.pipe(P(n=>!n)),this._injector=v(Ke)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof hc;if(!this._injector.get(xw).done){let h=!i&&Ky(n),p=!1;throw new S(405,p)}let s;i?s=n:s=this._injector.get(Uc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=ZN(s)?void 0:this._injector.get(An),c=r||s.selector,l=s.create(Ti.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Mw,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Ad(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new S(101,!1);let r=Q(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Q(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===mw)throw new S(103,!1);if(n){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)XN(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>lh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>lh(o))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ad(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get($c,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ad(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ad(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function XN(e,t,n){!t&&!lh(e)||ex(e,n,t)}function lh(e){return Dh(e)}function ex(e,t,n){let r;n?(r=0,e[x]|=1024):e[x]&64?r=0:r=1,gw(e,t,r)}var uh=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},ef=(()=>{class e{compileModuleSync(n){return new ih(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Qy(n),o=zv(i.declarations).reduce((s,a)=>{let c=ar(a);return c&&s.push(new Lo(c)),s},[]);return new uh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var tx=(()=>{class e{constructor(){this.zone=v(re),this.applicationRef=v(Ri)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function nx(e){return[{provide:re,useFactory:e},{provide:mi,multi:!0,useFactory:()=>{let t=v(tx,{optional:!0});return()=>t.initialize()}},{provide:mi,multi:!0,useFactory:()=>{let t=v(sx);return()=>{t.initialize()}}},{provide:Ov,useFactory:rx}]}function rx(){let e=v(re),t=v(rn);return n=>e.runOutsideAngular(()=>t.handleError(n))}function ix(e){let t=nx(()=>new re(ox(e)));return bi([[],t])}function ox(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var sx=(()=>{class e{constructor(){this.subscription=new ue,this.initialized=!1,this.zone=v(re),this.pendingTasks=v(gr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ax(){return typeof $localize<"u"&&$localize.locale||_c}var Hc=new T("",{providedIn:"root",factory:()=>v(Hc,j.Optional|j.SkipSelf)||ax()});var Rw=new T("");var Xa=null;function cx(e=[],t){return Ti.create({name:t,providers:[{provide:Cc,useValue:"platform"},{provide:Rw,useValue:new Set([()=>Xa=null])},...e]})}function lx(e=[]){if(Xa)return Xa;let t=cx(e);return Xa=t,QN(),ux(t),t}function ux(e){e.get(Rh,null)?.forEach(n=>n())}var Gt=(()=>{class e{static{this.__NG_ELEMENT_ID__=dx}}return e})();function dx(e){return hx(Qe(),ee(),(e&16)===16)}function hx(e,t,n){if(Tc(e)&&!n){let r=xn(e.index,t);return new hr(r,r)}else if(e.type&47){let r=t[Rt];return new hr(r,t)}return null}var dh=class{constructor(){}supports(t){return Ew(t)}create(t){return new hh(t)}},fx=(e,t)=>t,hh=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||fx}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<My(r,i,o)?n:r,a=My(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;u<=m&&m<l&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Ew(t))throw new S(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,pN(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new fh(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new yc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new yc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},fh=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ph=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},yc=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new ph,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function My(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Ay(){return new tf([new dh])}var tf=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:Ay})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Ay()),deps:[[e,new Uy,new gh]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new S(901,!1)}}return e})();function Pw(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=lx(r),o=[ix(),...n||[]],a=new mc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(re);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(rn,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:p=>{l.handleError(p)}})});let d=()=>a.destroy(),h=i.get(Rw);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),JN(l,c,()=>{let p=a.get(xw);return p.runInitializers(),p.donePromise.then(()=>{let m=a.get(Hc,_c);BN(m||_c);let g=a.get(Ri);return t!==void 0&&g.bootstrap(t),g})})})}catch(t){return Promise.reject(t)}}function wr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var Vw=null;function hn(){return Vw}function jw(e){Vw??=e}var Wc=class{};var De=new T(""),sf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(mx),providedIn:"platform"})}}return e})();var mx=(()=>{class e extends sf{constructor(){super(),this._doc=v(De),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hn().getBaseHref(this._doc)}onPopState(n){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function af(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Ow(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function dn(e){return e&&e[0]!=="?"?"?"+e:e}var Oi=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(Bw),providedIn:"root"})}}return e})(),Uw=new T(""),Bw=(()=>{class e extends Oi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return af(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+dn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+dn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+dn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(sf),C(Uw,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$w=(()=>{class e extends Oi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=af(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+dn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+dn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(C(sf),C(Uw,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),zo=(()=>{class e{constructor(n){this._subject=new we,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yx(Ow(kw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+dn(r))}normalize(n){return e.stripTrailingSlash(_x(this._basePath,kw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+dn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+dn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=dn}static{this.joinWithSlash=af}static{this.stripTrailingSlash=Ow}static{this.\u0275fac=function(r){return new(r||e)(C(Oi))}}static{this.\u0275prov=E({token:e,factory:()=>gx(),providedIn:"root"})}}return e})();function gx(){return new zo(C(Oi))}function _x(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function kw(e){return e.replace(/\/index.html$/,"")}function yx(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Gc(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var nf=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qc=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new nf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Fw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Fw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(A(Ni),A(jc),A(tf))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Fw(e,t){e.context.$implicit=t.item}var ki=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new rf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Lw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Lw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(A(Ni),A(jc))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),rf=class{constructor(){this.$implicit=null,this.ngIf=null}};function Lw(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Be(t)}'.`)}var at=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({})}}return e})(),cf="browser",vx="server";function Hw(e){return e===cf}function Yc(e){return e===vx}var Pi=class{};var Yo=class{},Qc=class{},Ir=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var uf=class{encodeKey(t){return Ww(t)}encodeValue(t){return Ww(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function bx(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Cx=/%(\d[a-f0-9])/gi,Ex={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ww(e){return encodeURIComponent(e).replace(Cx,(t,n)=>Ex[n]??t)}function Kc(e){return`${e}`}var On=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new uf,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=bx(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(Kc):[Kc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Kc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Kc(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var df=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Dx(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function zw(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Gw(e){return typeof Blob<"u"&&e instanceof Blob}function qw(e){return typeof FormData<"u"&&e instanceof FormData}function Tx(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var qo=class e{constructor(t,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(Dx(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ir,this.context??=new df,!this.params)this.params=new On,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||zw(this.body)||Gw(this.body)||qw(this.body)||Tx(this.body)?this.body:this.body instanceof On?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qw(this.body)?null:Gw(this.body)?this.body.type||null:zw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof On?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new e(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Fi=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Fi||{}),Ko=class{constructor(t,n=Xc.Ok,r="OK"){this.headers=t.headers||new Ir,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},hf=class e extends Ko{constructor(t={}){super(t),this.type=Fi.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Zc=class e extends Ko{constructor(t={}){super(t),this.type=Fi.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Jc=class extends Ko{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Xc=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(Xc||{});function lf(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Qo=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof qo)o=n;else{let c;i.headers instanceof Ir?c=i.headers:c=new Ir(i.headers);let l;i.params&&(i.params instanceof On?l=i.params:l=new On({fromObject:i.params})),o=new qo(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=R(o).pipe(bn(c=>this.handler.handle(c)));if(n instanceof qo||i.observe==="events")return s;let a=s.pipe(je(c=>c instanceof Zc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(P(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(P(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new On().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,lf(i,r))}post(n,r,i={}){return this.request("POST",n,lf(i,r))}put(n,r,i={}){return this.request("PUT",n,lf(i,r))}static{this.\u0275fac=function(r){return new(r||e)(C(Yo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function Zw(e,t){return t(e)}function Sx(e,t){return(n,r)=>t.intercept(n,{handle:i=>e(i,r)})}function Mx(e,t,n){return(r,i)=>sn(n,()=>t(r,o=>e(o,i)))}var Ax=new T(""),ff=new T(""),Nx=new T(""),xx=new T("");function Rx(){let e=null;return(t,n)=>{e===null&&(e=(v(Ax,{optional:!0})??[]).reduceRight(Sx,Zw));let r=v(gr),i=r.add();return e(t,n).pipe(En(()=>r.remove(i)))}}var Yw=(()=>{class e extends Yo{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=v(gr);let i=v(xx,{optional:!0});this.backend=i??n}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ff),...this.injector.get(Nx,[])]));this.chain=i.reduceRight((o,s)=>Mx(o,s,this.injector),Zw)}let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(En(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||e)(C(Qc),C(Ke))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();var Px=/^\)\]\}',?\n/;function Ox(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var Kw=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new S(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?se(r.\u0275loadImpl()):R(null)).pipe(rt(()=>new q(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((g,w)=>s.setRequestHeader(g,w.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let g=n.detectContentTypeHeader();g!==null&&s.setRequestHeader("Content-Type",g)}if(n.responseType){let g=n.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=s.statusText||"OK",w=new Ir(s.getAllResponseHeaders()),D=Ox(s)||n.url;return c=new hf({headers:w,status:s.status,statusText:g,url:D}),c},u=()=>{let{headers:g,status:w,statusText:D,url:oe}=l(),$=null;w!==Xc.NoContent&&($=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=$?Xc.Ok:0);let Se=w>=200&&w<300;if(n.responseType==="json"&&typeof $=="string"){let yn=$;$=$.replace(Px,"");try{$=$!==""?JSON.parse($):null}catch(et){$=yn,Se&&(Se=!1,$={error:et,text:$})}}Se?(o.next(new Zc({body:$,headers:g,status:w,statusText:D,url:oe||void 0})),o.complete()):o.error(new Jc({error:$,headers:g,status:w,statusText:D,url:oe||void 0}))},d=g=>{let{url:w}=l(),D=new Jc({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(D)},h=!1,p=g=>{h||(o.next(l()),h=!0);let w={type:Fi.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),n.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),o.next(w)},m=g=>{let w={type:Fi.UploadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),o.next(w)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Fi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||e)(C(Pi))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Jw=new T(""),kx="XSRF-TOKEN",Fx=new T("",{providedIn:"root",factory:()=>kx}),Lx="X-XSRF-TOKEN",Vx=new T("",{providedIn:"root",factory:()=>Lx}),el=class{},jx=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gc(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||e)(C(De),C(Wt),C(Fx))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function Ux(e,t){let n=e.url.toLowerCase();if(!v(Jw)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=v(el).getToken(),i=v(Vx);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),t(e)}var Xw=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(Xw||{});function Bx(e,t){return{\u0275kind:e,\u0275providers:t}}function $x(...e){let t=[Qo,Kw,Yw,{provide:Yo,useExisting:Yw},{provide:Qc,useExisting:Kw},{provide:ff,useValue:Ux,multi:!0},{provide:Jw,useValue:!0},{provide:el,useClass:jx}];for(let n of e)t.push(...n.\u0275providers);return bi(t)}var Qw=new T("");function Hx(){return Bx(Xw.LegacyInterceptors,[{provide:Qw,useFactory:Rx},{provide:ff,useExisting:Qw,multi:!0}])}var tl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({providers:[$x(Hx())]})}}return e})();var gf=class extends Wc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_f=class e extends gf{static makeCurrent(){jw(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Wx();return n==null?null:zx(n)}resetBaseElement(){Zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Gc(document.cookie,t)}},Zo=null;function Wx(){return Zo=Zo||document.querySelector("base"),Zo?Zo.getAttribute("href"):null}function zx(e){return new URL(e,document.baseURI).pathname}var Gx=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),yf=new T(""),iI=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(C(yf),C(re))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),nl=class{constructor(t){this._doc=t}},pf="ng-app-id",oI=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yc(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${pf}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(pf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(pf,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(C(De),C(Pc),C($o,8),C(Wt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),mf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wf=/%COMP%/g,sI="%COMP%",qx=`_nghost-${sI}`,Yx=`_ngcontent-${sI}`,Kx=!0,Qx=new T("",{providedIn:"root",factory:()=>Kx});function Zx(e){return Yx.replace(wf,e)}function Jx(e){return qx.replace(wf,e)}function aI(e,t){return t.map(n=>n.replace(wf,e))}var tI=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Yc(a),this.defaultRenderer=new Jo(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bt.ShadowDom&&(r=k(_({},r),{encapsulation:Bt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof rl?i.applyToHost(n):i instanceof Xo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Bt.Emulated:o=new rl(c,l,r,this.appId,u,s,a,d);break;case Bt.ShadowDom:return new vf(c,l,n,r,s,a,this.nonce,d);default:o=new Xo(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(C(iI),C(oI),C(Pc),C(Qx),C(De),C(Wt),C(re),C($o))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Jo=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(mf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(nI(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(nI(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=mf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=mf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(on.DashCase|on.Important)?t.style.setProperty(n,r,i&on.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&on.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=hn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function nI(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var vf=class extends Jo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=aI(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xo=class extends Jo{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?aI(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rl=class extends Xo{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=Zx(l),this.hostAttr=Jx(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},Xx=(()=>{class e extends nl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(C(De))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),rI=["alt","control","meta","shift"],eR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tR={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},nR=(()=>{class e extends nl{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rI.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=eR[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rI.forEach(s=>{if(s!==i){let a=tR[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(C(De))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function cI(e,t){return Pw(_({rootComponent:e},rR(t)))}function rR(e){return{appProviders:[...cR,...e?.providers??[]],platformProviders:aR}}function iR(){_f.makeCurrent()}function oR(){return new rn}function sR(){return Bv(document),document}var aR=[{provide:Wt,useValue:cf},{provide:Rh,useValue:iR,multi:!0},{provide:De,useFactory:sR,deps:[]}];var cR=[{provide:Cc,useValue:"root"},{provide:rn,useFactory:oR,deps:[]},{provide:yf,useClass:Xx,multi:!0,deps:[De,re,Wt]},{provide:yf,useClass:nR,multi:!0,deps:[De]},tI,oI,iI,{provide:Fo,useExisting:tI},{provide:Pi,useClass:Gx,deps:[]},[]];var lI=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(C(De))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var L="primary",ps=Symbol("RouteTitle"),Df=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bi(e){return new Df(e)}function hR(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function fR(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!qt(e[n],t[n]))return!1;return!0}function qt(e,t){let n=e?Tf(e):void 0,r=t?Tf(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mI(e[i],t[i]))return!1;return!0}function Tf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function mI(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function gI(e){return e.length>0?e[e.length-1]:null}function Ln(e){return sd(e)?e:vr(e)?se(Promise.resolve(e)):R(e)}var pR={exact:yI,subset:vI},_I={exact:mR,subset:gR,ignored:()=>!0};function uI(e,t,n){return pR[n.paths](e.root,t.root,n.matrixParams)&&_I[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function mR(e,t){return qt(e,t)}function yI(e,t,n){if(!Cr(e.segments,t.segments)||!sl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!yI(e.children[r],t.children[r],n))return!1;return!0}function gR(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>mI(e[n],t[n]))}function vI(e,t,n){return wI(e,t,t.segments,n)}function wI(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Cr(i,n)||t.hasChildren()||!sl(i,n,r))}else if(e.segments.length===n.length){if(!Cr(e.segments,n)||!sl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!vI(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Cr(e.segments,i)||!sl(e.segments,i,r)||!e.children[L]?!1:wI(e.children[L],t,o,r)}}function sl(e,t,n){return t.every((r,i)=>_I[n](e[i].parameters,r.parameters))}var kn=class{constructor(t=new Z([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){return vR.serialize(this)}},Z=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return al(this)}},br=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Bi(this.parameters),this._parameterMap}toString(){return bI(this)}};function _R(e,t){return Cr(e,t)&&e.every((n,r)=>qt(n.parameters,t[r].parameters))}function Cr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function yR(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===L&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==L&&(n=n.concat(t(i,r)))}),n}var Jf=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new ll,providedIn:"root"})}}return e})(),ll=class{parse(t){let n=new Mf(t);return new kn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${es(t.root,!0)}`,r=bR(t.queryParams),i=typeof t.fragment=="string"?`#${wR(t.fragment)}`:"";return`${n}${r}${i}`}},vR=new ll;function al(e){return e.segments.map(t=>bI(t)).join("/")}function es(e,t){if(!e.hasChildren())return al(e);if(t){let n=e.children[L]?es(e.children[L],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==L&&r.push(`${i}:${es(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yR(e,(r,i)=>i===L?[es(e.children[L],!1)]:[`${i}:${es(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[L]!=null?`${al(e)}/${n[0]}`:`${al(e)}/(${n.join("//")})`}}function II(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function il(e){return II(e).replace(/%3B/gi,";")}function wR(e){return encodeURI(e)}function Sf(e){return II(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cl(e){return decodeURIComponent(e)}function dI(e){return cl(e.replace(/\+/g,"%20"))}function bI(e){return`${Sf(e.path)}${IR(e.parameters)}`}function IR(e){return Object.entries(e).map(([t,n])=>`;${Sf(t)}=${Sf(n)}`).join("")}function bR(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${il(n)}=${il(i)}`).join("&"):`${il(n)}=${il(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var CR=/^[^\/()?;#]+/;function If(e){let t=e.match(CR);return t?t[0]:""}var ER=/^[^\/()?;=#]+/;function DR(e){let t=e.match(ER);return t?t[0]:""}var TR=/^[^=?&#]+/;function SR(e){let t=e.match(TR);return t?t[0]:""}var MR=/^[^&#]+/;function AR(e){let t=e.match(MR);return t?t[0]:""}var Mf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[L]=new Z(t,n)),r}parseSegment(){let t=If(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(t),new br(cl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=DR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=If(this.remaining);i&&(r=i,this.capture(r))}t[cl(n)]=cl(r)}parseQueryParam(t){let n=SR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=AR(this.remaining);s&&(r=s,this.capture(r))}let i=dI(n),o=dI(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=If(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=L);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[L]:new Z([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new S(4011,!1)}};function CI(e){return e.segments.length>0?new Z([],{[L]:e}):e}function EI(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=EI(i);if(r===L&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Z(e.segments,t);return NR(n)}function NR(e){if(e.numberOfChildren===1&&e.children[L]){let t=e.children[L];return new Z(e.segments.concat(t.segments),t.children)}return e}function $i(e){return e instanceof kn}function xR(e,t,n=null,r=null){let i=DI(e);return TI(i,t,n,r)}function DI(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Z(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=CI(r);return t??i}function TI(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return bf(i,i,i,n,r);let o=RR(t);if(o.toRoot())return bf(i,i,new Z([],{}),n,r);let s=PR(o,i,e),a=s.processChildren?rs(s.segmentGroup,s.index,o.commands):MI(s.segmentGroup,s.index,o.commands);return bf(i,s.segmentGroup,a,n,r)}function ul(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ss(e){return typeof e=="object"&&e!=null&&e.outlets}function bf(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=SI(e,t,n);let a=CI(EI(s));return new kn(a,o,i)}function SI(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=SI(o,t,n)}),new Z(e.segments,r)}var dl=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&ul(r[0]))throw new S(4003,!1);let i=r.find(ss);if(i&&i!==gI(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function RR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new dl(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dl(n,t,r)}var ji=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function PR(e,t,n){if(e.isAbsolute)return new ji(t,!0,0);if(!n)return new ji(t,!1,NaN);if(n.parent===null)return new ji(n,!0,0);let r=ul(e.commands[0])?0:1,i=n.segments.length-1+r;return OR(n,i,e.numberOfDoubleDots)}function OR(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new ji(r,!1,i-o)}function kR(e){return ss(e[0])?e[0].outlets:{[L]:e}}function MI(e,t,n){if(e??=new Z([],{}),e.segments.length===0&&e.hasChildren())return rs(e,t,n);let r=FR(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Z(e.segments.slice(0,r.pathIndex),{});return o.children[L]=new Z(e.segments.slice(r.pathIndex),e.children),rs(o,0,i)}else return r.match&&i.length===0?new Z(e.segments,{}):r.match&&!e.hasChildren()?Af(e,t,n):r.match?rs(e,0,i):Af(e,t,n)}function rs(e,t,n){if(n.length===0)return new Z(e.segments,{});{let r=kR(n),i={};if(Object.keys(r).some(o=>o!==L)&&e.children[L]&&e.numberOfChildren===1&&e.children[L].segments.length===0){let o=rs(e.children[L],t,n);return new Z(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=MI(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Z(e.segments,i)}}function FR(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ss(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!fI(c,l,s))return o;r+=2}else{if(!fI(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Af(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ss(o)){let c=LR(o.outlets);return new Z(r,c)}if(i===0&&ul(n[0])){let c=e.segments[t];r.push(new br(c.path,hI(n[0]))),i++;continue}let s=ss(o)?o.outlets[L]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ul(a)?(r.push(new br(s,hI(a))),i+=2):(r.push(new br(s,{})),i++)}return new Z(r,{})}function LR(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Af(new Z([],{}),0,r))}),t}function hI(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function fI(e,t,n){return e==n.path&&qt(t,n.parameters)}var is="imperative",Re=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Re||{}),vt=class{constructor(t,n){this.id=t,this.url=n}},as=class extends vt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Re.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Er=class extends vt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},lt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(lt||{}),Nf=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Nf||{}),Fn=class extends vt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends vt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Re.NavigationSkipped}},cs=class extends vt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hl=class extends vt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xf=class extends vt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rf=class extends vt{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pf=class extends vt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Of=class extends vt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kf=class{constructor(t){this.route=t,this.type=Re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ff=class{constructor(t){this.route=t,this.type=Re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lf=class{constructor(t){this.snapshot=t,this.type=Re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vf=class{constructor(t){this.snapshot=t,this.type=Re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jf=class{constructor(t){this.snapshot=t,this.type=Re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uf=class{constructor(t){this.snapshot=t,this.type=Re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ls=class{},us=class{constructor(t){this.url=t}};var Bf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yl,this.attachRef=null}},yl=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Bf,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=$f(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=$f(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Hf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Hf(t,this._root).map(n=>n.value)}};function $f(e,t){if(e===t.value)return t;for(let n of t.children){let r=$f(e,n);if(r)return r}return null}function Hf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Hf(e,n);if(r.length)return r.unshift(t),r}return[]}var ct=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var pl=class extends fl{constructor(t,n){super(t),this.snapshot=n,ep(this,t)}toString(){return this.snapshot.toString()}};function AI(e){let t=VR(e),n=new Ae([new br("",{})]),r=new Ae({}),i=new Ae({}),o=new Ae({}),s=new Ae(""),a=new Hi(n,r,o,s,i,L,e,t.root);return a.snapshot=t.root,new pl(new ct(a,[]),t)}function VR(e){let t={},n={},r={},i="",o=new ds([],t,r,i,n,L,e,null,{});return new ml("",new ct(o,[]))}var Hi=class{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(l=>l[ps]))??R(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(t=>Bi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(t=>Bi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xf(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&xI(i)&&(r.resolve[ps]=i.title),r}var ds=class{get title(){return this.data?.[ps]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},ml=class extends fl{constructor(t,n){super(n),this.url=t,ep(this,n)}toString(){return NI(this._root)}};function ep(e,t){t.value._routerState=e,t.children.forEach(n=>ep(e,n))}function NI(e){let t=e.children.length>0?` { ${e.children.map(NI).join(", ")} } `:"";return`${e.value}${t}`}function Cf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,qt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),qt(t.params,n.params)||e.paramsSubject.next(n.params),fR(t.url,n.url)||e.urlSubject.next(n.url),qt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Wf(e,t){let n=qt(e.params,t.params)&&_R(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Wf(e.parent,t.parent))}function xI(e){return typeof e.title=="string"||e.title===null}var tp=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=L,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=v(yl),this.location=v(Ni),this.changeDetector=v(Gt),this.environmentInjector=v(Ke),this.inputBinder=v(np,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new zf(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nn]})}}return e})(),zf=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Hi?this.route:t===yl?this.childContexts:this.parent.get(t,n)}},np=new T("");function jR(e,t,n){let r=hs(e,t._root,n?n._root:void 0);return new pl(r,t)}function hs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=UR(e,t,n);return new ct(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>hs(e,a)),s}}let r=BR(t.value),i=t.children.map(o=>hs(e,o));return new ct(r,i)}}function UR(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return hs(e,r,i);return hs(e,r)})}function BR(e){return new Hi(new Ae(e.url),new Ae(e.params),new Ae(e.queryParams),new Ae(e.fragment),new Ae(e.data),e.outlet,e.component,e)}var RI="ngNavigationCancelingError";function PI(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=$i(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=OI(!1,lt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function OI(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[RI]=!0,n.cancellationCode=t,n}function $R(e){return kI(e)&&$i(e.url)}function kI(e){return!!e&&e[RI]}var HR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ne({type:e,selectors:[["ng-component"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(r,i){r&1&&Pt(0,"router-outlet")},dependencies:[tp],encapsulation:2})}}return e})();function WR(e,t){return e.providers&&!e._injector&&(e._injector=Kh(e.providers,t,`Route: ${e.path}`)),e._injector??t}function rp(e){let t=e.children&&e.children.map(rp),n=t?k(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=HR),n}function Yt(e){return e.outlet||L}function zR(e,t){let n=e.filter(r=>Yt(r)===t);return n.push(...e.filter(r=>Yt(r)!==t)),n}function ms(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var GR=(e,t,n,r)=>P(i=>(new Gf(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Gf=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Cf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Vi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Vi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Vi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Vi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Uf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Vf(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Cf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cf(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=ms(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}},gl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ui=class{constructor(t,n){this.component=t,this.route=n}};function qR(e,t,n){let r=e._root,i=t?t._root:null;return ts(r,i,n,[r.value])}function YR(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function zi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Py(e)?e:t.get(e):r}function ts(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vi(t);return e.children.forEach(s=>{KR(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>os(a,n.getContext(s),i)),i}function KR(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=QR(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new gl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ts(e,t,a?a.children:null,r,i):ts(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ui(a.outlet.component,s))}else s&&os(t,a,i),i.canActivateChecks.push(new gl(r)),o.component?ts(e,null,a?a.children:null,r,i):ts(e,null,n,r,i);return i}function QR(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Cr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cr(e.url,t.url)||!qt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wf(e,t)||!qt(e.queryParams,t.queryParams);case"paramsChange":default:return!Wf(e,t)}}function os(e,t,n){let r=Vi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?os(s,t.children.getContext(o),n):os(s,null,n):os(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ui(t.outlet.component,i)):n.canDeactivateChecks.push(new Ui(null,i)):n.canDeactivateChecks.push(new Ui(null,i))}function gs(e){return typeof e=="function"}function ZR(e){return typeof e=="boolean"}function JR(e){return e&&gs(e.canLoad)}function XR(e){return e&&gs(e.canActivate)}function eP(e){return e&&gs(e.canActivateChild)}function tP(e){return e&&gs(e.canDeactivate)}function nP(e){return e&&gs(e.canMatch)}function FI(e){return e instanceof Tt||e?.name==="EmptyError"}var ol=Symbol("INITIAL_VALUE");function Wi(){return rt(e=>si(e.map(t=>t.pipe(St(1),Eo(ol)))).pipe(P(t=>{for(let n of t)if(n!==!0){if(n===ol)return ol;if(n===!1||n instanceof kn)return n}return!0}),je(t=>t!==ol),St(1)))}function rP(e,t){return ge(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?R(k(_({},n),{guardsResult:!0})):iP(s,r,i,e).pipe(ge(a=>a&&ZR(a)?oP(r,o,e,t):R(a)),P(a=>k(_({},n),{guardsResult:a})))})}function iP(e,t,n,r){return se(e).pipe(ge(i=>uP(i.component,i.route,n,t,r)),Vt(i=>i!==!0,!0))}function oP(e,t,n,r){return se(t).pipe(bn(i=>wn(aP(i.route.parent,r),sP(i.route,r),lP(e,i.path,n),cP(e,i.route,n))),Vt(i=>i!==!0,!0))}function sP(e,t){return e!==null&&t&&t(new jf(e)),R(!0)}function aP(e,t){return e!==null&&t&&t(new Lf(e)),R(!0)}function cP(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return R(!0);let i=r.map(o=>Wa(()=>{let s=ms(t)??n,a=zi(o,s),c=XR(a)?a.canActivate(t,e):sn(s,()=>a(t,e));return Ln(c).pipe(Vt())}));return R(i).pipe(Wi())}function lP(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>YR(s)).filter(s=>s!==null).map(s=>Wa(()=>{let a=s.guards.map(c=>{let l=ms(s.node)??n,u=zi(c,l),d=eP(u)?u.canActivateChild(r,e):sn(l,()=>u(r,e));return Ln(d).pipe(Vt())});return R(a).pipe(Wi())}));return R(o).pipe(Wi())}function uP(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return R(!0);let s=o.map(a=>{let c=ms(t)??i,l=zi(a,c),u=tP(l)?l.canDeactivate(e,t,n,r):sn(c,()=>l(e,t,n,r));return Ln(u).pipe(Vt())});return R(s).pipe(Wi())}function dP(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return R(!0);let o=i.map(s=>{let a=zi(s,e),c=JR(a)?a.canLoad(t,n):sn(e,()=>a(t,n));return Ln(c)});return R(o).pipe(Wi(),LI(r))}function LI(e){return td(ve(t=>{if($i(t))throw PI(e,t)}),P(t=>t===!0))}function hP(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return R(!0);let o=i.map(s=>{let a=zi(s,e),c=nP(a)?a.canMatch(t,n):sn(e,()=>a(t,n));return Ln(c)});return R(o).pipe(Wi(),LI(r))}var fs=class{constructor(t){this.segmentGroup=t||null}},_l=class extends Error{constructor(t){super(),this.urlTree=t}};function Li(e){return oi(new fs(e))}function fP(e){return oi(new S(4e3,!1))}function pP(e){return oi(OI(!1,lt.GuardRejected))}var qf=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return R(r);if(i.numberOfChildren>1||!i.children[L])return fP(t.redirectTo);i=i.children[L]}}applyRedirectCommands(t,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n.startsWith("/"))throw new _l(i);return i}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new kn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Z(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Yf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mP(e,t,n,r,i){let o=ip(e,t,n);return o.matched?(r=WR(t,r),hP(r,t,n,i).pipe(P(s=>s===!0?o:_({},Yf)))):R(o)}function ip(e,t,n){if(t.path==="**")return gP(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},Yf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||hR)(n,e,t);if(!i)return _({},Yf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function gP(e){return{matched:!0,parameters:e.length>0?gI(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function pI(e,t,n,r){return n.length>0&&vP(e,n,r)?{segmentGroup:new Z(t,yP(r,new Z(n,e.children))),slicedSegments:[]}:n.length===0&&wP(e,n,r)?{segmentGroup:new Z(e.segments,_P(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Z(e.segments,e.children),slicedSegments:n}}function _P(e,t,n,r){let i={};for(let o of n)if(vl(e,t,o)&&!r[Yt(o)]){let s=new Z([],{});i[Yt(o)]=s}return _(_({},r),i)}function yP(e,t){let n={};n[L]=t;for(let r of e)if(r.path===""&&Yt(r)!==L){let i=new Z([],{});n[Yt(r)]=i}return n}function vP(e,t,n){return n.some(r=>vl(e,t,r)&&Yt(r)!==L)}function wP(e,t,n){return n.some(r=>vl(e,t,r))}function vl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function IP(e,t,n,r){return Yt(e)!==r&&(r===L||!vl(t,n,e))?!1:ip(t,e,n).matched}function bP(e,t,n){return t.length===0&&!e.children[n]}var Kf=class{};function CP(e,t,n,r,i,o,s="emptyOnly"){return new Qf(e,t,n,r,i,s,o).recognize()}var EP=31,Qf=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new qf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new S(4002,`'${t.segmentGroup}'`)}recognize(){let t=pI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(P(n=>{let r=new ds([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},L,this.rootComponentType,null,{}),i=new ct(r,n),o=new ml("",i),s=xR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,L).pipe(In(r=>{if(r instanceof _l)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fs?this.noMatchError(r):r}))}inheritParamsAndData(t,n){let r=t.value,i=Xf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(t,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0).pipe(P(o=>o instanceof ct?[o]:[]))}processChildren(t,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return se(i).pipe(bn(o=>{let s=r.children[o],a=zR(n,o);return this.processSegmentGroup(t,a,s,o)}),fd((o,s)=>(o.push(...s),o)),Cn(null),hd(),ge(o=>{if(o===null)return Li(r);let s=VI(o);return DP(s),R(s)}))}processSegment(t,n,r,i,o,s){return se(n).pipe(bn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(In(c=>{if(c instanceof fs)return R(null);throw c}))),Vt(a=>!!a),In(a=>{if(FI(a))return bP(r,i,o)?R(new Kf):Li(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return IP(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Li(i):Li(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=ip(n,i,o);if(!a)return Li(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EP&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(ge(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){let s=mP(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(rt(a=>a.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(rt(({routes:c})=>{let l=r._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new ds(u,h,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,SP(r),Yt(r),r.component??r._loadedComponent??null,r,MP(r)),{segmentGroup:m,slicedSegments:g}=pI(n,u,d,c);if(g.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(P(D=>D===null?null:new ct(p,D)));if(c.length===0&&g.length===0)return R(new ct(p,[]));let w=Yt(r)===o;return this.processSegment(l,c,m,g,w?L:o,!0).pipe(P(D=>new ct(p,D instanceof ct?[D]:[])))}))):Li(n)))}getChildConfig(t,n,r){return n.children?R({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?R({routes:n._loadedRoutes,injector:n._loadedInjector}):dP(t,n,r,this.urlSerializer).pipe(ge(i=>i?this.configLoader.loadChildren(t,n).pipe(ve(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):pP(n))):R({routes:[],injector:t})}};function DP(e){e.sort((t,n)=>t.value.outlet===L?-1:n.value.outlet===L?1:t.value.outlet.localeCompare(n.value.outlet))}function TP(e){let t=e.value.routeConfig;return t&&t.path===""}function VI(e){let t=[],n=new Set;for(let r of e){if(!TP(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=VI(r.children);t.push(new ct(r.value,i))}return t.filter(r=>!n.has(r))}function SP(e){return e.data||{}}function MP(e){return e.resolve||{}}function AP(e,t,n,r,i,o){return ge(s=>CP(e,t,n,r,s.extractedUrl,i,o).pipe(P(({state:a,tree:c})=>k(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function NP(e,t){return ge(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return R(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of jI(c))s.add(l);let a=0;return se(s).pipe(bn(c=>o.has(c)?xP(c,r,e,t):(c.data=Xf(c,c.parent,e).resolve,R(void 0))),ve(()=>a++),ai(1),ge(c=>a===s.size?R(n):nt))})}function jI(e){let t=e.children.map(n=>jI(n)).flat();return[e,...t]}function xP(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!xI(i)&&(o[ps]=i.title),RP(o,e,t,r).pipe(P(s=>(e._resolvedData=s,e.data=Xf(e,e.parent,n).resolve,null)))}function RP(e,t,n,r){let i=Tf(e);if(i.length===0)return R({});let o={};return se(i).pipe(ge(s=>PP(e[s],t,n,r).pipe(Vt(),ve(a=>{o[s]=a}))),ai(1),dd(o),In(s=>FI(s)?nt:oi(s)))}function PP(e,t,n,r){let i=ms(t)??r,o=zi(e,i),s=o.resolve?o.resolve(t,n):sn(i,()=>o(t,n));return Ln(s)}function Ef(e){return rt(t=>{let n=e(t);return n?se(n).pipe(P(()=>t)):R(t)})}var UI=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===L);return r}getResolvedTitleForRoute(n){return n.data[ps]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(OP),providedIn:"root"})}}return e})(),OP=(()=>{class e extends UI{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(C(lI))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),op=new T("",{providedIn:"root",factory:()=>({})}),sp=new T(""),kP=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=v(ef)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return R(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Ln(n.loadComponent()).pipe(P(BI),ve(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),En(()=>{this.componentLoaders.delete(n)})),i=new ri(r,()=>new Me).pipe(ni());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return R({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=FP(r,this.compiler,n,this.onLoadEndListener).pipe(En(()=>{this.childrenLoaders.delete(r)})),s=new ri(o,()=>new Me).pipe(ni());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function FP(e,t,n,r){return Ln(e.loadChildren()).pipe(P(BI),ge(i=>i instanceof Vo||Array.isArray(i)?R(i):se(t.compileModuleAsync(i))),P(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(sp,[],{optional:!0,self:!0}).flat()),{routes:s.map(rp),injector:o}}))}function LP(e){return e&&typeof e=="object"&&"default"in e}function BI(e){return LP(e)?e.default:e}var ap=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(VP),providedIn:"root"})}}return e})(),VP=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),jP=new T("");var UP=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=v(kP),this.environmentInjector=v(Ke),this.urlSerializer=v(Jf),this.rootContexts=v(yl),this.location=v(zo),this.inputBindingEnabled=v(np,{optional:!0})!==null,this.titleStrategy=v(UI),this.options=v(op,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=v(ap),this.createViewTransition=v(jP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let n=i=>this.events.next(new kf(i)),r=i=>this.events.next(new Ff(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(k(_(_({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ae({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:is,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(je(o=>o.id!==0),P(o=>k(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),rt(o=>{let s=!1,a=!1;return R(o).pipe(rt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",lt.SupersededByNewNavigation),nt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?k(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Dr(c.id,this.urlSerializer.serialize(c.rawUrl),d,Nf.IgnoredSameUrlNavigation)),c.resolve(null),nt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(rt(d=>{let h=this.transitions?.getValue();return this.events.next(new as(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?nt:Promise.resolve(d)}),AP(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=k(_({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new hl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:m,extras:g}=c,w=new as(d,this.urlSerializer.serialize(h),p,m);this.events.next(w);let D=AI(this.rootComponentType).snapshot;return this.currentTransition=o=k(_({},c),{targetSnapshot:D,urlAfterRedirects:h,extras:k(_({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,R(o)}else{let d="";return this.events.next(new Dr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Nf.IgnoredByUrlHandlingStrategy)),c.resolve(null),nt}}),ve(c=>{let l=new xf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),P(c=>(this.currentTransition=o=k(_({},c),{guards:qR(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),rP(this.environmentInjector,c=>this.events.next(c)),ve(c=>{if(o.guardsResult=c.guardsResult,$i(c.guardsResult))throw PI(this.urlSerializer,c.guardsResult);let l=new Rf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),je(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",lt.GuardRejected),!1)),Ef(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(ve(l=>{let u=new Pf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),rt(l=>{let u=!1;return R(l).pipe(NP(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",lt.NoDataFromResolver)}}))}),ve(l=>{let u=new Of(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Ef(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ve(h=>{u.component=h}),P(()=>{})));for(let h of u.children)d.push(...l(h));return d};return si(l(c.targetSnapshot.root)).pipe(Cn(null),St(1))}),Ef(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?se(u).pipe(P(()=>o)):R(o)}),P(c=>{let l=jR(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=k(_({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ve(()=>{this.events.next(new ls)}),GR(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),St(1),ve({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Er(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Do(this.transitionAbortSubject.pipe(ve(c=>{throw c}))),En(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",lt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),In(c=>{if(a=!0,kI(c))this.events.next(new Fn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),$R(c)?this.events.next(new us(c.url)):o.resolve(!1);else{this.events.next(new cs(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return nt}))}))}cancelNavigationTransition(n,r,i){let o=new Fn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function BP(e){return e!==is}var $P=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(HP),providedIn:"root"})}}return e})(),Zf=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},HP=(()=>{class e extends Zf{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Di(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$I=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>v(WP),providedIn:"root"})}}return e})(),WP=(()=>{class e extends $I{constructor(){super(...arguments),this.location=v(zo),this.urlSerializer=v(Jf),this.options=v(op,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=v(ap),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new kn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=AI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof as)this.stateMemento=this.createStateMemento();else if(n instanceof Dr)this.rawUrlTree=r.initialUrl;else if(n instanceof hl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof ls?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Fn&&(n.code===lt.GuardRejected||n.code===lt.NoDataFromResolver)?this.restoreHistory(r):n instanceof cs?this.restoreHistory(r,!0):n instanceof Er&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=_(_({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=_(_({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Di(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ns=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ns||{});function zP(e,t){e.events.pipe(je(n=>n instanceof Er||n instanceof Fn||n instanceof cs||n instanceof Dr),P(n=>n instanceof Er||n instanceof Dr?ns.COMPLETE:(n instanceof Fn?n.code===lt.Redirect||n.code===lt.SupersededByNewNavigation:!1)?ns.REDIRECTING:ns.FAILED),je(n=>n!==ns.REDIRECTING),St(1)).subscribe(()=>{t()})}function GP(e){throw e}var qP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vn=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=v(Bc),this.stateManager=v($I),this.options=v(op,{optional:!0})||{},this.pendingTasks=v(gr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=v(UP),this.urlSerializer=v(Jf),this.location=v(zo),this.urlHandlingStrategy=v(ap),this._events=new Me,this.errorHandler=this.options.errorHandler||GP,this.navigated=!1,this.routeReuseStrategy=v($P),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=v(sp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!v(np,{optional:!0}),this.eventsSubscription=new ue,this.isNgZoneEnabled=v(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Fn&&r.code!==lt.Redirect&&r.code!==lt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Er)this.navigated=!0;else if(r instanceof us){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||BP(i.source)};this.scheduleNavigation(s,is,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}QP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),is,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(rp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=DI(h)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return TI(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=$i(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,is,null,r)}navigate(n,r={skipLocationChange:!1}){return KP(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},qP):r===!1?i=_({},YP):i=r,$i(n))return uI(this.currentUrlTree,n,i);let o=this.parseUrl(n);return uI(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return zP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function KP(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new S(4008,!1)}function QP(e){return!(e instanceof ls)&&!(e instanceof us)}var ZP=new T("");function HI(e,...t){return bi([{provide:sp,multi:!0,useValue:e},[],{provide:Hi,useFactory:JP,deps:[Vn]},{provide:$c,multi:!0,useFactory:eO},t.map(n=>n.\u0275providers)])}function JP(e){return e.routerState.root}function XP(e,t){return{\u0275kind:e,\u0275providers:t}}function eO(){let e=v(Ti);return t=>{let n=e.get(Ri);if(t!==n.components[0])return;let r=e.get(Vn),i=e.get(tO);e.get(nO)===1&&r.initialNavigation(),e.get(rO,null,j.Optional)?.setUpPreloading(),e.get(ZP,null,j.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tO=new T("",{factory:()=>new Me}),nO=new T("",{providedIn:"root",factory:()=>1});var rO=new T("");function WI(){return XP(6,[{provide:Oi,useClass:$w}])}var cp;try{cp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{cp=!1}var ys=(()=>{class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Hw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||cp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||e)(C(Wt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _s;function iO(){if(_s==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_s=!0}))}finally{_s=_s||!1}return _s}function lp(e){return iO()?e:!!e.capture}function GI(e){return e.composedPath?e.composedPath()[0]:e.target}function qI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function up(e){return Array.isArray(e)?e:[e]}function dp(e){return e instanceof _t?e.nativeElement:e}var KI=new Set,Tr,oO=(()=>{class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):aO}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&sO(n,this._nonce),this._matchMedia(n)}static{this.\u0275fac=function(r){return new(r||e)(C(ys),C($o,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function sO(e,t){if(!KI.has(e))try{Tr||(Tr=document.createElement("style"),t&&Tr.setAttribute("nonce",t),Tr.setAttribute("type","text/css"),document.head.appendChild(Tr)),Tr.sheet&&(Tr.sheet.insertRule(`@media ${e} {body{ }}`,0),KI.add(e))}catch(n){console.error(n)}}function aO(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var ZI=(()=>{class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new Me}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return QI(up(n)).some(i=>this._registerQuery(i).mql.matches)}observe(n){let i=QI(up(n)).map(s=>this._registerQuery(s).observable),o=si(i);return o=wn(o.pipe(St(1)),o.pipe(pd(1),ud(0))),o.pipe(P(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),o={observable:new q(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Eo(r),P(({matches:s})=>({query:n,matches:s})),Do(this._destroySubject)),mql:r};return this._queries.set(n,o),o}static{this.\u0275fac=function(r){return new(r||e)(C(oO),C(re))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function QI(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function eb(e){return e.buttons===0||e.detail===0}function tb(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Sr=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Sr||{}),JI="cdk-high-contrast-black-on-white",XI="cdk-high-contrast-white-on-black",hp="cdk-high-contrast-active",nb=(()=>{class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=v(ZI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Sr.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(n):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Sr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Sr.BLACK_ON_WHITE}return Sr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(hp,JI,XI),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Sr.BLACK_ON_WHITE?n.add(hp,JI):r===Sr.WHITE_ON_BLACK&&n.add(hp,XI)}}static{this.\u0275fac=function(r){return new(r||e)(C(ys),C(De))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var fp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({})}}return e})();function lO(){return!0}var uO=new T("mat-sanity-checks",{providedIn:"root",factory:lO}),gp=(()=>{class e{constructor(n,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return qI()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}static{this.\u0275fac=function(r){return new(r||e)(C(nb),C(uO,8),C(De))}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({imports:[fp,fp]})}}return e})();var wt=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(wt||{}),pp=class{constructor(t,n,r,i=!1){this._renderer=t,this.element=n,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=wt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},rb=lp({passive:!0,capture:!0}),mp=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=GI(t);n&&this._events.get(t.type)?.forEach((r,i)=>{(i===n||i.contains(n))&&r.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,r,i){let o=this._events.get(n);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(n,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,rb)})}removeHandler(t,n,r){let i=this._events.get(t);if(!i)return;let o=i.get(n);o&&(o.delete(r),o.size===0&&i.delete(n),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,rb)))}},ib={enterDuration:225,exitDuration:150},dO=800,ob=lp({passive:!0,capture:!0}),sb=["mousedown","touchstart"],ab=["mouseup","mouseleave","touchend","touchcancel"],cb=class e{static{this._eventManager=new mp}constructor(t,n,r,i){this._target=t,this._ngZone=n,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=dp(r))}fadeInRipple(t,n,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=_(_({},ib),r.animation);r.centered&&(t=i.left+i.width/2,n=i.top+i.height/2);let s=r.radius||hO(t,n,i),a=t-i.left,c=n-i.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||i.width===0&&i.height===0,g=new pp(this,u,r,m);u.style.transform="scale3d(1, 1, 1)",g.state=wt.FADING_IN,r.persistent||(this._mostRecentTransientRipple=g);let w=null;return!m&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let D=()=>this._finishRippleTransition(g),oe=()=>this._destroyRipple(g);u.addEventListener("transitionend",D),u.addEventListener("transitioncancel",oe),w={onTransitionEnd:D,onTransitionCancel:oe}}),this._activeRipples.set(g,w),(m||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(t){if(t.state===wt.FADING_OUT||t.state===wt.HIDDEN)return;let n=t.element,r=_(_({},ib),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=wt.FADING_OUT,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=dp(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,sb.forEach(r=>{e._eventManager.addHandler(this._ngZone,r,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ab.forEach(n=>{this._triggerElement.addEventListener(n,this,ob)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===wt.FADING_IN?this._startFadeOutTransition(t):t.state===wt.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=wt.VISIBLE,!r&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=wt.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=eb(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+dO;!this._target.rippleDisabled&&!n&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!tb(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let r=0;r<n.length;r++)this.fadeInRipple(n[r].clientX,n[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===wt.VISIBLE||t.config.terminateOnPointerUp&&t.state===wt.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(sb.forEach(n=>e._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(ab.forEach(n=>t.removeEventListener(n,this,ob)),this._pointerUpEventsRegistered=!1))}};function hO(e,t,n){let r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var fO=["*"];var pO=new T("MAT_CARD_CONFIG"),lb=(()=>{class e{constructor(n){this.appearance=n?.appearance||"raised"}static{this.\u0275fac=function(r){return new(r||e)(A(pO,8))}}static{this.\u0275cmp=Ne({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){r&2&&un("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[xe],ngContentSelectors:fO,decls:1,vars:0,template:function(r,i){r&1&&(Jh(),Xh(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return e})();var ub=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return e})();var db=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}}return e})();var hb=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({imports:[gp,at,gp]})}}return e})();var Ze=(()=>{class e{constructor(){let n=localStorage.getItem("currentLoggedUser");if(n)try{this.currentLoggedUser=JSON.parse(n)}catch{this.currentLoggedUser=void 0}}setLoggedUser(n){this.currentLoggedUser=n,n?localStorage.setItem("currentLoggedUser",JSON.stringify(n)):localStorage.removeItem("currentLoggedUser")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var fb=()=>{};var yp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw Mr(t)},Mr=function(e){return new Error("Firebase Database ("+yp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var gb=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},gO=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Il={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|l>>6,p=l&63;c||(p=64,s||(h=64)),r.push(n[u],n[d],n[h],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):gO(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new vp;let h=o<<2|a>>4;if(r.push(h),l!==64){let p=a<<4&240|l>>2;if(r.push(p),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},vp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ip=function(e){let t=gb(e);return Il.encodeByteArray(t,!0)},ws=function(e){return Ip(e).replace(/\./g,"")},qi=function(e){try{return Il.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _b(e){return yb(void 0,e)}function yb(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!_O(n)||(e[n]=yb(e[n],t[n]));return e}function _O(e){return e!=="__proto__"}function yO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vO=()=>yO().__FIREBASE_DEFAULTS__,wO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},IO=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&qi(e[1]);return t&&JSON.parse(t)},bp=()=>{try{return fb()||vO()||wO()||IO()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Cp=e=>bp()?.emulatorHosts?.[e],vb=e=>{let t=Cp(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ep=()=>bp()?.config,Dp=e=>bp()?.[`_${e}`];var fn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function jn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function bl(e){return f(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function wb(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=_({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ws(JSON.stringify(n)),ws(JSON.stringify(s)),""].join(".")}var vs={};function bO(){let e={prod:[],emulator:[]};for(let t of Object.keys(vs))vs[t]?e.emulator.push(t):e.prod.push(t);return e}function CO(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var pb=!1;function Cl(e,t){if(typeof window>"u"||typeof document>"u"||!jn(window.location.host)||vs[e]===t||vs[e]||pb)return;vs[e]=t;function n(h){return`__firebase__banner__${h}`}let r="__firebase__banner",o=bO().prod.length>0;function s(){let h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){let h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{pb=!0,s()},h}function u(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){let h=CO(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),w=document.getElementById(g)||document.createElement("a"),D=n("preprendIcon"),oe=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){let $=h.element;a($),u(w,g);let Se=l();c(oe,D),$.append(oe,m,w,Se),document.body.appendChild($)}o?(m.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Is(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function Ib(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function El(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Dl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bb(){let e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Kt(){return yp.NODE_CLIENT===!0||yp.NODE_ADMIN===!0}function Tl(){try{return typeof indexedDB=="object"}catch{return!1}}function Sl(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function Cb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var EO="FirebaseError",We=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=EO,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ut.prototype.create)}},ut=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?DO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new We(i,a,r)}};function DO(e,t){return e.replace(TO,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var TO=/\{\$([^}]+)}/g;function Yi(e){return JSON.parse(e)}function me(e){return JSON.stringify(e)}var Eb=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Yi(qi(o[0])||""),n=Yi(qi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var Db=function(e){let t=Eb(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Tb=function(e){let t=Eb(e).claims;return typeof t=="object"&&t.admin===!0};function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ar(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function bs(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Cs(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function It(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(mb(o)&&mb(s)){if(!It(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function mb(e){return e!==null&&typeof e=="object"}function Nr(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ki(e){let t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Qi(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var wl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function Sb(e,t){let n=new wp(e,t);return n.subscribe.bind(n)}var wp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SO(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=_p),i.error===void 0&&(i.error=_p),i.complete===void 0&&(i.complete=_p);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function SO(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function _p(){}function Es(e,t){return`${e} failed: ${t} argument `}var Mb=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,y(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Ds=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var MO=1e3,AO=2,NO=4*60*60*1e3,xO=.5;function Tp(e,t=MO,n=AO){let r=t*Math.pow(n,e),i=Math.round(xO*r*(Math.random()-.5)*2);return Math.min(NO,r+i)}function _e(e){return e&&e._delegate?e._delegate:e}var Te=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var xr="[DEFAULT]";var Ml=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new fn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(PO(t))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=xr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return f(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=xr){return this.instances.has(t)}getOptions(t=xr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=xr){return this.component?this.component.multipleInstances?t:xr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RO(e){return e===xr?void 0:e}function PO(e){return e.instantiationMode==="EAGER"}var Ts=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Ml(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var OO=[],X=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(X||{}),kO={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},FO=X.INFO,LO={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},VO=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=LO[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Qt=class{constructor(t){this.name=t,this._logLevel=FO,this._logHandler=VO,this._userLogHandler=null,OO.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in X))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?kO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...t),this._logHandler(this,X.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...t),this._logHandler(this,X.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,X.INFO,...t),this._logHandler(this,X.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,X.WARN,...t),this._logHandler(this,X.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...t),this._logHandler(this,X.ERROR,...t)}};var jO=(e,t)=>t.some(n=>e instanceof n),Ab,Nb;function UO(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BO(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xb=new WeakMap,Mp=new WeakMap,Rb=new WeakMap,Sp=new WeakMap,Np=new WeakMap;function $O(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Zt(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&xb.set(n,e)}).catch(()=>{}),Np.set(t,e),t}function HO(e){if(Mp.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Mp.set(e,t)}var Ap={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Mp.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Rb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Pb(e){Ap=e(Ap)}function WO(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(Al(this),t,...n);return Rb.set(r,t.sort?t.sort():[t]),Zt(r)}:BO().includes(e)?function(...t){return e.apply(Al(this),t),Zt(xb.get(this))}:function(...t){return Zt(e.apply(Al(this),t))}}function zO(e){return typeof e=="function"?WO(e):(e instanceof IDBTransaction&&HO(e),jO(e,UO())?new Proxy(e,Ap):e)}function Zt(e){if(e instanceof IDBRequest)return $O(e);if(Sp.has(e))return Sp.get(e);let t=zO(e);return t!==e&&(Sp.set(e,t),Np.set(t,e)),t}var Al=e=>Np.get(e);function Nl(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=Zt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Zt(s.result),c.oldVersion,c.newVersion,Zt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var GO=["get","getKey","getAll","getAllKeys","count"],qO=["put","add","delete","clear"],xp=new Map;function Ob(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xp.get(t))return xp.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=qO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GO.includes(n)))return;let o=function(s,...a){return f(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return xp.set(t,o),o}Pb(e=>k(_({},e),{get:(t,n,r)=>Ob(t,n)||e.get(t,n,r),has:(t,n)=>!!Ob(t,n)||e.has(t,n)}));var Pp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function YO(e){return e.getComponent()?.type==="VERSION"}var Op="@firebase/app",kb="0.14.1";var pn=new Qt("@firebase/app"),KO="@firebase/app-compat",QO="@firebase/analytics-compat",ZO="@firebase/analytics",JO="@firebase/app-check-compat",XO="@firebase/app-check",ek="@firebase/auth",tk="@firebase/auth-compat",nk="@firebase/database",rk="@firebase/data-connect",ik="@firebase/database-compat",ok="@firebase/functions",sk="@firebase/functions-compat",ak="@firebase/installations",ck="@firebase/installations-compat",lk="@firebase/messaging",uk="@firebase/messaging-compat",dk="@firebase/performance",hk="@firebase/performance-compat",fk="@firebase/remote-config",pk="@firebase/remote-config-compat",mk="@firebase/storage",gk="@firebase/storage-compat",_k="@firebase/firestore",yk="@firebase/ai",vk="@firebase/firestore-compat",wk="firebase",Ik="12.1.0";var kp="[DEFAULT]",bk={[Op]:"fire-core",[KO]:"fire-core-compat",[ZO]:"fire-analytics",[QO]:"fire-analytics-compat",[XO]:"fire-app-check",[JO]:"fire-app-check-compat",[ek]:"fire-auth",[tk]:"fire-auth-compat",[nk]:"fire-rtdb",[rk]:"fire-data-connect",[ik]:"fire-rtdb-compat",[ok]:"fire-fn",[sk]:"fire-fn-compat",[ak]:"fire-iid",[ck]:"fire-iid-compat",[lk]:"fire-fcm",[uk]:"fire-fcm-compat",[dk]:"fire-perf",[hk]:"fire-perf-compat",[fk]:"fire-rc",[pk]:"fire-rc-compat",[mk]:"fire-gcs",[gk]:"fire-gcs-compat",[_k]:"fire-fst",[vk]:"fire-fst-compat",[yk]:"fire-vertex","fire-js":"fire-js",[wk]:"fire-js-all"};var xl=new Map,Ck=new Map,Fp=new Map;function Fb(e,t){try{e.container.addComponent(t)}catch(n){pn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Je(e){let t=e.name;if(Fp.has(t))return pn.debug(`There were multiple attempts to register component ${t}.`),!1;Fp.set(t,e);for(let n of xl.values())Fb(n,e);for(let n of Ck.values())Fb(n,e);return!0}function kt(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function dt(e){return e==null?!1:e.settings!==void 0}var Ek={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new ut("app","Firebase",Ek);var Lp=class{constructor(t,n,r){this._isDeleted=!1,this._options=_({},t),this._config=_({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Te("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}};var Bn=Ik;function Ms(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=_({name:kp,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Un.create("bad-app-name",{appName:String(i)});if(n||(n=Ep()),!n)throw Un.create("no-options");let o=xl.get(i);if(o){if(It(n,o.options)&&It(r,o.config))return o;throw Un.create("duplicate-app",{appName:i})}let s=new Ts(i);for(let c of Fp.values())s.addComponent(c);let a=new Lp(n,r,s);return xl.set(i,a),a}function Rr(e=kp){let t=xl.get(e);if(!t&&e===kp&&Ep())return Ms();if(!t)throw Un.create("no-app",{appName:e});return t}function Pe(e,t,n){let r=bk[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pn.warn(s.join(" "));return}Je(new Te(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var Dk="firebase-heartbeat-database",Tk=1,Ss="firebase-heartbeat-store",Rp=null;function Ub(){return Rp||(Rp=Nl(Dk,Tk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ss)}catch(n){console.warn(n)}}}}).catch(e=>{throw Un.create("idb-open",{originalErrorMessage:e.message})})),Rp}function Sk(e){return f(this,null,function*(){try{let n=(yield Ub()).transaction(Ss),r=yield n.objectStore(Ss).get(Bb(e));return yield n.done,r}catch(t){if(t instanceof We)pn.warn(t.message);else{let n=Un.create("idb-get",{originalErrorMessage:t?.message});pn.warn(n.message)}}})}function Lb(e,t){return f(this,null,function*(){try{let r=(yield Ub()).transaction(Ss,"readwrite");yield r.objectStore(Ss).put(t,Bb(e)),yield r.done}catch(n){if(n instanceof We)pn.warn(n.message);else{let r=Un.create("idb-set",{originalErrorMessage:n?.message});pn.warn(r.message)}}})}function Bb(e){return`${e.name}!${e.options.appId}`}var Mk=1024,Ak=30,Vp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new jp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Ak){let i=xk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){pn.warn(t)}})}getHeartbeatsHeader(){return f(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Vb(),{heartbeatsToSend:n,unsentEntries:r}=Nk(this._heartbeatsCache.heartbeats),i=ws(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return pn.warn(t),""}})}};function Vb(){return new Date().toISOString().substring(0,10)}function Nk(e,t=Mk){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),jb(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jb(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var jp=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return Tl()?Sl().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Sk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Lb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Lb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function jb(e){return ws(JSON.stringify({version:2,heartbeats:e})).length}function xk(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Rk(e){Je(new Te("platform-logger",t=>new Pp(t),"PRIVATE")),Je(new Te("heartbeat",t=>new Vp(t),"PRIVATE")),Pe(Op,kb,e),Pe(Op,kb,"esm2020"),Pe("fire-js","")}Rk("");var Pk="firebase",Ok="12.1.0";Pe(Pk,Ok,"app");var Wb="@firebase/installations",Hp="0.6.19";var zb=1e4,Gb=`w:${Hp}`,qb="FIS_v2",kk="https://firebaseinstallations.googleapis.com/v1",Fk=60*60*1e3,Lk="installations",Vk="Installations";var jk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Or=new ut(Lk,Vk,jk);function Yb(e){return e instanceof We&&e.code.includes("request-failed")}function Kb({projectId:e}){return`${kk}/projects/${e}/installations`}function Qb(e){return{token:e.token,requestStatus:2,expiresIn:Bk(e.expiresIn),creationTime:Date.now()}}function Zb(e,t){return f(this,null,function*(){let r=(yield t.json()).error;return Or.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Jb({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Uk(e,{refreshToken:t}){let n=Jb(e);return n.append("Authorization",$k(t)),n}function Xb(e){return f(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function Bk(e){return Number(e.replace("s","000"))}function $k(e){return`${qb} ${e}`}function Hk(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=Kb(e),s=Jb(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={fid:n,authVersion:qb,appId:e.appId,sdkVersion:Gb},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield Xb(()=>fetch(o,l));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Qb(d.authToken)}}else throw yield Zb("Create Installation",u)})}function eC(e){return new Promise(t=>{setTimeout(t,e)})}function Wk(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var zk=/^[cdef][\w-]{21}$/,$p="";function Gk(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=qk(e);return zk.test(n)?n:$p}catch{return $p}}function qk(e){return Wk(e).substr(0,22)}function Pl(e){return`${e.appName}!${e.appId}`}var tC=new Map;function nC(e,t){let n=Pl(e);rC(n,t),Yk(n,t)}function rC(e,t){let n=tC.get(e);if(n)for(let r of n)r(t)}function Yk(e,t){let n=Kk();n&&n.postMessage({key:e,fid:t}),Qk()}var Pr=null;function Kk(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=e=>{rC(e.data.key,e.data.fid)}),Pr}function Qk(){tC.size===0&&Pr&&(Pr.close(),Pr=null)}var Zk="firebase-installations-database",Jk=1,kr="firebase-installations-store",Up=null;function Wp(){return Up||(Up=Nl(Zk,Jk,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(kr)}}})),Up}function Rl(e,t){return f(this,null,function*(){let n=Pl(e),i=(yield Wp()).transaction(kr,"readwrite"),o=i.objectStore(kr),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&nC(e,t.fid),t})}function iC(e){return f(this,null,function*(){let t=Pl(e),r=(yield Wp()).transaction(kr,"readwrite");yield r.objectStore(kr).delete(t),yield r.done})}function Ol(e,t){return f(this,null,function*(){let n=Pl(e),i=(yield Wp()).transaction(kr,"readwrite"),o=i.objectStore(kr),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&nC(e,a.fid),a})}function zp(e){return f(this,null,function*(){let t,n=yield Ol(e.appConfig,r=>{let i=Xk(r),o=e1(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===$p?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function Xk(e){let t=e||{fid:Gk(),registrationStatus:0};return oC(t)}function e1(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Or.create("app-offline"));return{installationEntry:t,registrationPromise:i}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=t1(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:n1(e)}:{installationEntry:t}}function t1(e,t){return f(this,null,function*(){try{let n=yield Hk(e,t);return Rl(e.appConfig,n)}catch(n){throw Yb(n)&&n.customData.serverCode===409?yield iC(e.appConfig):yield Rl(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function n1(e){return f(this,null,function*(){let t=yield $b(e.appConfig);for(;t.registrationStatus===1;)yield eC(100),t=yield $b(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield zp(e);return r||n}return t})}function $b(e){return Ol(e,t=>{if(!t)throw Or.create("installation-not-found");return oC(t)})}function oC(e){return r1(e)?{fid:e.fid,registrationStatus:0}:e}function r1(e){return e.registrationStatus===1&&e.registrationTime+zb<Date.now()}function i1(r,i){return f(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=o1(e,n),s=Uk(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let c={installation:{sdkVersion:Gb,appId:e.appId}},l={method:"POST",headers:s,body:JSON.stringify(c)},u=yield Xb(()=>fetch(o,l));if(u.ok){let d=yield u.json();return Qb(d)}else throw yield Zb("Generate Auth Token",u)})}function o1(e,{fid:t}){return`${Kb(e)}/${t}/authTokens:generate`}function Gp(e,t=!1){return f(this,null,function*(){let n,r=yield Ol(e.appConfig,o=>{if(!sC(o))throw Or.create("not-registered");let s=o.authToken;if(!t&&c1(s))return o;if(s.requestStatus===1)return n=s1(e,t),o;{if(!navigator.onLine)throw Or.create("app-offline");let a=u1(o);return n=a1(e,a),a}});return n?yield n:r.authToken})}function s1(e,t){return f(this,null,function*(){let n=yield Hb(e.appConfig);for(;n.authToken.requestStatus===1;)yield eC(100),n=yield Hb(e.appConfig);let r=n.authToken;return r.requestStatus===0?Gp(e,t):r})}function Hb(e){return Ol(e,t=>{if(!sC(t))throw Or.create("not-registered");let n=t.authToken;return d1(n)?k(_({},t),{authToken:{requestStatus:0}}):t})}function a1(e,t){return f(this,null,function*(){try{let n=yield i1(e,t),r=k(_({},t),{authToken:n});return yield Rl(e.appConfig,r),n}catch(n){if(Yb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield iC(e.appConfig);else{let r=k(_({},t),{authToken:{requestStatus:0}});yield Rl(e.appConfig,r)}throw n}})}function sC(e){return e!==void 0&&e.registrationStatus===2}function c1(e){return e.requestStatus===2&&!l1(e)}function l1(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Fk}function u1(e){let t={requestStatus:1,requestTime:Date.now()};return k(_({},e),{authToken:t})}function d1(e){return e.requestStatus===1&&e.requestTime+zb<Date.now()}function h1(e){return f(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:r}=yield zp(t);return r?r.catch(console.error):Gp(t).catch(console.error),n.fid})}function f1(e,t=!1){return f(this,null,function*(){let n=e;return yield p1(n),(yield Gp(n,t)).token})}function p1(e){return f(this,null,function*(){let{registrationPromise:t}=yield zp(e);t&&(yield t)})}function m1(e){if(!e||!e.options)throw Bp("App Configuration");if(!e.name)throw Bp("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw Bp(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Bp(e){return Or.create("missing-app-config-values",{valueName:e})}var aC="installations",g1="installations-internal",_1=e=>{let t=e.getProvider("app").getImmediate(),n=m1(t),r=kt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},y1=e=>{let t=e.getProvider("app").getImmediate(),n=kt(t,aC).getImmediate();return{getId:()=>h1(n),getToken:i=>f1(n,i)}};function v1(){Je(new Te(aC,_1,"PUBLIC")),Je(new Te(g1,y1,"PRIVATE"))}v1();Pe(Wb,Hp);Pe(Wb,Hp,"esm2020");var kl="analytics",w1="firebase_id",I1="origin",b1=60*1e3,C1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xp="https://www.googletagmanager.com/gtag/js";var Xe=new Qt("@firebase/analytics");var E1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ht=new ut("analytics","Analytics",E1);function D1(e){if(!e.startsWith(Xp)){let t=ht.create("invalid-gtag-resource",{gtagURL:e});return Xe.warn(t.message),""}return e}function pC(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function T1(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function S1(e,t){let n=T1("firebase-js-sdk-policy",{createScriptURL:D1}),r=document.createElement("script"),i=`${Xp}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function M1(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function A1(e,t,n,r,i,o){return f(this,null,function*(){let s=r[i];try{if(s)yield t[s];else{let c=(yield pC(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){Xe.error(a)}e("config",i,o)})}function N1(e,t,n,r,i){return f(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield pC(n);for(let c of s){let l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){Xe.error(o)}})}function x1(e,t,n,r){function i(o,...s){return f(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield N1(e,t,n,a,c)}else if(o==="config"){let[a,c]=s;yield A1(e,t,n,r,a,c)}else if(o==="consent"){let[a,c]=s;e("consent",a,c)}else if(o==="get"){let[a,c,l]=s;e("get",a,c,l)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){Xe.error(a)}})}return i}function R1(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=x1(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function P1(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(Xp)&&n.src.includes(e))return n;return null}var O1=30,k1=1e3,Yp=class{constructor(t={},n=k1){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},mC=new Yp;function F1(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function L1(e){return f(this,null,function*(){let{appId:t,apiKey:n}=e,r={method:"GET",headers:F1(n)},i=C1.replace("{app-id}",t),o=yield fetch(i,r);if(o.status!==200&&o.status!==304){let s="";try{let a=yield o.json();a.error?.message&&(s=a.error.message)}catch{}throw ht.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function V1(r){return f(this,arguments,function*(e,t=mC,n){let{appId:i,apiKey:o,measurementId:s}=e.options;if(!i)throw ht.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ht.create("no-api-key")}let a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Kp;return setTimeout(()=>f(this,null,function*(){c.abort()}),n!==void 0?n:b1),gC({appId:i,apiKey:o,measurementId:s},a,c,t)})}function gC(o,s,a){return f(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=mC){let{appId:c,measurementId:l}=e;try{yield j1(r,t)}catch(u){if(l)return Xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:l};throw u}try{let u=yield L1(e);return i.deleteThrottleMetadata(c),u}catch(u){let d=u;if(!U1(d)){if(i.deleteThrottleMetadata(c),l)return Xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw u}let h=Number(d?.customData?.httpStatus)===503?Tp(n,i.intervalMillis,O1):Tp(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(c,p),Xe.debug(`Calling attemptFetch again in ${h} millis`),gC(e,p,r,i)}})}function j1(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(ht.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function U1(e){if(!(e instanceof We)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var Kp=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var Qp;function B1(e,t,n,r,i){return f(this,null,function*(){if(i&&i.global){e("event",n,r);return}else{let o=yield t,s=k(_({},r),{send_to:o});e("event",n,s)}})}var Zp;function $1(e){Zp=e}function H1(e){Qp=e}function W1(){return f(this,null,function*(){if(Tl())try{yield Sl()}catch(e){return Xe.warn(ht.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Xe.warn(ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function z1(e,t,n,r,i,o,s){return f(this,null,function*(){let a=V1(e);a.then(h=>{n[h.measurementId]=h.appId,e.options.measurementId&&h.measurementId!==e.options.measurementId&&Xe.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Xe.error(h)),t.push(a);let c=W1().then(h=>{if(h)return r.getId()}),[l,u]=yield Promise.all([a,c]);P1(o)||S1(o,l.measurementId),Zp&&(i("consent","default",Zp),$1(void 0)),i("js",new Date);let d=s?.config??{};return d[I1]="firebase",d.update=!0,u!=null&&(d[w1]=u),i("config",l.measurementId,d),Qp&&(i("set",Qp),H1(void 0)),l.measurementId})}var Jp=class{constructor(t){this.app=t}_delete(){return delete As[this.app.options.appId],Promise.resolve()}},As={},cC=[],lC={},qp="dataLayer",G1="gtag",uC,_C,dC=!1;function q1(){let e=[];if(El()&&e.push("This is a browser extension environment."),Cb()||e.push("Cookies are not available."),e.length>0){let t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=ht.create("invalid-analytics-context",{errorInfo:t});Xe.warn(n.message)}}function Y1(e,t,n){q1();let r=e.options.appId;if(!r)throw ht.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ht.create("no-api-key");if(As[r]!=null)throw ht.create("already-exists",{id:r});if(!dC){M1(qp);let{wrappedGtag:o,gtagCore:s}=R1(As,cC,lC,qp,G1);_C=o,uC=s,dC=!0}return As[r]=z1(e,cC,lC,t,uC,qp,n),new Jp(e)}function yC(e=Rr()){e=_e(e);let t=kt(e,kl);return t.isInitialized()?t.getImmediate():K1(e)}function K1(e,t={}){let n=kt(e,kl);if(n.isInitialized()){let i=n.getImmediate();if(It(t,n.getOptions()))return i;throw ht.create("already-initialized")}return n.initialize({options:t})}function Q1(e,t,n,r){e=_e(e),B1(_C,As[e.app.options.appId],t,n,r).catch(i=>Xe.error(i))}var hC="@firebase/analytics",fC="0.10.18";function Z1(){Je(new Te(kl,(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return Y1(r,i,n)},"PUBLIC")),Je(new Te("analytics-internal",e,"PRIVATE")),Pe(hC,fC),Pe(hC,fC,"esm2020");function e(t){try{let n=t.getProvider(kl).getImmediate();return{logEvent:(r,i,o)=>Q1(n,r,i,o)}}catch(n){throw ht.create("interop-component-reg-failed",{reason:n})}}}Z1();function kC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FC=kC,LC=new ut("auth","Firebase",kC());var Bl=new Qt("@firebase/auth");function J1(e,...t){Bl.logLevel<=X.WARN&&Bl.warn(`Auth (${Bn}): ${e}`,...t)}function Ll(e,...t){Bl.logLevel<=X.ERROR&&Bl.error(`Auth (${Bn}): ${e}`,...t)}function Xt(e,...t){throw Cm(e,...t)}function Fr(e,...t){return Cm(e,...t)}function VC(e,t,n){let r=k(_({},FC()),{[t]:n});return new ut("auth","Firebase",r).create(t,{appName:e.name})}function Wn(e){return VC(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return LC.create(e,...t)}function N(e,t,...n){if(!e)throw Cm(t,...n)}function mn(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Ll(t),new Error(t)}function zn(e,t){e||mn(t)}function rm(){return typeof self<"u"&&self.location?.href||""}function X1(){return vC()==="http:"||vC()==="https:"}function vC(){return typeof self<"u"&&self.location?.protocol||null}function eF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X1()||El()||"connection"in navigator)?navigator.onLine:!0}function tF(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Lr=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,zn(n>t,"Short delay should be less than long delay!"),this.isMobile=Is()||Dl()}get(){return eF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Em(e,t){zn(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var $l=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iF=new Lr(3e4,6e4);function jr(e,t){return e.tenantId&&!t.tenantId?k(_({},t),{tenantId:e.tenantId}):t}function Gn(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){return jC(e,i,()=>f(this,null,function*(){let l={},u={};r&&(t==="GET"?u=r:l={body:JSON.stringify(r)});let d=Nr(_({key:e.config.apiKey},u)).slice(1),h=yield e._getAdditionalHeaders();h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode);let p=_({method:t,headers:h},l);return Ib()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&jn(e.emulatorConfig.host)&&(p.credentials="include"),$l.fetch()(yield UC(e,e.config.apiHost,n,d),p)}))})}function jC(e,t,n){return f(this,null,function*(){e._canInitEmulator=!1;let r=_(_({},nF),t);try{let i=new im(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Fl(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(e,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Fl(e,"email-already-in-use",s);if(c==="USER_DISABLED")throw Fl(e,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw VC(e,u,l);Xt(e,u)}}catch(i){if(i instanceof We)throw i;Xt(e,"network-request-failed",{message:String(i)})}})}function Xl(o,s,a,c){return f(this,arguments,function*(e,t,n,r,i={}){let l=yield Gn(e,t,n,r,i);return"mfaPendingCredential"in l&&Xt(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function UC(e,t,n,r){return f(this,null,function*(){let i=`${t}${n}?${r}`,o=e,s=o.config.emulator?Em(e.config,i):`${e.config.apiScheme}://${i}`;return rF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function oF(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var im=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),iF.get())})}};function Fl(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Fr(e,t,r);return i.customData._tokenResponse=n,i}function wC(e){return e!==void 0&&e.enterprise!==void 0}var om=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return oF(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function sF(e,t){return f(this,null,function*(){return Gn(e,"GET","/v2/recaptchaConfig",jr(e,t))})}function aF(e,t){return f(this,null,function*(){return Gn(e,"POST","/v1/accounts:delete",t)})}function Hl(e,t){return f(this,null,function*(){return Gn(e,"POST","/v1/accounts:lookup",t)})}function xs(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function BC(e,t=!1){return f(this,null,function*(){let n=_e(e),r=yield n.getIdToken(t),i=Dm(r);N(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:xs(em(i.auth_time)),issuedAtTime:xs(em(i.iat)),expirationTime:xs(em(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function em(e){return Number(e)*1e3}function Dm(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Ll("JWT malformed, contained fewer than 3 sections"),null;try{let i=qi(n);return i?JSON.parse(i):(Ll("Failed to decode base64 JWT payload"),null)}catch(i){return Ll("Caught error parsing JWT payload as JSON",i?.toString()),null}}function IC(e){let t=Dm(e);return N(t,"internal-error"),N(typeof t.exp<"u","internal-error"),N(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Ps(e,t,n=!1){return f(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof We&&cF(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function cF({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var sm=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Os=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xs(this.lastLoginAt),this.creationTime=xs(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wl(e){return f(this,null,function*(){let t=e.auth,n=yield e.getIdToken(),r=yield Ps(e,Hl(t,{idToken:n}));N(r?.users.length,t,"internal-error");let i=r.users[0];e._notifyReloadListener(i);let o=i.providerUserInfo?.length?HC(i.providerUserInfo):[],s=lF(e.providerData,o),a=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!s?.length,l=a?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Os(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})}function $C(e){return f(this,null,function*(){let t=_e(e);yield Wl(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function lF(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function HC(e){return e.map(r=>{var i=r,{providerId:t}=i,n=ya(i,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function uF(e,t){return f(this,null,function*(){let n=yield jC(e,{},()=>f(this,null,function*(){let r=Nr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=yield UC(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return e.emulatorConfig&&jn(e.emulatorConfig.host)&&(c.credentials="include"),$l.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function dF(e,t){return f(this,null,function*(){return Gn(e,"POST","/v2/accounts:revokeToken",jr(e,t))})}var Rs=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){N(t.idToken,"internal-error"),N(typeof t.idToken<"u","internal-error"),N(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):IC(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){N(t.length!==0,"internal-error");let n=IC(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(N(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield uF(t,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e;return r&&(N(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(N(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(N(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return mn("not implemented")}};function $n(e,t){N(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var Hn=class e{constructor(o){var s=o,{uid:t,auth:n,stsTokenManager:r}=s,i=ya(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Os(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){return f(this,null,function*(){let n=yield Ps(this,this.stsTokenManager.getToken(this.auth,t));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return BC(this,t)}reload(){return $C(this)}_assign(t){this!==t&&(N(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>_({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(k(_({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return f(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield Wl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(dt(this.auth.app))return Promise.reject(Wn(this.auth));let t=yield this.getIdToken();return yield Ps(this,aF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return k(_({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>_({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:m,stsTokenManager:g}=n;N(d&&g,t,"internal-error");let w=Rs.fromJSON(this.name,g);N(typeof d=="string",t,"internal-error"),$n(r,t.name),$n(i,t.name),N(typeof h=="boolean",t,"internal-error"),N(typeof p=="boolean",t,"internal-error"),$n(o,t.name),$n(s,t.name),$n(a,t.name),$n(c,t.name),$n(l,t.name),$n(u,t.name);let D=new e({uid:d,auth:t,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:w,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(D.providerData=m.map(oe=>_({},oe))),c&&(D._redirectEventId=c),D}static _fromIdTokenResponse(t,n,r=!1){return f(this,null,function*(){let i=new Rs;i.updateFromServerResponse(n);let o=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield Wl(o),o})}static _fromGetAccountInfoResponse(t,n,r){return f(this,null,function*(){let i=n.users[0];N(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?HC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Rs;a.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Os(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var bC=new Map;function gn(e){zn(e instanceof Function,"Expected a class definition");let t=bC.get(e);return t?(zn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bC.set(e,t),t)}var hF=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),am=hF;function Vl(e,t,n){return`firebase:${e}:${t}:${n}`}var zl=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Vl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Vl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return f(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield Hl(this.auth,{idToken:t}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,t):null}return Hn._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return f(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new e(gn(am),t,r);let i=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||gn(am),s=Vl(r,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let h=yield Hl(t,{idToken:u}).catch(()=>{});if(!h)break;d=yield Hn._fromGetAccountInfoResponse(t,h,u)}else d=Hn._fromJSON(t,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new e(o,t,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new e(o,t,r))})}};function CC(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(WC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(KC(t))return"Blackberry";if(QC(t))return"Webos";if(zC(t))return"Safari";if((t.includes("chrome/")||GC(t))&&!t.includes("edge/"))return"Chrome";if(YC(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function WC(e=Ve()){return/firefox\//i.test(e)}function zC(e=Ve()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function GC(e=Ve()){return/crios\//i.test(e)}function qC(e=Ve()){return/iemobile/i.test(e)}function YC(e=Ve()){return/android/i.test(e)}function KC(e=Ve()){return/blackberry/i.test(e)}function QC(e=Ve()){return/webos/i.test(e)}function Tm(e=Ve()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fF(e=Ve()){return Tm(e)&&!!window.navigator?.standalone}function pF(){return bb()&&document.documentMode===10}function ZC(e=Ve()){return Tm(e)||YC(e)||QC(e)||KC(e)||/windows phone/i.test(e)||qC(e)}function JC(e,t=[]){let n;switch(e){case"Browser":n=CC(Ve());break;case"Worker":n=`${CC(Ve())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bn}/${r}`}var cm=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=o=>new Promise((s,a)=>{try{let c=t(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return f(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mF(n){return f(this,arguments,function*(e,t={}){return Gn(e,"GET","/v2/passwordPolicy",jr(e,t))})}var gF=6,lm=class{constructor(t){let n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var um=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gl(this),this.idTokenSubscription=new Gl(this),this.beforeStateQueue=new cm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=gn(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield zl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return f(this,null,function*(){try{let n=yield Hl(this,{idToken:t}),r=yield Hn._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return f(this,null,function*(){if(dt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(t);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return f(this,null,function*(){try{yield Wl(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=tF()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return f(this,null,function*(){if(dt(this.app))return Promise.reject(Wn(this));let n=t?_e(t):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return f(this,null,function*(){if(!this._deleted)return t&&N(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return dt(this.app)?Promise.reject(Wn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return dt(this.app)?Promise.reject(Wn(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(gn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let t=yield mF(this),n=new lm(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ut("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dF(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(t,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&gn(t)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=yield zl.create(this,[gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return f(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null})}_persistUserIfCurrent(t){return f(this,null,function*(){if(t===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(N(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=t.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(t){return f(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return f(this,null,function*(){if(dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&J1(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zi(e){return _e(e)}var Gl=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=Sb(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var eu={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _F(e){eu=e}function XC(e){return eu.loadJS(e)}function yF(){return eu.recaptchaEnterpriseScript}function vF(){return eu.gapiScript}function eE(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var dm=class{constructor(){this.enterprise=new hm}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}},hm=class{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}};var wF="recaptcha-enterprise",tE="NO_RECAPTCHA",fm=class{constructor(t){this.type=wF,this.auth=Zi(t)}verify(t="verify",n=!1){return f(this,null,function*(){function r(o){return f(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>f(this,null,function*(){sF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new om(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;wC(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:t}).then(l=>{s(l)}).catch(()=>{s(tE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&wC(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=yF();c.length!==0&&(c+=a),XC(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Ns(e,t,n,r=!1,i=!1){return f(this,null,function*(){let o=new fm(e),s;if(i)s=tE;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=_({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function EC(e,t,n,r,i){return f(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Ns(e,t,n,n==="getOobCode");return r(e,o)}else return r(e,t).catch(o=>f(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield Ns(e,t,n,n==="getOobCode");return r(e,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield Ns(e,t,n);return r(e,o).catch(s=>f(this,null,function*(){if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield Ns(e,t,n,!1,!0);return r(e,a)}return Promise.reject(s)}))}else{let o=yield Ns(e,t,n,!1,!0);return r(e,o)}else return Promise.reject(i+" provider is not supported.")})}function nE(e,t){let n=kt(e,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(It(o,t??{}))return i;Xt(i,"already-initialized")}return n.initialize({options:t})}function IF(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(gn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function rE(e,t,n){let r=Zi(e);N(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=iE(t),{host:s,port:a}=bF(t),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){N(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),N(It(l,r.config.emulator)&&It(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,jn(s)?(bl(`${o}//${s}${c}`),Cl("Auth",!0)):i||CF()}function iE(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bF(e){let t=iE(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:DC(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:DC(s)}}}function DC(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function CF(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var ks=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return mn("not implemented")}_getIdTokenResponse(t){return mn("not implemented")}_linkToIdToken(t,n){return mn("not implemented")}_getReauthenticationResolver(t){return mn("not implemented")}};function EF(e,t){return f(this,null,function*(){return Gn(e,"POST","/v1/accounts:signUp",t)})}function DF(e,t){return f(this,null,function*(){return Xl(e,"POST","/v1/accounts:signInWithPassword",jr(e,t))})}function TF(e,t){return f(this,null,function*(){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",jr(e,t))})}function SF(e,t){return f(this,null,function*(){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",jr(e,t))})}var Fs=class e extends ks{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new e(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EC(t,n,"signInWithPassword",DF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return TF(t,{email:this._email,oobCode:this._password});default:Xt(t,"internal-error")}})}_linkToIdToken(t,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EC(t,r,"signUpPassword",EF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SF(t,{idToken:n,email:this._email,oobCode:this._password});default:Xt(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function tm(e,t){return f(this,null,function*(){return Xl(e,"POST","/v1/accounts:signInWithIdp",jr(e,t))})}function MF(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AF(e){let t=Ki(Qi(e)).link,n=t?Ki(Qi(t)).deep_link_id:null,r=Ki(Qi(e)).deep_link_id;return(r?Ki(Qi(r)).link:null)||r||n||t||e}var ql=class e{constructor(t){let n=Ki(Qi(t)),r=n.apiKey??null,i=n.oobCode??null,o=MF(n.mode??null);N(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){let n=AF(t);try{return new e(n)}catch{return null}}};var oE=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return Fs._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ql.parseLink(r);return N(i,"argument-error"),Fs._fromEmailAndCode(n,i.code,i.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),Yl=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var pm=class extends Yl{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var Ls=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r,i=!1){return f(this,null,function*(){let o=yield Hn._fromIdTokenResponse(t,r,i),s=TC(r);return new e({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(t,n,r){return f(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=TC(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})})}};function TC(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var mm=class e extends We{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function sE(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mm._fromErrorAndOperation(e,o,t,r):o})}function NF(e,t,n=!1){return f(this,null,function*(){let r=yield Ps(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Ls._forOperation(e,"link",r)})}function xF(e,t,n=!1){return f(this,null,function*(){let{auth:r}=e;if(dt(r.app))return Promise.reject(Wn(r));let i="reauthenticate";try{let o=yield Ps(e,sE(r,i,t,e),n);N(o.idToken,r,"internal-error");let s=Dm(o.idToken);N(s,r,"internal-error");let{sub:a}=s;return N(e.uid===a,r,"user-mismatch"),Ls._forOperation(e,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Xt(r,"user-mismatch"),o}})}function aE(e,t,n=!1){return f(this,null,function*(){if(dt(e.app))return Promise.reject(Wn(e));let r="signIn",i=yield sE(e,r,t),o=yield Ls._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})}function cE(e,t){return f(this,null,function*(){return aE(Zi(e),t)})}function RF(e){return f(this,null,function*(){let t=Zi(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Sm(e,t,n){return dt(e.app)?Promise.reject(Wn(e)):cE(_e(e),oE.credential(t,n)).catch(r=>f(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&RF(e),r}))}function lE(e,t,n,r){return _e(e).onIdTokenChanged(t,n,r)}function uE(e,t,n){return _e(e).beforeAuthStateChanged(t,n)}var Kl="__sak";var Ql=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var PF=1e3,OF=10,kF=(()=>{class e extends Ql{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);pF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,OF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},PF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield er(e.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield er(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield er(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),dE=kF;var FF=(()=>{class e extends Ql{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})(),Mm=FF;function LF(e){return Promise.all(e.map(t=>f(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var VF=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>f(this,null,function*(){return u(r.origin,s)})),l=yield LF(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function hE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}var gm=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=hE("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Jt(){return window}function jF(e){Jt().location.href=e}function fE(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}function UF(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function BF(){return navigator?.serviceWorker?.controller||null}function $F(){return fE()?self:null}var pE="firebaseLocalStorageDb",HF=1,Zl="firebaseLocalStorage",mE="fbase_key",Vr=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function tu(e,t){return e.transaction([Zl],t?"readwrite":"readonly").objectStore(Zl)}function WF(){let e=indexedDB.deleteDatabase(pE);return new Vr(e).toPromise()}function _m(){let e=indexedDB.open(pE,HF);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let r=e.result;try{r.createObjectStore(Zl,{keyPath:mE})}catch(i){n(i)}}),e.addEventListener("success",()=>f(this,null,function*(){let r=e.result;r.objectStoreNames.contains(Zl)?t(r):(r.close(),yield WF(),t(yield _m()))}))})}function SC(e,t,n){return f(this,null,function*(){let r=tu(e,!0).put({[mE]:t,value:n});return new Vr(r).toPromise()})}function zF(e,t){return f(this,null,function*(){let n=tu(e,!1).get(t),r=yield new Vr(n).toPromise();return r===void 0?null:r.value})}function MC(e,t){let n=tu(e,!0).delete(t);return new Vr(n).toPromise()}var GF=800,qF=3,YF=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield _m(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>qF)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return fE()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=VF._getInstance($F()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){if(this.activeServiceWorker=yield UF(),!this.activeServiceWorker)return;this.sender=new gm(this.activeServiceWorker);let n=yield this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||BF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield _m();return yield SC(n,Kl,"1"),yield MC(n,Kl),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>SC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>zF(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>MC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(o=>{let s=tu(o,!1).getAll();return new Vr(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),GF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),gE=YF;var p6=eE("rcb"),m6=new Lr(3e4,6e4);function KF(e,t){return t?gn(t):(N(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Vs=class extends ks{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tm(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tm(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tm(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function QF(e){return aE(e.auth,new Vs(e),e.bypassAuthState)}function ZF(e){let{auth:t,user:n}=e;return N(n,t,"internal-error"),xF(n,new Vs(e),e.bypassAuthState)}function JF(e){return f(this,null,function*(){let{auth:t,user:n}=e;return N(n,t,"internal-error"),NF(n,new Vs(e),e.bypassAuthState)})}var ym=class{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>f(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return QF;case"linkViaPopup":case"linkViaRedirect":return JF;case"reauthViaPopup":case"reauthViaRedirect":return ZF;default:Xt(this.auth,"internal-error")}}resolve(t){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var g6=new Lr(2e3,1e4);var XF="pendingRedirect",jl=new Map,vm=class e extends ym{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let t=jl.get(this.auth._key());if(!t){try{let r=(yield eL(this.resolver,this.auth))?yield er(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}jl.set(this.auth._key(),t)}return this.bypassAuthState||jl.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return f(this,null,function*(){if(t.type==="signInViaRedirect")return er(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,er(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function eL(e,t){return f(this,null,function*(){let n=rL(t),r=nL(e);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function tL(e,t){jl.set(e._key(),t)}function nL(e){return gn(e._redirectPersistence)}function rL(e){return Vl(XF,e.config.apiKey,e.name)}function iL(e,t,n=!1){return f(this,null,function*(){if(dt(e.app))return Promise.reject(Wn(e));let r=Zi(e),i=KF(r,t),s=yield new vm(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var oL=10*60*1e3,wm=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!sL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!_E(t)){let r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Fr(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=oL&&this.cachedEventUids.clear(),this.cachedEventUids.has(AC(t))}saveEventToCache(t){this.cachedEventUids.add(AC(t)),this.lastProcessedEventTime=Date.now()}};function AC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function _E({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function sL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(e);default:return!1}}function aL(n){return f(this,arguments,function*(e,t={}){return Gn(e,"GET","/v1/projects",t)})}var cL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lL=/^https?/;function uL(e){return f(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield aL(e);for(let n of t)try{if(dL(n))return}catch{}Xt(e,"unauthorized-domain")})}function dL(e){let t=rm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!lL.test(n))return!1;if(cL.test(e))return r===e;let i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hL=new Lr(3e4,6e4);function NC(){let e=Jt().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function fL(e){return new Promise((t,n)=>{function r(){NC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{NC(),n(Fr(e,"network-request-failed"))},timeout:hL.get()})}if(Jt().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Jt().gapi?.load)r();else{let i=eE("iframefcb");return Jt()[i]=()=>{gapi.load?r():n(Fr(e,"network-request-failed"))},XC(`${vF()}?onload=${i}`).catch(o=>n(o))}}).catch(t=>{throw Ul=null,t})}var Ul=null;function pL(e){return Ul=Ul||fL(e),Ul}var mL=new Lr(5e3,15e3),gL="__/auth/iframe",_L="emulator/auth/iframe",yL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wL(e){let t=e.config;N(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?Em(t,_L):`https://${e.config.authDomain}/${gL}`,r={apiKey:t.apiKey,appName:e.name,v:Bn},i=vL.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Nr(r).slice(1)}`}function IL(e){return f(this,null,function*(){let t=yield pL(e),n=Jt().gapi;return N(n,e,"internal-error"),t.open({where:document.body,url:wL(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yL,dontclear:!0},r=>new Promise((i,o)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Fr(e,"network-request-failed"),a=Jt().setTimeout(()=>{o(s)},mL.get());function c(){Jt().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var bL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CL=500,EL=600,DL="_blank",TL="http://localhost",Jl=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function SL(e,t,n,r=CL,i=EL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=k(_({},bL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ve().toLowerCase();n&&(a=GC(l)?DL:n),WC(l)&&(t=t||TL,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(fF(l)&&a!=="_self")return ML(t||"",a),new Jl(null);let d=window.open(t||"",a,u);N(d,e,"popup-blocked");try{d.focus()}catch{}return new Jl(d)}function ML(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var AL="__/auth/handler",NL="emulator/auth/handler",xL=encodeURIComponent("fac");function xC(e,t,n,r,i,o){return f(this,null,function*(){N(e.config.authDomain,e,"auth-domain-config-required"),N(e.config.apiKey,e,"invalid-api-key");let s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Bn,eventId:i};if(t instanceof Yl){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",bs(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(t instanceof pm){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}e.tenantId&&(s.tid=e.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${xL}=${encodeURIComponent(c)}`:"";return`${RL(e)}?${Nr(a).slice(1)}${l}`})}function RL({config:e}){return e.emulator?Em(e,NL):`https://${e.authDomain}/${AL}`}var nm="webStorageSupport",Im=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mm,this._completeRedirectFn=iL,this._overrideRedirectResult=tL}_openPopup(t,n,r,i){return f(this,null,function*(){zn(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield xC(t,n,r,rm(),i);return SL(t,o,hE())})}_openRedirect(t,n,r,i){return f(this,null,function*(){yield this._originValidation(t);let o=yield xC(t,n,r,rm(),i);return jF(o),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(zn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){return f(this,null,function*(){let n=yield IL(t),r=new wm(t);return n.register("authEvent",i=>(N(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(nm,{type:nm},i=>{let o=i?.[0]?.[nm];o!==void 0&&n(!!o),Xt(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZC()||zC()||Tm()}},yE=Im;var RC="@firebase/auth",PC="1.11.0";var bm=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(t){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function PL(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OL(e){Je(new Te("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;N(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(e)},l=new um(r,i,o,c);return IF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Je(new Te("auth-internal",t=>{let n=Zi(t.getProvider("auth").getImmediate());return(r=>new bm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(RC,PC,PL(e)),Pe(RC,PC,"esm2020")}var kL=5*60,FL=Dp("authIdTokenMaxAge")||kL,OC=null,LL=e=>t=>f(void 0,null,function*(){let n=t&&(yield t.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FL)return;let i=n?.token;OC!==i&&(OC=i,yield fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Am(e=Rr()){let t=kt(e,"auth");if(t.isInitialized())return t.getImmediate();let n=nE(e,{popupRedirectResolver:yE,persistence:[gE,dE,Mm]}),r=Dp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=LL(o.toString());uE(n,s,()=>s(n.currentUser)),lE(n,a=>s(a))}}let i=Cp("auth");return i&&rE(n,`http://${i}`),n}function VL(){return document.getElementsByTagName("head")?.[0]??document}_F({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{let o=Fr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",VL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OL("Browser");var vE="@firebase/database",wE="1.1.0";var Rg="";function jL(e){Rg=e}var Lm=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),me(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Yi(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Vm=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ot(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var JE=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lm(t)}}catch{}return new Vm},Br=JE("localStorage"),jm=JE("sessionStorage");var eo=new Qt("@firebase/database"),UL=function(){let e=1;return function(){return e++}}(),XE=function(e){let t=Mb(e),n=new wl;n.update(t);let r=n.digest();return Il.encodeByteArray(r)},ia=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=ia.apply(null,r):typeof r=="object"?t+=me(r):t+=r,t+=" "}return t},$r=null,IE=!0,BL=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(eo.logLevel=X.VERBOSE,$r=eo.log.bind(eo),t&&jm.set("logging_enabled",!0)):typeof e=="function"?$r=e:($r=null,jm.remove("logging_enabled"))},Oe=function(...e){if(IE===!0&&(IE=!1,$r===null&&jm.get("logging_enabled")===!0&&BL(!0)),$r){let t=ia.apply(null,e);$r(t)}},oa=function(e){return function(...t){Oe(e,...t)}},Um=function(...e){let t="FIREBASE INTERNAL ERROR: "+ia(...e);eo.error(t)},_n=function(...e){let t=`FIREBASE FATAL ERROR: ${ia(...e)}`;throw eo.error(t),new Error(t)},Ge=function(...e){let t="FIREBASE WARNING: "+ia(...e);eo.warn(t)},$L=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ge("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pg=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},HL=function(e){if(Kt()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},no="[MIN_NAME]",Hr="[MAX_NAME]",zr=function(e,t){if(e===t)return 0;if(e===no||t===Hr)return-1;if(t===no||e===Hr)return 1;{let n=bE(e),r=bE(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},WL=function(e,t){return e===t?0:e<t?-1:1},js=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+me(t))},Og=function(e){if(typeof e!="object"||e===null)return me(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=me(t[r]),n+=":",n+=Og(e[t[r]]);return n+="}",n},eD=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ke(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var tD=function(e){y(!Pg(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},zL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},GL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function qL(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var YL=new RegExp("^-?(0*)\\d{1,10}$"),KL=-2147483648,QL=2147483647,bE=function(e){if(YL.test(e)){let t=Number(e);if(t>=KL&&t<=QL)return t}return null},ho=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Ge("Exception was thrown by user callback.",n),t},Math.floor(0))}},ZL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ws=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Bm=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,dt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Ge(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $m=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Oe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ge(t)}},zs=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),ru="5",nD="v",rD="s",iD="r",oD="f",sD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aD="ls",cD="p",Hm="ac",lD="websocket",uD="long_polling";var iu=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Br.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Br.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function JL(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function dD(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(t===lD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===uD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);JL(e)&&(n.ns=e.namespace);let i=[];return ke(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Wm=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Ot(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return _b(this.counters_)}};var Nm={},xm={};function kg(e){let t=e.toString();return Nm[t]||(Nm[t]=new Wm),Nm[t]}function XL(e,t){let n=e.toString();return xm[n]||(xm[n]=t()),xm[n]}var zm=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ho(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var CE="start",eV="close",tV="pLPCommand",nV="pRTLPCB",hD="id",fD="pw",pD="ser",rV="cb",iV="seg",oV="ts",sV="d",aV="dframe",mD=1870,gD=30,cV=mD-gD,lV=25e3,uV=3e4,Gm=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oa(t),this.stats_=kg(n),this.urlFn=c=>(this.appCheckToken&&(c[Hm]=this.appCheckToken),dD(n,uD,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zm(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uV)),HL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qm((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===CE)this.id=a,this.password=c;else if(s===eV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[CE]="t",r[pD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[rV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nD]=ru,this.transportSessionId&&(r[rD]=this.transportSessionId),this.lastSessionId&&(r[aD]=this.lastSessionId),this.applicationId&&(r[cD]=this.applicationId),this.appCheckToken&&(r[Hm]=this.appCheckToken),typeof location<"u"&&location.hostname&&sD.test(location.hostname)&&(r[iD]=oD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Kt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zL()&&!GL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=me(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Ip(n),i=eD(r,cV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Kt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[aV]="t",r[hD]=t,r[fD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=me(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},qm=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Kt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=UL(),window[tV+this.uniqueCallbackIdentifier]=t,window[nV+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Oe("frame writing exception"),a.stack&&Oe(a.stack),Oe(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Oe("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[hD]=this.myID,t[fD]=this.myPW,t[pD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gD+r.length<=mD;){let s=this.pendingSegs.shift();r=r+"&"+iV+i+"="+s.seg+"&"+oV+i+"="+s.ts+"&"+sV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(lV)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Kt()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Oe("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var dV=16384,hV=45e3,ou=null;typeof MozWebSocket<"u"?ou=MozWebSocket:typeof WebSocket<"u"&&(ou=WebSocket);var Us=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oa(this.connId),this.stats_=kg(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[nD]=ru,!Kt()&&typeof location<"u"&&location.hostname&&sD.test(location.hostname)&&(a[iD]=oD),r&&(a[rD]=r),i&&(a[aD]=i),o&&(a[Hm]=o),s&&(a[cD]=s),dD(n,lD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Br.set("previous_websocket_failure",!0);try{let i;if(Kt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ru}/${Rg}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ou(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&ou!==null&&!e.forceDisallow_}static previouslyFailed(){return Br.isInMemoryStorage||Br.get("previous_websocket_failure")===!0}markConnectionHealthy(){Br.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Yi(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=me(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=eD(r,dV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),fV=(()=>{class e{static get ALL_TRANSPORTS(){return[Gm,Us]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Us&&Us.isAvailable(),i=r&&!Us.previouslyFailed();if(n.webSocketOnly&&(r||Ge("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Us];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),pV=6e4,mV=5e3,gV=10*1024,_V=100*1024,Rm="t",EE="d",yV="s",DE="r",vV="e",TE="o",SE="a",ME="n",AE="p",wV="h",Ym=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oa("c:"+this.id+":"),this.transportManager_=new fV(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ws(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_V?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Rm in t){let n=t[Rm];n===SE?this.upgradeIfSecondaryHealthy_():n===DE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===TE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=js("t",t),r=js("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ME,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=js("t",t),r=js("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=js(Rm,t);if(EE in t){let r=t[EE];if(n===wV){let i=_({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===ME){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===yV?this.onConnectionShutdown_(r):n===DE?this.onReset_(r):n===vV?Um("Server Error: "+r):n===TE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Um("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ru!==r&&Ge("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ws(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pV))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ws(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AE,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Br.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var su=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var au=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var cu=class e extends au{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Is()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var NE=32,xE=768,J=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function K(){return new J("")}function U(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Qn(e){return e.pieces_.length-e.pieceNum_}function ie(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new J(e.pieces_,t)}function Fg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function IV(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Ks(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function _D(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new J(t,0)}function ce(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof J)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function W(e){return e.pieceNum_>=e.pieces_.length}function ze(e,t){let n=U(e),r=U(t);if(n===null)return t;if(n===r)return ze(ie(e),ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function bV(e,t){let n=Ks(e,0),r=Ks(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=zr(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Lg(e,t){if(Qn(e)!==Qn(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function bt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Qn(e)>Qn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Km=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Ks(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ds(this.parts_[r]);yD(this)}};function CV(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ds(t),yD(e)}function EV(e){let t=e.parts_.pop();e.byteLength_-=Ds(t),e.parts_.length>0&&(e.byteLength_-=1)}function yD(e){if(e.byteLength_>xE)throw new Error(e.errorPrefix_+"has a key path longer than "+xE+" bytes ("+e.byteLength_+").");if(e.parts_.length>NE)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+NE+") or object contains a cycle "+Ur(e))}function Ur(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Qm=class e extends au{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var Bs=1e3,DV=60*5*1e3,RE=30*1e3,TV=1.3,SV=3e4,MV="server_kill",PE=3,Vg=(()=>{class e extends su{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=oa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bs,this.maxReconnectDelay_=DV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Kt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qm.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&cu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(me(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new fn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ot(n,"w")){let i=Ar(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Ge(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Tb(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RE)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=Db(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+me(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Um("Unrecognized action received from server: "+me(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SV&&(this.reconnectDelay_=Bs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TV)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Oe("getToken() completed but was canceled"):(Oe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,c=new Ym(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{Ge(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(MV)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ge(h),l())}}})}interrupt(n){Oe("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Oe("Resuming connection for reason: "+n),delete this.interruptReasons_[n],bs(this.interruptReasons_)&&(this.reconnectDelay_=Bs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Og(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Oe("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=PE&&(this.reconnectDelay_=RE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Oe("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=PE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Kt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Rg.replace(/\./g,"-")]=1,Is()?n["framework.cordova"]=1:Dl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=cu.getInstance().currentlyOnline();return bs(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),B=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var ro=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new B(no,t),i=new B(no,n);return this.compare(r,i)!==0}minPost(){return B.MIN}};var nu,lu=class extends ro{static get __EMPTY_NODE(){return nu}static set __EMPTY_NODE(t){nu=t}compare(t,n){return zr(t.name,n.name)}isDefinedOn(t){throw Mr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return B.MIN}maxPost(){return new B(Hr,nu)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new B(t,nu)}toString(){return".key"}},to=new lu;var Xi=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ft=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Ct.EMPTY_NODE,this.right=s??Ct.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ct.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Zm=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Ft(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ct=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ft.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Xi(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Xi(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Xi(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Xi(this.root_,null,this.comparator_,!0,t)}};Ct.EMPTY_NODE=new Zm;function AV(e,t){return zr(e.name,t.name)}function jg(e,t){return zr(e,t)}var Jm;function NV(e){Jm=e}var vD=function(e){return typeof e=="number"?"number:"+tD(e):"string:"+e},wD=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ot(t,".sv"),"Priority must be a string or number.")}else y(e===Jm||e.isEmpty(),"priority of unexpected type.");y(e===Jm||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var OE,io=(()=>{class e{static set __childrenNodeConstructor(n){OE=n}static get __childrenNodeConstructor(){return OE}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return W(n)?this:U(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=U(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Qn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ie(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=tD(this.value_):n+=this.value_,this.lazyHash_=XE(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return y(o>=0,"Unknown leaf type: "+r),y(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),ID,bD;function xV(e){ID=e}function RV(e){bD=e}var Xm=class extends ro{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?zr(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Hr,new io("[PRIORITY-POST]",bD))}makePost(t,n){let r=ID(t);return new B(n,new io("[PRIORITY-POST]",r))}toString(){return".priority"}},le=new Xm;var PV=Math.log(2),eg=class{constructor(t){let n=o=>parseInt(Math.log(o)/PV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},uu=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=e[c],h=n?n(d):d,new Ft(h,d.node,Ft.BLACK,null,null);{let p=parseInt(u/2,10)+c,m=i(c,p),g=i(p+1,l);return d=e[p],h=n?n(d):d,new Ft(h,d.node,Ft.BLACK,m,g)}},o=function(c){let l=null,u=null,d=e.length,h=function(m,g){let w=d-m,D=d;d-=m;let oe=i(w+1,D),$=e[w],Se=n?n($):$;p(new Ft(Se,$.node,g,null,oe))},p=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let g=c.nextBitIsOne(),w=Math.pow(2,c.count-(m+1));g?h(w,Ft.BLACK):(h(w,Ft.BLACK),h(w,Ft.RED))}return u},s=new eg(e.length),a=o(s);return new Ct(r||t,a)};var Pm,Ji={},oo=class e{static get Default(){return y(Ji&&le,"ChildrenNode.ts has not been loaded"),Pm=Pm||new e({".priority":Ji},{".priority":le}),Pm}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Ar(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ct?n:null}hasIndex(t){return Ot(this.indexSet_,t.toString())}addIndex(t,n){y(t!==to,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(B.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=uu(r,t.getCompare()):a=Ji;let c=t.toString(),l=_({},this.indexSet_);l[c]=t;let u=_({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=Cs(this.indexes_,(i,o)=>{let s=Ar(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),i===Ji)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(B.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),uu(a,s.getCompare())}else return Ji;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new B(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Cs(this.indexes_,i=>{if(i===Ji)return i;{let o=n.get(t.name);return o?i.remove(new B(t.name,o)):i}});return new e(r,this.indexSet_)}};var $s,F=(()=>{class e{static get EMPTY_NODE(){return $s||($s=new e(new Ct(jg),null,oo.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wD(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$s}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?$s:r}}getChild(n){let r=U(n);return r===null?this:this.getImmediateChild(r).getChild(ie(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new B(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?$s:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=U(n);if(i===null)return r;{y(U(n)!==".priority"||Qn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ie(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(le,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+vD(this.getPriority().val())+":"),this.forEachChild(le,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":XE(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new B(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new B(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new B(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,B.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,B.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===sa?-1:0}withIndex(n){if(n===to||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===to||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(le),o=r.getIterator(le),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===to?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),tg=class extends F{constructor(){super(new Ct(jg),F.EMPTY_NODE,oo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return F.EMPTY_NODE}isEmpty(){return!1}},sa=new tg;Object.defineProperties(B,{MIN:{value:new B(no,F.EMPTY_NODE)},MAX:{value:new B(Hr,sa)}});lu.__EMPTY_NODE=F.EMPTY_NODE;io.__childrenNodeConstructor=F;NV(sa);RV(sa);var OV=!0;function ye(e,t=null){if(e===null)return F.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new io(n,ye(t))}if(!(e instanceof Array)&&OV){let n=[],r=!1;if(ke(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=ye(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new B(s,c)))}}),n.length===0)return F.EMPTY_NODE;let o=uu(n,AV,s=>s.name,jg);if(r){let s=uu(n,le.getCompare());return new F(o,ye(t),new oo({".priority":s},{".priority":le}))}else return new F(o,ye(t),oo.Default)}else{let n=F.EMPTY_NODE;return ke(e,(r,i)=>{if(Ot(e,r)&&r.substring(0,1)!=="."){let o=ye(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ye(t))}}xV(ye);var ng=class extends ro{constructor(t){super(),this.indexPath_=t,y(!W(t)&&U(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?zr(t.name,n.name):o}makePost(t,n){let r=ye(t),i=F.EMPTY_NODE.updateChild(this.indexPath_,r);return new B(n,i)}maxPost(){let t=F.EMPTY_NODE.updateChild(this.indexPath_,sa);return new B(Hr,t)}toString(){return Ks(this.indexPath_,0).join("/")}};var rg=class extends ro{compare(t,n){let r=t.node.compareTo(n.node);return r===0?zr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(t,n){let r=ye(t);return new B(n,r)}toString(){return".value"}},kV=new rg;function CD(e){return{type:"value",snapshotNode:e}}function so(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Qs(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Zs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function FV(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Js=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Qs(n,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(so(n,r)):s.trackChildChange(Zs(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(le,(i,o)=>{n.hasChild(i)||r.trackChildChange(Qs(i,o))}),n.isLeafNode()||n.forEachChild(le,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Zs(i,o,s))}else r.trackChildChange(so(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?F.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var du=class e{constructor(t){this.indexedFilter_=new Js(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new B(n,r))||(r=F.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=F.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(F.EMPTY_NODE);let o=this;return n.forEachChild(le,(s,a)=>{o.matches(new B(s,a))||(i=i.updateImmediateChild(s,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var ig=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new du(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new B(n,r))||(r=F.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=F.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(F.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();let a=t;y(a.numChildren()===this.limit_,"");let c=new B(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let p=h==null?1:s(h,c);if(u&&!r.isEmpty()&&p>=0)return o?.trackChildChange(Zs(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Qs(n,d));let g=a.updateImmediateChild(n,F.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(so(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Qs(l.name,l.node)),o.trackChildChange(so(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,F.EMPTY_NODE)):t}};var og=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:no}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function LV(e){return e.loadsAllData()?new Js(e.getIndex()):e.hasLimit()?new ig(e):new du(e)}function kE(e){let t={};if(e.isDefault())return t;let n;if(e.index_===le?n="$priority":e.index_===kV?n="$value":e.index_===to?n="$key":(y(e.index_ instanceof ng,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=me(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=me(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+me(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=me(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+me(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function FE(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==le&&(t.i=e.index_.toString()),t}var sg=class e extends su{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=oa("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=kE(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Ar(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=kE(t._queryParams),r=t._path.toString(),i=new fn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Nr(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Yi(a.responseText)}catch{Ge("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ge("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var ag=class{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function hu(){return{value:null,children:new Map}}function ED(e,t,n){if(W(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=U(t);e.children.has(r)||e.children.set(r,hu());let i=e.children.get(r);t=ie(t),ED(i,t,n)}}function cg(e,t,n){e.value!==null?n(t,e.value):VV(e,(r,i)=>{let o=new J(t.toString()+"/"+r);cg(i,o,n)})}function VV(e,t){e.children.forEach((n,r)=>{t(r,n)})}var lg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=_({},t);return this.last_&&ke(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var LE=10*1e3,jV=30*1e3,UV=5*60*1e3,ug=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new lg(t);let r=LE+(jV-LE)*Math.random();Ws(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;ke(t,(i,o)=>{o>0&&Ot(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ws(this.reportStats_.bind(this),Math.floor(Math.random()*2*UV))}};var en=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(en||{});function Ug(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Bg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $g(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var dg=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=en.ACK_USER_WRITE,this.source=Ug()}operationForChild(t){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(t));return new e(K(),n,this.revert)}}else return y(U(this.path)===t,"operationForChild called for unrelated child."),new e(ie(this.path),this.affectedTree,this.revert)}};var fu=class e{constructor(t,n){this.source=t,this.path=n,this.type=en.LISTEN_COMPLETE}operationForChild(t){return W(this.path)?new e(this.source,K()):new e(this.source,ie(this.path))}};var ao=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=en.OVERWRITE}operationForChild(t){return W(this.path)?new e(this.source,K(),this.snap.getImmediateChild(t)):new e(this.source,ie(this.path),this.snap)}};var Xs=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=en.MERGE}operationForChild(t){if(W(this.path)){let n=this.children.subtree(new J(t));return n.isEmpty()?null:n.value?new ao(this.source,K(),n.value):new e(this.source,K(),n)}else return y(U(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var tn=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(W(t))return this.isFullyInitialized()&&!this.filtered_;let n=U(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var hg=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function BV(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(FV(s.childName,s.snapshotNode))}),Hs(e,i,"child_removed",t,r,n),Hs(e,i,"child_added",t,r,n),Hs(e,i,"child_moved",o,r,n),Hs(e,i,"child_changed",t,r,n),Hs(e,i,"value",t,r,n),i}function Hs(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>HV(e,a,c)),s.forEach(a=>{let c=$V(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function $V(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function HV(e,t,n){if(t.childName==null||n.childName==null)throw Mr("Should only compare child_ events.");let r=new B(t.childName,t.snapshotNode),i=new B(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Su(e,t){return{eventCache:e,serverCache:t}}function Gs(e,t,n,r){return Su(new tn(t,n,r),e.serverCache)}function DD(e,t,n,r){return Su(e.eventCache,new tn(t,n,r))}function pu(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Wr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Om,WV=()=>(Om||(Om=new Ct(WL)),Om),qe=class e{static fromObject(t){let n=new e(null);return ke(t,(r,i)=>{n=n.set(new J(r),i)}),n}constructor(t,n=WV()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(W(t))return null;{let r=U(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ie(t),n);return o!=null?{path:ce(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(W(t))return this;{let n=U(t),r=this.children.get(n);return r!==null?r.subtree(ie(t)):new e(null)}}set(t,n){if(W(t))return new e(n,this.children);{let r=U(t),o=(this.children.get(r)||new e(null)).set(ie(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(W(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=U(t),r=this.children.get(n);if(r){let i=r.remove(ie(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(W(t))return this.value;{let n=U(t),r=this.children.get(n);return r?r.get(ie(t)):null}}setTree(t,n){if(W(t))return n;{let r=U(t),o=(this.children.get(r)||new e(null)).setTree(ie(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(K(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ce(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,K(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(W(t))return null;{let o=U(t),s=this.children.get(o);return s?s.findOnPath_(ie(t),ce(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,K(),n)}foreachOnPath_(t,n,r){if(W(t))return this;{this.value&&r(n,this.value);let i=U(t),o=this.children.get(i);return o?o.foreachOnPath_(ie(t),ce(n,i),r):new e(null)}}foreach(t){this.foreach_(K(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ce(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Lt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new qe(null))}};function qs(e,t,n){if(W(t))return new Lt(new qe(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=ze(i,t);return o=o.updateChild(s,n),new Lt(e.writeTree_.set(i,o))}else{let i=new qe(n),o=e.writeTree_.setTree(t,i);return new Lt(o)}}}function fg(e,t,n){let r=e;return ke(n,(i,o)=>{r=qs(r,ce(t,i),o)}),r}function VE(e,t){if(W(t))return Lt.empty();{let n=e.writeTree_.setTree(t,new qe(null));return new Lt(n)}}function pg(e,t){return Gr(e,t)!=null}function Gr(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(ze(n.path,t)):null}function jE(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(le,(r,i)=>{t.push(new B(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new B(r,i.value))}),t}function Yn(e,t){if(W(t))return e;{let n=Gr(e,t);return n!=null?new Lt(new qe(n)):new Lt(e.writeTree_.subtree(t))}}function mg(e){return e.writeTree_.isEmpty()}function co(e,t){return TD(K(),e.writeTree_,t)}function TD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=TD(ce(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(ce(e,".priority"),r)),n}}function Mu(e,t){return ND(t,e)}function zV(e,t,n,r,i){y(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=qs(e.visibleWrites,t,n)),e.lastWriteId=r}function GV(e,t,n,r){y(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=fg(e.visibleWrites,t,n),e.lastWriteId=r}function qV(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function YV(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&KV(a,r.path)?i=!1:bt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return QV(e),!0;if(r.snap)e.visibleWrites=VE(e.visibleWrites,r.path);else{let a=r.children;ke(a,c=>{e.visibleWrites=VE(e.visibleWrites,ce(r.path,c))})}return!0}else return!1}function KV(e,t){if(e.snap)return bt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&bt(ce(e.path,n),t))return!0;return!1}function QV(e){e.visibleWrites=SD(e.allWrites,ZV,K()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ZV(e){return e.visible}function SD(e,t,n){let r=Lt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)bt(n,s)?(a=ze(n,s),r=qs(r,a,o.snap)):bt(s,n)&&(a=ze(s,n),r=qs(r,K(),o.snap.getChild(a)));else if(o.children){if(bt(n,s))a=ze(n,s),r=fg(r,a,o.children);else if(bt(s,n))if(a=ze(s,n),W(a))r=fg(r,K(),o.children);else{let c=Ar(o.children,U(a));if(c){let l=c.getChild(ie(a));r=qs(r,K(),l)}}}else throw Mr("WriteRecord should have .snap or .children")}}return r}function MD(e,t,n,r,i){if(!r&&!i){let o=Gr(e.visibleWrites,t);if(o!=null)return o;{let s=Yn(e.visibleWrites,t);if(mg(s))return n;if(n==null&&!pg(s,K()))return null;{let a=n||F.EMPTY_NODE;return co(s,a)}}}else{let o=Yn(e.visibleWrites,t);if(!i&&mg(o))return n;if(!i&&n==null&&!pg(o,K()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(bt(l.path,t)||bt(t,l.path))},a=SD(e.allWrites,s,t),c=n||F.EMPTY_NODE;return co(a,c)}}}function JV(e,t,n){let r=F.EMPTY_NODE,i=Gr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(le,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Yn(e.visibleWrites,t);return n.forEachChild(le,(s,a)=>{let c=co(Yn(o,new J(s)),a);r=r.updateImmediateChild(s,c)}),jE(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Yn(e.visibleWrites,t);return jE(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function XV(e,t,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ce(t,n);if(pg(e.visibleWrites,o))return null;{let s=Yn(e.visibleWrites,o);return mg(s)?i.getChild(n):co(s,i.getChild(n))}}function ej(e,t,n,r){let i=ce(t,n),o=Gr(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Yn(e.visibleWrites,i);return co(s,r.getNode().getImmediateChild(n))}else return null}function tj(e,t){return Gr(e.visibleWrites,t)}function nj(e,t,n,r,i,o,s){let a,c=Yn(e.visibleWrites,t),l=Gr(c,K());if(l!=null)a=l;else if(n!=null)a=co(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=h.getNext();for(;p&&u.length<i;)d(p,r)!==0&&u.push(p),p=h.getNext();return u}else return[]}function rj(){return{visibleWrites:Lt.empty(),allWrites:[],lastWriteId:-1}}function mu(e,t,n,r){return MD(e.writeTree,e.treePath,t,n,r)}function Hg(e,t){return JV(e.writeTree,e.treePath,t)}function UE(e,t,n,r){return XV(e.writeTree,e.treePath,t,n,r)}function gu(e,t){return tj(e.writeTree,ce(e.treePath,t))}function ij(e,t,n,r,i,o){return nj(e.writeTree,e.treePath,t,n,r,i,o)}function Wg(e,t,n){return ej(e.writeTree,e.treePath,t,n)}function AD(e,t){return ND(ce(e.treePath,t),e.writeTree)}function ND(e,t){return{treePath:e,writeTree:t}}var gg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Zs(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Qs(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,so(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Zs(r,t.snapshotNode,i.oldSnap));else throw Mr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var _g=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},xD=new _g,ea=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wg(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wr(this.viewCache_),o=ij(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function oj(e){return{filter:e}}function sj(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function aj(e,t,n,r,i){let o=new gg,s,a;if(n.type===en.OVERWRITE){let l=n;l.source.fromUser?s=yg(e,t,l.path,l.snap,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W(l.path),s=_u(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===en.MERGE){let l=n;l.source.fromUser?s=lj(e,t,l.path,l.children,r,i,o):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=vg(e,t,l.path,l.children,r,i,a,o))}else if(n.type===en.ACK_USER_WRITE){let l=n;l.revert?s=hj(e,t,l.path,r,i,o):s=uj(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===en.LISTEN_COMPLETE)s=dj(e,t,n.path,r,o);else throw Mr("Unknown operation type: "+n.type);let c=o.getChanges();return cj(t,s,c),{viewCache:s,changes:c}}function cj(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pu(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(CD(pu(t)))}}function RD(e,t,n,r,i,o){let s=t.eventCache;if(gu(r,n)!=null)return t;{let a,c;if(W(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Wr(t),u=l instanceof F?l:F.EMPTY_NODE,d=Hg(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=mu(r,Wr(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=U(n);if(l===".priority"){y(Qn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=UE(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=ie(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let h=UE(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=Wg(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Gs(t,a,s.isFullyInitialized()||W(n),e.filter.filtersNodes())}}function _u(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(W(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=U(n);if(!c.isCompleteForPath(n)&&Qn(n)>1)return t;let m=ie(n),w=c.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),p,w,m,xD,null)}let d=DD(t,l,c.isFullyInitialized()||W(n),u.filtersNodes()),h=new ea(i,d,o);return RD(e,d,n,i,h,a)}function yg(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new ea(i,t,o);if(W(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Gs(t,l,!0,e.filter.filtersNodes());else{let d=U(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Gs(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=ie(n),p=a.getNode().getImmediateChild(d),m;if(W(h))m=r;else{let g=u.getCompleteChild(d);g!=null?Fg(h)===".priority"&&g.getChild(_D(h)).isEmpty()?m=g:m=g.updateChild(h,r):m=F.EMPTY_NODE}if(p.equals(m))c=t;else{let g=e.filter.updateChild(a.getNode(),d,m,h,u,s);c=Gs(t,g,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function BE(e,t){return e.eventCache.isCompleteForChild(t)}function lj(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=ce(n,c);BE(t,U(u))&&(a=yg(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ce(n,c);BE(t,U(u))||(a=yg(e,a,u,l,i,o,s))}),a}function $E(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function vg(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;W(n)?l=r:l=new qe(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=t.serverCache.getNode().getImmediateChild(d),m=$E(e,p,h);c=_u(e,c,new J(d),m,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let m=t.serverCache.getNode().getImmediateChild(d),g=$E(e,m,h);c=_u(e,c,new J(d),g,i,o,s,a)}}),c}function uj(e,t,n,r,i,o,s){if(gu(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return _u(e,t,n,c.getNode().getChild(n),i,o,a,s);if(W(n)){let l=new qe(null);return c.getNode().forEachChild(to,(u,d)=>{l=l.set(new J(u),d)}),vg(e,t,n,l,i,o,a,s)}else return t}else{let l=new qe(null);return r.foreach((u,d)=>{let h=ce(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),vg(e,t,n,l,i,o,a,s)}}function dj(e,t,n,r,i){let o=t.serverCache,s=DD(t,o.getNode(),o.isFullyInitialized()||W(n),o.isFiltered());return RD(e,s,n,r,xD,i)}function hj(e,t,n,r,i,o){let s;if(gu(r,n)!=null)return t;{let a=new ea(r,t,i),c=t.eventCache.getNode(),l;if(W(n)||U(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=mu(r,Wr(t));else{let d=t.serverCache.getNode();y(d instanceof F,"serverChildren would be complete if leaf node"),u=Hg(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=U(n),d=Wg(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,ie(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,F.EMPTY_NODE,ie(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=mu(r,Wr(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||gu(r,K())!=null,Gs(t,l,s,e.filter.filtersNodes())}}var wg=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Js(r.getIndex()),o=LV(r);this.processor_=oj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(F.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(F.EMPTY_NODE,a.getNode(),null),u=new tn(c,s.isFullyInitialized(),i.filtersNodes()),d=new tn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Su(d,u),this.eventGenerator_=new hg(this.query_)}get query(){return this.query_}};function fj(e){return e.viewCache_.serverCache.getNode()}function pj(e){return pu(e.viewCache_)}function mj(e,t){let n=Wr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W(t)&&!n.getImmediateChild(U(t)).isEmpty())?n.getChild(t):null}function HE(e){return e.eventRegistrations_.length===0}function gj(e,t){e.eventRegistrations_.push(t)}function WE(e,t,n){let r=[];if(n){y(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function zE(e,t,n,r){t.type===en.MERGE&&t.source.queryId!==null&&(y(Wr(e.viewCache_),"We should always have a full cache before handling merges"),y(pu(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=aj(e.processor_,i,t,n,r);return sj(e.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,PD(e,o.changes,o.viewCache.eventCache.getNode(),null)}function _j(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(le,(o,s)=>{r.push(so(o,s))}),n.isFullyInitialized()&&r.push(CD(n.getNode())),PD(e,r,n.getNode(),t)}function PD(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return BV(e.eventGenerator_,t,n,i)}var yu,vu=class{constructor(){this.views=new Map}};function yj(e){y(!yu,"__referenceConstructor has already been defined"),yu=e}function vj(){return y(yu,"Reference.ts has not been loaded"),yu}function wj(e){return e.views.size===0}function zg(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return y(o!=null,"SyncTree gave us an op for an invalid query."),zE(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(zE(s,t,n,r));return o}}function OD(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=mu(n,i?r:null),c=!1;a?c=!0:r instanceof F?(a=Hg(n,r),c=!1):(a=F.EMPTY_NODE,c=!1);let l=Su(new tn(a,c,!1),new tn(r,i,!1));return new wg(t,l)}return s}function Ij(e,t,n,r,i,o){let s=OD(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),gj(s,n),_j(s,n)}function bj(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Zn(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(WE(l,n,r)),HE(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(WE(c,n,r)),HE(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Zn(e)&&o.push(new(vj())(t._repo,t._path)),{removed:o,events:s}}function kD(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Kn(e,t){let n=null;for(let r of e.views.values())n=n||mj(r,t);return n}function FD(e,t){if(t._queryParams.loadsAllData())return Au(e);{let r=t._queryIdentifier;return e.views.get(r)}}function LD(e,t){return FD(e,t)!=null}function Zn(e){return Au(e)!=null}function Au(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var wu;function Cj(e){y(!wu,"__referenceConstructor has already been defined"),wu=e}function Ej(){return y(wu,"Reference.ts has not been loaded"),wu}var Dj=1,Iu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new qe(null),this.pendingWriteTree_=rj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function VD(e,t,n,r,i){return zV(e.pendingWriteTree_,t,n,r,i),i?fo(e,new ao(Ug(),t,n)):[]}function Tj(e,t,n,r){GV(e.pendingWriteTree_,t,n,r);let i=qe.fromObject(n);return fo(e,new Xs(Ug(),t,i))}function qn(e,t,n=!1){let r=qV(e.pendingWriteTree_,t);if(YV(e.pendingWriteTree_,t)){let o=new qe(null);return r.snap!=null?o=o.set(K(),!0):ke(r.children,s=>{o=o.set(new J(s),!0)}),fo(e,new dg(r.path,o,n))}else return[]}function aa(e,t,n){return fo(e,new ao(Bg(),t,n))}function Sj(e,t,n){let r=qe.fromObject(n);return fo(e,new Xs(Bg(),t,r))}function Mj(e,t){return fo(e,new fu(Bg(),t))}function Aj(e,t,n){let r=qg(e,n);if(r){let i=Yg(r),o=i.path,s=i.queryId,a=ze(o,t),c=new fu($g(s),a);return Kg(e,o,c)}else return[]}function bu(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||LD(s,t))){let c=bj(s,t,n,r);wj(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(h,p)=>Zn(p));if(u&&!d){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let p=Rj(h);for(let m=0;m<p.length;++m){let g=p[m],w=g.query,D=$D(e,g);e.listenProvider_.startListening(Ys(w),ta(e,w),D.hashFn,D.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(Ys(t),null):l.forEach(h=>{let p=e.queryToTagMap.get(Nu(h));e.listenProvider_.stopListening(Ys(h),p)}))}Pj(e,l)}return a}function jD(e,t,n,r){let i=qg(e,r);if(i!=null){let o=Yg(i),s=o.path,a=o.queryId,c=ze(s,t),l=new ao($g(a),c,n);return Kg(e,s,l)}else return[]}function Nj(e,t,n,r){let i=qg(e,r);if(i){let o=Yg(i),s=o.path,a=o.queryId,c=ze(s,t),l=qe.fromObject(n),u=new Xs($g(a),c,l);return Kg(e,s,u)}else return[]}function Ig(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(h,p)=>{let m=ze(h,i);o=o||Kn(p,m),s=s||Zn(p)});let a=e.syncPointTree_.get(i);a?(s=s||Zn(a),o=o||Kn(a,K())):(a=new vu,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=F.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((p,m)=>{let g=Kn(m,K());g&&(o=o.updateImmediateChild(p,g))}));let l=LD(a,t);if(!l&&!t._queryParams.loadsAllData()){let h=Nu(t);y(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let p=Oj();e.queryToTagMap.set(h,p),e.tagToQueryMap.set(p,h)}let u=Mu(e.pendingWriteTree_,i),d=Ij(a,t,n,u,o,c);if(!l&&!s&&!r){let h=FD(a,t);d=d.concat(kj(e,t,h))}return d}function Gg(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=ze(s,t),l=Kn(a,c);if(l)return l});return MD(i,t,o,n,!0)}function xj(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=ze(l,n);r=r||Kn(u,d)});let i=e.syncPointTree_.get(n);i?r=r||Kn(i,K()):(i=new vu,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new tn(r,!0,!1):null,a=Mu(e.pendingWriteTree_,t._path),c=OD(i,t,a,o?s.getNode():F.EMPTY_NODE,o);return pj(c)}function fo(e,t){return UD(t,e.syncPointTree_,null,Mu(e.pendingWriteTree_,K()))}function UD(e,t,n,r){if(W(e.path))return BD(e,t,n,r);{let i=t.get(K());n==null&&i!=null&&(n=Kn(i,K()));let o=[],s=U(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=AD(r,s);o=o.concat(UD(a,c,l,u))}return i&&(o=o.concat(zg(i,e,r,n))),o}}function BD(e,t,n,r){let i=t.get(K());n==null&&i!=null&&(n=Kn(i,K()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=AD(r,s),u=e.operationForChild(s);u&&(o=o.concat(BD(u,a,c,l)))}),i&&(o=o.concat(zg(i,e,r,n))),o}function $D(e,t){let n=t.query,r=ta(e,n);return{hashFn:()=>(fj(t)||F.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Aj(e,n._path,r):Mj(e,n._path);{let o=qL(i,n);return bu(e,n,null,o)}}}}function ta(e,t){let n=Nu(t);return e.queryToTagMap.get(n)}function Nu(e){return e._path.toString()+"$"+e._queryIdentifier}function qg(e,t){return e.tagToQueryMap.get(t)}function Yg(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new J(e.substr(0,t))}}function Kg(e,t,n){let r=e.syncPointTree_.get(t);y(r,"Missing sync point for query tag that we're tracking");let i=Mu(e.pendingWriteTree_,t);return zg(r,n,i,null)}function Rj(e){return e.fold((t,n,r)=>{if(n&&Zn(n))return[Au(n)];{let i=[];return n&&(i=kD(n)),ke(r,(o,s)=>{i=i.concat(s)}),i}})}function Ys(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ej())(e._repo,e._path):e}function Pj(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Nu(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function Oj(){return Dj++}function kj(e,t,n){let r=t._path,i=ta(e,t),o=$D(e,n),s=e.listenProvider_.startListening(Ys(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)y(!Zn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&Zn(u))return[Au(u).query];{let h=[];return u&&(h=h.concat(kD(u).map(p=>p.query))),ke(d,(p,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(Ys(u),ta(e,u))}}return s}var bg=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Cg=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=ce(this.path_,t);return new e(this.syncTree_,n)}node(){return Gg(this.syncTree_,this.path_)}},Fj=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},GE=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Lj(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Vj(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Lj=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},Vj=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=t.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},HD=function(e,t,n,r){return Qg(t,new Cg(n,e),r)},WD=function(e,t,n){return Qg(e,new bg(t),n)};function Qg(e,t,n){let r=e.getPriority().val(),i=GE(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=GE(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new io(a,ye(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new io(i))),s.forEachChild(le,(a,c)=>{let l=Qg(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var na=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Zg(e,t){let n=t instanceof J?t:new J(t),r=e,i=U(n);for(;i!==null;){let o=Ar(r.node.children,i)||{children:{},childCount:0};r=new na(i,r,o),n=ie(n),i=U(n)}return r}function po(e){return e.node.value}function zD(e,t){e.node.value=t,Eg(e)}function GD(e){return e.node.childCount>0}function jj(e){return po(e)===void 0&&!GD(e)}function xu(e,t){ke(e.node.children,(n,r)=>{t(new na(n,e,r))})}function qD(e,t,n,r){n&&!r&&t(e),xu(e,i=>{qD(i,t,!0,r)}),n&&r&&t(e)}function Uj(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ca(e){return new J(e.parent===null?e.name:ca(e.parent)+"/"+e.name)}function Eg(e){e.parent!==null&&Bj(e.parent,e.name,e)}function Bj(e,t,n){let r=jj(n),i=Ot(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Eg(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Eg(e))}var $j=/[\[\].#$\/\u0000-\u001F\u007F]/,Hj=/[\[\].#$\u0000-\u001F\u007F]/,km=10*1024*1024,Jg=function(e){return typeof e=="string"&&e.length!==0&&!$j.test(e)},YD=function(e){return typeof e=="string"&&e.length!==0&&!Hj.test(e)},Wj=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),YD(e)},zj=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Pg(e)||e&&typeof e=="object"&&Ot(e,".sv")},KD=function(e,t,n,r){r&&t===void 0||Ru(Es(e,"value"),t,n)},Ru=function(e,t,n){let r=n instanceof J?new Km(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ur(r));if(typeof t=="function")throw new Error(e+"contains a function "+Ur(r)+" with contents = "+t.toString());if(Pg(t))throw new Error(e+"contains "+t.toString()+" "+Ur(r));if(typeof t=="string"&&t.length>km/3&&Ds(t)>km)throw new Error(e+"contains a string greater than "+km+" utf8 bytes "+Ur(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(ke(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Jg(s)))throw new Error(e+" contains an invalid key ("+s+") "+Ur(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);CV(r,s),Ru(e,a,r),EV(r)}),i&&o)throw new Error(e+' contains ".value" child '+Ur(r)+" in addition to actual children.")}},Gj=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=Ks(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Jg(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(bV);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&bt(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},qj=function(e,t,n,r){if(r&&t===void 0)return;let i=Es(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];ke(t,(s,a)=>{let c=new J(s);if(Ru(i,a,ce(n,c)),Fg(c)===".priority"&&!zj(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),Gj(i,o)};var QD=function(e,t,n,r){if(!(r&&n===void 0)&&!YD(n))throw new Error(Es(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Yj=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QD(e,t,n,r)},ZD=function(e,t){if(U(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Kj=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jg(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Wj(n))throw new Error(Es(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Dg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Pu(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Lg(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function JD(e,t,n){Pu(e,n),XD(e,r=>Lg(r,t))}function Et(e,t,n){Pu(e,n),XD(e,r=>bt(r,t)||bt(t,r))}function XD(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(Qj(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Qj(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();$r&&Oe("event: "+n.toString()),ho(r)}}}var Zj="repo_interrupt",Jj=25,Tg=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hu(),this.transactionQueueTree_=new na,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Xj(e,t,n){if(e.stats_=kg(e.repoInfo_),e.forceRestClient_||ZL())e.server_=new sg(e.repoInfo_,(r,i,o,s)=>{qE(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>YE(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{me(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Vg(e.repoInfo_,t,(r,i,o,s)=>{qE(e,r,i,o,s)},r=>{YE(e,r)},r=>{eU(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=XL(e.repoInfo_,()=>new ug(e.stats_,e.server_)),e.infoData_=new ag,e.infoSyncTree_=new Iu({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=aa(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Xg(e,"connected",!1),e.serverSyncTree_=new Iu({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Et(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function e0(e){let n=e.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ou(e){return Fj({timestamp:e0(e)})}function qE(e,t,n,r,i){e.dataUpdateCount++;let o=new J(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=Cs(n,l=>ye(l));s=Nj(e.serverSyncTree_,o,c,i)}else{let c=ye(n);s=jD(e.serverSyncTree_,o,c,i)}else if(r){let c=Cs(n,l=>ye(l));s=Sj(e.serverSyncTree_,o,c)}else{let c=ye(n);s=aa(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=lo(e,o)),Et(e.eventQueue_,a,s)}function YE(e,t){Xg(e,"connected",t),t===!1&&iU(e)}function eU(e,t){ke(t,(n,r)=>{Xg(e,n,r)})}function Xg(e,t,n){let r=new J("/.info/"+t),i=ye(n);e.infoData_.updateSnapshot(r,i);let o=aa(e.infoSyncTree_,r,i);Et(e.eventQueue_,r,o)}function e_(e){return e.nextWriteId_++}function tU(e,t,n){let r=xj(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=ye(i).withIndex(t._queryParams.getIndex());Ig(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=aa(e.serverSyncTree_,t._path,o);else{let a=ta(e.serverSyncTree_,t);s=jD(e.serverSyncTree_,t._path,o,a)}return Et(e.eventQueue_,t._path,s),bu(e.serverSyncTree_,t,n,null,!0),o},i=>(la(e,"get for query "+me(t)+" failed: "+i),Promise.reject(new Error(i))))}function nU(e,t,n,r,i){la(e,"set",{path:t.toString(),value:n,priority:r});let o=Ou(e),s=ye(n,r),a=Gg(e.serverSyncTree_,t),c=WD(s,a,o),l=e_(e),u=VD(e.serverSyncTree_,t,c,l,!0);Pu(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,p)=>{let m=h==="ok";m||Ge("set at "+t+" failed: "+h);let g=qn(e.serverSyncTree_,l,!m);Et(e.eventQueue_,t,g),Sg(e,i,h,p)});let d=n_(e,t);lo(e,d),Et(e.eventQueue_,d,[])}function rU(e,t,n,r){la(e,"update",{path:t.toString(),value:n});let i=!0,o=Ou(e),s={};if(ke(n,(a,c)=>{i=!1,s[a]=HD(ce(t,a),ye(c),e.serverSyncTree_,o)}),i)Oe("update() called with empty data.  Don't do anything."),Sg(e,r,"ok",void 0);else{let a=e_(e),c=Tj(e.serverSyncTree_,t,s,a);Pu(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||Ge("update at "+t+" failed: "+l);let h=qn(e.serverSyncTree_,a,!d),p=h.length>0?lo(e,t):t;Et(e.eventQueue_,p,h),Sg(e,r,l,u)}),ke(n,l=>{let u=n_(e,ce(t,l));lo(e,u)}),Et(e.eventQueue_,t,[])}}function iU(e){la(e,"onDisconnectEvents");let t=Ou(e),n=hu();cg(e.onDisconnect_,K(),(i,o)=>{let s=HD(i,o,e.serverSyncTree_,t);ED(n,i,s)});let r=[];cg(n,K(),(i,o)=>{r=r.concat(aa(e.serverSyncTree_,i,o));let s=n_(e,i);lo(e,s)}),e.onDisconnect_=hu(),Et(e.eventQueue_,K(),r)}function oU(e,t,n){let r;U(t._path)===".info"?r=Ig(e.infoSyncTree_,t,n):r=Ig(e.serverSyncTree_,t,n),JD(e.eventQueue_,t._path,r)}function KE(e,t,n){let r;U(t._path)===".info"?r=bu(e.infoSyncTree_,t,n):r=bu(e.serverSyncTree_,t,n),JD(e.eventQueue_,t._path,r)}function sU(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Zj)}function la(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Oe(n,...t)}function Sg(e,t,n,r){t&&ho(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function t0(e,t,n){return Gg(e.serverSyncTree_,t,n)||F.EMPTY_NODE}function t_(e,t=e.transactionQueueTree_){if(t||ku(e,t),po(t)){let n=r0(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&aU(e,ca(t),n)}else GD(t)&&xu(t,n=>{t_(e,n)})}function aU(e,t,n){let r=n.map(l=>l.currentWriteId),i=t0(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ze(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{la(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(qn(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ku(e,Zg(e.transactionQueueTree_,t)),t_(e,e.transactionQueueTree_),Et(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)ho(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ge("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}lo(e,t)}},s)}function lo(e,t){let n=n0(e,t),r=ca(n),i=r0(e,n);return cU(e,i,r),r}function cU(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=ze(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(qn(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Jj)u=!0,d="maxretry",i=i.concat(qn(e.serverSyncTree_,c.currentWriteId,!0));else{let h=t0(e,c.path,s);c.currentInputSnapshot=h;let p=t[a].update(h.val());if(p!==void 0){Ru("transaction failed: Data returned ",p,c.path);let m=ye(p);typeof p=="object"&&p!=null&&Ot(p,".priority")||(m=m.updatePriority(h.getPriority()));let w=c.currentWriteId,D=Ou(e),oe=WD(m,h,D);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=oe,c.currentWriteId=e_(e),s.splice(s.indexOf(w),1),i=i.concat(VD(e.serverSyncTree_,c.path,oe,c.currentWriteId,c.applyLocally)),i=i.concat(qn(e.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(qn(e.serverSyncTree_,c.currentWriteId,!0))}Et(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}ku(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)ho(r[a]);t_(e,e.transactionQueueTree_)}function n0(e,t){let n,r=e.transactionQueueTree_;for(n=U(t);n!==null&&po(r)===void 0;)r=Zg(r,n),t=ie(t),n=U(t);return r}function r0(e,t){let n=[];return i0(e,t,n),n.sort((r,i)=>r.order-i.order),n}function i0(e,t,n){let r=po(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xu(t,i=>{i0(e,i,n)})}function ku(e,t){let n=po(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,zD(t,n.length>0?n:void 0)}xu(t,r=>{ku(e,r)})}function n_(e,t){let n=ca(n0(e,t)),r=Zg(e.transactionQueueTree_,t);return Uj(r,i=>{Fm(e,i)}),Fm(e,r),qD(r,i=>{Fm(e,i)}),n}function Fm(e,t){let n=po(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(qn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?zD(t,void 0):n.length=o+1,Et(e.eventQueue_,ca(t),i);for(let s=0;s<r.length;s++)ho(r[s])}}function lU(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function uU(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ge(`Invalid query segment '${n}' in query '${e}'`)}return t}var QE=function(e,t){let n=dU(e),r=n.namespace;n.domain==="firebase.com"&&_n(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$L();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new iu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new J(n.pathString)}},dU=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=lU(e.substring(u,d)));let h=uU(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let m=t.indexOf(".");r=t.substring(0,m).toLowerCase(),n=t.substring(m+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var ZE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hU=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=ZE.charAt(n%64),n=Math.floor(n/64);y(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=ZE.charAt(t[i]);return y(s.length===20,"nextPushId: Length should be 20."),s}}();var Cu=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+me(this.snapshot.exportVal())}},Eu=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Du=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Mg=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:Fg(this._path)}get ref(){return new nn(this._repo,this._path)}get _queryIdentifier(){let t=FE(this._queryParams),n=Og(t);return n==="{}"?"default":n}get _queryObject(){return FE(this._queryParams)}isEqual(t){if(t=_e(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Lg(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+IV(this._path)}};var nn=class e extends Mg{constructor(t,n){super(t,n,new og,!1)}get parent(){let t=_D(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},ra=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new J(t),r=uo(this.ref,t);return new e(this._node.getChild(n),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,uo(this.ref,r),le)))}hasChild(t){let n=new J(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function mo(e,t){return e=_e(e),e._checkNotDeleted("ref"),t!==void 0?uo(e._root,t):e._root}function uo(e,t){return e=_e(e),U(e._path)===null?Yj("child","path",t,!1):QD("child","path",t,!1),new nn(e._repo,ce(e._path,t))}function o0(e,t){e=_e(e),ZD("push",e._path),KD("push",t,e._path,!0);let n=e0(e._repo),r=hU(n),i=uo(e,r),o=uo(e,r),s;return t!=null?s=r_(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function r_(e,t){e=_e(e),ZD("set",e._path),KD("set",t,e._path,!1);let n=new fn;return nU(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function s0(e,t){qj("update",t,e._path,!1);let n=new fn;return rU(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function a0(e){e=_e(e);let t=new Du(()=>{}),n=new Tu(t);return tU(e._repo,e,n).then(r=>new ra(r,new nn(e._repo,e._path),e._queryParams.getIndex()))}var Tu=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Cu("value",this,new ra(t.snapshotNode,new nn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Eu(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ag=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Eu(this,t,n):null}createEvent(t,n){y(t.childName!=null,"Child events should have a childName.");let r=uo(new nn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new Cu(t.type,this,new ra(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function fU(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{KE(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Du(n,o||void 0),a=t==="value"?new Tu(s):new Ag(t,s);return oU(e._repo,e,a),()=>KE(e._repo,e,a)}function c0(e,t,n,r){return fU(e,"value",t,n,r)}yj(nn);Cj(nn);var pU="FIREBASE_DATABASE_EMULATOR_HOST",Ng={},mU=!1;function gU(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=jn(o);e.repoInfo_=new iu(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function _U(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||_n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oe("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=QE(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[pU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=QE(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new zs(zs.OWNER):new $m(e.name,e.options,t);Kj("Invalid Firebase Database URL",s),W(s.path)||_n("Database URL must point to the root of a Firebase Database (not including a child path).");let d=vU(a,e,u,new Bm(e,n));return new xg(d,e)}function yU(e,t){let n=Ng[t];(!n||n[e.key]!==e)&&_n(`Database ${t}(${e.repoInfo_}) has already been deleted.`),sU(e),delete n[e.key]}function vU(e,t,n,r){let i=Ng[t.name];i||(i={},Ng[t.name]=i);let o=i[e.toURLString()];return o&&_n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Tg(e,mU,n,r),i[e.toURLString()]=o,o}var xg=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Xj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nn(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&_n("Cannot call "+t+" on a deleted database.")}};function ua(e=Rr(),t){let n=kt(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=vb("database");r&&wU(n,...r)}return n}function wU(e,t,n,r={}){e=_e(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&It(r,o.repoInfo_.emulatorOptions))return;_n("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&_n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zs(zs.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:wb(r.mockUserToken,e.app.options.projectId);s=new zs(a)}jn(t)&&(bl(t),Cl("Database",!0)),gU(o,i,r,s)}function IU(e){jL(Bn),Je(new Te("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return _U(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Pe(vE,wE,e),Pe(vE,wE,"esm2020")}Vg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Vg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};IU();var da=class e{static{this.apps=new Map}static getData(t,n,r){return f(this,null,function*(){try{let i=r?ua(t,r):ua(t);return yield e.getDbData(i,n)}catch(i){return console.error("Errore nel recupero dei dati Firebase:",i),null}})}static getDbData(t,n){return f(this,null,function*(){let r=mo(t,n);return new Promise((o,s)=>{c0(r,a=>{let c=a.val();o(c)},a=>{s(a)})})})}static writeUserData(t,n,r){return f(this,null,function*(){let i=ua(n);yield r_(mo(i,r),t)})}static pushToChild(t,n,r,i="RANDOM"){return f(this,null,function*(){try{let o=Ms(n),s=ua(o),a=null;if(i==="RANDOM")a=o0(mo(s,r)).key;else if(i==="NUMBER"){let l=yield a0(mo(s,r)),u=l.exists()?l.val():{},d=Object.keys(u).length+1;a=String(d)}if(!a)throw new Error("Impossibile generare una nuova chiave.");let c={[`${r}/${a}`]:t};yield s0(mo(s),c),console.log(`Elemento aggiunto a "${r}" con chiave "${a}"`)}catch(o){throw console.error(`Errore in pushToChild(${r}):`,o),o}})}};var l0=(()=>{class e{constructor(n){this.http=n}getFile(n){return f(this,null,function*(){return yield this.http.get(n).toPromise()})}static{this.\u0275fac=function(r){return new(r||e)(C(Qo))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var go=(()=>{class e{constructor(n,r){this.common_service=n,this.assets_service=r}startFbApi(n){try{return this.common_service.fbApp=Ms(n),this.common_service.fbApiAnalytics=yC(this.common_service.fbApp),console.log("API Firebase inizializzata con successo."),!0}catch(r){return console.error("Errore nell'inizializzazione dell'API Firebase:",r),!1}}tryLogin(n){return f(this,null,function*(){try{let r=Am(this.common_service.fbApp);return yield Sm(r,n.username,n.password)}catch(r){console.error("Errore durante il tentativo di login:",r);return}})}getFirebaseConfig(n){return f(this,null,function*(){try{let r=yield this.assets_service.getFile("assets/firebase/fb-proj-configs.json");if(!r){console.error("Impossibile caricare la configurazione Firebase.");return}let i=r.users[n];if(!i){console.error(`Configurazione Firebase non trovata per l'utente: ${n}`);return}return this.common_service.fbUserConfig=i,i}catch(r){console.error("Errore nel recupero della configurazione Firebase:",r);return}})}getUserAllowedProducts(n){return f(this,null,function*(){try{if(console.log(`Recupero prodotti per l'utente: ${n}`),!n)return console.error("Nessun nome utente fornito per il recupero dei prodotti."),null;if(this.common_service.fbApp==null)return console.error("API Firebase non inizializzata."),null;let r=yield da.getData(this.common_service.fbApp,`users/${n}/auth/allowedProds`,this.common_service.appConfig.firebase.dbUrl||"");return console.info(`Prodotti recuperati per l'utente ${n}:`,r),r?Object.entries(r).filter(([o,s])=>s===!0).map(([o])=>o):[]}catch(r){return console.error(`Errore nel recupero dei prodotti per l'utente ${n}:`,r),null}})}getUserProducts(n,r){return f(this,null,function*(){try{if(console.info("Recupero prodotti utente..."),!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let i={},o=this.common_service.appConfig.firebase.dbUrl||"";for(let s of r){if(!this.common_service.fbApp){console.error("API Firebase non inizializzata.");return}let a=yield da.getData(this.common_service.fbApp,`sharedLogin/products/${s}`,this.common_service.appConfig.firebase.dbUrl||"");i[s]=a}return console.info(`Prodotti recuperati per l'utente ${n}:`,i),i}catch(i){return console.error("Errore nel recupero dei prodotti dell'utente:",i),[]}})}static{this.\u0275fac=function(r){return new(r||e)(C(Ze),C(l0))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function CU(e,t){if(e&1){let n=Rn();Qh(0),I(1,"button",22),ne("click",function(){let i=Ce(n).$implicit,o=zt();return Ee(o.toggleTag(i))}),M(2),b(),Zh()}if(e&2){let n=t.$implicit,r=zt();H(),un("selected",r.selectedTags.includes(n)),H(),_r(" ",n," ")}}function EU(e,t){if(e&1&&(I(0,"span",27),M(1),b()),e&2){let n=t.$implicit;H(),Pn(n)}}function DU(e,t){if(e&1){let n=Rn();I(0,"mat-card",23),ne("click",function(){let i=Ce(n).$implicit,o=zt();return Ee(o.openProductLink(i.link))}),Pt(1,"img",24),I(2,"mat-card-content")(3,"h3"),M(4),b(),I(5,"p"),M(6),b(),I(7,"div",25),He(8,EU,2,1,"span",26),b()()()}if(e&2){let n=t.$implicit;H(),he("src",n.image,kh)("alt",n.name),H(3),Pn(n.name),H(2),Pn(n.description),H(2),he("ngForOf",n.tags)}}var u0=(()=>{class e{constructor(n,r,i,o){this.common=n,this.router=r,this.fb_service=i,this.cdRef=o,this.products=[],this.allTags=[],this.selectedTags=[],this.filteredProducts=[]}ngOnInit(){return f(this,null,function*(){let n=yield this.fb_service.getUserAllowedProducts(this.common.lastLoggedUser.uId),r=yield this.fb_service.getUserProducts(this.common.lastLoggedUser.uId,n??[]);this.products=Object.values(r||{}),this.updateTags(),this.filterProducts(),this.cdRef.detectChanges(),console.log("Prodotti utente:",this.products)})}updateTags(){let n=new Set;this.products.forEach(r=>r.tags?.forEach(i=>n.add(i))),this.allTags=Array.from(n)}toggleTag(n){this.selectedTags.includes(n)?this.selectedTags=this.selectedTags.filter(r=>r!==n):this.selectedTags.push(n),this.filterProducts()}filterProducts(){this.selectedTags.length===0?this.filteredProducts=[...this.products]:this.filteredProducts=this.products.filter(n=>n.tags?.some(r=>this.selectedTags.includes(r)))}openProductLink(n){window.open(n,"_blank")}addProduct(){this.router.navigate(["/products/add"])}editProfile(){alert("Funzione modifica profilo non ancora implementata.")}addProfile(){confirm("Sei sicuro di voler aggiungere un profilo?")&&alert("Funzione ADD profilo non ancora implementata.")}deleteProfile(){confirm("Sei sicuro di voler eliminare il profilo?")&&alert("Funzione elimina profilo non ancora implementata.")}static{this.\u0275fac=function(r){return new(r||e)(A(Ze),A(Vn),A(go),A(Gt))}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-products"]],standalone:!0,features:[xe],decls:31,vars:10,consts:[[1,"container"],[1,"products-layout"],[1,"products-container"],[1,"products-title"],[1,"tag-filter"],[1,"filter-label"],[4,"ngFor","ngForOf"],[1,"products-grid"],[1,"product-card","add-card",3,"click"],[2,"display","flex","flex-direction","column","align-items","center","justify-content","center","height","100%","min-height","180px"],[2,"font-size","3rem","color","var(--primary)"],[2,"text-align","center","color","var(--primary-dark)"],["class","product-card",3,"click",4,"ngFor","ngForOf"],[1,"profile-menu-container"],[1,"profile-menu"],[1,"profile-pic"],["alt","Foto profilo",3,"src"],[1,"profile-name"],[1,"row"],["title","Edit profile",1,"profile-btn",3,"click"],["title","Delete profile",1,"profile-btn","delete",3,"click"],["title","Add profile",1,"profile-btn",3,"click"],["type","button",1,"tag-chip",3,"click"],[1,"product-card",3,"click"],["mat-card-image","",3,"src","alt"],[1,"product-tags"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"tag-chip"]],template:function(r,i){r&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),M(4,"Prodotti disponibili"),b(),I(5,"div",4)(6,"span",5),M(7,"Filtra per tag:"),b(),He(8,CU,3,3,"ng-container",6),b(),I(9,"div",7)(10,"mat-card",8),ne("click",function(){return i.addProduct()}),I(11,"div",9)(12,"span",10),M(13,"+"),b(),I(14,"mat-card-content")(15,"h3",11),M(16,"Aggiungi nuovo prodotto"),b()()()(),He(17,DU,9,5,"mat-card",12),b()()(),I(18,"div",13)(19,"div",14)(20,"div",15),Pt(21,"img",16),b(),I(22,"div",17),M(23),b(),I(24,"div",18)(25,"button",19),ne("click",function(){return i.editProfile()}),M(26,"Edit"),b(),I(27,"button",20),ne("click",function(){return i.deleteProfile()}),M(28,"Delete"),b(),I(29,"button",21),ne("click",function(){return i.addProfile()}),M(30,"Add"),b()()()()()),r&2&&(H(2),Wo("width",i.filteredProducts.length===0?"auto":"100%"),H(6),he("ngForOf",i.allTags),H(9),he("ngForOf",i.filteredProducts),H(2),Wo("width",i.filteredProducts.length===0?"auto":"100%")("left",i.filteredProducts.length===0?"0.25em":"1em"),H(2),he("src",i.common.lastLoggedUser.sex==="male"?"assets/images/users/man.svg":"assets/images/users/woman.svg",kh),H(2),Pn(i.common.lastLoggedUser.username||"Utente"))},dependencies:[at,qc,hb,lb,ub,db],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100%;flex-direction:column}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px;padding:1rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.5rem;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-weight:500;color:var(--primary-dark);margin-right:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:1rem;cursor:pointer;transition:background .2s,color .2s;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .tag-filter[_ngcontent-%COMP%]   .tag-chip.selected[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-title[_ngcontent-%COMP%]{color:var(--primary);text-align:center;margin-bottom:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;border-radius:16px;box-shadow:0 8px 32px #2193b026;overflow:hidden;transition:box-shadow .2s}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #2193b040}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;border-top-left-radius:16px;border-top-right-radius:16px}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem;color:var(--primary-dark);font-size:1.2rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{background:#e0e7ef;border:none;border-radius:12px;padding:.3rem 1rem;color:var(--primary-dark);font-size:.95rem;cursor:pointer;margin-bottom:.3rem}.container[_ngcontent-%COMP%]   .products-layout[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]   .products-grid[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:1rem;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]{position:relative;top:-2em;left:.25em;background:var(--card-bg);border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.1);max-width:900px;min-width:220px;flex-direction:column;align-items:center;display:flex;justify-content:center;padding:2rem 1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid var(--primary);margin-bottom:1rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:var(--primary-dark);margin-bottom:1.5rem}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:1em}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{width:100%;padding:.7rem;margin-bottom:.7rem;border:none;border-radius:8px;background:var(--primary);color:#fff;font-weight:600;font-size:1rem;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]{background:var(--error)}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .profile-btn.delete[_ngcontent-%COMP%]:hover{background:#b71c1c}.container[_ngcontent-%COMP%]   .profile-menu-container[_ngcontent-%COMP%]   .profile-menu[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{flex:1}"]})}}return e})();var v0=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(A(Ai),A(_t))}}static{this.\u0275dir=ae({type:e})}}return e})(),TU=(()=>{class e extends v0{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Di(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,features:[ln]})}}return e})(),w0=new T("");var SU={provide:w0,useExisting:pr(()=>Jn),multi:!0};function MU(){let e=hn()?hn().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var AU=new T(""),Jn=(()=>{class e extends v0{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!MU())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(A(Ai),A(_t),A(AU,8))}}static{this.\u0275dir=ae({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yr([SU]),ln]})}}return e})();function NU(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var s_=new T(""),I0=new T("");function xU(e){return NU(e.value)?{required:!0}:null}function d0(e){return null}function b0(e){return e!=null}function C0(e){return vr(e)?se(e):e}function E0(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function D0(e,t){return t.map(n=>n(e))}function RU(e){return!e.validate}function T0(e){return e.map(t=>RU(t)?t:n=>t.validate(n))}function PU(e){if(!e)return null;let t=e.filter(b0);return t.length==0?null:function(n){return E0(D0(n,t))}}function a_(e){return e!=null?PU(T0(e)):null}function OU(e){if(!e)return null;let t=e.filter(b0);return t.length==0?null:function(n){let r=D0(n,t).map(C0);return ld(r).pipe(P(E0))}}function c_(e){return e!=null?OU(T0(e)):null}function h0(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function kU(e){return e._rawValidators}function FU(e){return e._rawAsyncValidators}function o_(e){return e?Array.isArray(e)?e:[e]:[]}function Lu(e,t){return Array.isArray(e)?e.includes(t):e===t}function f0(e,t){let n=o_(t);return o_(e).forEach(i=>{Lu(n,i)||n.push(i)}),n}function p0(e,t){return o_(t).filter(n=>!Lu(e,n))}var Vu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=a_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=c_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},yo=class extends Vu{get formDirective(){return null}get path(){return null}},ma=class extends Vu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ju=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},LU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},b5=k(_({},LU),{"[class.ng-submitted]":"isSubmitted"}),vo=(()=>{class e extends ju{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(A(ma,2))}}static{this.\u0275dir=ae({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&un("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ln]})}}return e})(),wo=(()=>{class e extends ju{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(A(yo,10))}}static{this.\u0275dir=ae({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&un("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ln]})}}return e})();var ha="VALID",Fu="INVALID",_o="PENDING",fa="DISABLED";function S0(e){return($u(e)?e.validators:e)||null}function VU(e){return Array.isArray(e)?a_(e):e||null}function M0(e,t){return($u(t)?t.asyncValidators:e)||null}function jU(e){return Array.isArray(e)?c_(e):e||null}function $u(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function UU(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")}function BU(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new S(1002,"")})}var Uu=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ha}get invalid(){return this.status===Fu}get pending(){return this.status==_o}get disabled(){return this.status===fa}get enabled(){return this.status!==fa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(f0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(f0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(p0(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(p0(t,this._rawAsyncValidators))}hasValidator(t){return Lu(this._rawValidators,t)}hasAsyncValidator(t){return Lu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=_o,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=fa,this.errors=null,this._forEachChild(r=>{r.disable(k(_({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ha,this._forEachChild(r=>{r.enable(k(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(k(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ha||this.status===_o)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fa:ha}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=_o,this._hasOwnPendingAsyncValidator=!0;let n=C0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?fa:this.errors?Fu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_o)?_o:this._anyControlsHaveStatus(Fu)?Fu:ha}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){$u(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=VU(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=jU(this._rawAsyncValidators)}},Bu=class extends Uu{constructor(t,n,r){super(S0(n),M0(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){BU(this,!0,t),Object.keys(t).forEach(r=>{UU(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var l_=new T("CallSetDisabledState",{providedIn:"root",factory:()=>u_}),u_="always";function $U(e,t){return[...t.path,e]}function A0(e,t,n=u_){N0(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),WU(e,t),GU(e,t),zU(e,t),HU(e,t)}function m0(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function HU(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function N0(e,t){let n=kU(e);t.validator!==null?e.setValidators(h0(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=FU(e);t.asyncValidator!==null?e.setAsyncValidators(h0(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();m0(t._rawValidators,i),m0(t._rawAsyncValidators,i)}function WU(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&x0(e,t)})}function zU(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&x0(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function x0(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function GU(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function qU(e,t){e==null,N0(e,t)}function YU(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function KU(e){return Object.getPrototypeOf(e.constructor)===TU}function QU(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ZU(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Jn?n=o:KU(o)?r=o:i=o}),i||r||n||null}var JU={provide:yo,useExisting:pr(()=>qr)},pa=Promise.resolve(),qr=(()=>{class e extends yo{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new we,this.form=new Bu({},a_(n),c_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){pa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),A0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){pa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){pa.then(()=>{let r=this._findContainer(n.path),i=new Bu({});qU(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){pa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){pa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,QU(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||e)(A(s_,10),A(I0,10),A(l_,8))}}static{this.\u0275dir=ae({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[$e.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yr([JU]),ln]})}}return e})();function g0(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function _0(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var XU=class extends Uu{constructor(t=null,n,r){super(S0(n),M0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$u(n)&&(n.nonNullable||n.initialValueIsDefault)&&(_0(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){g0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){g0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){_0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var e2={provide:ma,useExisting:pr(()=>Yr)},y0=Promise.resolve(),Yr=(()=>{class e extends ma{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new XU,this._registered=!1,this.name="",this.update=new we,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ZU(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),YU(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){A0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){y0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&wr(r);y0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?$U(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(A(yo,9),A(s_,10),A(I0,10),A(w0,10),A(Gt,8),A(l_,8))}}static{this.\u0275dir=ae({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[$e.None,"disabled","isDisabled"],model:[$e.None,"ngModel","model"],options:[$e.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yr([e2]),ln,Nn]})}}return e})(),Io=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})();var t2=(()=>{class e{constructor(){this._validator=d0}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):d0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ae({type:e,features:[Nn]})}}return e})();var n2={provide:s_,useExisting:pr(()=>Kr),multi:!0};var Kr=(()=>{class e extends t2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wr,this.createValidator=n=>xU}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Di(e)))(i||e)}})()}static{this.\u0275dir=ae({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&xi("required",i._enabled?"":null)},inputs:{required:"required"},features:[yr([n2]),ln]})}}return e})();var r2=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({})}}return e})();var Xn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:l_,useValue:n.callSetDisabledState??u_}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=be({type:e})}static{this.\u0275inj=Ie({imports:[r2]})}}return e})();function i2(e,t){e&1&&(I(0,"span",19),M(1,"\u{1F441}\uFE0F"),b())}function o2(e,t){e&1&&(I(0,"span",20),M(1,"\u{1F648}"),b())}function s2(e,t){if(e&1&&(I(0,"div",21),M(1),b()),e&2){let n=zt();H(),Pn(n.error)}}var R0=(()=>{class e{constructor(n,r,i){this.router=n,this.common=r,this.fb_service=i,this.user={username:"",email:"",password:"",uId:"",sex:"male"},this.error="",this.showPassword=!1}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){return f(this,null,function*(){if(!this.user.username||!this.user.password){this.error="Inserisci nome utente e password.";return}this.common.lastLoggedUser=this.user,this.error="";let n=yield this.fb_service.tryLogin(this.user);if(this.common.setLoggedUser(n??void 0),console.info("Credenziali Firebase:",n),!n){this.error="Credenziali non valide. Riprova.";return}this.common.lastLoggedUser.uId=n.user.uid,this.common.lastLoggedUser.username=this.user.username,this.common.lastLoggedUser.email=n.user.email||"",console.log("this.common.lastLoggedUser",this.common.lastLoggedUser),this.router.navigate(["/products"])})}forgotPassword(){this.router.navigate(["/forgot"])}register(){this.router.navigate(["/register"])}static{this.\u0275fac=function(r){return new(r||e)(A(Vn),A(Ze),A(go))}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-login"]],standalone:!0,features:[xe],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"container"],[1,"login-card"],[3,"ngSubmit"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Inserisci il nome utente","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Inserisci la password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit"],["class","error-message",4,"ngIf"],[1,"forgot-password"],[3,"click"],[1,"register-user"],["type","button",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"],[1,"error-message"]],template:function(r,i){if(r&1){let o=Rn();I(0,"div",1)(1,"div",2)(2,"h2"),M(3,"Accedi"),b(),I(4,"form",3,0),ne("ngSubmit",function(){return Ce(o),Ee(i.onSubmit())}),I(6,"div",4)(7,"label",5),M(8,"Nome utente"),b(),I(9,"input",6),st("ngModelChange",function(a){return Ce(o),yt(i.user.username,a)||(i.user.username=a),Ee(a)}),b()(),I(10,"div",7)(11,"label",8),M(12,"Password"),b(),I(13,"input",9),st("ngModelChange",function(a){return Ce(o),yt(i.user.password,a)||(i.user.password=a),Ee(a)}),b(),I(14,"button",10),ne("click",function(){return Ce(o),Ee(i.togglePasswordVisibility())}),He(15,i2,2,0,"span",11)(16,o2,2,0,"span",12),b()(),I(17,"button",13),M(18,"Login"),b(),He(19,s2,2,1,"div",14),b(),I(20,"div",15)(21,"span",16),ne("click",function(){return Ce(o),Ee(i.forgotPassword())}),M(22,"Hai dimenticato la password?"),b()(),I(23,"div",17)(24,"button",18),ne("click",function(){return Ce(o),Ee(i.register())}),M(25,"Registrati"),b()()()()}r&2&&(H(9),ot("ngModel",i.user.username),H(4),he("type",i.showPassword?"text":"password"),ot("ngModel",i.user.password),H(2),he("ngIf",!i.showPassword),H(),he("ngIf",i.showPassword),H(3),he("ngIf",i.error))},dependencies:[at,ki,Xn,Io,Jn,vo,wo,Kr,Yr,qr],styles:[".register-user[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;padding:.6rem 1.5rem;cursor:pointer;transition:background .2s}.register-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-password[_ngcontent-%COMP%]{margin-top:1.2rem;text-align:center}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:underline;font-size:.98rem;cursor:pointer;transition:color .2s}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark)}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#2193b0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--error);margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();var P0=(()=>{class e{constructor(n){this.common=n}sendResetLink(){let n=document.getElementById("email").value;if(!n){alert("Inserisci un'email valida.");return}this.common.lastforgotPswRequest={email:n,username:"",password:"",uId:"",sex:"male"},alert(`Link di reset inviato a ${n}`)}static{this.\u0275fac=function(r){return new(r||e)(A(Ze))}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-forgot"]],standalone:!0,features:[xe],decls:13,vars:0,consts:[[1,"forgot-container"],[1,"forgot-card"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required",""],["type","submit",3,"click"],[1,"info-message"]],template:function(r,i){r&1&&(I(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Recupera la password"),b(),I(4,"form")(5,"div",2)(6,"label",3),M(7,"Email"),b(),Pt(8,"input",4),b(),I(9,"button",5),ne("click",function(){return i.sendResetLink()}),M(10,"Invia richiesta"),b()(),I(11,"div",6),M(12,"Riceverai una mail con le istruzioni per il reset."),b()()())},styles:[".forgot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.forgot-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.forgot-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.forgot-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.forgot-card[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var Hu=class{constructor(){this.username="",this.email="",this.password="",this.uId="",this.sex="male"}};function a2(e,t){e&1&&(I(0,"span",14),M(1,"\u{1F441}\uFE0F"),b())}function c2(e,t){e&1&&(I(0,"span",15),M(1,"\u{1F648}"),b())}var O0=(()=>{class e{constructor(n){this.common=n,this.showPassword=!1,this.user=new Hu}togglePasswordVisibility(){this.showPassword=!this.showPassword}register(){return f(this,null,function*(){try{this.common.lastRegisteredUser=this.user,alert("Registrazione completata con successo!")}catch(n){console.error("Errore durante la registrazione:",n),alert("Si \xE8 verificato un errore durante la registrazione. Riprova pi\xF9 tardi.")}})}static{this.\u0275fac=function(r){return new(r||e)(A(Ze))}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-register"]],standalone:!0,features:[xe],decls:22,vars:6,consts:[[1,"register-container"],[1,"register-card"],[1,"input-group"],["for","username"],["type","text","id","username","name","username","placeholder","Inserisci il nome utente","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Inserisci la tua email","required","",3,"ngModelChange","ngModel"],[1,"input-group",2,"position","relative"],["for","password"],["id","password","name","password","placeholder","Crea una password","required","",2,"padding-right","2.5rem",3,"ngModelChange","type","ngModel"],["type","button",1,"hide",3,"click"],["aria-label","Mostra password","title","Mostra password",4,"ngIf"],["aria-label","Nascondi password","title","Nascondi password",4,"ngIf"],["type","submit",3,"click"],["aria-label","Mostra password","title","Mostra password"],["aria-label","Nascondi password","title","Nascondi password"]],template:function(r,i){r&1&&(I(0,"div",0)(1,"div",1)(2,"h2"),M(3,"Crea un nuovo utente"),b(),I(4,"form")(5,"div",2)(6,"label",3),M(7,"Nome utente"),b(),I(8,"input",4),st("ngModelChange",function(s){return yt(i.user.username,s)||(i.user.username=s),s}),b()(),I(9,"div",2)(10,"label",5),M(11,"Email"),b(),I(12,"input",6),st("ngModelChange",function(s){return yt(i.user.email,s)||(i.user.email=s),s}),b()(),I(13,"div",7)(14,"label",8),M(15,"Password"),b(),I(16,"input",9),st("ngModelChange",function(s){return yt(i.user.password,s)||(i.user.password=s),s}),b(),I(17,"button",10),ne("click",function(){return i.togglePasswordVisibility()}),He(18,a2,2,0,"span",11)(19,c2,2,0,"span",12),b()(),I(20,"button",13),ne("click",function(){return i.register()}),M(21,"Registrati"),b()()()()),r&2&&(H(8),ot("ngModel",i.user.username),H(4),ot("ngModel",i.user.email),H(4),he("type",i.showPassword?"text":"password"),ot("ngModel",i.user.password),H(2),he("ngIf",!i.showPassword),H(),he("ngIf",i.showPassword))},dependencies:[at,ki,Xn,Io,Jn,vo,wo,Kr,Yr,qr],styles:[".register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{position:absolute;z-index:100;right:8px;top:38px;background:none;border:none;cursor:pointer;padding:0}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.register-container[_ngcontent-%COMP%]   .register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}"]})}}return e})();var ga=class{constructor(){this.name="",this.description="",this.tags=[]}};function l2(e,t){if(e&1){let n=Rn();I(0,"span",20),M(1),I(2,"button",21),ne("click",function(){let i=Ce(n).$implicit,o=zt(2);return Ee(o.removeTag(i))}),M(3," \xD7 "),b()()}if(e&2){let n=t.$implicit;H(),_r(" ",n," ")}}function u2(e,t){if(e&1&&(I(0,"div",4)(1,"label"),M(2,"Tag selezionati"),b(),I(3,"div",18),He(4,l2,4,1,"span",19),b()()),e&2){let n=zt();H(4),he("ngForOf",n.selectedTags)}}function d2(e,t){e&1&&(I(0,"div",22),M(1," Prodotto aggiunto con successo! "),b())}var k0=(()=>{class e{constructor(){this.product=new ga,this.success=!1,this.selectedTags=["gioco","app"],this.customTag=""}toggleDefaultTag(n,r){r.target.checked?this.selectedTags.includes(n)||this.selectedTags.push(n):this.selectedTags=this.selectedTags.filter(i=>i!==n)}addCustomTag(){let n=this.customTag.trim();n&&!this.selectedTags.includes(n)&&(this.selectedTags.push(n),this.customTag="")}removeTag(n){this.selectedTags=this.selectedTags.filter(r=>r!==n)}onSubmit(){this.product.tags=[...this.selectedTags],this.success=!0,setTimeout(()=>this.success=!1,2e3),this.product=new ga,this.selectedTags=[]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-crud-product"]],standalone:!0,features:[xe],decls:29,vars:6,consts:[["addProductForm","ngForm"],[1,"add-product-container"],[1,"add-product-card"],[3,"ngSubmit"],[1,"input-group"],["for","name"],["type","text","id","name","name","name","placeholder","Nome prodotto","required","",3,"ngModelChange","ngModel"],["for","description"],["type","text","id","description","name","description","placeholder","Descrizione","required","",3,"ngModelChange","ngModel"],["for","image"],["type","url","id","image","name","image","placeholder","URL immagine",3,"ngModelChange","ngModel"],["for","customTag"],[2,"display","flex","gap","0.5rem"],["type","text","id","customTag","name","customTag","placeholder","Scrivi un tag",3,"ngModelChange","ngModel"],["type","button",3,"click"],["class","input-group",4,"ngIf"],["type","submit"],["class","success-message",4,"ngIf"],[2,"display","flex","flex-wrap","wrap","gap","0.5rem"],["style",`
              background: #e0e7ef;
              border-radius: 12px;
              padding: 0.3rem 0.8rem;
              display: flex;
              align-items: center;
            `,4,"ngFor","ngForOf"],[2,"background","#e0e7ef","border-radius","12px","padding","0.3rem 0.8rem","display","flex","align-items","center"],["type","button",2,"margin-left","0.5rem","background","none","border","none","color","#c00","cursor","pointer","font-size","1rem",3,"click"],[1,"success-message"]],template:function(r,i){if(r&1){let o=Rn();I(0,"div",1)(1,"div",2)(2,"h2"),M(3,"Aggiungi nuovo prodotto"),b(),I(4,"form",3,0),ne("ngSubmit",function(){return Ce(o),Ee(i.onSubmit())}),I(6,"div",4)(7,"label",5),M(8,"Nome prodotto"),b(),I(9,"input",6),st("ngModelChange",function(a){return Ce(o),yt(i.product.name,a)||(i.product.name=a),Ee(a)}),b()(),I(10,"div",4)(11,"label",7),M(12,"Descrizione"),b(),I(13,"input",8),st("ngModelChange",function(a){return Ce(o),yt(i.product.description,a)||(i.product.description=a),Ee(a)}),b()(),I(14,"div",4)(15,"label",9),M(16,"Immagine (URL)"),b(),I(17,"input",10),st("ngModelChange",function(a){return Ce(o),yt(i.product.image,a)||(i.product.image=a),Ee(a)}),b()(),I(18,"div",4)(19,"label",11),M(20,"Aggiungi tag"),b(),I(21,"div",12)(22,"input",13),st("ngModelChange",function(a){return Ce(o),yt(i.customTag,a)||(i.customTag=a),Ee(a)}),b(),I(23,"button",14),ne("click",function(){return Ce(o),Ee(i.addCustomTag())}),M(24,"Aggiungi"),b()()(),He(25,u2,5,1,"div",15),I(26,"button",16),M(27,"Aggiungi prodotto"),b()(),He(28,d2,2,0,"div",17),b()()}r&2&&(H(9),ot("ngModel",i.product.name),H(4),ot("ngModel",i.product.description),H(4),ot("ngModel",i.product.image),H(5),ot("ngModel",i.customTag),H(3),he("ngIf",i.selectedTags.length),H(3),he("ngIf",i.success))},dependencies:[at,qc,ki,Xn,Io,Jn,vo,wo,Kr,Yr,qr],styles:[".add-product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,var(--gradient-light) 0%,var(--primary) 100%)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px rgba(var(--primary-rgb),.15);display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:var(--text-main)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.add-product-container[_ngcontent-%COMP%]   .add-product-card[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:var(--primary-dark);margin-top:1.2rem;font-size:.98rem;text-align:center}"]})}}return e})();var h_=(e,t)=>{let n=v(Ze),r=v(Vn);return n.currentLoggedUser?!0:(r.navigate(["/"]),!1)};var F0=[{path:"",component:R0},{path:"forgot",component:P0},{path:"register",component:O0},{path:"products",component:u0,canActivate:[h_]},{path:"products/add",component:k0,canActivate:[h_]}];var L0={providers:[HI(F0,WI()),vh(tl)]};var V0=(()=>{class e{constructor(n,r,i){this.common_service=n,this.fb_service=r,this.http_service=i,this.title="shared-login",this.username="",this.password="",this.error="",this.showPassword=!1}ngOnInit(){return f(this,null,function*(){let n=yield this.fb_service.getFirebaseConfig("ame.dev.apps");if(!n){console.error("Errore nel recupero della configurazione Firebase.");return}if(!this.fb_service.startFbApi(n)){console.error("Errore nell'inizializzazione dell'API Firebase.");return}let i=yield this.loadAppConfig();this.common_service.appConfig=i})}loadAppConfig(){return f(this,null,function*(){return yield ad(this.http_service.get("assets/config/default-config.json"))})}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(!this.username||!this.password){this.error="Inserisci nome utente e password.";return}this.error="",alert(`Benvenuto, ${this.username}!`)}static{this.\u0275fac=function(r){return new(r||e)(A(Ze),A(go),A(Qo))}}static{this.\u0275cmp=Ne({type:e,selectors:[["app-root"]],standalone:!0,features:[xe],decls:1,vars:0,template:function(r,i){r&1&&Pt(0,"router-outlet")},dependencies:[tp,at,Xn,tl],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#6dd5ed,#2193b0)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem 2.5rem;border-radius:16px;box-shadow:0 8px 32px #2193b026;display:flex;flex-direction:column;min-width:var(--main-min-width);align-items:center}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2193b0}.input-group[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;display:flex;flex-direction:column}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#333}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.7rem;border:1px solid #b0c4de;border-radius:8px;font-size:1rem;outline:none;transition:border-color .2s}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2193b0}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#2193b0;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}button[type=submit][_ngcontent-%COMP%]:hover{background:#176b87}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;font-weight:500;text-align:center}"]})}}return e})();cI(V0,L0).catch(e=>console.error(e));
